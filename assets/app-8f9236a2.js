import{_ as Ch}from"./index-8b06ad69.js";class m2{constructor(t){this.onNavigate=t,this.currentTab="dashboard",this.isMenuOpen=!1}render(){const t=document.createElement("header");return t.className="bg-gradient-to-r from-blue-700 to-cyan-600 text-white shadow-lg relative z-50",t.innerHTML=`
      <div class="container mx-auto px-4 py-3">
        <div class="flex justify-between items-center">
          <!-- Logo y nombre -->
          <div class="flex items-center space-x-3">
            <span class="text-2xl">üåä</span>
            <h1 class="text-xl font-bold">AquaBuild</h1>
          </div>
          
          <!-- Men√∫ hamburguesa para todos los dispositivos -->
          <button id="menu-toggle" class="text-white focus:outline-none ml-4">
            <svg id="menu-icon" class="w-6 h-6 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
          </button>
        </div>
        
        <!-- Men√∫ desplegable overlay para todos los dispositivos -->
        <div id="menu-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden" style="display: none;"></div>
        
        <div id="dropdown-menu" class="hidden absolute top-full left-4 right-4 md:left-auto md:right-auto md:w-96 bg-white text-gray-800 rounded-lg shadow-xl z-50 mt-2 overflow-hidden">
          <div class="p-4 border-b border-gray-200">
            <h3 class="font-semibold text-gray-700 mb-3">MEN√ö PRINCIPAL</h3>
            <nav>
              <ul class="space-y-2">
                <li>
                  <a href="#" data-tab="quotes" class="block py-3 px-4 rounded-lg hover:bg-blue-50 hover:text-blue-700 transition-colors flex items-center space-x-3">
                    <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                    <span class="font-medium">Cotizaciones</span>
                  </a>
                </li>
                <li>
                  <a href="#" data-tab="invoices" class="block py-3 px-4 rounded-lg hover:bg-blue-50 hover:text-blue-700 transition-colors flex items-center space-x-3">
                    <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                    <span class="font-medium">Facturas</span>
                  </a>
                </li>
                <li>
                  <a href="#" data-tab="clients" class="block py-3 px-4 rounded-lg hover:bg-blue-50 hover:text-blue-700 transition-colors flex items-center space-x-3">
                    <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                    <span class="font-medium">Clientes</span>
                  </a>
                </li>
              </ul>
            </nav>
          </div>
          <div class="p-4 bg-gray-50">
            <button id="menu-logout-btn" class="w-full py-2 px-4 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center justify-center space-x-2">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
              </svg>
              <span class="font-medium">Cerrar Sesi√≥n</span>
            </button>
          </div>
        </div>
      </div>
    `,setTimeout(()=>{const e=document.getElementById("menu-toggle"),r=document.getElementById("dropdown-menu"),i=document.getElementById("menu-overlay"),s=document.getElementById("menu-icon");if(!e||!r||!i||!s){console.error("Elementos del men√∫ no encontrados");return}e.addEventListener("click",u=>{u.stopPropagation(),this.toggleMenu(r,i,s)}),r.querySelectorAll("[data-tab]").forEach(u=>{u.addEventListener("click",d=>{d.preventDefault(),d.stopPropagation();const m=u.getAttribute("data-tab");this.setActiveTab(m),this.onNavigate(m),this.closeMenu(r,i,s)})});const l=document.getElementById("menu-logout-btn");l&&l.addEventListener("click",u=>{u.preventDefault(),u.stopPropagation(),this.onNavigate("logout"),this.closeMenu(r,i,s)}),document.addEventListener("click",u=>{!t.contains(u.target)&&this.isMenuOpen&&this.closeMenu(r,i,s)}),document.addEventListener("keydown",u=>{u.key==="Escape"&&this.isMenuOpen&&this.closeMenu(r,i,s)})},100),t}toggleMenu(t,e,r){this.isMenuOpen?this.closeMenu(t,e,r):this.openMenu(t,e,r)}openMenu(t,e,r){t.classList.remove("hidden"),e.classList.remove("hidden"),r.style.transform="rotate(180deg)",this.isMenuOpen=!0;const i=t.closest("header");if(i){const s=i.getBoundingClientRect();t.style.top=`${s.height+10}px`}}closeMenu(t,e,r){t.classList.add("hidden"),e.classList.add("hidden"),r.style.transform="rotate(0deg)",this.isMenuOpen=!1}setActiveTab(t){this.currentTab=t,document.querySelectorAll("[data-tab]").forEach(e=>{e.classList.remove("font-bold","text-blue-700"),e.getAttribute("data-tab")===t&&e.classList.add("font-bold","text-blue-700")})}}const hr={getClients(){return JSON.parse(localStorage.getItem("clients")||"[]")},saveClients(n){localStorage.setItem("clients",JSON.stringify(n))},getQuotes(){return JSON.parse(localStorage.getItem("quotes")||"[]")},saveQuotes(n){localStorage.setItem("quotes",JSON.stringify(n))},getInvoices(){return JSON.parse(localStorage.getItem("invoices")||"[]")},saveInvoices(n){localStorage.setItem("invoices",JSON.stringify(n))},getQuoteCounter(){return parseInt(localStorage.getItem("quoteCounter")||"1")},saveQuoteCounter(n){localStorage.setItem("quoteCounter",n.toString())},getInvoiceCounter(){return parseInt(localStorage.getItem("invoiceCounter")||"1")},saveInvoiceCounter(n){localStorage.setItem("invoiceCounter",n.toString())}},y2={getAll(){return hr.getClients()},getById(n){return this.getAll().find(e=>e.id===n)},create(n){const t=this.getAll(),e={id:Date.now().toString(),...n};return t.push(e),hr.saveClients(t),e},update(n,t){const e=this.getAll(),r=e.findIndex(i=>i.id===n);return r!==-1?(e[r]={...e[r],...t},hr.saveClients(e),e[r]):null},delete(n){const t=this.getAll(),e=t.filter(r=>r.id!==n);return hr.saveClients(e),e.length!==t.length}},Wf={getQuotes(){return hr.getQuotes()},createQuote(n){const t=this.getQuotes(),e=hr.getQuoteCounter(),r={id:Date.now().toString(),number:`COT-${e.toString().padStart(4,"0")}`,status:"Pendiente",...n};return t.push(r),hr.saveQuotes(t),hr.saveQuoteCounter(e+1),r},deleteQuote(n){const t=this.getQuotes(),e=t.filter(r=>r.id!==n);return hr.saveQuotes(e),e.length!==t.length},getInvoices(){return hr.getInvoices()},createInvoice(n){const t=this.getInvoices(),e=hr.getInvoiceCounter(),r={id:Date.now().toString(),number:`FAC-${e.toString().padStart(4,"0")}`,...n};return t.push(r),hr.saveInvoices(t),hr.saveInvoiceCounter(e+1),r},deleteInvoice(n){const t=this.getInvoices(),e=t.filter(r=>r.id!==n);return hr.saveInvoices(e),e.length!==t.length}};class $f{render(){const t=y2.getAll(),e=Wf.getQuotes(),r=Wf.getInvoices(),i=document.createElement("div");i.className="space-y-6";const s=`
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="card bg-gradient-to-br from-blue-50 to-blue-100 border-l-4 border-blue-500">
          <div class="text-center">
            <h3 class="text-lg font-semibold text-blue-800 mb-2">Clientes</h3>
            <p class="text-3xl font-bold text-blue-600">${t.length}</p>
            <p class="text-sm text-blue-600 mt-1">Total de clientes registrados</p>
          </div>
        </div>
        
        <div class="card bg-gradient-to-br from-green-50 to-green-100 border-l-4 border-green-500">
          <div class="text-center">
            <h3 class="text-lg font-semibold text-green-800 mb-2">Cotizaciones</h3>
            <p class="text-3xl font-bold text-green-600">${e.length}</p>
            <p class="text-sm text-green-600 mt-1">Cotizaciones generadas</p>
          </div>
        </div>
        
        <div class="card bg-gradient-to-br from-yellow-50 to-yellow-100 border-l-4 border-yellow-500">
          <div class="text-center">
            <h3 class="text-lg font-semibold text-yellow-800 mb-2">Facturas</h3>
            <p class="text-3xl font-bold text-yellow-600">${r.length}</p>
            <p class="text-sm text-yellow-600 mt-1">Facturas emitidas</p>
          </div>
        </div>
      </div>
      
      <div class="card">
        <h2 class="text-xl font-bold text-gray-800 mb-4">Bienvenido a AquaBuild</h2>
        <p class="text-gray-600 mb-4">
          Sistema de gesti√≥n para empresas de construcci√≥n y reparaci√≥n de piscinas.
          Aqu√≠ puede gestionar sus clientes, crear cotizaciones y facturas, y llevar un control
          completo de su negocio.
        </p>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
          <div class="bg-blue-50 p-4 rounded-lg">
            <h3 class="font-semibold text-blue-800 mb-2">Caracter√≠sticas</h3>
            <ul class="text-sm text-blue-700 space-y-1">
              <li>‚Ä¢ Gesti√≥n completa de clientes (CRUD)</li>
              <li>‚Ä¢ Creaci√≥n de cotizaciones con numeraci√≥n autom√°tica</li>
              <li>‚Ä¢ Generaci√≥n de facturas con secuencia</li>
              <li>‚Ä¢ Impresi√≥n en PDF</li>
              <li>‚Ä¢ Almacenamiento local seguro</li>
            </ul>
          </div>
          <div class="bg-green-50 p-4 rounded-lg">
            <h3 class="font-semibold text-green-800 mb-2">Consejos de uso</h3>
            <ul class="text-sm text-green-700 space-y-1">
              <li>‚Ä¢ Comience creando sus clientes</li>
              <li>‚Ä¢ Use cotizaciones para presupuestos</li>
              <li>‚Ä¢ Convierta cotizaciones en facturas</li>
              <li>‚Ä¢ Imprima documentos para sus clientes</li>
              <li>‚Ä¢ Revise el dashboard para estad√≠sticas</li>
            </ul>
          </div>
        </div>
      </div>
    `;return i.innerHTML=s,i}}const v2=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg=function(n){const t=[];let e=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?t[e++]=i:i<2048?(t[e++]=i>>6|192,t[e++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),t[e++]=i>>18|240,t[e++]=i>>12&63|128,t[e++]=i>>6&63|128,t[e++]=i&63|128):(t[e++]=i>>12|224,t[e++]=i>>6&63|128,t[e++]=i&63|128)}return t},w2=function(n){const t=[];let e=0,r=0;for(;e<n.length;){const i=n[e++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[e++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[e++],o=n[e++],l=n[e++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=n[e++],o=n[e++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},Bg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,l=o?n[i+1]:0,u=i+2<n.length,d=u?n[i+2]:0,m=s>>2,v=(s&3)<<4|l>>4;let _=(l&15)<<2|d>>6,g=d&63;u||(g=64,o||(_=64)),r.push(e[m],e[v],e[_],e[g])}return r.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(jg(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):w2(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=e[n.charAt(i++)],l=i<n.length?e[n.charAt(i)]:0;++i;const d=i<n.length?e[n.charAt(i)]:64;++i;const v=i<n.length?e[n.charAt(i)]:64;if(++i,s==null||l==null||d==null||v==null)throw new _2;const _=s<<2|l>>4;if(r.push(_),d!==64){const g=l<<4&240|d>>2;if(r.push(g),v!==64){const N=d<<6&192|v;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class _2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const b2=function(n){const t=jg(n);return Bg.encodeByteArray(t,!0)},Xl=function(n){return b2(n).replace(/\./g,"")},qg=function(n){try{return Bg.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2=()=>A2().__FIREBASE_DEFAULTS__,I2=()=>{if(typeof process>"u"||typeof process.env>"u")return;const n={}.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},S2=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&qg(n[1]);return t&&JSON.parse(t)},wu=()=>{try{return v2()||E2()||I2()||S2()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Ug=n=>{var t,e;return(e=(t=wu())==null?void 0:t.emulatorHosts)==null?void 0:e[n]},T2=n=>{const t=Ug(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),r]:[t.substring(0,e),r]},zg=()=>{var n;return(n=wu())==null?void 0:n.config},Hg=n=>{var t;return(t=wu())==null?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ua(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Wg(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},r=t||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...n},l="";return[Xl(JSON.stringify(e)),Xl(JSON.stringify(o)),l].join(".")}const Tc={};function x2(){const n={prod:[],emulator:[]};for(const t of Object.keys(Tc))Tc[t]?n.emulator.push(t):n.prod.push(t);return n}function C2(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let Gf=!1;function $g(n,t){if(typeof window>"u"||typeof document>"u"||!Ua(window.location.host)||Tc[n]===t||Tc[n]||Gf)return;Tc[n]=t;function e(_){return`__firebase__banner__${_}`}const r="__firebase__banner",s=x2().prod.length>0;function o(){const _=document.getElementById(r);_&&_.remove()}function l(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function u(_,g){_.setAttribute("width","24"),_.setAttribute("id",g),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function d(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{Gf=!0,o()},_}function m(_,g){_.setAttribute("id",g),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function v(){const _=C2(r),g=e("text"),N=document.getElementById(g)||document.createElement("span"),L=e("learnmore"),O=document.getElementById(L)||document.createElement("a"),C=e("preprendIcon"),R=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const M=_.element;l(M),m(O,L);const q=d();u(R,C),M.append(R,N,O,q),document.body.appendChild(M)}s?(N.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function L2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Hn())}function R2(){var t;const n=(t=wu())==null?void 0:t.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function k2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function D2(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function O2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function F2(){const n=Hn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function M2(){return!R2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function V2(){try{return typeof indexedDB=="object"}catch{return!1}}function j2(){return new Promise((n,t)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),e||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{e=!1},i.onerror=()=>{var s;t(((s=i.error)==null?void 0:s.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2="FirebaseError";class as extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=B2,Object.setPrototypeOf(this,as.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yc.prototype.create)}}class Yc{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?q2(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new as(i,l,r)}}function q2(n,t){return n.replace(U2,(e,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const U2=/\{\$([^}]+)}/g;function z2(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Mo(n,t){if(n===t)return!0;const e=Object.keys(n),r=Object.keys(t);for(const i of e){if(!r.includes(i))return!1;const s=n[i],o=t[i];if(Kf(s)&&Kf(o)){if(!Mo(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!e.includes(i))return!1;return!0}function Kf(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(n){const t=[];for(const[e,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function _c(n){const t={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");t[decodeURIComponent(i)]=decodeURIComponent(s)}}),t}function bc(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function H2(n,t){const e=new W2(n,t);return e.subscribe.bind(e)}class W2{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,r){let i;if(t===void 0&&e===void 0&&r===void 0)throw new Error("Missing Observer.");$2(t,["next","error","complete"])?i=t:i={next:t,error:e,complete:r},i.next===void 0&&(i.next=ah),i.error===void 0&&(i.error=ah),i.complete===void 0&&(i.complete=ah);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $2(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function ah(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(n){return n&&n._delegate?n._delegate:n}class Vo{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const r=new P2;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:e});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(t==null?void 0:t.optional)??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Y2(t))try{this.getOrInitializeService({instanceIdentifier:Io})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=Io){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Io){return this.instances.has(t)}getOptions(t=Io){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(t,e){const r=this.normalizeInstanceIdentifier(e),i=this.onInitCallbacks.get(r)??new Set;i.add(t),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&t(s,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const r=this.onInitCallbacks.get(e);if(r)for(const i of r)try{i(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:K2(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Io){return this.component?this.component.multipleInstances?t:Io:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function K2(n){return n===Io?void 0:n}function Y2(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new G2(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ye;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ye||(ye={}));const Q2={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},X2=ye.INFO,Z2={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},t5=(n,t,...e)=>{if(t<n.logLevel)return;const r=new Date().toISOString(),i=Z2[t];if(i)console[i](`[${r}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class yd{constructor(t){this.name=t,this._logLevel=X2,this._logHandler=t5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ye))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Q2[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...t),this._logHandler(this,ye.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...t),this._logHandler(this,ye.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...t),this._logHandler(this,ye.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...t),this._logHandler(this,ye.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...t),this._logHandler(this,ye.ERROR,...t)}}const e5=(n,t)=>t.some(e=>n instanceof e);let Yf,Jf;function n5(){return Yf||(Yf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function r5(){return Jf||(Jf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gg=new WeakMap,Lh=new WeakMap,Kg=new WeakMap,ch=new WeakMap,vd=new WeakMap;function i5(n){const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{e(js(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return t.then(e=>{e instanceof IDBCursor&&Gg.set(e,n)}).catch(()=>{}),vd.set(t,n),t}function s5(n){if(Lh.has(n))return;const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{e(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Lh.set(n,t)}let Rh={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Lh.get(n);if(t==="objectStoreNames")return n.objectStoreNames||Kg.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return js(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function o5(n){Rh=n(Rh)}function a5(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=n.call(lh(this),t,...e);return Kg.set(r,t.sort?t.sort():[t]),js(r)}:r5().includes(n)?function(...t){return n.apply(lh(this),t),js(Gg.get(this))}:function(...t){return js(n.apply(lh(this),t))}}function c5(n){return typeof n=="function"?a5(n):(n instanceof IDBTransaction&&s5(n),e5(n,n5())?new Proxy(n,Rh):n)}function js(n){if(n instanceof IDBRequest)return i5(n);if(ch.has(n))return ch.get(n);const t=c5(n);return t!==n&&(ch.set(n,t),vd.set(t,n)),t}const lh=n=>vd.get(n);function l5(n,t,{blocked:e,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,t),l=js(o);return r&&o.addEventListener("upgradeneeded",u=>{r(js(o.result),u.oldVersion,u.newVersion,js(o.transaction),u)}),e&&o.addEventListener("blocked",u=>e(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const u5=["get","getKey","getAll","getAllKeys","count"],h5=["put","add","delete","clear"],uh=new Map;function Qf(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(uh.get(t))return uh.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,i=h5.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(i||u5.includes(e)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[e](...l),i&&u.done]))[0]};return uh.set(t,s),s}o5(n=>({...n,get:(t,e,r)=>Qf(t,e)||n.get(t,e,r),has:(t,e)=>!!Qf(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(f5(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function f5(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const kh="@firebase/app",Xf="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new yd("@firebase/app"),p5="@firebase/app-compat",g5="@firebase/analytics-compat",m5="@firebase/analytics",y5="@firebase/app-check-compat",v5="@firebase/app-check",w5="@firebase/auth",_5="@firebase/auth-compat",b5="@firebase/database",A5="@firebase/data-connect",E5="@firebase/database-compat",I5="@firebase/functions",S5="@firebase/functions-compat",T5="@firebase/installations",P5="@firebase/installations-compat",N5="@firebase/messaging",x5="@firebase/messaging-compat",C5="@firebase/performance",L5="@firebase/performance-compat",R5="@firebase/remote-config",k5="@firebase/remote-config-compat",D5="@firebase/storage",O5="@firebase/storage-compat",F5="@firebase/firestore",M5="@firebase/ai",V5="@firebase/firestore-compat",j5="firebase",B5="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh="[DEFAULT]",q5={[kh]:"fire-core",[p5]:"fire-core-compat",[m5]:"fire-analytics",[g5]:"fire-analytics-compat",[v5]:"fire-app-check",[y5]:"fire-app-check-compat",[w5]:"fire-auth",[_5]:"fire-auth-compat",[b5]:"fire-rtdb",[A5]:"fire-data-connect",[E5]:"fire-rtdb-compat",[I5]:"fire-fn",[S5]:"fire-fn-compat",[T5]:"fire-iid",[P5]:"fire-iid-compat",[N5]:"fire-fcm",[x5]:"fire-fcm-compat",[C5]:"fire-perf",[L5]:"fire-perf-compat",[R5]:"fire-rc",[k5]:"fire-rc-compat",[D5]:"fire-gcs",[O5]:"fire-gcs-compat",[F5]:"fire-fst",[V5]:"fire-fst-compat",[M5]:"fire-vertex","fire-js":"fire-js",[j5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zl=new Map,U5=new Map,Oh=new Map;function Zf(n,t){try{n.container.addComponent(t)}catch(e){ns.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Da(n){const t=n.name;if(Oh.has(t))return ns.debug(`There were multiple attempts to register component ${t}.`),!1;Oh.set(t,n);for(const e of Zl.values())Zf(e,n);for(const e of U5.values())Zf(e,n);return!0}function wd(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function Er(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bs=new Yc("app","Firebase",z5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(t,e,r){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Bs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za=B5;function Yg(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const r={name:Dh,automaticDataCollectionEnabled:!0,...t},i=r.name;if(typeof i!="string"||!i)throw Bs.create("bad-app-name",{appName:String(i)});if(e||(e=zg()),!e)throw Bs.create("no-options");const s=Zl.get(i);if(s){if(Mo(e,s.options)&&Mo(r,s.config))return s;throw Bs.create("duplicate-app",{appName:i})}const o=new J2(i);for(const u of Oh.values())o.addComponent(u);const l=new H5(e,r,o);return Zl.set(i,l),l}function Jg(n=Dh){const t=Zl.get(n);if(!t&&n===Dh&&zg())return Yg();if(!t)throw Bs.create("no-app",{appName:n});return t}function qs(n,t,e){let r=q5[n]??n;e&&(r+=`-${e}`);const i=r.match(/\s|\//),s=t.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${t}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ns.warn(o.join(" "));return}Da(new Vo(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W5="firebase-heartbeat-database",$5=1,Vc="firebase-heartbeat-store";let hh=null;function Qg(){return hh||(hh=l5(W5,$5,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Vc)}catch(e){console.warn(e)}}}}).catch(n=>{throw Bs.create("idb-open",{originalErrorMessage:n.message})})),hh}async function G5(n){try{const e=(await Qg()).transaction(Vc),r=await e.objectStore(Vc).get(Xg(n));return await e.done,r}catch(t){if(t instanceof as)ns.warn(t.message);else{const e=Bs.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ns.warn(e.message)}}}async function tp(n,t){try{const r=(await Qg()).transaction(Vc,"readwrite");await r.objectStore(Vc).put(t,Xg(n)),await r.done}catch(e){if(e instanceof as)ns.warn(e.message);else{const r=Bs.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});ns.warn(r.message)}}}function Xg(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K5=1024,Y5=30;class J5{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new X5(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,e;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ep();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>Y5){const o=Z5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ns.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=ep(),{heartbeatsToSend:r,unsentEntries:i}=Q5(this._heartbeatsCache.heartbeats),s=Xl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return ns.warn(e),""}}}function ep(){return new Date().toISOString().substring(0,10)}function Q5(n,t=K5){const e=[];let r=n.slice();for(const i of n){const s=e.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),np(e)>t){s.dates.pop();break}}else if(e.push({agent:i.agent,dates:[i.date]}),np(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class X5{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return V2()?j2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await G5(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return tp(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return tp(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function np(n){return Xl(JSON.stringify({version:2,heartbeats:n})).length}function Z5(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let r=1;r<n.length;r++)n[r].date<e&&(e=n[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(n){Da(new Vo("platform-logger",t=>new d5(t),"PRIVATE")),Da(new Vo("heartbeat",t=>new J5(t),"PRIVATE")),qs(kh,Xf,n),qs(kh,Xf,"esm2020"),qs("fire-js","")}ty("");var ey="firebase",ny="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qs(ey,ny,"app");var rp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Us,Zg;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(S,E){function x(){}x.prototype=E.prototype,S.F=E.prototype,S.prototype=new x,S.prototype.constructor=S,S.D=function(F,b,A){for(var T=Array(arguments.length-2),W=2;W<arguments.length;W++)T[W-2]=arguments[W];return E.prototype[b].apply(F,T)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,e),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,E,x){x||(x=0);const F=Array(16);if(typeof E=="string")for(var b=0;b<16;++b)F[b]=E.charCodeAt(x++)|E.charCodeAt(x++)<<8|E.charCodeAt(x++)<<16|E.charCodeAt(x++)<<24;else for(b=0;b<16;++b)F[b]=E[x++]|E[x++]<<8|E[x++]<<16|E[x++]<<24;E=S.g[0],x=S.g[1],b=S.g[2];let A=S.g[3],T;T=E+(A^x&(b^A))+F[0]+3614090360&4294967295,E=x+(T<<7&4294967295|T>>>25),T=A+(b^E&(x^b))+F[1]+3905402710&4294967295,A=E+(T<<12&4294967295|T>>>20),T=b+(x^A&(E^x))+F[2]+606105819&4294967295,b=A+(T<<17&4294967295|T>>>15),T=x+(E^b&(A^E))+F[3]+3250441966&4294967295,x=b+(T<<22&4294967295|T>>>10),T=E+(A^x&(b^A))+F[4]+4118548399&4294967295,E=x+(T<<7&4294967295|T>>>25),T=A+(b^E&(x^b))+F[5]+1200080426&4294967295,A=E+(T<<12&4294967295|T>>>20),T=b+(x^A&(E^x))+F[6]+2821735955&4294967295,b=A+(T<<17&4294967295|T>>>15),T=x+(E^b&(A^E))+F[7]+4249261313&4294967295,x=b+(T<<22&4294967295|T>>>10),T=E+(A^x&(b^A))+F[8]+1770035416&4294967295,E=x+(T<<7&4294967295|T>>>25),T=A+(b^E&(x^b))+F[9]+2336552879&4294967295,A=E+(T<<12&4294967295|T>>>20),T=b+(x^A&(E^x))+F[10]+4294925233&4294967295,b=A+(T<<17&4294967295|T>>>15),T=x+(E^b&(A^E))+F[11]+2304563134&4294967295,x=b+(T<<22&4294967295|T>>>10),T=E+(A^x&(b^A))+F[12]+1804603682&4294967295,E=x+(T<<7&4294967295|T>>>25),T=A+(b^E&(x^b))+F[13]+4254626195&4294967295,A=E+(T<<12&4294967295|T>>>20),T=b+(x^A&(E^x))+F[14]+2792965006&4294967295,b=A+(T<<17&4294967295|T>>>15),T=x+(E^b&(A^E))+F[15]+1236535329&4294967295,x=b+(T<<22&4294967295|T>>>10),T=E+(b^A&(x^b))+F[1]+4129170786&4294967295,E=x+(T<<5&4294967295|T>>>27),T=A+(x^b&(E^x))+F[6]+3225465664&4294967295,A=E+(T<<9&4294967295|T>>>23),T=b+(E^x&(A^E))+F[11]+643717713&4294967295,b=A+(T<<14&4294967295|T>>>18),T=x+(A^E&(b^A))+F[0]+3921069994&4294967295,x=b+(T<<20&4294967295|T>>>12),T=E+(b^A&(x^b))+F[5]+3593408605&4294967295,E=x+(T<<5&4294967295|T>>>27),T=A+(x^b&(E^x))+F[10]+38016083&4294967295,A=E+(T<<9&4294967295|T>>>23),T=b+(E^x&(A^E))+F[15]+3634488961&4294967295,b=A+(T<<14&4294967295|T>>>18),T=x+(A^E&(b^A))+F[4]+3889429448&4294967295,x=b+(T<<20&4294967295|T>>>12),T=E+(b^A&(x^b))+F[9]+568446438&4294967295,E=x+(T<<5&4294967295|T>>>27),T=A+(x^b&(E^x))+F[14]+3275163606&4294967295,A=E+(T<<9&4294967295|T>>>23),T=b+(E^x&(A^E))+F[3]+4107603335&4294967295,b=A+(T<<14&4294967295|T>>>18),T=x+(A^E&(b^A))+F[8]+1163531501&4294967295,x=b+(T<<20&4294967295|T>>>12),T=E+(b^A&(x^b))+F[13]+2850285829&4294967295,E=x+(T<<5&4294967295|T>>>27),T=A+(x^b&(E^x))+F[2]+4243563512&4294967295,A=E+(T<<9&4294967295|T>>>23),T=b+(E^x&(A^E))+F[7]+1735328473&4294967295,b=A+(T<<14&4294967295|T>>>18),T=x+(A^E&(b^A))+F[12]+2368359562&4294967295,x=b+(T<<20&4294967295|T>>>12),T=E+(x^b^A)+F[5]+4294588738&4294967295,E=x+(T<<4&4294967295|T>>>28),T=A+(E^x^b)+F[8]+2272392833&4294967295,A=E+(T<<11&4294967295|T>>>21),T=b+(A^E^x)+F[11]+1839030562&4294967295,b=A+(T<<16&4294967295|T>>>16),T=x+(b^A^E)+F[14]+4259657740&4294967295,x=b+(T<<23&4294967295|T>>>9),T=E+(x^b^A)+F[1]+2763975236&4294967295,E=x+(T<<4&4294967295|T>>>28),T=A+(E^x^b)+F[4]+1272893353&4294967295,A=E+(T<<11&4294967295|T>>>21),T=b+(A^E^x)+F[7]+4139469664&4294967295,b=A+(T<<16&4294967295|T>>>16),T=x+(b^A^E)+F[10]+3200236656&4294967295,x=b+(T<<23&4294967295|T>>>9),T=E+(x^b^A)+F[13]+681279174&4294967295,E=x+(T<<4&4294967295|T>>>28),T=A+(E^x^b)+F[0]+3936430074&4294967295,A=E+(T<<11&4294967295|T>>>21),T=b+(A^E^x)+F[3]+3572445317&4294967295,b=A+(T<<16&4294967295|T>>>16),T=x+(b^A^E)+F[6]+76029189&4294967295,x=b+(T<<23&4294967295|T>>>9),T=E+(x^b^A)+F[9]+3654602809&4294967295,E=x+(T<<4&4294967295|T>>>28),T=A+(E^x^b)+F[12]+3873151461&4294967295,A=E+(T<<11&4294967295|T>>>21),T=b+(A^E^x)+F[15]+530742520&4294967295,b=A+(T<<16&4294967295|T>>>16),T=x+(b^A^E)+F[2]+3299628645&4294967295,x=b+(T<<23&4294967295|T>>>9),T=E+(b^(x|~A))+F[0]+4096336452&4294967295,E=x+(T<<6&4294967295|T>>>26),T=A+(x^(E|~b))+F[7]+1126891415&4294967295,A=E+(T<<10&4294967295|T>>>22),T=b+(E^(A|~x))+F[14]+2878612391&4294967295,b=A+(T<<15&4294967295|T>>>17),T=x+(A^(b|~E))+F[5]+4237533241&4294967295,x=b+(T<<21&4294967295|T>>>11),T=E+(b^(x|~A))+F[12]+1700485571&4294967295,E=x+(T<<6&4294967295|T>>>26),T=A+(x^(E|~b))+F[3]+2399980690&4294967295,A=E+(T<<10&4294967295|T>>>22),T=b+(E^(A|~x))+F[10]+4293915773&4294967295,b=A+(T<<15&4294967295|T>>>17),T=x+(A^(b|~E))+F[1]+2240044497&4294967295,x=b+(T<<21&4294967295|T>>>11),T=E+(b^(x|~A))+F[8]+1873313359&4294967295,E=x+(T<<6&4294967295|T>>>26),T=A+(x^(E|~b))+F[15]+4264355552&4294967295,A=E+(T<<10&4294967295|T>>>22),T=b+(E^(A|~x))+F[6]+2734768916&4294967295,b=A+(T<<15&4294967295|T>>>17),T=x+(A^(b|~E))+F[13]+1309151649&4294967295,x=b+(T<<21&4294967295|T>>>11),T=E+(b^(x|~A))+F[4]+4149444226&4294967295,E=x+(T<<6&4294967295|T>>>26),T=A+(x^(E|~b))+F[11]+3174756917&4294967295,A=E+(T<<10&4294967295|T>>>22),T=b+(E^(A|~x))+F[2]+718787259&4294967295,b=A+(T<<15&4294967295|T>>>17),T=x+(A^(b|~E))+F[9]+3951481745&4294967295,S.g[0]=S.g[0]+E&4294967295,S.g[1]=S.g[1]+(b+(T<<21&4294967295|T>>>11))&4294967295,S.g[2]=S.g[2]+b&4294967295,S.g[3]=S.g[3]+A&4294967295}r.prototype.v=function(S,E){E===void 0&&(E=S.length);const x=E-this.blockSize,F=this.C;let b=this.h,A=0;for(;A<E;){if(b==0)for(;A<=x;)i(this,S,A),A+=this.blockSize;if(typeof S=="string"){for(;A<E;)if(F[b++]=S.charCodeAt(A++),b==this.blockSize){i(this,F),b=0;break}}else for(;A<E;)if(F[b++]=S[A++],b==this.blockSize){i(this,F),b=0;break}}this.h=b,this.o+=E},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var E=1;E<S.length-8;++E)S[E]=0;E=this.o*8;for(var x=S.length-8;x<S.length;++x)S[x]=E&255,E/=256;for(this.v(S),S=Array(16),E=0,x=0;x<4;++x)for(let F=0;F<32;F+=8)S[E++]=this.g[x]>>>F&255;return S};function s(S,E){var x=l;return Object.prototype.hasOwnProperty.call(x,S)?x[S]:x[S]=E(S)}function o(S,E){this.h=E;const x=[];let F=!0;for(let b=S.length-1;b>=0;b--){const A=S[b]|0;F&&A==E||(x[b]=A,F=!1)}this.g=x}var l={};function u(S){return-128<=S&&S<128?s(S,function(E){return new o([E|0],E<0?-1:0)}):new o([S|0],S<0?-1:0)}function d(S){if(isNaN(S)||!isFinite(S))return v;if(S<0)return O(d(-S));const E=[];let x=1;for(let F=0;S>=x;F++)E[F]=S/x|0,x*=4294967296;return new o(E,0)}function m(S,E){if(S.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(S.charAt(0)=="-")return O(m(S.substring(1),E));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=d(Math.pow(E,8));let F=v;for(let A=0;A<S.length;A+=8){var b=Math.min(8,S.length-A);const T=parseInt(S.substring(A,A+b),E);b<8?(b=d(Math.pow(E,b)),F=F.j(b).add(d(T))):(F=F.j(x),F=F.add(d(T)))}return F}var v=u(0),_=u(1),g=u(16777216);n=o.prototype,n.m=function(){if(L(this))return-O(this).m();let S=0,E=1;for(let x=0;x<this.g.length;x++){const F=this.i(x);S+=(F>=0?F:4294967296+F)*E,E*=4294967296}return S},n.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(N(this))return"0";if(L(this))return"-"+O(this).toString(S);const E=d(Math.pow(S,6));var x=this;let F="";for(;;){const b=q(x,E).g;x=C(x,b.j(E));let A=((x.g.length>0?x.g[0]:x.h)>>>0).toString(S);if(x=b,N(x))return A+F;for(;A.length<6;)A="0"+A;F=A+F}},n.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function N(S){if(S.h!=0)return!1;for(let E=0;E<S.g.length;E++)if(S.g[E]!=0)return!1;return!0}function L(S){return S.h==-1}n.l=function(S){return S=C(this,S),L(S)?-1:N(S)?0:1};function O(S){const E=S.g.length,x=[];for(let F=0;F<E;F++)x[F]=~S.g[F];return new o(x,~S.h).add(_)}n.abs=function(){return L(this)?O(this):this},n.add=function(S){const E=Math.max(this.g.length,S.g.length),x=[];let F=0;for(let b=0;b<=E;b++){let A=F+(this.i(b)&65535)+(S.i(b)&65535),T=(A>>>16)+(this.i(b)>>>16)+(S.i(b)>>>16);F=T>>>16,A&=65535,T&=65535,x[b]=T<<16|A}return new o(x,x[x.length-1]&-2147483648?-1:0)};function C(S,E){return S.add(O(E))}n.j=function(S){if(N(this)||N(S))return v;if(L(this))return L(S)?O(this).j(O(S)):O(O(this).j(S));if(L(S))return O(this.j(O(S)));if(this.l(g)<0&&S.l(g)<0)return d(this.m()*S.m());const E=this.g.length+S.g.length,x=[];for(var F=0;F<2*E;F++)x[F]=0;for(F=0;F<this.g.length;F++)for(let b=0;b<S.g.length;b++){const A=this.i(F)>>>16,T=this.i(F)&65535,W=S.i(b)>>>16,ct=S.i(b)&65535;x[2*F+2*b]+=T*ct,R(x,2*F+2*b),x[2*F+2*b+1]+=A*ct,R(x,2*F+2*b+1),x[2*F+2*b+1]+=T*W,R(x,2*F+2*b+1),x[2*F+2*b+2]+=A*W,R(x,2*F+2*b+2)}for(S=0;S<E;S++)x[S]=x[2*S+1]<<16|x[2*S];for(S=E;S<2*E;S++)x[S]=0;return new o(x,0)};function R(S,E){for(;(S[E]&65535)!=S[E];)S[E+1]+=S[E]>>>16,S[E]&=65535,E++}function M(S,E){this.g=S,this.h=E}function q(S,E){if(N(E))throw Error("division by zero");if(N(S))return new M(v,v);if(L(S))return E=q(O(S),E),new M(O(E.g),O(E.h));if(L(E))return E=q(S,O(E)),new M(O(E.g),E.h);if(S.g.length>30){if(L(S)||L(E))throw Error("slowDivide_ only works with positive integers.");for(var x=_,F=E;F.l(S)<=0;)x=K(x),F=K(F);var b=Q(x,1),A=Q(F,1);for(F=Q(F,2),x=Q(x,2);!N(F);){var T=A.add(F);T.l(S)<=0&&(b=b.add(x),A=T),F=Q(F,1),x=Q(x,1)}return E=C(S,b.j(E)),new M(b,E)}for(b=v;S.l(E)>=0;){for(x=Math.max(1,Math.floor(S.m()/E.m())),F=Math.ceil(Math.log(x)/Math.LN2),F=F<=48?1:Math.pow(2,F-48),A=d(x),T=A.j(E);L(T)||T.l(S)>0;)x-=F,A=d(x),T=A.j(E);N(A)&&(A=_),b=b.add(A),S=C(S,T)}return new M(b,S)}n.B=function(S){return q(this,S).h},n.and=function(S){const E=Math.max(this.g.length,S.g.length),x=[];for(let F=0;F<E;F++)x[F]=this.i(F)&S.i(F);return new o(x,this.h&S.h)},n.or=function(S){const E=Math.max(this.g.length,S.g.length),x=[];for(let F=0;F<E;F++)x[F]=this.i(F)|S.i(F);return new o(x,this.h|S.h)},n.xor=function(S){const E=Math.max(this.g.length,S.g.length),x=[];for(let F=0;F<E;F++)x[F]=this.i(F)^S.i(F);return new o(x,this.h^S.h)};function K(S){const E=S.g.length+1,x=[];for(let F=0;F<E;F++)x[F]=S.i(F)<<1|S.i(F-1)>>>31;return new o(x,S.h)}function Q(S,E){const x=E>>5;E%=32;const F=S.g.length-x,b=[];for(let A=0;A<F;A++)b[A]=E>0?S.i(A+x)>>>E|S.i(A+x+1)<<32-E:S.i(A+x);return new o(b,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Zg=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=m,Us=o}).apply(typeof rp<"u"?rp:typeof self<"u"?self:typeof window<"u"?window:{});var Ll=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tm,Ac,em,ql,Fh,nm,rm,im;(function(){var n,t=Object.defineProperty;function e(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ll=="object"&&Ll];for(var f=0;f<a.length;++f){var w=a[f];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=e(this);function i(a,f){if(f)t:{var w=r;a=a.split(".");for(var P=0;P<a.length-1;P++){var H=a[P];if(!(H in w))break t;w=w[H]}a=a[a.length-1],P=w[a],f=f(P),f!=P&&f!=null&&t(w,a,{configurable:!0,writable:!0,value:f})}}i("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(a){return a||function(f){var w=[],P;for(P in f)Object.prototype.hasOwnProperty.call(f,P)&&w.push([P,f[P]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function l(a){var f=typeof a;return f=="object"&&a!=null||f=="function"}function u(a,f,w){return a.call.apply(a.bind,arguments)}function d(a,f,w){return d=u,d.apply(null,arguments)}function m(a,f){var w=Array.prototype.slice.call(arguments,1);return function(){var P=w.slice();return P.push.apply(P,arguments),a.apply(this,P)}}function v(a,f){function w(){}w.prototype=f.prototype,a.Z=f.prototype,a.prototype=new w,a.prototype.constructor=a,a.Ob=function(P,H,tt){for(var gt=Array(arguments.length-2),xt=2;xt<arguments.length;xt++)gt[xt-2]=arguments[xt];return f.prototype[H].apply(P,gt)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function g(a){const f=a.length;if(f>0){const w=Array(f);for(let P=0;P<f;P++)w[P]=a[P];return w}return[]}function N(a,f){for(let P=1;P<arguments.length;P++){const H=arguments[P];var w=typeof H;if(w=w!="object"?w:H?Array.isArray(H)?"array":w:"null",w=="array"||w=="object"&&typeof H.length=="number"){w=a.length||0;const tt=H.length||0;a.length=w+tt;for(let gt=0;gt<tt;gt++)a[w+gt]=H[gt]}else a.push(H)}}class L{constructor(f,w){this.i=f,this.j=w,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function O(a){o.setTimeout(()=>{throw a},0)}function C(){var a=S;let f=null;return a.g&&(f=a.g,a.g=a.g.next,a.g||(a.h=null),f.next=null),f}class R{constructor(){this.h=this.g=null}add(f,w){const P=M.get();P.set(f,w),this.h?this.h.next=P:this.g=P,this.h=P}}var M=new L(()=>new q,a=>a.reset());class q{constructor(){this.next=this.g=this.h=null}set(f,w){this.h=f,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let K,Q=!1,S=new R,E=()=>{const a=Promise.resolve(void 0);K=()=>{a.then(x)}};function x(){for(var a;a=C();){try{a.h.call(a.g)}catch(w){O(w)}var f=M;f.j(a),f.h<100&&(f.h++,a.next=f.g,f.g=a)}Q=!1}function F(){this.u=this.u,this.C=this.C}F.prototype.u=!1,F.prototype.dispose=function(){this.u||(this.u=!0,this.N())},F.prototype[Symbol.dispose]=function(){this.dispose()},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function b(a,f){this.type=a,this.g=this.target=f,this.defaultPrevented=!1}b.prototype.h=function(){this.defaultPrevented=!0};var A=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,f=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const w=()=>{};o.addEventListener("test",w,f),o.removeEventListener("test",w,f)}catch{}return a}();function T(a){return/^[\s\xa0]*$/.test(a)}function W(a,f){b.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,f)}v(W,b),W.prototype.init=function(a,f){const w=this.type=a.type,P=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=f,f=a.relatedTarget,f||(w=="mouseover"?f=a.fromElement:w=="mouseout"&&(f=a.toElement)),this.relatedTarget=f,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&W.Z.h.call(this)},W.prototype.h=function(){W.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var ct="closure_listenable_"+(Math.random()*1e6|0),J=0;function Y(a,f,w,P,H){this.listener=a,this.proxy=null,this.src=f,this.type=w,this.capture=!!P,this.ha=H,this.key=++J,this.da=this.fa=!1}function et(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Z(a,f,w){for(const P in a)f.call(w,a[P],P,a)}function at(a,f){for(const w in a)f.call(void 0,a[w],w,a)}function mt(a){const f={};for(const w in a)f[w]=a[w];return f}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(a,f){let w,P;for(let H=1;H<arguments.length;H++){P=arguments[H];for(w in P)a[w]=P[w];for(let tt=0;tt<k.length;tt++)w=k[tt],Object.prototype.hasOwnProperty.call(P,w)&&(a[w]=P[w])}}function $(a){this.src=a,this.g={},this.h=0}$.prototype.add=function(a,f,w,P,H){const tt=a.toString();a=this.g[tt],a||(a=this.g[tt]=[],this.h++);const gt=nt(a,f,P,H);return gt>-1?(f=a[gt],w||(f.fa=!1)):(f=new Y(f,this.src,tt,!!P,H),f.fa=w,a.push(f)),f};function X(a,f){const w=f.type;if(w in a.g){var P=a.g[w],H=Array.prototype.indexOf.call(P,f,void 0),tt;(tt=H>=0)&&Array.prototype.splice.call(P,H,1),tt&&(et(f),a.g[w].length==0&&(delete a.g[w],a.h--))}}function nt(a,f,w,P){for(let H=0;H<a.length;++H){const tt=a[H];if(!tt.da&&tt.listener==f&&tt.capture==!!w&&tt.ha==P)return H}return-1}var ut="closure_lm_"+(Math.random()*1e6|0),ht={};function pt(a,f,w,P,H){if(P&&P.once)return Lt(a,f,w,P,H);if(Array.isArray(f)){for(let tt=0;tt<f.length;tt++)pt(a,f[tt],w,P,H);return null}return w=Pt(w),a&&a[ct]?a.J(f,w,l(P)?!!P.capture:!!P,H):Tt(a,f,w,!1,P,H)}function Tt(a,f,w,P,H,tt){if(!f)throw Error("Invalid event type");const gt=l(H)?!!H.capture:!!H;let xt=ne(a);if(xt||(a[ut]=xt=new $(a)),w=xt.add(f,w,P,gt,tt),w.proxy)return w;if(P=St(),w.proxy=P,P.src=a,P.listener=w,a.addEventListener)A||(H=gt),H===void 0&&(H=!1),a.addEventListener(f.toString(),P,H);else if(a.attachEvent)a.attachEvent(vt(f.toString()),P);else if(a.addListener&&a.removeListener)a.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return w}function St(){function a(w){return f.call(a.src,a.listener,w)}const f=rt;return a}function Lt(a,f,w,P,H){if(Array.isArray(f)){for(let tt=0;tt<f.length;tt++)Lt(a,f[tt],w,P,H);return null}return w=Pt(w),a&&a[ct]?a.K(f,w,l(P)?!!P.capture:!!P,H):Tt(a,f,w,!0,P,H)}function kt(a,f,w,P,H){if(Array.isArray(f))for(var tt=0;tt<f.length;tt++)kt(a,f[tt],w,P,H);else P=l(P)?!!P.capture:!!P,w=Pt(w),a&&a[ct]?(a=a.i,tt=String(f).toString(),tt in a.g&&(f=a.g[tt],w=nt(f,w,P,H),w>-1&&(et(f[w]),Array.prototype.splice.call(f,w,1),f.length==0&&(delete a.g[tt],a.h--)))):a&&(a=ne(a))&&(f=a.g[f.toString()],a=-1,f&&(a=nt(f,w,P,H)),(w=a>-1?f[a]:null)&&$t(w))}function $t(a){if(typeof a!="number"&&a&&!a.da){var f=a.src;if(f&&f[ct])X(f.i,a);else{var w=a.type,P=a.proxy;f.removeEventListener?f.removeEventListener(w,P,a.capture):f.detachEvent?f.detachEvent(vt(w),P):f.addListener&&f.removeListener&&f.removeListener(P),(w=ne(f))?(X(w,a),w.h==0&&(w.src=null,f[ut]=null)):et(a)}}}function vt(a){return a in ht?ht[a]:ht[a]="on"+a}function rt(a,f){if(a.da)a=!0;else{f=new W(f,this);const w=a.listener,P=a.ha||a.src;a.fa&&$t(a),a=w.call(P,f)}return a}function ne(a){return a=a[ut],a instanceof $?a:null}var qt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Pt(a){return typeof a=="function"?a:(a[qt]||(a[qt]=function(f){return a.handleEvent(f)}),a[qt])}function Nt(){F.call(this),this.i=new $(this),this.M=this,this.G=null}v(Nt,F),Nt.prototype[ct]=!0,Nt.prototype.removeEventListener=function(a,f,w,P){kt(this,a,f,w,P)};function Ct(a,f){var w,P=a.G;if(P)for(w=[];P;P=P.G)w.push(P);if(a=a.M,P=f.type||f,typeof f=="string")f=new b(f,a);else if(f instanceof b)f.target=f.target||a;else{var H=f;f=new b(P,a),z(f,H)}H=!0;let tt,gt;if(w)for(gt=w.length-1;gt>=0;gt--)tt=f.g=w[gt],H=Rt(tt,P,!0,f)&&H;if(tt=f.g=a,H=Rt(tt,P,!0,f)&&H,H=Rt(tt,P,!1,f)&&H,w)for(gt=0;gt<w.length;gt++)tt=f.g=w[gt],H=Rt(tt,P,!1,f)&&H}Nt.prototype.N=function(){if(Nt.Z.N.call(this),this.i){var a=this.i;for(const f in a.g){const w=a.g[f];for(let P=0;P<w.length;P++)et(w[P]);delete a.g[f],a.h--}}this.G=null},Nt.prototype.J=function(a,f,w,P){return this.i.add(String(a),f,!1,w,P)},Nt.prototype.K=function(a,f,w,P){return this.i.add(String(a),f,!0,w,P)};function Rt(a,f,w,P){if(f=a.i.g[String(f)],!f)return!0;f=f.concat();let H=!0;for(let tt=0;tt<f.length;++tt){const gt=f[tt];if(gt&&!gt.da&&gt.capture==w){const xt=gt.listener,Ut=gt.ha||gt.src;gt.fa&&X(a.i,gt),H=xt.call(Ut,P)!==!1&&H}}return H&&!P.defaultPrevented}function Ht(a,f){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=d(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:o.setTimeout(a,f||0)}function re(a){a.g=Ht(()=>{a.g=null,a.i&&(a.i=!1,re(a))},a.l);const f=a.h;a.h=null,a.m.apply(null,f)}class le extends F{constructor(f,w){super(),this.m=f,this.l=w,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:re(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oe(a){F.call(this),this.h=a,this.g={}}v(oe,F);var pe=[];function Se(a){Z(a.g,function(f,w){this.g.hasOwnProperty(w)&&$t(f)},a),a.g={}}oe.prototype.N=function(){oe.Z.N.call(this),Se(this)},oe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xt=o.JSON.stringify,he=o.JSON.parse,Ft=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function hn(){}function _e(){}var Tn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Te(){b.call(this,"d")}v(Te,b);function De(){b.call(this,"c")}v(De,b);var _n={},Ee=null;function Tr(){return Ee=Ee||new Nt}_n.Ia="serverreachability";function qe(a){b.call(this,_n.Ia,a)}v(qe,b);function Pn(a){const f=Tr();Ct(f,new qe(f))}_n.STAT_EVENT="statevent";function Pr(a,f){b.call(this,_n.STAT_EVENT,a),this.stat=f}v(Pr,b);function de(a){const f=Tr();Ct(f,new Pr(f,a))}_n.Ja="timingevent";function ie(a,f){b.call(this,_n.Ja,a),this.size=f}v(ie,b);function ge(a,f){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},f)}function gr(){this.g=!0}gr.prototype.ua=function(){this.g=!1};function dn(a,f,w,P,H,tt){a.info(function(){if(a.g)if(tt){var gt="",xt=tt.split("&");for(let Mt=0;Mt<xt.length;Mt++){var Ut=xt[Mt].split("=");if(Ut.length>1){const Gt=Ut[0];Ut=Ut[1];const be=Gt.split("_");gt=be.length>=2&&be[1]=="type"?gt+(Gt+"="+Ut+"&"):gt+(Gt+"=redacted&")}}}else gt=null;else gt=tt;return"XMLHTTP REQ ("+P+") [attempt "+H+"]: "+f+`
`+w+`
`+gt})}function Nr(a,f,w,P,H,tt,gt){a.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+H+"]: "+f+`
`+w+`
`+tt+" "+gt})}function Nn(a,f,w,P){a.info(function(){return"XMLHTTP TEXT ("+f+"): "+mr(a,w)+(P?" "+P:"")})}function Jt(a,f){a.info(function(){return"TIMEOUT: "+f})}gr.prototype.info=function(){};function mr(a,f){if(!a.g)return f;if(!f)return null;try{const tt=JSON.parse(f);if(tt){for(a=0;a<tt.length;a++)if(Array.isArray(tt[a])){var w=tt[a];if(!(w.length<2)){var P=w[1];if(Array.isArray(P)&&!(P.length<1)){var H=P[0];if(H!="noop"&&H!="stop"&&H!="close")for(let gt=1;gt<P.length;gt++)P[gt]=""}}}}return Xt(tt)}catch{return f}}var Wn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},xn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Je;function $e(){}v($e,hn),$e.prototype.g=function(){return new XMLHttpRequest},Je=new $e;function fn(a){return encodeURIComponent(String(a))}function cs(a){var f=1;a=a.split(":");const w=[];for(;f>0&&a.length;)w.push(a.shift()),f--;return a.length&&w.push(a.join(":")),w}function bn(a,f,w,P){this.j=a,this.i=f,this.l=w,this.S=P||1,this.V=new oe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new nr}function nr(){this.i=null,this.g="",this.h=!1}var rr={},$n={};function ir(a,f,w){a.M=1,a.A=Gr(Kn(f)),a.u=w,a.R=!0,Gn(a,null)}function Gn(a,f){a.F=Date.now(),Hr(a),a.B=Kn(a.A);var w=a.B,P=a.S;Array.isArray(P)||(P=[String(P)]),Vi(w.i,"t",P),a.C=0,w=a.j.L,a.h=new nr,a.g=sa(a.j,w?f:null,!a.u),a.P>0&&(a.O=new le(d(a.Y,a,a.g),a.P)),f=a.V,w=a.g,P=a.ba;var H="readystatechange";Array.isArray(H)||(H&&(pe[0]=H.toString()),H=pe);for(let tt=0;tt<H.length;tt++){const gt=pt(w,H[tt],P||f.handleEvent,!1,f.h||f);if(!gt)break;f.g[gt.key]=gt}f=a.J?mt(a.J):{},a.u?(a.v||(a.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,f)):(a.v="GET",a.g.ea(a.B,a.v,null,f)),Pn(),dn(a.i,a.v,a.B,a.l,a.S,a.u)}bn.prototype.ba=function(a){a=a.target;const f=this.O;f&&sr(a)==3?f.j():this.Y(a)},bn.prototype.Y=function(a){try{if(a==this.g)t:{const xt=sr(this.g),Ut=this.g.ya(),Mt=this.g.ca();if(!(xt<3)&&(xt!=3||this.g&&(this.h.h||this.g.la()||Bi(this.g)))){this.K||xt!=4||Ut==7||(Ut==8||Mt<=0?Pn(3):Pn(2)),di(this);var f=this.g.ca();this.X=f;var w=xr(this);if(this.o=f==200,Nr(this.i,this.v,this.B,this.l,this.S,xt,f),this.o){if(this.U&&!this.L){e:{if(this.g){var P,H=this.g;if((P=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(P)){var tt=P;break e}}tt=null}if(a=tt)Nn(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,so(this,a);else{this.o=!1,this.m=3,de(12),Wr(this),fi(this);break t}}if(this.R){a=!0;let Gt;for(;!this.K&&this.C<w.length;)if(Gt=ls(this,w),Gt==$n){xt==4&&(this.m=4,de(14),a=!1),Nn(this.i,this.l,null,"[Incomplete Response]");break}else if(Gt==rr){this.m=4,de(15),Nn(this.i,this.l,w,"[Invalid Chunk]"),a=!1;break}else Nn(this.i,this.l,Gt,null),so(this,Gt);if(hi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xt!=4||w.length!=0||this.h.h||(this.m=1,de(16),a=!1),this.o=this.o&&a,!a)Nn(this.i,this.l,w,"[Invalid Chunked Response]"),Wr(this),fi(this);else if(w.length>0&&!this.W){this.W=!0;var gt=this.j;gt.g==this&&gt.aa&&!gt.P&&(gt.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),go(gt),gt.P=!0,de(11))}}else Nn(this.i,this.l,w,null),so(this,w);xt==4&&Wr(this),this.o&&!this.K&&(xt==4?mo(this.j,this):(this.o=!1,Hr(this)))}else ra(this.g),f==400&&w.indexOf("Unknown SID")>0?(this.m=3,de(12)):(this.m=0,de(13)),Wr(this),fi(this)}}}catch{}finally{}};function xr(a){if(!hi(a))return a.g.la();const f=Bi(a.g);if(f==="")return"";let w="";const P=f.length,H=sr(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Wr(a),fi(a),"";a.h.i=new o.TextDecoder}for(let tt=0;tt<P;tt++)a.h.h=!0,w+=a.h.i.decode(f[tt],{stream:!(H&&tt==P-1)});return f.length=0,a.h.g+=w,a.C=0,a.h.g}function hi(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function ls(a,f){var w=a.C,P=f.indexOf(`
`,w);return P==-1?$n:(w=Number(f.substring(w,P)),isNaN(w)?rr:(P+=1,P+w>f.length?$n:(f=f.slice(P,P+w),a.C=P+w,f)))}bn.prototype.cancel=function(){this.K=!0,Wr(this)};function Hr(a){a.T=Date.now()+a.H,Fi(a,a.H)}function Fi(a,f){if(a.D!=null)throw Error("WatchDog timer not null");a.D=ge(d(a.aa,a),f)}function di(a){a.D&&(o.clearTimeout(a.D),a.D=null)}bn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(Jt(this.i,this.B),this.M!=2&&(Pn(),de(17)),Wr(this),this.m=2,fi(this)):Fi(this,this.T-a)};function fi(a){a.j.I==0||a.K||mo(a.j,a)}function Wr(a){di(a);var f=a.O;f&&typeof f.dispose=="function"&&f.dispose(),a.O=null,Se(a.V),a.g&&(f=a.g,a.g=null,f.abort(),f.dispose())}function so(a,f){try{var w=a.j;if(w.I!=0&&(w.g==a||ao(w.h,a))){if(!a.L&&ao(w.h,a)&&w.I==3){try{var P=w.Ba.g.parse(f)}catch{P=null}if(Array.isArray(P)&&P.length==3){var H=P;if(H[0]==0){t:if(!w.v){if(w.g)if(w.g.F+3e3<a.F)bi(w),Jn(w);else break t;_i(w),de(18)}}else w.xa=H[1],0<w.xa-w.K&&H[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=ge(d(w.Va,w),6e3));hs(w.h)<=1&&w.ta&&(w.ta=void 0)}else vr(w,11)}else if((a.L||w.g==a)&&bi(w),!T(f))for(H=w.Ba.g.parse(f),f=0;f<H.length;f++){let Mt=H[f];const Gt=Mt[0];if(!(Gt<=w.K))if(w.K=Gt,Mt=Mt[1],w.I==2)if(Mt[0]=="c"){w.M=Mt[1],w.ba=Mt[2];const be=Mt[3];be!=null&&(w.ka=be,w.j.info("VER="+w.ka));const Ne=Mt[4];Ne!=null&&(w.za=Ne,w.j.info("SVER="+w.za));const Ce=Mt[5];Ce!=null&&typeof Ce=="number"&&Ce>0&&(P=1.5*Ce,w.O=P,w.j.info("backChannelRequestTimeoutMs_="+P)),P=w;const Ue=a.g;if(Ue){const Ke=Ue.g?Ue.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ke){var tt=P.h;tt.g||Ke.indexOf("spdy")==-1&&Ke.indexOf("quic")==-1&&Ke.indexOf("h2")==-1||(tt.j=tt.l,tt.g=new Set,tt.h&&(ds(tt,tt.h),tt.h=null))}if(P.G){const Qn=Ue.g?Ue.g.getResponseHeader("X-HTTP-Session-Id"):null;Qn&&(P.wa=Qn,fe(P.J,P.G,Qn))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-a.F,w.j.info("Handshake RTT: "+w.T+"ms")),P=w;var gt=a;if(P.na=yo(P,P.L?P.ba:null,P.W),gt.L){Go(P.h,gt);var xt=gt,Ut=P.O;Ut&&(xt.H=Ut),xt.D&&(di(xt),Hr(xt)),P.g=gt}else ia(P);w.i.length>0&&gs(w)}else Mt[0]!="stop"&&Mt[0]!="close"||vr(w,7);else w.I==3&&(Mt[0]=="stop"||Mt[0]=="close"?Mt[0]=="stop"?vr(w,7):ps(w):Mt[0]!="noop"&&w.l&&w.l.qa(Mt),w.A=0)}}Pn(4)}catch{}}var us=class{constructor(a,f){this.g=a,this.map=f}};function oo(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function $o(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function hs(a){return a.h?1:a.g?a.g.size:0}function ao(a,f){return a.h?a.h==f:a.g?a.g.has(f):!1}function ds(a,f){a.g?a.g.add(f):a.h=f}function Go(a,f){a.h&&a.h==f?a.h=null:a.g&&a.g.has(f)&&a.g.delete(f)}oo.prototype.cancel=function(){if(this.i=Mi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Mi(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let f=a.i;for(const w of a.g.values())f=f.concat(w.G);return f}return g(a.i)}var Ko=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ge(a,f){if(a){a=a.split("&");for(let w=0;w<a.length;w++){const P=a[w].indexOf("=");let H,tt=null;P>=0?(H=a[w].substring(0,P),tt=a[w].substring(P+1)):H=a[w],f(H,tt?decodeURIComponent(tt.replace(/\+/g," ")):"")}}}function yr(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;a instanceof yr?(this.l=a.l,pi(this,a.j),this.o=a.o,this.g=a.g,$r(this,a.u),this.h=a.h,co(this,ji(a.i)),this.m=a.m):a&&(f=String(a).match(Ko))?(this.l=!1,pi(this,f[1]||"",!0),this.o=on(f[2]||""),this.g=on(f[3]||"",!0),$r(this,f[4]),this.h=on(f[5]||"",!0),co(this,f[6]||"",!0),this.m=on(f[7]||"")):(this.l=!1,this.i=new Yr(null,this.l))}yr.prototype.toString=function(){const a=[];var f=this.j;f&&a.push(Kr(f,Jo,!0),":");var w=this.g;return(w||f=="file")&&(a.push("//"),(f=this.o)&&a.push(Kr(f,Jo,!0),"@"),a.push(fn(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&a.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&a.push("/"),a.push(Kr(w,w.charAt(0)=="/"?Ja:Qo,!0))),(w=this.i.toString())&&a.push("?",w),(w=this.m)&&a.push("#",Kr(w,Qa)),a.join("")},yr.prototype.resolve=function(a){const f=Kn(this);let w=!!a.j;w?pi(f,a.j):w=!!a.o,w?f.o=a.o:w=!!a.g,w?f.g=a.g:w=a.u!=null;var P=a.h;if(w)$r(f,a.u);else if(w=!!a.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var H=f.h.lastIndexOf("/");H!=-1&&(P=f.h.slice(0,H+1)+P)}if(H=P,H==".."||H==".")P="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){P=H.lastIndexOf("/",0)==0,H=H.split("/");const tt=[];for(let gt=0;gt<H.length;){const xt=H[gt++];xt=="."?P&&gt==H.length&&tt.push(""):xt==".."?((tt.length>1||tt.length==1&&tt[0]!="")&&tt.pop(),P&&gt==H.length&&tt.push("")):(tt.push(xt),P=!0)}P=tt.join("/")}else P=H}return w?f.h=P:w=a.i.toString()!=="",w?co(f,ji(a.i)):w=!!a.m,w&&(f.m=a.m),f};function Kn(a){return new yr(a)}function pi(a,f,w){a.j=w?on(f,!0):f,a.j&&(a.j=a.j.replace(/:$/,""))}function $r(a,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);a.u=f}else a.u=null}function co(a,f,w){f instanceof Yr?(a.i=f,An(a.i,a.l)):(w||(f=Kr(f,Xo)),a.i=new Yr(f,a.l))}function fe(a,f,w){a.i.set(f,w)}function Gr(a){return fe(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function on(a,f){return a?f?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Kr(a,f,w){return typeof a=="string"?(a=encodeURI(a).replace(f,Yo),w&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Yo(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Jo=/[#\/\?@]/g,Qo=/[#\?:]/g,Ja=/[#\?]/g,Xo=/[#\?@]/g,Qa=/#/g;function Yr(a,f){this.h=this.g=null,this.i=a||null,this.j=!!f}function Jr(a){a.g||(a.g=new Map,a.h=0,a.i&&Ge(a.i,function(f,w){a.add(decodeURIComponent(f.replace(/\+/g," ")),w)}))}n=Yr.prototype,n.add=function(a,f){Jr(this),this.i=null,a=Qr(this,a);let w=this.g.get(a);return w||this.g.set(a,w=[]),w.push(f),this.h+=1,this};function Zo(a,f){Jr(a),f=Qr(a,f),a.g.has(f)&&(a.i=null,a.h-=a.g.get(f).length,a.g.delete(f))}function ta(a,f){return Jr(a),f=Qr(a,f),a.g.has(f)}n.forEach=function(a,f){Jr(this),this.g.forEach(function(w,P){w.forEach(function(H){a.call(f,H,P,this)},this)},this)};function Cr(a,f){Jr(a);let w=[];if(typeof f=="string")ta(a,f)&&(w=w.concat(a.g.get(Qr(a,f))));else for(a=Array.from(a.g.values()),f=0;f<a.length;f++)w=w.concat(a[f]);return w}n.set=function(a,f){return Jr(this),this.i=null,a=Qr(this,a),ta(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[f]),this.h+=1,this},n.get=function(a,f){return a?(a=Cr(this,a),a.length>0?String(a[0]):f):f};function Vi(a,f,w){Zo(a,f),w.length>0&&(a.i=null,a.g.set(Qr(a,f),g(w)),a.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],f=Array.from(this.g.keys());for(let P=0;P<f.length;P++){var w=f[P];const H=fn(w);w=Cr(this,w);for(let tt=0;tt<w.length;tt++){let gt=H;w[tt]!==""&&(gt+="="+fn(w[tt])),a.push(gt)}}return this.i=a.join("&")};function ji(a){const f=new Yr;return f.i=a.i,a.g&&(f.g=new Map(a.g),f.h=a.h),f}function Qr(a,f){return f=String(f),a.j&&(f=f.toLowerCase()),f}function An(a,f){f&&!a.j&&(Jr(a),a.i=null,a.g.forEach(function(w,P){const H=P.toLowerCase();P!=H&&(Zo(this,P),Vi(this,H,w))},a)),a.j=f}function Xa(a,f){const w=new gr;if(o.Image){const P=new Image;P.onload=m(Wt,w,"TestLoadImage: loaded",!0,f,P),P.onerror=m(Wt,w,"TestLoadImage: error",!1,f,P),P.onabort=m(Wt,w,"TestLoadImage: abort",!1,f,P),P.ontimeout=m(Wt,w,"TestLoadImage: timeout",!1,f,P),o.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=a}else f(!1)}function ea(a,f){const w=new gr,P=new AbortController,H=setTimeout(()=>{P.abort(),Wt(w,"TestPingServer: timeout",!1,f)},1e4);fetch(a,{signal:P.signal}).then(tt=>{clearTimeout(H),tt.ok?Wt(w,"TestPingServer: ok",!0,f):Wt(w,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(H),Wt(w,"TestPingServer: error",!1,f)})}function Wt(a,f,w,P,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),P(w)}catch{}}function Za(){this.g=new Ft}function lo(a){this.i=a.Sb||null,this.h=a.ab||!1}v(lo,hn),lo.prototype.g=function(){return new Yn(this.i,this.h)};function Yn(a,f){Nt.call(this),this.H=a,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Yn,Nt),n=Yn.prototype,n.open=function(a,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=f,this.readyState=1,Lr(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(f.body=a),(this.H||o).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,gi(this)),this.readyState=0},n.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Lr(this)),this.g&&(this.readyState=3,Lr(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;uo(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function uo(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}n.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var f=a.value?a.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!a.done}))&&(this.response=this.responseText+=f)}a.done?gi(this):Lr(this),this.readyState==3&&uo(this)}},n.Oa=function(a){this.g&&(this.response=this.responseText=a,gi(this))},n.Na=function(a){this.g&&(this.response=a,gi(this))},n.ga=function(){this.g&&gi(this)};function gi(a){a.readyState=4,a.l=null,a.j=null,a.B=null,Lr(a)}n.setRequestHeader=function(a,f){this.A.append(a,f)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],f=this.h.entries();for(var w=f.next();!w.done;)w=w.value,a.push(w[0]+": "+w[1]),w=f.next();return a.join(`\r
`)};function Lr(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Yn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function fs(a){let f="";return Z(a,function(w,P){f+=P,f+=":",f+=w,f+=`\r
`}),f}function ho(a,f,w){t:{for(P in w){var P=!1;break t}P=!0}P||(w=fs(w),typeof a=="string"?w!=null&&fn(w):fe(a,f,w))}function Ve(a){Nt.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(Ve,Nt);var tc=/^https?$/i,fo=["POST","PUT"];n=Ve.prototype,n.Fa=function(a){this.H=a},n.ea=function(a,f,w,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);f=f?f.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Je.g(),this.g.onreadystatechange=_(d(this.Ca,this));try{this.B=!0,this.g.open(f,String(a),!0),this.B=!1}catch(tt){mi(this,tt);return}if(a=w||"",w=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var H in P)w.set(H,P[H]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const tt of P.keys())w.set(tt,P.get(tt));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(w.keys()).find(tt=>tt.toLowerCase()=="content-type"),H=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(fo,f,void 0)>=0)||P||H||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[tt,gt]of w)this.g.setRequestHeader(tt,gt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(tt){mi(this,tt)}};function mi(a,f){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=f,a.o=5,Xr(a),Rr(a)}function Xr(a){a.A||(a.A=!0,Ct(a,"complete"),Ct(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,Ct(this,"complete"),Ct(this,"abort"),Rr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rr(this,!0)),Ve.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?na(this):this.Xa())},n.Xa=function(){na(this)};function na(a){if(a.h&&typeof s<"u"){if(a.v&&sr(a)==4)setTimeout(a.Ca.bind(a),0);else if(Ct(a,"readystatechange"),sr(a)==4){a.h=!1;try{const tt=a.ca();t:switch(tt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break t;default:f=!1}var w;if(!(w=f)){var P;if(P=tt===0){let gt=String(a.D).match(Ko)[1]||null;!gt&&o.self&&o.self.location&&(gt=o.self.location.protocol.slice(0,-1)),P=!tc.test(gt?gt.toLowerCase():"")}w=P}if(w)Ct(a,"complete"),Ct(a,"success");else{a.o=6;try{var H=sr(a)>2?a.g.statusText:""}catch{H=""}a.l=H+" ["+a.ca()+"]",Xr(a)}}finally{Rr(a)}}}}function Rr(a,f){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const w=a.g;a.g=null,f||Ct(a,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function sr(a){return a.g?a.g.readyState:0}n.ca=function(){try{return sr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(a){if(this.g){var f=this.g.responseText;return a&&f.indexOf(a)==0&&(f=f.substring(a.length)),he(f)}};function Bi(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function ra(a){const f={};a=(a.g&&sr(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<a.length;P++){if(T(a[P]))continue;var w=cs(a[P]);const H=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const tt=f[H]||[];f[H]=tt,tt.push(w)}at(f,function(P){return P.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function yi(a,f,w){return w&&w.internalChannelParams&&w.internalChannelParams[a]||f}function po(a){this.za=0,this.i=[],this.j=new gr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=yi("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=yi("baseRetryDelayMs",5e3,a),this.Za=yi("retryDelaySeedMs",1e4,a),this.Ta=yi("forwardChannelMaxRetries",2,a),this.va=yi("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new oo(a&&a.concurrentRequestLimit),this.Ba=new Za,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=po.prototype,n.ka=8,n.I=1,n.connect=function(a,f,w,P){de(0),this.W=a,this.H=f||{},w&&P!==void 0&&(this.H.OSID=w,this.H.OAID=P),this.F=this.X,this.J=yo(this,null,this.W),gs(this)};function ps(a){if(kr(a),a.I==3){var f=a.V++,w=Kn(a.J);if(fe(w,"SID",a.M),fe(w,"RID",f),fe(w,"TYPE","terminate"),Zr(a,w),f=new bn(a,a.j,f),f.M=2,f.A=Gr(Kn(w)),w=!1,o.navigator&&o.navigator.sendBeacon)try{w=o.navigator.sendBeacon(f.A.toString(),"")}catch{}!w&&o.Image&&(new Image().src=f.A,w=!0),w||(f.g=sa(f.j,null),f.g.ea(f.A)),f.F=Date.now(),Hr(f)}ys(a)}function Jn(a){a.g&&(go(a),a.g.cancel(),a.g=null)}function kr(a){Jn(a),a.v&&(o.clearTimeout(a.v),a.v=null),bi(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function gs(a){if(!$o(a.h)&&!a.m){a.m=!0;var f=a.Ea;K||E(),Q||(K(),Q=!0),S.add(f,a),a.D=0}}function vi(a,f){return hs(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=f.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=ge(d(a.Ea,a,f),qi(a,a.D)),a.D++,!0)}n.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const H=new bn(this,this.j,a);let tt=this.o;if(this.U&&(tt?(tt=mt(tt),z(tt,this.U)):tt=this.U),this.u!==null||this.R||(H.J=tt,tt=null),this.S)t:{for(var f=0,w=0;w<this.i.length;w++){e:{var P=this.i[w];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break e}P=void 0}if(P===void 0)break;if(f+=P,f>4096){f=w;break t}if(f===4096||w===this.i.length-1){f=w+1;break t}}f=1e3}else f=1e3;f=wi(this,H,f),w=Kn(this.J),fe(w,"RID",a),fe(w,"CVER",22),this.G&&fe(w,"X-HTTP-Session-Id",this.G),Zr(this,w),tt&&(this.R?f="headers="+fn(fs(tt))+"&"+f:this.u&&ho(w,this.u,tt)),ds(this.h,H),this.Ra&&fe(w,"TYPE","init"),this.S?(fe(w,"$req",f),fe(w,"SID","null"),H.U=!0,ir(H,w,null)):ir(H,w,f),this.I=2}}else this.I==3&&(a?or(this,a):this.i.length==0||$o(this.h)||or(this))};function or(a,f){var w;f?w=f.l:w=a.V++;const P=Kn(a.J);fe(P,"SID",a.M),fe(P,"RID",w),fe(P,"AID",a.K),Zr(a,P),a.u&&a.o&&ho(P,a.u,a.o),w=new bn(a,a.j,w,a.D+1),a.u===null&&(w.J=a.o),f&&(a.i=f.G.concat(a.i)),f=wi(a,w,1e3),w.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),ds(a.h,w),ir(w,P,f)}function Zr(a,f){a.H&&Z(a.H,function(w,P){fe(f,P,w)}),a.l&&Z({},function(w,P){fe(f,P,w)})}function wi(a,f,w){w=Math.min(a.i.length,w);const P=a.l?d(a.l.Ka,a.l,a):null;t:{var H=a.i;let xt=-1;for(;;){const Ut=["count="+w];xt==-1?w>0?(xt=H[0].g,Ut.push("ofs="+xt)):xt=0:Ut.push("ofs="+xt);let Mt=!0;for(let Gt=0;Gt<w;Gt++){var tt=H[Gt].g;const be=H[Gt].map;if(tt-=xt,tt<0)xt=Math.max(0,H[Gt].g-100),Mt=!1;else try{tt="req"+tt+"_"||"";try{var gt=be instanceof Map?be:Object.entries(be);for(const[Ne,Ce]of gt){let Ue=Ce;l(Ce)&&(Ue=Xt(Ce)),Ut.push(tt+Ne+"="+encodeURIComponent(Ue))}}catch(Ne){throw Ut.push(tt+"type="+encodeURIComponent("_badmap")),Ne}}catch{P&&P(be)}}if(Mt){gt=Ut.join("&");break t}}gt=void 0}return a=a.i.splice(0,w),f.G=a,gt}function ia(a){if(!a.g&&!a.v){a.Y=1;var f=a.Da;K||E(),Q||(K(),Q=!0),S.add(f,a),a.A=0}}function _i(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=ge(d(a.Da,a),qi(a,a.A)),a.A++,!0)}n.Da=function(){if(this.v=null,ms(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=ge(d(this.Wa,this),a)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,de(10),Jn(this),ms(this))};function go(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function ms(a){a.g=new bn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var f=Kn(a.na);fe(f,"RID","rpc"),fe(f,"SID",a.M),fe(f,"AID",a.K),fe(f,"CI",a.F?"0":"1"),!a.F&&a.ia&&fe(f,"TO",a.ia),fe(f,"TYPE","xmlhttp"),Zr(a,f),a.u&&a.o&&ho(f,a.u,a.o),a.O&&(a.g.H=a.O);var w=a.g;a=a.ba,w.M=1,w.A=Gr(Kn(f)),w.u=null,w.R=!0,Gn(w,a)}n.Va=function(){this.C!=null&&(this.C=null,Jn(this),_i(this),de(19))};function bi(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function mo(a,f){var w=null;if(a.g==f){bi(a),go(a),a.g=null;var P=2}else if(ao(a.h,f))w=f.G,Go(a.h,f),P=1;else return;if(a.I!=0){if(f.o)if(P==1){w=f.u?f.u.length:0,f=Date.now()-f.F;var H=a.D;P=Tr(),Ct(P,new ie(P,w)),gs(a)}else ia(a);else if(H=f.m,H==3||H==0&&f.X>0||!(P==1&&vi(a,f)||P==2&&_i(a)))switch(w&&w.length>0&&(f=a.h,f.i=f.i.concat(w)),H){case 1:vr(a,5);break;case 4:vr(a,10);break;case 3:vr(a,6);break;default:vr(a,2)}}}function qi(a,f){let w=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(w*=2),w*f}function vr(a,f){if(a.j.info("Error code "+f),f==2){var w=d(a.bb,a),P=a.Ua;const H=!P;P=new yr(P||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||pi(P,"https"),Gr(P),H?Xa(P.toString(),w):ea(P.toString(),w)}else de(2);a.I=0,a.l&&a.l.pa(f),ys(a),kr(a)}n.bb=function(a){a?(this.j.info("Successfully pinged google.com"),de(2)):(this.j.info("Failed to ping google.com"),de(1))};function ys(a){if(a.I=0,a.ja=[],a.l){const f=Mi(a.h);(f.length!=0||a.i.length!=0)&&(N(a.ja,f),N(a.ja,a.i),a.h.i.length=0,g(a.i),a.i.length=0),a.l.oa()}}function yo(a,f,w){var P=w instanceof yr?Kn(w):new yr(w);if(P.g!="")f&&(P.g=f+"."+P.g),$r(P,P.u);else{var H=o.location;P=H.protocol,f=f?f+"."+H.hostname:H.hostname,H=+H.port;const tt=new yr(null);P&&pi(tt,P),f&&(tt.g=f),H&&$r(tt,H),w&&(tt.h=w),P=tt}return w=a.G,f=a.wa,w&&f&&fe(P,w,f),fe(P,"VER",a.ka),Zr(a,P),P}function sa(a,f,w){if(f&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=a.Aa&&!a.ma?new Ve(new lo({ab:w})):new Ve(a.ma),f.Fa(a.L),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ui(){}n=Ui.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Dr(){}Dr.prototype.g=function(a,f){return new pn(a,f)};function pn(a,f){Nt.call(this),this.g=new po(f),this.l=a,this.h=f&&f.messageUrlParams||null,a=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(a?a["X-WebChannel-Content-Type"]=f.messageContentType:a={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(a?a["X-WebChannel-Client-Profile"]=f.sa:a={"X-WebChannel-Client-Profile":f.sa}),this.g.U=a,(a=f&&f.Qb)&&!T(a)&&(this.g.u=a),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!T(f)&&(this.g.G=f,a=this.h,a!==null&&f in a&&(a=this.h,f in a&&delete a[f])),this.j=new p(this)}v(pn,Nt),pn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){ps(this.g)},pn.prototype.o=function(a){var f=this.g;if(typeof a=="string"){var w={};w.__data__=a,a=w}else this.v&&(w={},w.__data__=Xt(a),a=w);f.i.push(new us(f.Ya++,a)),f.I==3&&gs(f)},pn.prototype.N=function(){this.g.l=null,delete this.j,ps(this.g),delete this.g,pn.Z.N.call(this)};function ti(a){Te.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var f=a.__sm__;if(f){t:{for(const w in f){a=w;break t}a=void 0}(this.i=a)&&(a=this.i,f=f!==null&&a in f?f[a]:void 0),this.data=f}else this.data=a}v(ti,Te);function vs(){De.call(this),this.status=1}v(vs,De);function p(a){this.g=a}v(p,Ui),p.prototype.ra=function(){Ct(this.g,"a")},p.prototype.qa=function(a){Ct(this.g,new ti(a))},p.prototype.pa=function(a){Ct(this.g,new vs)},p.prototype.oa=function(){Ct(this.g,"b")},Dr.prototype.createWebChannel=Dr.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,im=function(){return new Dr},rm=function(){return Tr()},nm=_n,Fh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Wn.NO_ERROR=0,Wn.TIMEOUT=8,Wn.HTTP_ERROR=6,ql=Wn,xn.COMPLETE="complete",em=xn,_e.EventType=Tn,Tn.OPEN="a",Tn.CLOSE="b",Tn.ERROR="c",Tn.MESSAGE="d",Nt.prototype.listen=Nt.prototype.J,Ac=_e,Ve.prototype.listenOnce=Ve.prototype.K,Ve.prototype.getLastError=Ve.prototype.Ha,Ve.prototype.getLastErrorCode=Ve.prototype.ya,Ve.prototype.getStatus=Ve.prototype.ca,Ve.prototype.getResponseJson=Ve.prototype.La,Ve.prototype.getResponseText=Ve.prototype.la,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Fa,tm=Ve}).apply(typeof Ll<"u"?Ll:typeof self<"u"?self:typeof window<"u"?window:{});const ip="@firebase/firestore",sp="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}qn.UNAUTHENTICATED=new qn(null),qn.GOOGLE_CREDENTIALS=new qn("google-credentials-uid"),qn.FIRST_PARTY=new qn("first-party-uid"),qn.MOCK_USER=new qn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ha="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo=new yd("@firebase/firestore");function Aa(){return jo.logLevel}function jt(n,...t){if(jo.logLevel<=ye.DEBUG){const e=t.map(_d);jo.debug(`Firestore (${Ha}): ${n}`,...e)}}function rs(n,...t){if(jo.logLevel<=ye.ERROR){const e=t.map(_d);jo.error(`Firestore (${Ha}): ${n}`,...e)}}function Oa(n,...t){if(jo.logLevel<=ye.WARN){const e=t.map(_d);jo.warn(`Firestore (${Ha}): ${n}`,...e)}}function _d(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(n,t,e){let r="Unexpected state";typeof t=="string"?r=t:e=t,sm(n,r,e)}function sm(n,t,e){let r=`FIRESTORE (${Ha}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{r+=" CONTEXT: "+JSON.stringify(e)}catch{r+=" CONTEXT: "+e}throw rs(r),new Error(r)}function xe(n,t,e,r){let i="Unexpected state";typeof e=="string"?i=e:r=e,n||sm(t,i,r)}function ce(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const It={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class zt extends as{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class ry{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(qn.UNAUTHENTICATED))}shutdown(){}}class iy{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class sy{constructor(t){this.t=t,this.currentUser=qn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){xe(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,e(u)):Promise.resolve();let s=new ts;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ts,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{jt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(jt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ts)}},0),o()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==t?(jt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe(typeof r.accessToken=="string",31837,{l:r}),new om(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return xe(t===null||typeof t=="string",2055,{h:t}),new qn(t)}}class oy{constructor(t,e,r){this.P=t,this.T=e,this.I=r,this.type="FirstParty",this.user=qn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ay{constructor(t,e,r){this.P=t,this.T=e,this.I=r}getToken(){return Promise.resolve(new oy(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(qn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class op{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cy{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Er(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){xe(this.o===void 0,3512);const r=s=>{s.error!=null&&jt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,jt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{jt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):jt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new op(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(xe(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new op(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<n;r++)e[r]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=ly(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<e&&(r+=t.charAt(i[s]%62))}return r}}function ve(n,t){return n<t?-1:n>t?1:0}function Mh(n,t){const e=Math.min(n.length,t.length);for(let r=0;r<e;r++){const i=n.charAt(r),s=t.charAt(r);if(i!==s)return dh(i)===dh(s)?ve(i,s):dh(i)?1:-1}return ve(n.length,t.length)}const uy=55296,hy=57343;function dh(n){const t=n.charCodeAt(0);return t>=uy&&t<=hy}function Fa(n,t,e){return n.length===t.length&&n.every((r,i)=>e(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap="__name__";class Si{constructor(t,e,r){e===void 0?e=0:e>t.length&&ee(637,{offset:e,range:t.length}),r===void 0?r=t.length-e:r>t.length-e&&ee(1746,{length:r,range:t.length-e}),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return Si.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Si?t.forEach(r=>{e.push(r)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let i=0;i<r;i++){const s=Si.compareSegments(t.get(i),e.get(i));if(s!==0)return s}return ve(t.length,e.length)}static compareSegments(t,e){const r=Si.isNumericId(t),i=Si.isNumericId(e);return r&&!i?-1:!r&&i?1:r&&i?Si.extractNumericId(t).compare(Si.extractNumericId(e)):Mh(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Us.fromString(t.substring(4,t.length-2))}}class ze extends Si{construct(t,e,r){return new ze(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new zt(It.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(i=>i.length>0))}return new ze(e)}static emptyPath(){return new ze([])}}const dy=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kn extends Si{construct(t,e,r){return new kn(t,e,r)}static isValidIdentifier(t){return dy.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ap}static keyField(){return new kn([ap])}static fromServerFormat(t){const e=[];let r="",i=0;const s=()=>{if(r.length===0)throw new zt(It.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let o=!1;for(;i<t.length;){const l=t[i];if(l==="\\"){if(i+1===t.length)throw new zt(It.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new zt(It.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new zt(It.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new kn(e)}static emptyPath(){return new kn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(t){this.path=t}static fromPath(t){return new Yt(ze.fromString(t))}static fromName(t){return new Yt(ze.fromString(t).popFirst(5))}static empty(){return new Yt(ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ze.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return ze.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Yt(new ze(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(n,t,e){if(!e)throw new zt(It.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function fy(n,t,e,r){if(t===!0&&r===!0)throw new zt(It.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function cp(n){if(!Yt.isDocumentKey(n))throw new zt(It.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function lp(n){if(Yt.isDocumentKey(n))throw new zt(It.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function cm(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Ad(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":ee(12329,{type:typeof n})}function is(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new zt(It.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Ad(n);throw new zt(It.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(n,t){const e={typeString:n};return t&&(e.value=t),e}function Qc(n,t){if(!cm(n))throw new zt(It.INVALID_ARGUMENT,"JSON must be an object");let e;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in n)){e=`JSON missing required field: '${r}'`;break}const o=n[r];if(i&&typeof o!==i){e=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){e=`Expected '${r}' field to equal '${s.value}'`;break}}if(e)throw new zt(It.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up=-62135596800,hp=1e6;class He{static now(){return He.fromMillis(Date.now())}static fromDate(t){return He.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor((t-1e3*e)*hp);return new He(e,r)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new zt(It.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new zt(It.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<up)throw new zt(It.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new zt(It.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hp}_compareTo(t){return this.seconds===t.seconds?ve(this.nanoseconds,t.nanoseconds):ve(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:He._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Qc(t,He._jsonSchema))return new He(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-up;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}He._jsonSchemaVersion="firestore/timestamp/1.0",He._jsonSchema={type:un("string",He._jsonSchemaVersion),seconds:un("number"),nanoseconds:un("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{static fromTimestamp(t){return new se(t)}static min(){return new se(new He(0,0))}static max(){return new se(new He(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=-1;function py(n,t){const e=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=se.fromTimestamp(r===1e9?new He(e+1,0):new He(e,r));return new $s(i,Yt.empty(),t)}function gy(n){return new $s(n.readTime,n.key,jc)}class $s{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new $s(se.min(),Yt.empty(),jc)}static max(){return new $s(se.max(),Yt.empty(),jc)}}function my(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=Yt.comparator(n.documentKey,t.documentKey),e!==0?e:ve(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vy{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wa(n){if(n.code!==It.FAILED_PRECONDITION||n.message!==yy)throw n;jt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new At((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(e,s).next(r,i)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof At?e:At.resolve(e)}catch(e){return At.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):At.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):At.reject(e)}static resolve(t){return new At((e,r)=>{e(t)})}static reject(t){return new At((e,r)=>{r(t)})}static waitFor(t){return new At((e,r)=>{let i=0,s=0,o=!1;t.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&e()},u=>r(u))}),o=!0,s===i&&e()})}static or(t){let e=At.resolve(!1);for(const r of t)e=e.next(i=>i?At.resolve(i):r());return e}static forEach(t,e){const r=[];return t.forEach((i,s)=>{r.push(e.call(this,i,s))}),this.waitFor(r)}static mapArray(t,e){return new At((r,i)=>{const s=t.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const d=u;e(t[d]).next(m=>{o[d]=m,++l,l===s&&r(o)},m=>i(m))}})}static doWhile(t,e){return new At((r,i)=>{const s=()=>{t()===!0?e().next(()=>{s()},i):r()};s()})}}function wy(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function $a(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>e.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}_u.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed=-1;function bu(n){return n==null}function tu(n){return n===0&&1/n==-1/0}function _y(n){return typeof n=="number"&&Number.isInteger(n)&&!tu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm="";function by(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=dp(t)),t=Ay(n.get(e),t);return dp(t)}function Ay(n,t){let e=t;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":e+="";break;case lm:e+="";break;default:e+=s}}return e}function dp(n){return n+lm+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function to(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function um(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(t,e){this.comparator=t,this.root=e||Rn.EMPTY}insert(t,e){return new Ye(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Rn.BLACK,null,null))}remove(t){return new Ye(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Rn.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return e+r.left.size;i<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,r)=>(t(e,r),!1))}toString(){const t=[];return this.inorderTraversal((e,r)=>(t.push(`${e}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Rl(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Rl(this.root,t,this.comparator,!1)}getReverseIterator(){return new Rl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Rl(this.root,t,this.comparator,!0)}}class Rl{constructor(t,e,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?r(t.key,e):1,e&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Rn{constructor(t,e,r,i,s){this.key=t,this.value=e,this.color=r??Rn.RED,this.left=i??Rn.EMPTY,this.right=s??Rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,i,s){return new Rn(t??this.key,e??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,e,r),null):s===0?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Rn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),e(t,i.key)===0){if(i.right.isEmpty())return Rn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ee(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw ee(27949);return t+(this.isRed()?0:1)}}Rn.EMPTY=null,Rn.RED=!0,Rn.BLACK=!1;Rn.EMPTY=new class{constructor(){this.size=0}get key(){throw ee(57766)}get value(){throw ee(16141)}get color(){throw ee(16727)}get left(){throw ee(29726)}get right(){throw ee(36894)}copy(t,e,r,i,s){return this}insert(t,e,r){return new Rn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(t){this.comparator=t,this.data=new Ye(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,r)=>(t(e),!1))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new pp(this.data.getIterator())}getIteratorFrom(t){return new pp(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(r=>{e=e.add(r)}),e}isEqual(t){if(!(t instanceof wn)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const i=e.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new wn(this.comparator);return e.data=t,e}}class pp{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(t){this.fields=t,t.sort(kn.comparator)}static empty(){return new Ir([])}unionWith(t){let e=new wn(kn.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new Ir(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Fa(this.fields,t.fields,(e,r)=>e.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new hm("Invalid base64 string: "+s):s}}(t);return new On(e)}static fromUint8Array(t){const e=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new On(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ve(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}On.EMPTY_BYTE_STRING=new On("");const Ey=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gs(n){if(xe(!!n,39018),typeof n=="string"){let t=0;const e=Ey.exec(n);if(xe(!!e,46558,{timestamp:n}),e[1]){let i=e[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:en(n.seconds),nanos:en(n.nanos)}}function en(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ks(n){return typeof n=="string"?On.fromBase64String(n):On.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm="server_timestamp",fm="__type__",pm="__previous_value__",gm="__local_write_time__";function Id(n){var e,r;return((r=(((e=n==null?void 0:n.mapValue)==null?void 0:e.fields)||{})[fm])==null?void 0:r.stringValue)===dm}function Au(n){const t=n.mapValue.fields[pm];return Id(t)?Au(t):t}function Bc(n){const t=Gs(n.mapValue.fields[gm].timestampValue);return new He(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(t,e,r,i,s,o,l,u,d,m){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=m}}const eu="(default)";class qc{constructor(t,e){this.projectId=t,this.database=e||eu}static empty(){return new qc("","")}get isDefaultDatabase(){return this.database===eu}isEqual(t){return t instanceof qc&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="__type__",ym="__max__",kl={mapValue:{fields:{__type__:{stringValue:ym}}}},vm="__vector__",nu="value";function Ys(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Id(n)?4:Ty(n)?9007199254740991:Sy(n)?10:11:ee(28295,{value:n})}function ki(n,t){if(n===t)return!0;const e=Ys(n);if(e!==Ys(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Bc(n).isEqual(Bc(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Gs(i.timestampValue),l=Gs(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(i,s){return Ks(i.bytesValue).isEqual(Ks(s.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,s){return en(i.geoPointValue.latitude)===en(s.geoPointValue.latitude)&&en(i.geoPointValue.longitude)===en(s.geoPointValue.longitude)}(n,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return en(i.integerValue)===en(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=en(i.doubleValue),l=en(s.doubleValue);return o===l?tu(o)===tu(l):isNaN(o)&&isNaN(l)}return!1}(n,t);case 9:return Fa(n.arrayValue.values||[],t.arrayValue.values||[],ki);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(fp(o)!==fp(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!ki(o[u],l[u])))return!1;return!0}(n,t);default:return ee(52216,{left:n})}}function Uc(n,t){return(n.values||[]).find(e=>ki(e,t))!==void 0}function Ma(n,t){if(n===t)return 0;const e=Ys(n),r=Ys(t);if(e!==r)return ve(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return ve(n.booleanValue,t.booleanValue);case 2:return function(s,o){const l=en(s.integerValue||s.doubleValue),u=en(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(n,t);case 3:return gp(n.timestampValue,t.timestampValue);case 4:return gp(Bc(n),Bc(t));case 5:return Mh(n.stringValue,t.stringValue);case 6:return function(s,o){const l=Ks(s),u=Ks(o);return l.compareTo(u)}(n.bytesValue,t.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const m=ve(l[d],u[d]);if(m!==0)return m}return ve(l.length,u.length)}(n.referenceValue,t.referenceValue);case 8:return function(s,o){const l=ve(en(s.latitude),en(o.latitude));return l!==0?l:ve(en(s.longitude),en(o.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return mp(n.arrayValue,t.arrayValue);case 10:return function(s,o){var _,g,N,L;const l=s.fields||{},u=o.fields||{},d=(_=l[nu])==null?void 0:_.arrayValue,m=(g=u[nu])==null?void 0:g.arrayValue,v=ve(((N=d==null?void 0:d.values)==null?void 0:N.length)||0,((L=m==null?void 0:m.values)==null?void 0:L.length)||0);return v!==0?v:mp(d,m)}(n.mapValue,t.mapValue);case 11:return function(s,o){if(s===kl.mapValue&&o===kl.mapValue)return 0;if(s===kl.mapValue)return 1;if(o===kl.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),d=o.fields||{},m=Object.keys(d);u.sort(),m.sort();for(let v=0;v<u.length&&v<m.length;++v){const _=Mh(u[v],m[v]);if(_!==0)return _;const g=Ma(l[u[v]],d[m[v]]);if(g!==0)return g}return ve(u.length,m.length)}(n.mapValue,t.mapValue);default:throw ee(23264,{he:e})}}function gp(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return ve(n,t);const e=Gs(n),r=Gs(t),i=ve(e.seconds,r.seconds);return i!==0?i:ve(e.nanos,r.nanos)}function mp(n,t){const e=n.values||[],r=t.values||[];for(let i=0;i<e.length&&i<r.length;++i){const s=Ma(e[i],r[i]);if(s)return s}return ve(e.length,r.length)}function Va(n){return Vh(n)}function Vh(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const r=Gs(e);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return Ks(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return Yt.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let r="[",i=!0;for(const s of e.values||[])i?i=!1:r+=",",r+=Vh(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(e){const r=Object.keys(e.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Vh(e.fields[o])}`;return i+"}"}(n.mapValue):ee(61005,{value:n})}function Ul(n){switch(Ys(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Au(n);return t?16+Ul(t):16;case 5:return 2*n.stringValue.length;case 6:return Ks(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Ul(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return to(r.fields,(s,o)=>{i+=s.length+Ul(o)}),i}(n.mapValue);default:throw ee(13486,{value:n})}}function jh(n){return!!n&&"integerValue"in n}function Sd(n){return!!n&&"arrayValue"in n}function yp(n){return!!n&&"nullValue"in n}function vp(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function zl(n){return!!n&&"mapValue"in n}function Sy(n){var e,r;return((r=(((e=n==null?void 0:n.mapValue)==null?void 0:e.fields)||{})[mm])==null?void 0:r.stringValue)===vm}function Pc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const t={mapValue:{fields:{}}};return to(n.mapValue.fields,(e,r)=>t.mapValue.fields[e]=Pc(r)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Pc(n.arrayValue.values[e]);return t}return{...n}}function Ty(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===ym}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(t){this.value=t}static empty(){return new fr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!zl(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Pc(e)}setAll(t){let e=kn.emptyPath(),r={},i=[];t.forEach((o,l)=>{if(!e.isImmediateParentOf(l)){const u=this.getFieldsMap(e);this.applyChanges(u,r,i),r={},i=[],e=l.popLast()}o?r[l.lastSegment()]=Pc(o):i.push(l.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,r,i)}delete(t){const e=this.field(t.popLast());zl(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return ki(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=e.mapValue.fields[t.get(r)];zl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,r){to(e,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new fr(Pc(this.value))}}function wm(n){const t=[];return to(n.fields,(e,r)=>{const i=new kn([e]);if(zl(r)){const s=wm(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new Ir(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(t,e,r,i,s,o,l){this.key=t,this.documentType=e,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(t){return new Un(t,0,se.min(),se.min(),se.min(),fr.empty(),0)}static newFoundDocument(t,e,r,i){return new Un(t,1,e,se.min(),r,i,0)}static newNoDocument(t,e){return new Un(t,2,e,se.min(),se.min(),fr.empty(),0)}static newUnknownDocument(t,e){return new Un(t,3,e,se.min(),se.min(),fr.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=fr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=fr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Un&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(t,e){this.position=t,this.inclusive=e}}function wp(n,t,e){let r=0;for(let i=0;i<n.position.length;i++){const s=t[i],o=n.position[i];if(s.field.isKeyField()?r=Yt.comparator(Yt.fromName(o.referenceValue),e.key):r=Ma(o,e.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function _p(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!ki(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(t,e="asc"){this.field=t,this.dir=e}}function Py(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{}class yn extends _m{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new xy(t,e,r):e==="array-contains"?new Ry(t,r):e==="in"?new ky(t,r):e==="not-in"?new Dy(t,r):e==="array-contains-any"?new Oy(t,r):new yn(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new Cy(t,r):new Ly(t,r)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Ma(e,this.value)):e!==null&&Ys(this.value)===Ys(e)&&this.matchesComparison(Ma(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Di extends _m{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new Di(t,e)}matches(t){return bm(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function bm(n){return n.op==="and"}function Am(n){return Ny(n)&&bm(n)}function Ny(n){for(const t of n.filters)if(t instanceof Di)return!1;return!0}function Bh(n){if(n instanceof yn)return n.field.canonicalString()+n.op.toString()+Va(n.value);if(Am(n))return n.filters.map(t=>Bh(t)).join(",");{const t=n.filters.map(e=>Bh(e)).join(",");return`${n.op}(${t})`}}function Em(n,t){return n instanceof yn?function(r,i){return i instanceof yn&&r.op===i.op&&r.field.isEqual(i.field)&&ki(r.value,i.value)}(n,t):n instanceof Di?function(r,i){return i instanceof Di&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&Em(o,i.filters[l]),!0):!1}(n,t):void ee(19439)}function Im(n){return n instanceof yn?function(e){return`${e.field.canonicalString()} ${e.op} ${Va(e.value)}`}(n):n instanceof Di?function(e){return e.op.toString()+" {"+e.getFilters().map(Im).join(" ,")+"}"}(n):"Filter"}class xy extends yn{constructor(t,e,r){super(t,e,r),this.key=Yt.fromName(r.referenceValue)}matches(t){const e=Yt.comparator(t.key,this.key);return this.matchesComparison(e)}}class Cy extends yn{constructor(t,e){super(t,"in",e),this.keys=Sm("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class Ly extends yn{constructor(t,e){super(t,"not-in",e),this.keys=Sm("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function Sm(n,t){var e;return(((e=t.arrayValue)==null?void 0:e.values)||[]).map(r=>Yt.fromName(r.referenceValue))}class Ry extends yn{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Sd(e)&&Uc(e.arrayValue,this.value)}}class ky extends yn{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Uc(this.value.arrayValue,e)}}class Dy extends yn{constructor(t,e){super(t,"not-in",e)}matches(t){if(Uc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!Uc(this.value.arrayValue,e)}}class Oy extends yn{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Sd(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>Uc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(t,e=null,r=[],i=[],s=null,o=null,l=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.Te=null}}function bp(n,t=null,e=[],r=[],i=null,s=null,o=null){return new Fy(n,t,e,r,i,s,o)}function Td(n){const t=ce(n);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(r=>Bh(r)).join(","),e+="|ob:",e+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),bu(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(r=>Va(r)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(r=>Va(r)).join(",")),t.Te=e}return t.Te}function Pd(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!Py(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!Em(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!_p(n.startAt,t.startAt)&&_p(n.endAt,t.endAt)}function qh(n){return Yt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(t,e=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function My(n,t,e,r,i,s,o,l){return new Eu(n,t,e,r,i,s,o,l)}function Nd(n){return new Eu(n)}function Ap(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Vy(n){return n.collectionGroup!==null}function Nc(n){const t=ce(n);if(t.Ie===null){t.Ie=[];const e=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),e.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new wn(kn.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(t).forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new iu(s,r))}),e.has(kn.keyField().canonicalString())||t.Ie.push(new iu(kn.keyField(),r))}return t.Ie}function Pi(n){const t=ce(n);return t.Ee||(t.Ee=jy(t,Nc(n))),t.Ee}function jy(n,t){if(n.limitType==="F")return bp(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new iu(i.field,s)});const e=n.endAt?new ru(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ru(n.startAt.position,n.startAt.inclusive):null;return bp(n.path,n.collectionGroup,t,n.filters,n.limit,e,r)}}function Uh(n,t,e){return new Eu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Iu(n,t){return Pd(Pi(n),Pi(t))&&n.limitType===t.limitType}function Tm(n){return`${Td(Pi(n))}|lt:${n.limitType}`}function Ea(n){return`Query(target=${function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map(i=>Im(i)).join(", ")}]`),bu(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(i=>Va(i)).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(i=>Va(i)).join(",")),`Target(${r})`}(Pi(n))}; limitType=${n.limitType})`}function Su(n,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Yt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,t)&&function(r,i){for(const s of Nc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,t)&&function(r,i){return!(r.startAt&&!function(o,l,u){const d=wp(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,Nc(r),i)||r.endAt&&!function(o,l,u){const d=wp(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,Nc(r),i))}(n,t)}function By(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Pm(n){return(t,e)=>{let r=!1;for(const i of Nc(n)){const s=qy(i,t,e);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function qy(n,t,e){const r=n.field.isKeyField()?Yt.comparator(t.key,e.key):function(s,o,l){const u=o.data.field(s),d=l.data.field(s);return u!==null&&d!==null?Ma(u,d):ee(42886)}(n.field,t,e);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ee(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,e){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[e]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){to(this.inner,(e,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return um(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy=new Ye(Yt.comparator);function ss(){return Uy}const Nm=new Ye(Yt.comparator);function Ec(...n){let t=Nm;for(const e of n)t=t.insert(e.key,e);return t}function xm(n){let t=Nm;return n.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function To(){return xc()}function Cm(){return xc()}function xc(){return new zo(n=>n.toString(),(n,t)=>n.isEqual(t))}const zy=new Ye(Yt.comparator),Hy=new wn(Yt.comparator);function we(...n){let t=Hy;for(const e of n)t=t.add(e);return t}const Wy=new wn(ve);function $y(){return Wy}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tu(t)?"-0":t}}function Lm(n){return{integerValue:""+n}}function Gy(n,t){return _y(t)?Lm(t):xd(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(){this._=void 0}}function Ky(n,t,e){return n instanceof su?function(i,s){const o={fields:{[fm]:{stringValue:dm},[gm]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Id(s)&&(s=Au(s)),s&&(o.fields[pm]=s),{mapValue:o}}(e,t):n instanceof zc?km(n,t):n instanceof Hc?Dm(n,t):function(i,s){const o=Rm(i,s),l=Ep(o)+Ep(i.Ae);return jh(o)&&jh(i.Ae)?Lm(l):xd(i.serializer,l)}(n,t)}function Yy(n,t,e){return n instanceof zc?km(n,t):n instanceof Hc?Dm(n,t):e}function Rm(n,t){return n instanceof ou?function(r){return jh(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class su extends Tu{}class zc extends Tu{constructor(t){super(),this.elements=t}}function km(n,t){const e=Om(t);for(const r of n.elements)e.some(i=>ki(i,r))||e.push(r);return{arrayValue:{values:e}}}class Hc extends Tu{constructor(t){super(),this.elements=t}}function Dm(n,t){let e=Om(t);for(const r of n.elements)e=e.filter(i=>!ki(i,r));return{arrayValue:{values:e}}}class ou extends Tu{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function Ep(n){return en(n.integerValue||n.doubleValue)}function Om(n){return Sd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Jy(n,t){return n.field.isEqual(t.field)&&function(r,i){return r instanceof zc&&i instanceof zc||r instanceof Hc&&i instanceof Hc?Fa(r.elements,i.elements,ki):r instanceof ou&&i instanceof ou?ki(r.Ae,i.Ae):r instanceof su&&i instanceof su}(n.transform,t.transform)}class Qy{constructor(t,e){this.version=t,this.transformResults=e}}class ai{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new ai}static exists(t){return new ai(void 0,t)}static updateTime(t){return new ai(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Hl(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Pu{}function Fm(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Cd(n.key,ai.none()):new Xc(n.key,n.data,ai.none());{const e=n.data,r=fr.empty();let i=new wn(kn.comparator);for(let s of t.fields)if(!i.has(s)){let o=e.field(s);o===null&&s.length>1&&(s=s.popLast(),o=e.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new eo(n.key,r,new Ir(i.toArray()),ai.none())}}function Xy(n,t,e){n instanceof Xc?function(i,s,o){const l=i.value.clone(),u=Sp(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,t,e):n instanceof eo?function(i,s,o){if(!Hl(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Sp(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(Mm(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,t,e):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,e)}function Cc(n,t,e,r){return n instanceof Xc?function(s,o,l,u){if(!Hl(s.precondition,o))return l;const d=s.value.clone(),m=Tp(s.fieldTransforms,u,o);return d.setAll(m),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(n,t,e,r):n instanceof eo?function(s,o,l,u){if(!Hl(s.precondition,o))return l;const d=Tp(s.fieldTransforms,u,o),m=o.data;return m.setAll(Mm(s)),m.setAll(d),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(v=>v.field))}(n,t,e,r):function(s,o,l){return Hl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(n,t,e)}function Zy(n,t){let e=null;for(const r of n.fieldTransforms){const i=t.data.field(r.field),s=Rm(r.transform,i||null);s!=null&&(e===null&&(e=fr.empty()),e.set(r.field,s))}return e||null}function Ip(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Fa(r,i,(s,o)=>Jy(s,o))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Xc extends Pu{constructor(t,e,r,i=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class eo extends Pu{constructor(t,e,r,i,s=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Mm(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=n.data.field(e);t.set(e,r)}}),t}function Sp(n,t,e){const r=new Map;xe(n.length===e.length,32656,{Re:e.length,Ve:n.length});for(let i=0;i<e.length;i++){const s=n[i],o=s.transform,l=t.data.field(s.field);r.set(s.field,Yy(o,l,e[i]))}return r}function Tp(n,t,e){const r=new Map;for(const i of n){const s=i.transform,o=e.data.field(i.field);r.set(i.field,Ky(s,o,t))}return r}class Cd extends Pu{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tv extends Pu{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(t,e,r,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&Xy(s,t,r[i])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=Cc(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=Cc(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=Cm();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=e.has(i.key)?null:l;const u=Fm(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),we())}isEqual(t){return this.batchId===t.batchId&&Fa(this.mutations,t.mutations,(e,r)=>Ip(e,r))&&Fa(this.baseMutations,t.baseMutations,(e,r)=>Ip(e,r))}}class Ld{constructor(t,e,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=i}static from(t,e,r){xe(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let i=function(){return zy}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Ld(t,e,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ln,Ae;function iv(n){switch(n){case It.OK:return ee(64938);case It.CANCELLED:case It.UNKNOWN:case It.DEADLINE_EXCEEDED:case It.RESOURCE_EXHAUSTED:case It.INTERNAL:case It.UNAVAILABLE:case It.UNAUTHENTICATED:return!1;case It.INVALID_ARGUMENT:case It.NOT_FOUND:case It.ALREADY_EXISTS:case It.PERMISSION_DENIED:case It.FAILED_PRECONDITION:case It.ABORTED:case It.OUT_OF_RANGE:case It.UNIMPLEMENTED:case It.DATA_LOSS:return!0;default:return ee(15467,{code:n})}}function Vm(n){if(n===void 0)return rs("GRPC error has no .code"),It.UNKNOWN;switch(n){case ln.OK:return It.OK;case ln.CANCELLED:return It.CANCELLED;case ln.UNKNOWN:return It.UNKNOWN;case ln.DEADLINE_EXCEEDED:return It.DEADLINE_EXCEEDED;case ln.RESOURCE_EXHAUSTED:return It.RESOURCE_EXHAUSTED;case ln.INTERNAL:return It.INTERNAL;case ln.UNAVAILABLE:return It.UNAVAILABLE;case ln.UNAUTHENTICATED:return It.UNAUTHENTICATED;case ln.INVALID_ARGUMENT:return It.INVALID_ARGUMENT;case ln.NOT_FOUND:return It.NOT_FOUND;case ln.ALREADY_EXISTS:return It.ALREADY_EXISTS;case ln.PERMISSION_DENIED:return It.PERMISSION_DENIED;case ln.FAILED_PRECONDITION:return It.FAILED_PRECONDITION;case ln.ABORTED:return It.ABORTED;case ln.OUT_OF_RANGE:return It.OUT_OF_RANGE;case ln.UNIMPLEMENTED:return It.UNIMPLEMENTED;case ln.DATA_LOSS:return It.DATA_LOSS;default:return ee(39323,{code:n})}}(Ae=ln||(ln={}))[Ae.OK=0]="OK",Ae[Ae.CANCELLED=1]="CANCELLED",Ae[Ae.UNKNOWN=2]="UNKNOWN",Ae[Ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ae[Ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ae[Ae.NOT_FOUND=5]="NOT_FOUND",Ae[Ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ae[Ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ae[Ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ae[Ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ae[Ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ae[Ae.ABORTED=10]="ABORTED",Ae[Ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ae[Ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ae[Ae.INTERNAL=13]="INTERNAL",Ae[Ae.UNAVAILABLE=14]="UNAVAILABLE",Ae[Ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov=new Us([4294967295,4294967295],0);function Pp(n){const t=sv().encode(n),e=new Zg;return e.update(t),new Uint8Array(e.digest())}function Np(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Us([e,r],0),new Us([i,s],0)]}class Rd{constructor(t,e,r){if(this.bitmap=t,this.padding=e,this.hashCount=r,e<0||e>=8)throw new Ic(`Invalid padding: ${e}`);if(r<0)throw new Ic(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Ic(`Invalid hash count: ${r}`);if(t.length===0&&e!==0)throw new Ic(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=Us.fromNumber(this.ge)}ye(t,e,r){let i=t.add(e.multiply(Us.fromNumber(r)));return i.compare(ov)===1&&(i=new Us([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=Pp(t),[r,i]=Np(e);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(t,e,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new Rd(s,i,e);return r.forEach(l=>o.insert(l)),o}insert(t){if(this.ge===0)return;const e=Pp(t),[r,i]=Np(e);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(t){const e=Math.floor(t/8),r=t%8;this.bitmap[e]|=1<<r}}class Ic extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(t,e,r,i,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,r){const i=new Map;return i.set(t,Zc.createSynthesizedTargetChangeForCurrentChange(t,e,r)),new Nu(se.min(),i,new Ye(ve),ss(),we())}}class Zc{constructor(t,e,r,i,s){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,r){return new Zc(r,e,we(),we(),we())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(t,e,r,i){this.be=t,this.removedTargetIds=e,this.key=r,this.De=i}}class jm{constructor(t,e){this.targetId=t,this.Ce=e}}class Bm{constructor(t,e,r=On.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=i}}class xp{constructor(){this.ve=0,this.Fe=Cp(),this.Me=On.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=we(),e=we(),r=we();return this.Fe.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:r=r.add(i);break;default:ee(38017,{changeType:s})}}),new Zc(this.Me,this.xe,t,e,r)}qe(){this.Oe=!1,this.Fe=Cp()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,xe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class av{constructor(t){this.Ge=t,this.ze=new Map,this.je=ss(),this.Je=Dl(),this.He=Dl(),this.Ye=new Ye(ve)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,e=>{const r=this.nt(e);switch(t.state){case 0:this.rt(e)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),r.Le(t.resumeToken));break;default:ee(56790,{state:t.state})}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach((r,i)=>{this.rt(i)&&e(i)})}st(t){const e=t.targetId,r=t.Ce.count,i=this.ot(e);if(i){const s=i.target;if(qh(s))if(r===0){const o=new Yt(s.path);this.et(e,o,Un.newNoDocument(o,se.min()))}else xe(r===1,20013,{expectedCount:r});else{const o=this._t(e);if(o!==r){const l=this.ut(t),u=l?this.ct(l,t,o):1;if(u!==0){this.it(e);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,d)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=e;let o,l;try{o=Ks(r).toUint8Array()}catch(u){if(u instanceof hm)return Oa("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Rd(o,i,s)}catch(u){return Oa(u instanceof Ic?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(t,e,r){return e.Ce.count===r-this.Pt(t,e.targetId)?0:2}Pt(t,e){const r=this.Ge.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.et(e,s,null),i++)}),i}Tt(t){const e=new Map;this.ze.forEach((s,o)=>{const l=this.ot(o);if(l){if(s.current&&qh(l.target)){const u=new Yt(l.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,Un.newNoDocument(u,t))}s.Be&&(e.set(o,s.ke()),s.qe())}});let r=we();this.He.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(t));const i=new Nu(t,e,this.Ye,this.je,r);return this.je=ss(),this.Je=Dl(),this.He=Dl(),this.Ye=new Ye(ve),i}Xe(t,e){if(!this.rt(t))return;const r=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,r),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,r){if(!this.rt(t))return;const i=this.nt(t);this.Et(t,e)?i.Qe(e,1):i.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),r&&(this.je=this.je.insert(e,r))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new xp,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new wn(ve),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new wn(ve),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||jt("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new xp),this.Ge.getRemoteKeysForTarget(t).forEach(e=>{this.et(t,e,null)})}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function Dl(){return new Ye(Yt.comparator)}function Cp(){return new Ye(Yt.comparator)}const cv=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),lv=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),uv=(()=>({and:"AND",or:"OR"}))();class hv{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function zh(n,t){return n.useProto3Json||bu(t)?t:{value:t}}function au(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function qm(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function dv(n,t){return au(n,t.toTimestamp())}function Ni(n){return xe(!!n,49232),se.fromTimestamp(function(e){const r=Gs(e);return new He(r.seconds,r.nanos)}(n))}function kd(n,t){return Hh(n,t).canonicalString()}function Hh(n,t){const e=function(i){return new ze(["projects",i.projectId,"databases",i.database])}(n).child("documents");return t===void 0?e:e.child(t)}function Um(n){const t=ze.fromString(n);return xe(Gm(t),10190,{key:t.toString()}),t}function Wh(n,t){return kd(n.databaseId,t.path)}function fh(n,t){const e=Um(t);if(e.get(1)!==n.databaseId.projectId)throw new zt(It.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new zt(It.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Yt(Hm(e))}function zm(n,t){return kd(n.databaseId,t)}function fv(n){const t=Um(n);return t.length===4?ze.emptyPath():Hm(t)}function $h(n){return new ze(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Hm(n){return xe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Lp(n,t,e){return{name:Wh(n,t),fields:e.value.mapValue.fields}}function pv(n,t){let e;if("targetChange"in t){t.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ee(39313,{state:d})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(d,m){return d.useProto3Json?(xe(m===void 0||typeof m=="string",58123),On.fromBase64String(m||"")):(xe(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),On.fromUint8Array(m||new Uint8Array))}(n,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(d){const m=d.code===void 0?It.UNKNOWN:Vm(d.code);return new zt(m,d.message||"")}(o);e=new Bm(r,i,s,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=fh(n,r.document.name),s=Ni(r.document.updateTime),o=r.document.createTime?Ni(r.document.createTime):se.min(),l=new fr({mapValue:{fields:r.document.fields}}),u=Un.newFoundDocument(i,s,o,l),d=r.targetIds||[],m=r.removedTargetIds||[];e=new Wl(d,m,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=fh(n,r.document),s=r.readTime?Ni(r.readTime):se.min(),o=Un.newNoDocument(i,s),l=r.removedTargetIds||[];e=new Wl([],l,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=fh(n,r.document),s=r.removedTargetIds||[];e=new Wl([],s,i,null)}else{if(!("filter"in t))return ee(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new rv(i,s),l=r.targetId;e=new jm(l,o)}}return e}function gv(n,t){let e;if(t instanceof Xc)e={update:Lp(n,t.key,t.value)};else if(t instanceof Cd)e={delete:Wh(n,t.key)};else if(t instanceof eo)e={update:Lp(n,t.key,t.data),updateMask:Iv(t.fieldMask)};else{if(!(t instanceof tv))return ee(16599,{Vt:t.type});e={verify:Wh(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof su)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof zc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Hc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ou)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw ee(20930,{transform:o.transform})}(0,r))),t.precondition.isNone||(e.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:dv(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ee(27497)}(n,t.precondition)),e}function mv(n,t){return n&&n.length>0?(xe(t!==void 0,14353),n.map(e=>function(i,s){let o=i.updateTime?Ni(i.updateTime):Ni(s);return o.isEqual(se.min())&&(o=Ni(s)),new Qy(o,i.transformResults||[])}(e,t))):[]}function yv(n,t){return{documents:[zm(n,t.path)]}}function vv(n,t){const e={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=zm(n,i);const s=function(d){if(d.length!==0)return $m(Di.create(d,"and"))}(t.filters);s&&(e.structuredQuery.where=s);const o=function(d){if(d.length!==0)return d.map(m=>function(_){return{field:Ia(_.field),direction:bv(_.dir)}}(m))}(t.orderBy);o&&(e.structuredQuery.orderBy=o);const l=zh(n,t.limit);return l!==null&&(e.structuredQuery.limit=l),t.startAt&&(e.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(t.endAt)),{ft:e,parent:i}}function wv(n){let t=fv(n.parent);const e=n.structuredQuery,r=e.from?e.from.length:0;let i=null;if(r>0){xe(r===1,65062);const m=e.from[0];m.allDescendants?i=m.collectionId:t=t.child(m.collectionId)}let s=[];e.where&&(s=function(v){const _=Wm(v);return _ instanceof Di&&Am(_)?_.getFilters():[_]}(e.where));let o=[];e.orderBy&&(o=function(v){return v.map(_=>function(N){return new iu(Sa(N.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(_))}(e.orderBy));let l=null;e.limit&&(l=function(v){let _;return _=typeof v=="object"?v.value:v,bu(_)?null:_}(e.limit));let u=null;e.startAt&&(u=function(v){const _=!!v.before,g=v.values||[];return new ru(g,_)}(e.startAt));let d=null;return e.endAt&&(d=function(v){const _=!v.before,g=v.values||[];return new ru(g,_)}(e.endAt)),My(t,i,o,s,l,"F",u,d)}function _v(n,t){const e=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee(28987,{purpose:i})}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function Wm(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=Sa(e.unaryFilter.field);return yn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Sa(e.unaryFilter.field);return yn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Sa(e.unaryFilter.field);return yn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Sa(e.unaryFilter.field);return yn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ee(61313);default:return ee(60726)}}(n):n.fieldFilter!==void 0?function(e){return yn.create(Sa(e.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ee(58110);default:return ee(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return Di.create(e.compositeFilter.filters.map(r=>Wm(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ee(1026)}}(e.compositeFilter.op))}(n):ee(30097,{filter:n})}function bv(n){return cv[n]}function Av(n){return lv[n]}function Ev(n){return uv[n]}function Ia(n){return{fieldPath:n.canonicalString()}}function Sa(n){return kn.fromServerFormat(n.fieldPath)}function $m(n){return n instanceof yn?function(e){if(e.op==="=="){if(vp(e.value))return{unaryFilter:{field:Ia(e.field),op:"IS_NAN"}};if(yp(e.value))return{unaryFilter:{field:Ia(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(vp(e.value))return{unaryFilter:{field:Ia(e.field),op:"IS_NOT_NAN"}};if(yp(e.value))return{unaryFilter:{field:Ia(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ia(e.field),op:Av(e.op),value:e.value}}}(n):n instanceof Di?function(e){const r=e.getFilters().map(i=>$m(i));return r.length===1?r[0]:{compositeFilter:{op:Ev(e.op),filters:r}}}(n):ee(54877,{filter:n})}function Iv(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Gm(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(t,e,r,i,s=se.min(),o=se.min(),l=On.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new Ms(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Ms(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(t){this.yt=t}}function Tv(n){const t=wv({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Uh(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(){this.Cn=new Nv}addToCollectionParentIndex(t,e){return this.Cn.add(e),At.resolve()}getCollectionParents(t,e){return At.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return At.resolve()}deleteFieldIndex(t,e){return At.resolve()}deleteAllFieldIndexes(t){return At.resolve()}createTargetIndexes(t,e){return At.resolve()}getDocumentsMatchingTarget(t,e){return At.resolve(null)}getIndexType(t,e){return At.resolve(0)}getFieldIndexes(t,e){return At.resolve([])}getNextCollectionGroupToUpdate(t){return At.resolve(null)}getMinOffset(t,e){return At.resolve($s.min())}getMinOffsetFromCollectionGroup(t,e){return At.resolve($s.min())}updateCollectionGroup(t,e,r){return At.resolve()}updateIndexEntries(t,e){return At.resolve()}}class Nv{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e]||new wn(ze.comparator),s=!i.has(r);return this.index[e]=i.add(r),s}has(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e];return i&&i.has(r)}getEntries(t){return(this.index[t]||new wn(ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Km=41943040;class dr{static withCacheSize(t){return new dr(t,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dr.DEFAULT_COLLECTION_PERCENTILE=10,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dr.DEFAULT=new dr(Km,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dr.DISABLED=new dr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new ja(0)}static cr(){return new ja(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="LruGarbageCollector",xv=1048576;function Dp([n,t],[e,r]){const i=ve(n,e);return i===0?ve(t,r):i}class Cv{constructor(t){this.Ir=t,this.buffer=new wn(Dp),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();Dp(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class Lv{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){jt(kp,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){$a(e)?jt(kp,"Ignoring IndexedDB error during garbage collection: ",e):await Wa(e)}await this.Vr(3e5)})}}class Rv{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next(r=>Math.floor(e/100*r))}nthSequenceNumber(t,e){if(e===0)return At.resolve(_u.ce);const r=new Cv(e);return this.mr.forEachTarget(t,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(t,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(t,e,r){return this.mr.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(jt("LruGarbageCollector","Garbage collection skipped; disabled"),At.resolve(Rp)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(jt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Rp):this.yr(t,e))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let r,i,s,o,l,u,d;const m=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(jt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,o=Date.now(),this.nthSequenceNumber(t,i))).next(v=>(r=v,l=Date.now(),this.removeTargets(t,r,e))).next(v=>(s=v,u=Date.now(),this.removeOrphanedDocuments(t,r))).next(v=>(d=Date.now(),Aa()<=ye.DEBUG&&jt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${v} documents in `+(d-u)+`ms
Total Duration: ${d-m}ms`),At.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:v})))}}function kv(n,t){return new Rv(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(){this.changes=new zo(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Un.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?At.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(t,e,r,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,e))).next(i=>(r!==null&&Cc(r.mutation,i,Ir.empty(),He.now()),i))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.getLocalViewOfDocuments(t,r,we()).next(()=>r))}getLocalViewOfDocuments(t,e,r=we()){const i=To();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,r).next(s=>{let o=Ec();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,e){const r=To();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,we()))}populateOverlays(t,e,r){const i=[];return r.forEach(s=>{e.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,l)=>{e.set(o,l)})})}computeViews(t,e,r,i){let s=ss();const o=xc(),l=function(){return xc()}();return e.forEach((u,d)=>{const m=r.get(d.key);i.has(d.key)&&(m===void 0||m.mutation instanceof eo)?s=s.insert(d.key,d):m!==void 0?(o.set(d.key,m.mutation.getFieldMask()),Cc(m.mutation,d,m.mutation.getFieldMask(),He.now())):o.set(d.key,Ir.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((d,m)=>o.set(d,m)),e.forEach((d,m)=>l.set(d,new Ov(m,o.get(d)??null))),l))}recalculateAndSaveOverlays(t,e){const r=xc();let i=new Ye((o,l)=>o-l),s=we();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=e.get(u);if(d===null)return;let m=r.get(u)||Ir.empty();m=l.applyToLocalView(d,m),r.set(u,m);const v=(i.get(l.batchId)||we()).add(u);i=i.insert(l.batchId,v)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,m=u.value,v=Cm();m.forEach(_=>{if(!s.has(_)){const g=Fm(e.get(_),r.get(_));g!==null&&v.set(_,g),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(t,d,v))}return At.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,e,r,i){return function(o){return Yt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Vy(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,i):this.getDocumentsMatchingCollectionQuery(t,e,r,i)}getNextDocuments(t,e,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,i-s.size):At.resolve(To());let l=jc,u=s;return o.next(d=>At.forEach(d,(m,v)=>(l<v.largestBatchId&&(l=v.largestBatchId),s.get(m)?At.resolve():this.remoteDocumentCache.getEntry(t,m).next(_=>{u=u.insert(m,_)}))).next(()=>this.populateOverlays(t,d,s)).next(()=>this.computeViews(t,u,d,we())).next(m=>({batchId:l,changes:xm(m)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Yt(e)).next(r=>{let i=Ec();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,e,r,i){const s=e.collectionGroup;let o=Ec();return this.indexManager.getCollectionParents(t,s).next(l=>At.forEach(l,u=>{const d=function(v,_){return new Eu(_,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(e,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,d,r,i).next(m=>{m.forEach((v,_)=>{o=o.insert(v,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,e,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,s,i))).next(o=>{s.forEach((u,d)=>{const m=d.getKey();o.get(m)===null&&(o=o.insert(m,Un.newInvalidDocument(m)))});let l=Ec();return o.forEach((u,d)=>{const m=s.get(u);m!==void 0&&Cc(m.mutation,d,Ir.empty(),He.now()),Su(e,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return At.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,function(i){return{id:i.id,version:i.version,createTime:Ni(i.createTime)}}(e)),At.resolve()}getNamedQuery(t,e){return At.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,function(i){return{name:i.name,query:Tv(i.bundledQuery),readTime:Ni(i.readTime)}}(e)),At.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(){this.overlays=new Ye(Yt.comparator),this.qr=new Map}getOverlay(t,e){return At.resolve(this.overlays.get(e))}getOverlays(t,e){const r=To();return At.forEach(e,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,e,r){return r.forEach((i,s)=>{this.St(t,e,s)}),At.resolve()}removeOverlaysForBatchId(t,e,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),At.resolve()}getOverlaysForCollection(t,e,r){const i=To(),s=e.length+1,o=new Yt(e.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!e.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return At.resolve(i)}getOverlaysForCollectionGroup(t,e,r,i){let s=new Ye((d,m)=>d-m);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===e&&d.largestBatchId>r){let m=s.get(d.largestBatchId);m===null&&(m=To(),s=s.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const l=To(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,m)=>l.set(d,m)),!(l.size()>=i)););return At.resolve(l)}St(t,e,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new nv(e,r));let s=this.qr.get(e);s===void 0&&(s=we(),this.qr.set(e,s)),this.qr.set(e,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(){this.sessionToken=On.EMPTY_BYTE_STRING}getSessionToken(t){return At.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,At.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(){this.Qr=new wn(Sn.$r),this.Ur=new wn(Sn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const r=new Sn(t,e);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,e){t.forEach(r=>this.addReference(r,e))}removeReference(t,e){this.Gr(new Sn(t,e))}zr(t,e){t.forEach(r=>this.removeReference(r,e))}jr(t){const e=new Yt(new ze([])),r=new Sn(e,t),i=new Sn(e,t+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new Yt(new ze([])),r=new Sn(e,t),i=new Sn(e,t+1);let s=we();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const e=new Sn(t,0),r=this.Qr.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}}class Sn{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return Yt.comparator(t.key,e.key)||ve(t.Yr,e.Yr)}static Kr(t,e){return ve(t.Yr,e.Yr)||Yt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new wn(Sn.$r)}checkEmpty(t){return At.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new ev(s,e,r,i);this.mutationQueue.push(o);for(const l of i)this.Zr=this.Zr.add(new Sn(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return At.resolve(o)}lookupMutationBatch(t,e){return At.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,i=this.ei(r),s=i<0?0:i;return At.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return At.resolve(this.mutationQueue.length===0?Ed:this.tr-1)}getAllMutationBatches(t){return At.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new Sn(e,0),i=new Sn(e,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const l=this.Xr(o.Yr);s.push(l)}),At.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new wn(ve);return e.forEach(i=>{const s=new Sn(i,0),o=new Sn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],l=>{r=r.add(l.Yr)})}),At.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1;let s=r;Yt.isDocumentKey(s)||(s=s.child(""));const o=new Sn(new Yt(s),0);let l=new wn(ve);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(l=l.add(u.Yr)),!0)},o),At.resolve(this.ti(l))}ti(t){const e=[];return t.forEach(r=>{const i=this.Xr(r);i!==null&&e.push(i)}),e}removeMutationBatch(t,e){xe(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return At.forEach(e.mutations,i=>{const s=new Sn(i.key,e.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Zr=r})}ir(t){}containsKey(t,e){const r=new Sn(e,0),i=this.Zr.firstAfterOrEqual(r);return At.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,At.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(t){this.ri=t,this.docs=function(){return new Ye(Yt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return At.resolve(r?r.document.mutableCopy():Un.newInvalidDocument(e))}getEntries(t,e){let r=ss();return e.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Un.newInvalidDocument(i))}),At.resolve(r)}getDocumentsMatchingQuery(t,e,r,i){let s=ss();const o=e.path,l=new Yt(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:m}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||my(gy(m),r)<=0||(i.has(m.key)||Su(e,m))&&(s=s.insert(m.key,m.mutableCopy()))}return At.resolve(s)}getAllFromCollectionGroup(t,e,r,i){ee(9500)}ii(t,e){return At.forEach(this.docs,r=>e(r))}newChangeBuffer(t){return new Uv(this)}getSize(t){return At.resolve(this.size)}}class Uv extends Dv{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?e.push(this.Nr.addEntry(t,i)):this.Nr.removeEntry(r)}),At.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(t){this.persistence=t,this.si=new zo(e=>Td(e),Pd),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.oi=0,this._i=new Dd,this.targetCount=0,this.ai=ja.ur()}forEachTarget(t,e){return this.si.forEach((r,i)=>e(i)),At.resolve()}getLastRemoteSnapshotVersion(t){return At.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return At.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),At.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.oi&&(this.oi=e),At.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new ja(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,At.resolve()}updateTargetData(t,e){return this.Pr(e),At.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,At.resolve()}removeTargets(t,e,r){let i=0;const s=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=e&&r.get(l.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),i++)}),At.waitFor(s).next(()=>i)}getTargetCount(t){return At.resolve(this.targetCount)}getTargetData(t,e){const r=this.si.get(e)||null;return At.resolve(r)}addMatchingKeys(t,e,r){return this._i.Wr(e,r),At.resolve()}removeMatchingKeys(t,e,r){this._i.zr(e,r);const i=this.persistence.referenceDelegate,s=[];return i&&e.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),At.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),At.resolve()}getMatchingKeysForTargetId(t,e){const r=this._i.Hr(e);return At.resolve(r)}containsKey(t,e){return At.resolve(this._i.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(t,e){this.ui={},this.overlays={},this.ci=new _u(0),this.li=!1,this.li=!0,this.hi=new jv,this.referenceDelegate=t(this),this.Pi=new zv(this),this.indexManager=new Pv,this.remoteDocumentCache=function(i){return new qv(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new Sv(e),this.Ii=new Mv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Vv,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.ui[t.toKey()];return r||(r=new Bv(e,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,r){jt("MemoryPersistence","Starting transaction:",t);const i=new Hv(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(t,e){return At.or(Object.values(this.ui).map(r=>()=>r.containsKey(t,e)))}}class Hv extends vy{constructor(t){super(),this.currentSequenceNumber=t}}class Od{constructor(t){this.persistence=t,this.Ri=new Dd,this.Vi=null}static mi(t){return new Od(t)}get fi(){if(this.Vi)return this.Vi;throw ee(60996)}addReference(t,e,r){return this.Ri.addReference(r,e),this.fi.delete(r.toString()),At.resolve()}removeReference(t,e,r){return this.Ri.removeReference(r,e),this.fi.add(r.toString()),At.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),At.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(t,e))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return At.forEach(this.fi,r=>{const i=Yt.fromPath(r);return this.gi(t,i).next(s=>{s||e.removeEntry(i,se.min())})}).next(()=>(this.Vi=null,e.apply(t)))}updateLimboDocument(t,e){return this.gi(t,e).next(r=>{r?this.fi.delete(e.toString()):this.fi.add(e.toString())})}Ti(t){return 0}gi(t,e){return At.or([()=>At.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class cu{constructor(t,e){this.persistence=t,this.pi=new zo(r=>by(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=kv(this,e)}static mi(t,e){return new cu(t,e)}Ei(){}di(t){return At.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>e.next(i=>r+i))}wr(t){let e=0;return this.pr(t,r=>{e++}).next(()=>e)}pr(t,e){return At.forEach(this.pi,(r,i)=>this.br(t,r,i).next(s=>s?At.resolve():e(i)))}removeTargets(t,e,r){return this.persistence.getTargetCache().removeTargets(t,e,r)}removeOrphanedDocuments(t,e){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(t,o=>this.br(t,o,e).next(l=>{l||(r++,s.removeEntry(o,se.min()))})).next(()=>s.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),At.resolve()}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),At.resolve()}removeReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),At.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),At.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Ul(t.data.value)),e}br(t,e,r){return At.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const i=this.pi.get(e);return At.resolve(i!==void 0&&i>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(t,e,r,i){this.targetId=t,this.fromCache=e,this.Es=r,this.ds=i}static As(t,e){let r=we(),i=we();for(const s of e.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Fd(t,e.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return M2()?8:wy(Hn())>0?6:4}()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,r,i){const s={result:null};return this.ys(t,e).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(t,e,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Wv;return this.Ss(t,e,o).next(l=>{if(s.result=l,this.Vs)return this.bs(t,e,o,l.size)})}).next(()=>s.result)}bs(t,e,r,i){return r.documentReadCount<this.fs?(Aa()<=ye.DEBUG&&jt("QueryEngine","SDK will not create cache indexes for query:",Ea(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),At.resolve()):(Aa()<=ye.DEBUG&&jt("QueryEngine","Query:",Ea(e),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Aa()<=ye.DEBUG&&jt("QueryEngine","The SDK decides to create cache indexes for query:",Ea(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Pi(e))):At.resolve())}ys(t,e){if(Ap(e))return At.resolve(null);let r=Pi(e);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(e.limit!==null&&i===1&&(e=Uh(e,null,"F"),r=Pi(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=we(...s);return this.ps.getDocuments(t,o).next(l=>this.indexManager.getMinOffset(t,r).next(u=>{const d=this.Ds(e,l);return this.Cs(e,d,o,u.readTime)?this.ys(t,Uh(e,null,"F")):this.vs(t,d,e,u)}))})))}ws(t,e,r,i){return Ap(e)||i.isEqual(se.min())?At.resolve(null):this.ps.getDocuments(t,r).next(s=>{const o=this.Ds(e,s);return this.Cs(e,o,r,i)?At.resolve(null):(Aa()<=ye.DEBUG&&jt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ea(e)),this.vs(t,o,e,py(i,jc)).next(l=>l))})}Ds(t,e){let r=new wn(Pm(t));return e.forEach((i,s)=>{Su(t,s)&&(r=r.add(s))}),r}Cs(t,e,r,i){if(t.limit===null)return!1;if(r.size!==e.size)return!0;const s=t.limitType==="F"?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(t,e,r){return Aa()<=ye.DEBUG&&jt("QueryEngine","Using full collection scan to execute query:",Ea(e)),this.ps.getDocumentsMatchingQuery(t,e,$s.min(),r)}vs(t,e,r,i){return this.ps.getDocumentsMatchingQuery(t,r,i).next(s=>(e.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md="LocalStore",Gv=3e8;class Kv{constructor(t,e,r,i){this.persistence=t,this.Fs=e,this.serializer=i,this.Ms=new Ye(ve),this.xs=new zo(s=>Td(s),Pd),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Fv(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ms))}}function Yv(n,t,e,r){return new Kv(n,t,e,r)}async function Jm(n,t){const e=ce(n);return await e.persistence.runTransaction("Handle user change","readonly",r=>{let i;return e.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,e.Bs(t),e.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=we();for(const d of i){o.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}for(const d of s){l.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}return e.localDocuments.getDocuments(r,u).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:l}))})})}function Jv(n,t){const e=ce(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=e.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,d,m){const v=d.batch,_=v.keys();let g=At.resolve();return _.forEach(N=>{g=g.next(()=>m.getEntry(u,N)).next(L=>{const O=d.docVersions.get(N);xe(O!==null,48541),L.version.compareTo(O)<0&&(v.applyToRemoteDocument(L,d),L.isValidDocument()&&(L.setReadTime(d.commitVersion),m.addEntry(L)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(u,v))}(e,r,t,s).next(()=>s.apply(r)).next(()=>e.mutationQueue.performConsistencyCheck(r)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=we();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(t))).next(()=>e.localDocuments.getDocuments(r,i))})}function Qm(n){const t=ce(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Qv(n,t){const e=ce(n),r=t.snapshotVersion;let i=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=e.Ns.newChangeBuffer({trackRemovals:!0});i=e.Ms;const l=[];t.targetChanges.forEach((m,v)=>{const _=i.get(v);if(!_)return;l.push(e.Pi.removeMatchingKeys(s,m.removedDocuments,v).next(()=>e.Pi.addMatchingKeys(s,m.addedDocuments,v)));let g=_.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(v)!==null?g=g.withResumeToken(On.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):m.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(m.resumeToken,r)),i=i.insert(v,g),function(L,O,C){return L.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=Gv?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(_,g,m)&&l.push(e.Pi.updateTargetData(s,g))});let u=ss(),d=we();if(t.documentUpdates.forEach(m=>{t.resolvedLimboDocuments.has(m)&&l.push(e.persistence.referenceDelegate.updateLimboDocument(s,m))}),l.push(Xv(s,o,t.documentUpdates).next(m=>{u=m.ks,d=m.qs})),!r.isEqual(se.min())){const m=e.Pi.getLastRemoteSnapshotVersion(s).next(v=>e.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(m)}return At.waitFor(l).next(()=>o.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(e.Ms=i,s))}function Xv(n,t,e){let r=we(),i=we();return e.forEach(s=>r=r.add(s)),t.getEntries(n,r).next(s=>{let o=ss();return e.forEach((l,u)=>{const d=s.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(se.min())?(t.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(t.addEntry(u),o=o.insert(l,u)):jt(Md,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{ks:o,qs:i}})}function Zv(n,t){const e=ce(n);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=Ed),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function tw(n,t){const e=ce(n);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return e.Pi.getTargetData(r,t).next(s=>s?(i=s,At.resolve(i)):e.Pi.allocateTargetId(r).next(o=>(i=new Ms(t,o,"TargetPurposeListen",r.currentSequenceNumber),e.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=e.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(r.targetId,r),e.xs.set(t,r.targetId)),r})}async function Gh(n,t,e){const r=ce(n),i=r.Ms.get(t),s=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!$a(o))throw o;jt(Md,`Failed to update sequence numbers for target ${t}: ${o}`)}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function Op(n,t,e){const r=ce(n);let i=se.min(),s=we();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,m){const v=ce(u),_=v.xs.get(m);return _!==void 0?At.resolve(v.Ms.get(_)):v.Pi.getTargetData(d,m)}(r,o,Pi(t)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,t,e?i:se.min(),e?s:we())).next(l=>(ew(r,By(t),l),{documents:l,Qs:s})))}function ew(n,t,e){let r=n.Os.get(t)||se.min();e.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Os.set(t,r)}class Fp{constructor(){this.activeTargetIds=$y()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class nw{constructor(){this.Mo=new Fp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,r){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Fp,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp="ConnectivityMonitor";class Vp{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){jt(Mp,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){jt(Mp,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ol=null;function Kh(){return Ol===null?Ol=function(){return 268435456+Math.round(2147483648*Math.random())}():Ol++,"0x"+Ol.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph="RestConnection",iw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sw{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===eu?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(t,e,r,i,s){const o=Kh(),l=this.zo(t,e.toUriEncodedString());jt(ph,`Sending RPC '${t}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,s);const{host:d}=new URL(l),m=Ua(d);return this.Jo(t,l,u,r,m).then(v=>(jt(ph,`Received RPC '${t}' ${o}: `,v),v),v=>{throw Oa(ph,`RPC '${t}' ${o} failed with error: `,v,"url: ",l,"request:",r),v})}Ho(t,e,r,i,s,o){return this.Go(t,e,r,i,s)}jo(t,e,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ha}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((i,s)=>t[s]=i),r&&r.headers.forEach((i,s)=>t[s]=i)}zo(t,e){const r=iw[t];return`${this.Uo}/v1/${e}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn="WebChannelConnection";class aw extends sw{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,r,i,s){const o=Kh();return new Promise((l,u)=>{const d=new tm;d.setWithCredentials(!0),d.listenOnce(em.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case ql.NO_ERROR:const v=d.getResponseJson();jt(Fn,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(v)),l(v);break;case ql.TIMEOUT:jt(Fn,`RPC '${t}' ${o} timed out`),u(new zt(It.DEADLINE_EXCEEDED,"Request time out"));break;case ql.HTTP_ERROR:const _=d.getStatus();if(jt(Fn,`RPC '${t}' ${o} failed with status:`,_,"response text:",d.getResponseText()),_>0){let g=d.getResponseJson();Array.isArray(g)&&(g=g[0]);const N=g==null?void 0:g.error;if(N&&N.status&&N.message){const L=function(C){const R=C.toLowerCase().replace(/_/g,"-");return Object.values(It).indexOf(R)>=0?R:It.UNKNOWN}(N.status);u(new zt(L,N.message))}else u(new zt(It.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new zt(It.UNAVAILABLE,"Connection failed."));break;default:ee(9055,{l_:t,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{jt(Fn,`RPC '${t}' ${o} completed.`)}});const m=JSON.stringify(i);jt(Fn,`RPC '${t}' ${o} sending request:`,i),d.send(e,"POST",m,r,15)})}T_(t,e,r){const i=Kh(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=im(),l=rm(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,e,r),u.encodeInitMessageHeaders=!0;const m=s.join("");jt(Fn,`Creating RPC '${t}' stream ${i}: ${m}`,u);const v=o.createWebChannel(m,u);this.I_(v);let _=!1,g=!1;const N=new ow({Yo:O=>{g?jt(Fn,`Not sending because RPC '${t}' stream ${i} is closed:`,O):(_||(jt(Fn,`Opening RPC '${t}' stream ${i} transport.`),v.open(),_=!0),jt(Fn,`RPC '${t}' stream ${i} sending:`,O),v.send(O))},Zo:()=>v.close()}),L=(O,C,R)=>{O.listen(C,M=>{try{R(M)}catch(q){setTimeout(()=>{throw q},0)}})};return L(v,Ac.EventType.OPEN,()=>{g||(jt(Fn,`RPC '${t}' stream ${i} transport opened.`),N.o_())}),L(v,Ac.EventType.CLOSE,()=>{g||(g=!0,jt(Fn,`RPC '${t}' stream ${i} transport closed`),N.a_(),this.E_(v))}),L(v,Ac.EventType.ERROR,O=>{g||(g=!0,Oa(Fn,`RPC '${t}' stream ${i} transport errored. Name:`,O.name,"Message:",O.message),N.a_(new zt(It.UNAVAILABLE,"The operation could not be completed")))}),L(v,Ac.EventType.MESSAGE,O=>{var C;if(!g){const R=O.data[0];xe(!!R,16349);const M=R,q=(M==null?void 0:M.error)||((C=M[0])==null?void 0:C.error);if(q){jt(Fn,`RPC '${t}' stream ${i} received error:`,q);const K=q.status;let Q=function(x){const F=ln[x];if(F!==void 0)return Vm(F)}(K),S=q.message;Q===void 0&&(Q=It.INTERNAL,S="Unknown error status: "+K+" with message "+q.message),g=!0,N.a_(new zt(Q,S)),v.close()}else jt(Fn,`RPC '${t}' stream ${i} received:`,R),N.u_(R)}}),L(l,nm.STAT_EVENT,O=>{O.stat===Fh.PROXY?jt(Fn,`RPC '${t}' stream ${i} detected buffering proxy`):O.stat===Fh.NOPROXY&&jt(Fn,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.__()},0),N}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(e=>e===t)}}function gh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(n){return new hv(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(t,e,r=1e3,i=1.5,s=6e4){this.Mi=t,this.timerId=e,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,e-r);i>0&&jt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="PersistentStream";class Zm{constructor(t,e,r,i,s,o,l,u){this.Mi=t,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Xm(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===It.RESOURCE_EXHAUSTED?(rs(e.toString()),rs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===It.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===e&&this.G_(r,i)},r=>{t(()=>{const i=new zt(It.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(t,e){const r=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return jt(jp,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget(()=>this.D_===t?e():(jt(jp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cw extends Zm{constructor(t,e,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,i,o),this.serializer=s}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=pv(this.serializer,t),r=function(s){if(!("targetChange"in s))return se.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?se.min():o.readTime?Ni(o.readTime):se.min()}(t);return this.listener.H_(e,r)}Y_(t){const e={};e.database=$h(this.serializer),e.addTarget=function(s,o){let l;const u=o.target;if(l=qh(u)?{documents:yv(s,u)}:{query:vv(s,u).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=qm(s,o.resumeToken);const d=zh(s,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(se.min())>0){l.readTime=au(s,o.snapshotVersion.toTimestamp());const d=zh(s,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,t);const r=_v(this.serializer,t);r&&(e.labels=r),this.q_(e)}Z_(t){const e={};e.database=$h(this.serializer),e.removeTarget=t,this.q_(e)}}class lw extends Zm{constructor(t,e,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return xe(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,xe(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){xe(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=mv(t.writeResults,t.commitTime),r=Ni(t.commitTime);return this.listener.na(r,e)}ra(){const t={};t.database=$h(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map(r=>gv(this.serializer,r))};this.q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{}class hw extends uw{constructor(t,e,r,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new zt(It.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(t,Hh(e,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===It.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new zt(It.UNKNOWN,s.toString())})}Ho(t,e,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(t,Hh(e,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===It.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new zt(It.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class dw{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(rs(e),this.aa=!1):jt("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo="RemoteStore";class fw{constructor(t,e,r,i,s){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Ho(this)&&(jt(Bo,"Restarting streams for network reachability change."),await async function(u){const d=ce(u);d.Ea.add(4),await tl(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Cu(d)}(this))})}),this.Ra=new dw(r,i)}}async function Cu(n){if(Ho(n))for(const t of n.da)await t(!0)}async function tl(n){for(const t of n.da)await t(!1)}function t1(n,t){const e=ce(n);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),qd(e)?Bd(e):Ga(e).O_()&&jd(e,t))}function Vd(n,t){const e=ce(n),r=Ga(e);e.Ia.delete(t),r.O_()&&e1(e,t),e.Ia.size===0&&(r.O_()?r.L_():Ho(e)&&e.Ra.set("Unknown"))}function jd(n,t){if(n.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(se.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Ga(n).Y_(t)}function e1(n,t){n.Va.Ue(t),Ga(n).Z_(t)}function Bd(n){n.Va=new av({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),Ga(n).start(),n.Ra.ua()}function qd(n){return Ho(n)&&!Ga(n).x_()&&n.Ia.size>0}function Ho(n){return ce(n).Ea.size===0}function n1(n){n.Va=void 0}async function pw(n){n.Ra.set("Online")}async function gw(n){n.Ia.forEach((t,e)=>{jd(n,t)})}async function mw(n,t){n1(n),qd(n)?(n.Ra.ha(t),Bd(n)):n.Ra.set("Unknown")}async function yw(n,t,e){if(n.Ra.set("Online"),t instanceof Bm&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Ia.delete(l),i.Va.removeTarget(l))}(n,t)}catch(r){jt(Bo,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await lu(n,r)}else if(t instanceof Wl?n.Va.Ze(t):t instanceof jm?n.Va.st(t):n.Va.tt(t),!e.isEqual(se.min()))try{const r=await Qm(n.localStore);e.compareTo(r)>=0&&await function(s,o){const l=s.Va.Tt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const m=s.Ia.get(d);m&&s.Ia.set(d,m.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const m=s.Ia.get(u);if(!m)return;s.Ia.set(u,m.withResumeToken(On.EMPTY_BYTE_STRING,m.snapshotVersion)),e1(s,u);const v=new Ms(m.target,u,d,m.sequenceNumber);jd(s,v)}),s.remoteSyncer.applyRemoteEvent(l)}(n,e)}catch(r){jt(Bo,"Failed to raise snapshot:",r),await lu(n,r)}}async function lu(n,t,e){if(!$a(t))throw t;n.Ea.add(1),await tl(n),n.Ra.set("Offline"),e||(e=()=>Qm(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{jt(Bo,"Retrying IndexedDB access"),await e(),n.Ea.delete(1),await Cu(n)})}function r1(n,t){return t().catch(e=>lu(n,e,t))}async function Lu(n){const t=ce(n),e=Js(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Ed;for(;vw(t);)try{const i=await Zv(t.localStore,r);if(i===null){t.Ta.length===0&&e.L_();break}r=i.batchId,ww(t,i)}catch(i){await lu(t,i)}i1(t)&&s1(t)}function vw(n){return Ho(n)&&n.Ta.length<10}function ww(n,t){n.Ta.push(t);const e=Js(n);e.O_()&&e.X_&&e.ea(t.mutations)}function i1(n){return Ho(n)&&!Js(n).x_()&&n.Ta.length>0}function s1(n){Js(n).start()}async function _w(n){Js(n).ra()}async function bw(n){const t=Js(n);for(const e of n.Ta)t.ea(e.mutations)}async function Aw(n,t,e){const r=n.Ta.shift(),i=Ld.from(r,t,e);await r1(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Lu(n)}async function Ew(n,t){t&&Js(n).X_&&await async function(r,i){if(function(o){return iv(o)&&o!==It.ABORTED}(i.code)){const s=r.Ta.shift();Js(r).B_(),await r1(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Lu(r)}}(n,t),i1(n)&&s1(n)}async function Bp(n,t){const e=ce(n);e.asyncQueue.verifyOperationInProgress(),jt(Bo,"RemoteStore received new credentials");const r=Ho(e);e.Ea.add(3),await tl(e),r&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await Cu(e)}async function Iw(n,t){const e=ce(n);t?(e.Ea.delete(2),await Cu(e)):t||(e.Ea.add(2),await tl(e),e.Ra.set("Unknown"))}function Ga(n){return n.ma||(n.ma=function(e,r,i){const s=ce(e);return s.sa(),new cw(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Xo:pw.bind(null,n),t_:gw.bind(null,n),r_:mw.bind(null,n),H_:yw.bind(null,n)}),n.da.push(async t=>{t?(n.ma.B_(),qd(n)?Bd(n):n.Ra.set("Unknown")):(await n.ma.stop(),n1(n))})),n.ma}function Js(n){return n.fa||(n.fa=function(e,r,i){const s=ce(e);return s.sa(),new lw(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:_w.bind(null,n),r_:Ew.bind(null,n),ta:bw.bind(null,n),na:Aw.bind(null,n)}),n.da.push(async t=>{t?(n.fa.B_(),await Lu(n)):(await n.fa.stop(),n.Ta.length>0&&(jt(Bo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(t,e,r,i,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ts,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,i,s){const o=Date.now()+r,l=new Ud(t,e,o,i,s);return l.start(r),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new zt(It.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zd(n,t){if(rs("AsyncQueue",`${t}: ${n}`),$a(n))return new zt(It.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{static emptySet(t){return new xa(t.comparator)}constructor(t){this.comparator=t?(e,r)=>t(e,r)||Yt.comparator(e.key,r.key):(e,r)=>Yt.comparator(e.key,r.key),this.keyedMap=Ec(),this.sortedSet=new Ye(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,r)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof xa)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const i=e.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const r=new xa;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(){this.ga=new Ye(Yt.comparator)}track(t){const e=t.doc.key,r=this.ga.get(e);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(e,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(e,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(e):t.type===1&&r.type===2?this.ga=this.ga.insert(e,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):ee(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal((e,r)=>{t.push(r)}),t}}class Ba{constructor(t,e,r,i,s,o,l,u,d){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(t,e,r,i,s){const o=[];return e.forEach(l=>{o.push({type:0,doc:l})}),new Ba(t,e,xa.emptySet(e),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Iu(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==r[i].type||!e[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class Tw{constructor(){this.queries=Up(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,r){const i=ce(e),s=i.queries;i.queries=Up(),s.forEach((o,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new zt(It.ABORTED,"Firestore shutting down"))}}function Up(){return new zo(n=>Tm(n),Iu)}async function o1(n,t){const e=ce(n);let r=3;const i=t.query;let s=e.queries.get(i);s?!s.ba()&&t.Da()&&(r=2):(s=new Sw,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await e.onListen(i,!0);break;case 1:s.wa=await e.onListen(i,!1);break;case 2:await e.onFirstRemoteStoreListen(i)}}catch(o){const l=zd(o,`Initialization of query '${Ea(t.query)}' failed`);return void t.onError(l)}e.queries.set(i,s),s.Sa.push(t),t.va(e.onlineState),s.wa&&t.Fa(s.wa)&&Hd(e)}async function a1(n,t){const e=ce(n),r=t.query;let i=3;const s=e.queries.get(r);if(s){const o=s.Sa.indexOf(t);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function Pw(n,t){const e=ce(n);let r=!1;for(const i of t){const s=i.query,o=e.queries.get(s);if(o){for(const l of o.Sa)l.Fa(i)&&(r=!0);o.wa=i}}r&&Hd(e)}function Nw(n,t,e){const r=ce(n),i=r.queries.get(t);if(i)for(const s of i.Sa)s.onError(e);r.queries.delete(t)}function Hd(n){n.Ca.forEach(t=>{t.next()})}var Yh,zp;(zp=Yh||(Yh={})).Ma="default",zp.Cache="cache";class c1{constructor(t,e,r){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new Ba(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const r=e!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=Ba.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Yh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(t){this.key=t}}class u1{constructor(t){this.key=t}}class xw{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=we(),this.mutatedKeys=we(),this.eu=Pm(t),this.tu=new xa(this.eu)}get nu(){return this.Ya}ru(t,e){const r=e?e.iu:new qp,i=e?e.tu:this.tu;let s=e?e.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((m,v)=>{const _=i.get(m),g=Su(this.query,v)?v:null,N=!!_&&this.mutatedKeys.has(_.key),L=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let O=!1;_&&g?_.data.isEqual(g.data)?N!==L&&(r.track({type:3,doc:g}),O=!0):this.su(_,g)||(r.track({type:2,doc:g}),O=!0,(u&&this.eu(g,u)>0||d&&this.eu(g,d)<0)&&(l=!0)):!_&&g?(r.track({type:0,doc:g}),O=!0):_&&!g&&(r.track({type:1,doc:_}),O=!0,(u||d)&&(l=!0)),O&&(g?(o=o.add(g),s=L?s.add(m):s.delete(m)):(o=o.delete(m),s=s.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),s=s.delete(m.key),r.track({type:1,doc:m})}return{tu:o,iu:r,Cs:l,mutatedKeys:s}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r,i){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const o=t.iu.ya();o.sort((m,v)=>function(g,N){const L=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee(20277,{Rt:O})}};return L(g)-L(N)}(m.type,v.type)||this.eu(m.doc,v.doc)),this.ou(r),i=i??!1;const l=e&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new Ba(this.query,t.tu,s,o,t.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new qp,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=we(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const e=[];return t.forEach(r=>{this.Xa.has(r)||e.push(new u1(r))}),this.Xa.forEach(r=>{t.has(r)||e.push(new l1(r))}),e}cu(t){this.Ya=t.Qs,this.Xa=we();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return Ba.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Wd="SyncEngine";class Cw{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class Lw{constructor(t){this.key=t,this.hu=!1}}class Rw{constructor(t,e,r,i,s,o){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new zo(l=>Tm(l),Iu),this.Iu=new Map,this.Eu=new Set,this.du=new Ye(Yt.comparator),this.Au=new Map,this.Ru=new Dd,this.Vu={},this.mu=new Map,this.fu=ja.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function kw(n,t,e=!0){const r=m1(n);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await h1(r,t,e,!0),i}async function Dw(n,t){const e=m1(n);await h1(e,t,!0,!1)}async function h1(n,t,e,r){const i=await tw(n.localStore,Pi(t)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,e);let l;return r&&(l=await Ow(n,t,s,o==="current",i.resumeToken)),n.isPrimaryClient&&e&&t1(n.remoteStore,i),l}async function Ow(n,t,e,r,i){n.pu=(v,_,g)=>async function(L,O,C,R){let M=O.view.ru(C);M.Cs&&(M=await Op(L.localStore,O.query,!1).then(({documents:S})=>O.view.ru(S,M)));const q=R&&R.targetChanges.get(O.targetId),K=R&&R.targetMismatches.get(O.targetId)!=null,Q=O.view.applyChanges(M,L.isPrimaryClient,q,K);return Wp(L,O.targetId,Q.au),Q.snapshot}(n,v,_,g);const s=await Op(n.localStore,t,!0),o=new xw(t,s.Qs),l=o.ru(s.documents),u=Zc.createSynthesizedTargetChangeForCurrentChange(e,r&&n.onlineState!=="Offline",i),d=o.applyChanges(l,n.isPrimaryClient,u);Wp(n,e,d.au);const m=new Cw(t,e,o);return n.Tu.set(t,m),n.Iu.has(e)?n.Iu.get(e).push(t):n.Iu.set(e,[t]),d.snapshot}async function Fw(n,t,e){const r=ce(n),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!Iu(o,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Gh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),e&&Vd(r.remoteStore,i.targetId),Jh(r,i.targetId)}).catch(Wa)):(Jh(r,i.targetId),await Gh(r.localStore,i.targetId,!0))}async function Mw(n,t){const e=ce(n),r=e.Tu.get(t),i=e.Iu.get(r.targetId);e.isPrimaryClient&&i.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),Vd(e.remoteStore,r.targetId))}async function Vw(n,t,e){const r=Ww(n);try{const i=await function(o,l){const u=ce(o),d=He.now(),m=l.reduce((g,N)=>g.add(N.key),we());let v,_;return u.persistence.runTransaction("Locally write mutations","readwrite",g=>{let N=ss(),L=we();return u.Ns.getEntries(g,m).next(O=>{N=O,N.forEach((C,R)=>{R.isValidDocument()||(L=L.add(C))})}).next(()=>u.localDocuments.getOverlayedDocuments(g,N)).next(O=>{v=O;const C=[];for(const R of l){const M=Zy(R,v.get(R.key).overlayedDocument);M!=null&&C.push(new eo(R.key,M,wm(M.value.mapValue),ai.exists(!0)))}return u.mutationQueue.addMutationBatch(g,d,C,l)}).next(O=>{_=O;const C=O.applyToLocalDocumentSet(v,L);return u.documentOverlayCache.saveOverlays(g,O.batchId,C)})}).then(()=>({batchId:_.batchId,changes:xm(v)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let d=o.Vu[o.currentUser.toKey()];d||(d=new Ye(ve)),d=d.insert(l,u),o.Vu[o.currentUser.toKey()]=d}(r,i.batchId,e),await el(r,i.changes),await Lu(r.remoteStore)}catch(i){const s=zd(i,"Failed to persist write");e.reject(s)}}async function d1(n,t){const e=ce(n);try{const r=await Qv(e.localStore,t);t.targetChanges.forEach((i,s)=>{const o=e.Au.get(s);o&&(xe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?xe(o.hu,14607):i.removedDocuments.size>0&&(xe(o.hu,42227),o.hu=!1))}),await el(e,r,t)}catch(r){await Wa(r)}}function Hp(n,t,e){const r=ce(n);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const i=[];r.Tu.forEach((s,o)=>{const l=o.view.va(t);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=ce(o);u.onlineState=l;let d=!1;u.queries.forEach((m,v)=>{for(const _ of v.Sa)_.va(l)&&(d=!0)}),d&&Hd(u)}(r.eventManager,t),i.length&&r.Pu.H_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function jw(n,t,e){const r=ce(n);r.sharedClientState.updateQueryState(t,"rejected",e);const i=r.Au.get(t),s=i&&i.key;if(s){let o=new Ye(Yt.comparator);o=o.insert(s,Un.newNoDocument(s,se.min()));const l=we().add(s),u=new Nu(se.min(),new Map,new Ye(ve),o,l);await d1(r,u),r.du=r.du.remove(s),r.Au.delete(t),$d(r)}else await Gh(r.localStore,t,!1).then(()=>Jh(r,t,e)).catch(Wa)}async function Bw(n,t){const e=ce(n),r=t.batch.batchId;try{const i=await Jv(e.localStore,t);p1(e,r,null),f1(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await el(e,i)}catch(i){await Wa(i)}}async function qw(n,t,e){const r=ce(n);try{const i=await function(o,l){const u=ce(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return u.mutationQueue.lookupMutationBatch(d,l).next(v=>(xe(v!==null,37113),m=v.keys(),u.mutationQueue.removeMutationBatch(d,v))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,m,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>u.localDocuments.getDocuments(d,m))})}(r.localStore,t);p1(r,t,e),f1(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),await el(r,i)}catch(i){await Wa(i)}}function f1(n,t){(n.mu.get(t)||[]).forEach(e=>{e.resolve()}),n.mu.delete(t)}function p1(n,t,e){const r=ce(n);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(e?s.reject(e):s.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function Jh(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.Iu.get(t))n.Tu.delete(r),e&&n.Pu.yu(r,e);n.Iu.delete(t),n.isPrimaryClient&&n.Ru.jr(t).forEach(r=>{n.Ru.containsKey(r)||g1(n,r)})}function g1(n,t){n.Eu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(Vd(n.remoteStore,e),n.du=n.du.remove(t),n.Au.delete(e),$d(n))}function Wp(n,t,e){for(const r of e)r instanceof l1?(n.Ru.addReference(r.key,t),Uw(n,r)):r instanceof u1?(jt(Wd,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,t),n.Ru.containsKey(r.key)||g1(n,r.key)):ee(19791,{wu:r})}function Uw(n,t){const e=t.key,r=e.path.canonicalString();n.du.get(e)||n.Eu.has(r)||(jt(Wd,"New document in limbo: "+e),n.Eu.add(r),$d(n))}function $d(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Eu.values().next().value;n.Eu.delete(t);const e=new Yt(ze.fromString(t)),r=n.fu.next();n.Au.set(r,new Lw(e)),n.du=n.du.insert(e,r),t1(n.remoteStore,new Ms(Pi(Nd(e.path)),r,"TargetPurposeLimboResolution",_u.ce))}}async function el(n,t,e){const r=ce(n),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{o.push(r.pu(u,t,e).then(d=>{var m;if((d||e)&&r.isPrimaryClient){const v=d?!d.fromCache:(m=e==null?void 0:e.targetChanges.get(u.targetId))==null?void 0:m.current;r.sharedClientState.updateQueryState(u.targetId,v?"current":"not-current")}if(d){i.push(d);const v=Fd.As(u.targetId,d);s.push(v)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(u,d){const m=ce(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>At.forEach(d,_=>At.forEach(_.Es,g=>m.persistence.referenceDelegate.addReference(v,_.targetId,g)).next(()=>At.forEach(_.ds,g=>m.persistence.referenceDelegate.removeReference(v,_.targetId,g)))))}catch(v){if(!$a(v))throw v;jt(Md,"Failed to update sequence numbers: "+v)}for(const v of d){const _=v.targetId;if(!v.fromCache){const g=m.Ms.get(_),N=g.snapshotVersion,L=g.withLastLimboFreeSnapshotVersion(N);m.Ms=m.Ms.insert(_,L)}}}(r.localStore,s))}async function zw(n,t){const e=ce(n);if(!e.currentUser.isEqual(t)){jt(Wd,"User change. New user:",t.toKey());const r=await Jm(e.localStore,t);e.currentUser=t,function(s,o){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new zt(It.CANCELLED,o))})}),s.mu.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await el(e,r.Ls)}}function Hw(n,t){const e=ce(n),r=e.Au.get(t);if(r&&r.hu)return we().add(r.key);{let i=we();const s=e.Iu.get(t);if(!s)return i;for(const o of s){const l=e.Tu.get(o);i=i.unionWith(l.view.nu)}return i}}function m1(n){const t=ce(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=d1.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hw.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=jw.bind(null,t),t.Pu.H_=Pw.bind(null,t.eventManager),t.Pu.yu=Nw.bind(null,t.eventManager),t}function Ww(n){const t=ce(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Bw.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=qw.bind(null,t),t}class uu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=xu(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return Yv(this.persistence,new $v,t.initialUser,this.serializer)}Cu(t){return new Ym(Od.mi,this.serializer)}Du(t){return new nw}async terminate(){var t,e;(t=this.gcScheduler)==null||t.stop(),(e=this.indexBackfillerScheduler)==null||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uu.provider={build:()=>new uu};class $w extends uu{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){xe(this.persistence.referenceDelegate instanceof cu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Lv(r,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?dr.withCacheSize(this.cacheSizeBytes):dr.DEFAULT;return new Ym(r=>cu.mi(r,e),this.serializer)}}class Qh{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Hp(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=zw.bind(null,this.syncEngine),await Iw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Tw}()}createDatastore(t){const e=xu(t.databaseInfo.databaseId),r=function(s){return new aw(s)}(t.databaseInfo);return function(s,o,l,u){return new hw(s,o,l,u)}(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return function(r,i,s,o,l){return new fw(r,i,s,o,l)}(this.localStore,this.datastore,t.asyncQueue,e=>Hp(this.syncEngine,e,0),function(){return Vp.v()?new Vp:new rw}())}createSyncEngine(t,e){return function(i,s,o,l,u,d,m){const v=new Rw(i,s,o,l,u,d);return m&&(v.gu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(i){const s=ce(i);jt(Bo,"RemoteStore shutting down."),s.Ea.add(5),await tl(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(e=this.eventManager)==null||e.terminate()}}Qh.provider={build:()=>new Qh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):rs("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs="FirestoreClient";class Gw{constructor(t,e,r,i,s){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=i,this.user=qn.UNAUTHENTICATED,this.clientId=bd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{jt(Qs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(jt(Qs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ts;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const r=zd(e,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function mh(n,t){n.asyncQueue.verifyOperationInProgress(),jt(Qs,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let r=e.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Jm(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function $p(n,t){n.asyncQueue.verifyOperationInProgress();const e=await Kw(n);jt(Qs,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(r=>Bp(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Bp(t.remoteStore,i)),n._onlineComponents=t}async function Kw(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){jt(Qs,"Using user provided OfflineComponentProvider");try{await mh(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(i){return i.name==="FirebaseError"?i.code===It.FAILED_PRECONDITION||i.code===It.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(e))throw e;Oa("Error using user provided cache. Falling back to memory cache: "+e),await mh(n,new uu)}}else jt(Qs,"Using default OfflineComponentProvider"),await mh(n,new $w(void 0));return n._offlineComponents}async function v1(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(jt(Qs,"Using user provided OnlineComponentProvider"),await $p(n,n._uninitializedComponentsProvider._online)):(jt(Qs,"Using default OnlineComponentProvider"),await $p(n,new Qh))),n._onlineComponents}function Yw(n){return v1(n).then(t=>t.syncEngine)}async function w1(n){const t=await v1(n),e=t.eventManager;return e.onListen=kw.bind(null,t.syncEngine),e.onUnlisten=Fw.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=Dw.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=Mw.bind(null,t.syncEngine),e}function Jw(n,t,e={}){const r=new ts;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,d){const m=new y1({next:_=>{m.Nu(),o.enqueueAndForget(()=>a1(s,v));const g=_.docs.has(l);!g&&_.fromCache?d.reject(new zt(It.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&_.fromCache&&u&&u.source==="server"?d.reject(new zt(It.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(_)},error:_=>d.reject(_)}),v=new c1(Nd(l.path),m,{includeMetadataChanges:!0,qa:!0});return o1(s,v)}(await w1(n),n.asyncQueue,t,e,r)),r.promise}function Qw(n,t,e={}){const r=new ts;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,d){const m=new y1({next:_=>{m.Nu(),o.enqueueAndForget(()=>a1(s,v)),_.fromCache&&u.source==="server"?d.reject(new zt(It.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(_)},error:_=>d.reject(_)}),v=new c1(l,m,{includeMetadataChanges:!0,qa:!0});return o1(s,v)}(await w1(n),n.asyncQueue,t,e,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="firestore.googleapis.com",Kp=!0;class Yp{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new zt(It.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=b1,this.ssl=Kp}else this.host=t.host,this.ssl=t.ssl??Kp;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Km;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<xv)throw new zt(It.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}fy("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_1(t.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new zt(It.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new zt(It.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new zt(It.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Ru{constructor(t,e,r,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new zt(It.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new zt(It.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yp(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ry;switch(r.type){case"firstParty":return new ay(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new zt(It.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=Gp.get(e);r&&(jt("ComponentProvider","Removing Datastore"),Gp.delete(e),r.terminate())}(this),Promise.resolve()}}function Xw(n,t,e,r={}){var d;n=is(n,Ru);const i=Ua(t),s=n._getSettings(),o={...s,emulatorOptions:n._getEmulatorOptions()},l=`${t}:${e}`;i&&(Wg(`https://${l}`),$g("Firestore",!0)),s.host!==b1&&s.host!==l&&Oa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:i,emulatorOptions:r};if(!Mo(u,o)&&(n._setSettings(u),r.mockUserToken)){let m,v;if(typeof r.mockUserToken=="string")m=r.mockUserToken,v=qn.MOCK_USER;else{m=N2(r.mockUserToken,(d=n._app)==null?void 0:d.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new zt(It.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new qn(_)}n._authCredentials=new iy(new om(m,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new ku(this.firestore,t,this._query)}}class vn{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zs(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new vn(this.firestore,t,this._key)}toJSON(){return{type:vn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,r){if(Qc(e,vn._jsonSchema))return new vn(t,r||null,new Yt(ze.fromString(e.referencePath)))}}vn._jsonSchemaVersion="firestore/documentReference/1.0",vn._jsonSchema={type:un("string",vn._jsonSchemaVersion),referencePath:un("string")};class zs extends ku{constructor(t,e,r){super(t,e,Nd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new vn(this.firestore,null,new Yt(t))}withConverter(t){return new zs(this.firestore,t,this._path)}}function qa(n,t,...e){if(n=Dn(n),am("collection","path",t),n instanceof Ru){const r=ze.fromString(t,...e);return lp(r),new zs(n,null,r)}{if(!(n instanceof vn||n instanceof zs))throw new zt(It.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ze.fromString(t,...e));return lp(r),new zs(n.firestore,null,r)}}function Hs(n,t,...e){if(n=Dn(n),arguments.length===1&&(t=bd.newId()),am("doc","path",t),n instanceof Ru){const r=ze.fromString(t,...e);return cp(r),new vn(n,null,new Yt(r))}{if(!(n instanceof vn||n instanceof zs))throw new zt(It.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ze.fromString(t,...e));return cp(r),new vn(n.firestore,n instanceof zs?n.converter:null,new Yt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp="AsyncQueue";class Qp{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Xm(this,"async_queue_retry"),this._c=()=>{const r=gh();r&&jt(Jp,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const e=gh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=gh();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const e=new ts;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!$a(t))throw t;jt(Jp,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const e=this.ac.then(()=>(this.rc=!0,t().catch(r=>{throw this.nc=r,this.rc=!1,rs("INTERNAL UNHANDLED ERROR: ",Xp(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=e,e}enqueueAfterDelay(t,e,r){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const i=Ud.createAndSchedule(this,t,e,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&ee(47125,{Pc:Xp(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function Xp(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}class Ka extends Ru{constructor(t,e,r,i){super(t,e,r,i),this.type="firestore",this._queue=new Qp,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Qp(t),this._firestoreClient=void 0,await t}}}function Zw(n,t){const e=typeof n=="object"?n:Jg(),r=typeof n=="string"?n:t||eu,i=wd(e,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=T2("firestore");s&&Xw(i,...s)}return i}function Gd(n){if(n._terminated)throw new zt(It.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||t_(n),n._firestoreClient}function t_(n){var r,i,s;const t=n._freezeSettings(),e=function(l,u,d,m){return new Iy(l,u,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,_1(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,t);n._componentsProvider||(i=t.localCache)!=null&&i._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new Gw(n._authCredentials,n._appCheckCredentials,n._queue,e,n._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ur(On.fromBase64String(t))}catch(e){throw new zt(It.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Ur(On.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ur._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Qc(t,Ur._jsonSchema))return Ur.fromBase64String(t.bytes)}}Ur._jsonSchemaVersion="firestore/bytes/1.0",Ur._jsonSchema={type:un("string",Ur._jsonSchemaVersion),bytes:un("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new zt(It.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new zt(It.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new zt(It.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return ve(this._lat,t._lat)||ve(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:xi._jsonSchemaVersion}}static fromJSON(t){if(Qc(t,xi._jsonSchema))return new xi(t.latitude,t.longitude)}}xi._jsonSchemaVersion="firestore/geoPoint/1.0",xi._jsonSchema={type:un("string",xi._jsonSchemaVersion),latitude:un("number"),longitude:un("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Ci._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Qc(t,Ci._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(e=>typeof e=="number"))return new Ci(t.vectorValues);throw new zt(It.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ci._jsonSchemaVersion="firestore/vectorValue/1.0",Ci._jsonSchema={type:un("string",Ci._jsonSchemaVersion),vectorValues:un("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_=/^__.*__$/;class n_{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return this.fieldMask!==null?new eo(t,this.data,this.fieldMask,e,this.fieldTransforms):new Xc(t,this.data,e,this.fieldTransforms)}}class A1{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new eo(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function E1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee(40011,{Ac:n})}}class Yd{constructor(t,e,r,i,s,o){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Yd({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var i;const e=(i=this.path)==null?void 0:i.child(t),r=this.Vc({path:e,fc:!1});return r.gc(t),r}yc(t){var i;const e=(i=this.path)==null?void 0:i.child(t),r=this.Vc({path:e,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return hu(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(E1(this.Ac)&&e_.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class r_{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||xu(t)}Cc(t,e,r,i=!1){return new Yd({Ac:t,methodName:e,Dc:r,path:kn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function I1(n){const t=n._freezeSettings(),e=xu(n._databaseId);return new r_(n._databaseId,!!t.ignoreUndefinedProperties,e)}function i_(n,t,e,r,i,s={}){const o=n.Cc(s.merge||s.mergeFields?2:0,t,e,i);Jd("Data must be an object, but it was:",o,r);const l=S1(r,o);let u,d;if(s.merge)u=new Ir(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const m=[];for(const v of s.mergeFields){const _=Xh(t,v,e);if(!o.contains(_))throw new zt(It.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);P1(m,_)||m.push(_)}u=new Ir(m),d=o.fieldTransforms.filter(v=>u.covers(v.field))}else u=null,d=o.fieldTransforms;return new n_(new fr(l),u,d)}class Ou extends Kd{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ou}}function s_(n,t,e,r){const i=n.Cc(1,t,e);Jd("Data must be an object, but it was:",i,r);const s=[],o=fr.empty();to(r,(u,d)=>{const m=Qd(t,u,e);d=Dn(d);const v=i.yc(m);if(d instanceof Ou)s.push(m);else{const _=Fu(d,v);_!=null&&(s.push(m),o.set(m,_))}});const l=new Ir(s);return new A1(o,l,i.fieldTransforms)}function o_(n,t,e,r,i,s){const o=n.Cc(1,t,e),l=[Xh(t,r,e)],u=[i];if(s.length%2!=0)throw new zt(It.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)l.push(Xh(t,s[_])),u.push(s[_+1]);const d=[],m=fr.empty();for(let _=l.length-1;_>=0;--_)if(!P1(d,l[_])){const g=l[_];let N=u[_];N=Dn(N);const L=o.yc(g);if(N instanceof Ou)d.push(g);else{const O=Fu(N,L);O!=null&&(d.push(g),m.set(g,O))}}const v=new Ir(d);return new A1(m,v,o.fieldTransforms)}function Fu(n,t){if(T1(n=Dn(n)))return Jd("Unsupported field value:",t,n),S1(n,t);if(n instanceof Kd)return function(r,i){if(!E1(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=Fu(l,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(n,t)}return function(r,i){if((r=Dn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Gy(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=He.fromDate(r);return{timestampValue:au(i.serializer,s)}}if(r instanceof He){const s=new He(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:au(i.serializer,s)}}if(r instanceof xi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ur)return{bytesValue:qm(i.serializer,r._byteString)};if(r instanceof vn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:kd(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ci)return function(o,l){return{mapValue:{fields:{[mm]:{stringValue:vm},[nu]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return xd(l.serializer,d)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Ad(r)}`)}(n,t)}function S1(n,t){const e={};return um(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):to(n,(r,i)=>{const s=Fu(i,t.mc(r));s!=null&&(e[r]=s)}),{mapValue:{fields:e}}}function T1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof He||n instanceof xi||n instanceof Ur||n instanceof vn||n instanceof Kd||n instanceof Ci)}function Jd(n,t,e){if(!T1(e)||!cm(e)){const r=Ad(e);throw r==="an object"?t.Sc(n+" a custom object"):t.Sc(n+" "+r)}}function Xh(n,t,e){if((t=Dn(t))instanceof Du)return t._internalPath;if(typeof t=="string")return Qd(n,t);throw hu("Field path arguments must be of type string or ",n,!1,void 0,e)}const a_=new RegExp("[~\\*/\\[\\]]");function Qd(n,t,e){if(t.search(a_)>=0)throw hu(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Du(...t.split("."))._internalPath}catch{throw hu(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function hu(n,t,e,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${t}() called with invalid data`;e&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new zt(It.INVALID_ARGUMENT,l+n+u)}function P1(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(t,e,r,i,s){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new vn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new c_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(x1("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class c_ extends N1{data(){return super.data()}}function x1(n,t){return typeof t=="string"?Qd(n,t):t instanceof Du?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new zt(It.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class u_{convertValue(t,e="none"){switch(Ys(t)){case 0:return null;case 1:return t.booleanValue;case 2:return en(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ks(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw ee(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const r={};return to(t,(i,s)=>{r[i]=this.convertValue(s,e)}),r}convertVectorValue(t){var r,i,s;const e=(s=(i=(r=t.fields)==null?void 0:r[nu].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>en(o.doubleValue));return new Ci(e)}convertGeoPoint(t){return new xi(en(t.latitude),en(t.longitude))}convertArray(t,e){return(t.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(t,e){switch(e){case"previous":const r=Au(t);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(Bc(t));default:return null}}convertTimestamp(t){const e=Gs(t);return new He(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=ze.fromString(t);xe(Gm(r),9688,{name:t});const i=new qc(r.get(1),r.get(3)),s=new Yt(r.popFirst(5));return i.isEqual(e)||rs(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(n,t,e){let r;return r=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,r}class Sc{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Lo extends N1{constructor(t,e,r,i,s,o){super(t,e,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new $l(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(x1("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new zt(It.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=Lo._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}Lo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Lo._jsonSchema={type:un("string",Lo._jsonSchemaVersion),bundleSource:un("string","DocumentSnapshot"),bundleName:un("string"),bundle:un("string")};class $l extends Lo{data(t={}){return super.data(t)}}class Ca{constructor(t,e,r,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new Sc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(r=>{t.call(e,new $l(this._firestore,this._userDataWriter,r.key,r,new Sc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new zt(It.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new $l(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Sc(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new $l(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Sc(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,m=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),m=o.indexOf(l.doc.key)),{type:d_(l.type),doc:u,oldIndex:d,newIndex:m}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new zt(It.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ca._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=bd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(e.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function d_(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(n){n=is(n,vn);const t=is(n.firestore,Ka);return Jw(Gd(t),n._key).then(e=>p_(t,n,e))}Ca._jsonSchemaVersion="firestore/querySnapshot/1.0",Ca._jsonSchema={type:un("string",Ca._jsonSchemaVersion),bundleSource:un("string","QuerySnapshot"),bundleName:un("string"),bundle:un("string")};class C1 extends u_{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ur(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new vn(this.firestore,null,e)}}function Xd(n){n=is(n,ku);const t=is(n.firestore,Ka),e=Gd(t),r=new C1(t);return l_(n._query),Qw(e,n._query).then(i=>new Ca(t,r,n,i))}function f_(n,t,e,...r){n=is(n,vn);const i=is(n.firestore,Ka),s=I1(i);let o;return o=typeof(t=Dn(t))=="string"||t instanceof Du?o_(s,"updateDoc",n._key,t,e,r):s_(s,"updateDoc",n._key,t),ef(i,[o.toMutation(n._key,ai.exists(!0))])}function Zd(n){return ef(is(n.firestore,Ka),[new Cd(n._key,ai.none())])}function tf(n,t){const e=is(n.firestore,Ka),r=Hs(n),i=h_(n.converter,t);return ef(e,[i_(I1(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ai.exists(!1))]).then(()=>r)}function ef(n,t){return function(r,i){const s=new ts;return r.asyncQueue.enqueueAndForget(async()=>Vw(await Yw(r),i,s)),s.promise}(Gd(n),t)}function p_(n,t,e){const r=e.docs.get(t._key),i=new C1(n);return new Lo(n,i,t._key,r,new Sc(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(i){Ha=i})(za),Da(new Vo("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new Ka(new sy(r.getProvider("auth-internal")),new cy(o,r.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new zt(It.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qc(d.options.projectId,m)}(o,i),o);return s={useFetchStreams:e,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),qs(ip,sp,t),qs(ip,sp,"esm2020")})();function L1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const g_=L1,R1=new Yc("auth","Firebase",L1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du=new yd("@firebase/auth");function m_(n,...t){du.logLevel<=ye.WARN&&du.warn(`Auth (${za}): ${n}`,...t)}function Gl(n,...t){du.logLevel<=ye.ERROR&&du.error(`Auth (${za}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(n,...t){throw rf(n,...t)}function ci(n,...t){return rf(n,...t)}function nf(n,t,e){const r={...g_(),[t]:e};return new Yc("auth","Firebase",r).create(t,{appName:n.name})}function es(n){return nf(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function y_(n,t,e){const r=e;if(!(t instanceof r))throw r.name!==t.constructor.name&&zr(n,"argument-error"),nf(n,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function rf(n,...t){if(typeof n!="string"){const e=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(e,...r)}return R1.create(n,...t)}function te(n,t,...e){if(!n)throw rf(t,...e)}function Xi(n){const t="INTERNAL ASSERTION FAILED: "+n;throw Gl(t),new Error(t)}function os(n,t){n||Xi(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function v_(){return Zp()==="http:"||Zp()==="https:"}function Zp(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(v_()||D2()||"connection"in navigator)?navigator.onLine:!0}function __(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(t,e){this.shortDelay=t,this.longDelay=e,os(e>t,"Short delay should be less than long delay!"),this.isMobile=L2()||O2()}get(){return w_()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sf(n,t){os(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{static initialize(t,e,r){this.fetchImpl=t,e&&(this.headersImpl=e),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],E_=new nl(3e4,6e4);function no(n,t){return n.tenantId&&!t.tenantId?{...t,tenantId:n.tenantId}:t}async function ro(n,t,e,r,i={}){return D1(n,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const l=Jc({key:n.config.apiKey,...o}).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);const d={method:t,headers:u,...s};return k2()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&Ua(n.emulatorConfig.host)&&(d.credentials="include"),k1.fetch()(await O1(n,n.config.apiHost,e,l),d)})}async function D1(n,t,e){n._canInitEmulator=!1;const r={...b_,...t};try{const i=new S_(n),s=await Promise.race([e(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Fl(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fl(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Fl(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw Fl(n,"user-disabled",o);const m=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw nf(n,m,d);zr(n,m)}}catch(i){if(i instanceof as)throw i;zr(n,"network-request-failed",{message:String(i)})}}async function rl(n,t,e,r,i={}){const s=await ro(n,t,e,r,i);return"mfaPendingCredential"in s&&zr(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function O1(n,t,e,r){const i=`${t}${e}?${r}`,s=n,o=s.config.emulator?sf(n.config,i):`${n.config.apiScheme}://${i}`;return A_.includes(e)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function I_(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class S_{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,r)=>{this.timer=setTimeout(()=>r(ci(this.auth,"network-request-failed")),E_.get())})}}function Fl(n,t,e){const r={appName:n.name};e.email&&(r.email=e.email),e.phoneNumber&&(r.phoneNumber=e.phoneNumber);const i=ci(n,t,r);return i.customData._tokenResponse=e,i}function tg(n){return n!==void 0&&n.enterprise!==void 0}class T_{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return I_(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function P_(n,t){return ro(n,"GET","/v2/recaptchaConfig",no(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N_(n,t){return ro(n,"POST","/v1/accounts:delete",t)}async function fu(n,t){return ro(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function x_(n,t=!1){const e=Dn(n),r=await e.getIdToken(t),i=of(r);te(i&&i.exp&&i.auth_time&&i.iat,e.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Lc(yh(i.auth_time)),issuedAtTime:Lc(yh(i.iat)),expirationTime:Lc(yh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function yh(n){return Number(n)*1e3}function of(n){const[t,e,r]=n.split(".");if(t===void 0||e===void 0||r===void 0)return Gl("JWT malformed, contained fewer than 3 sections"),null;try{const i=qg(e);return i?JSON.parse(i):(Gl("Failed to decode base64 JWT payload"),null)}catch(i){return Gl("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function eg(n){const t=of(n);return te(t,"internal-error"),te(typeof t.exp<"u","internal-error"),te(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wc(n,t,e=!1){if(e)return t;try{return await t}catch(r){throw r instanceof as&&C_(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function C_({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lc(this.lastLoginAt),this.creationTime=Lc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pu(n){var v;const t=n.auth,e=await n.getIdToken(),r=await Wc(n,fu(t,{idToken:e}));te(r==null?void 0:r.users.length,t,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const s=(v=i.providerUserInfo)!=null&&v.length?F1(i.providerUserInfo):[],o=k_(n.providerData,s),l=n.isAnonymous,u=!(n.email&&i.passwordHash)&&!(o!=null&&o.length),d=l?u:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new ed(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(n,m)}async function R_(n){const t=Dn(n);await pu(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function k_(n,t){return[...n.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function F1(n){return n.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D_(n,t){const e=await D1(n,{},async()=>{const r=Jc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await O1(n,i,"/v1/token",`key=${s}`),l=await n._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:r};return n.emulatorConfig&&Ua(n.emulatorConfig.host)&&(u.credentials="include"),k1.fetch()(o,u)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function O_(n,t){return ro(n,"POST","/v2/accounts:revokeToken",no(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){te(t.idToken,"internal-error"),te(typeof t.idToken<"u","internal-error"),te(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):eg(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){te(t.length!==0,"internal-error");const e=eg(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:r,refreshToken:i,expiresIn:s}=await D_(t,e);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,e,r){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,e){const{refreshToken:r,accessToken:i,expirationTime:s}=e,o=new La;return r&&(te(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(te(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(te(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new La,this.toJSON())}_performRefresh(){return Xi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(n,t){te(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class oi{constructor({uid:t,auth:e,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new L_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ed(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(t){const e=await Wc(this,this.stsTokenManager.getToken(this.auth,t));return te(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return x_(this,t)}reload(){return R_(this)}_assign(t){this!==t&&(te(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new oi({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),e&&await pu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Er(this.auth.app))return Promise.reject(es(this.auth));const t=await this.getIdToken();return await Wc(this,N_(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const r=e.displayName??void 0,i=e.email??void 0,s=e.phoneNumber??void 0,o=e.photoURL??void 0,l=e.tenantId??void 0,u=e._redirectEventId??void 0,d=e.createdAt??void 0,m=e.lastLoginAt??void 0,{uid:v,emailVerified:_,isAnonymous:g,providerData:N,stsTokenManager:L}=e;te(v&&L,t,"internal-error");const O=La.fromJSON(this.name,L);te(typeof v=="string",t,"internal-error"),Cs(r,t.name),Cs(i,t.name),te(typeof _=="boolean",t,"internal-error"),te(typeof g=="boolean",t,"internal-error"),Cs(s,t.name),Cs(o,t.name),Cs(l,t.name),Cs(u,t.name),Cs(d,t.name),Cs(m,t.name);const C=new oi({uid:v,auth:t,email:i,emailVerified:_,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:s,tenantId:l,stsTokenManager:O,createdAt:d,lastLoginAt:m});return N&&Array.isArray(N)&&(C.providerData=N.map(R=>({...R}))),u&&(C._redirectEventId=u),C}static async _fromIdTokenResponse(t,e,r=!1){const i=new La;i.updateFromServerResponse(e);const s=new oi({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await pu(s),s}static async _fromGetAccountInfoResponse(t,e,r){const i=e.users[0];te(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?F1(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new La;l.updateFromIdToken(r);const u=new oi({uid:i.localId,auth:t,stsTokenManager:l,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ed(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng=new Map;function Zi(n){os(n instanceof Function,"Expected a class definition");let t=ng.get(n);return t?(os(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,ng.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}M1.type="NONE";const rg=M1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(n,t,e){return`firebase:${n}:${t}:${e}`}class Ra{constructor(t,e,r){this.persistence=t,this.auth=e,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Kl(this.userKey,i.apiKey,s),this.fullPersistenceKey=Kl("persistence",i.apiKey,s),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await fu(this.auth,{idToken:t}).catch(()=>{});return e?oi._fromGetAccountInfoResponse(this.auth,e,t):null}return oi._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,r="authUser"){if(!e.length)return new Ra(Zi(rg),t,r);const i=(await Promise.all(e.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||Zi(rg);const o=Kl(r,t.config.apiKey,t.name);let l=null;for(const d of e)try{const m=await d._get(o);if(m){let v;if(typeof m=="string"){const _=await fu(t,{idToken:m}).catch(()=>{});if(!_)break;v=await oi._fromGetAccountInfoResponse(t,_,m)}else v=oi._fromJSON(t,m);d!==s&&(l=v),s=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Ra(s,t,r):(s=u[0],l&&await s._set(o,l.toJSON()),await Promise.all(e.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new Ra(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(q1(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(V1(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(z1(t))return"Blackberry";if(H1(t))return"Webos";if(j1(t))return"Safari";if((t.includes("chrome/")||B1(t))&&!t.includes("edge/"))return"Chrome";if(U1(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(e);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function V1(n=Hn()){return/firefox\//i.test(n)}function j1(n=Hn()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function B1(n=Hn()){return/crios\//i.test(n)}function q1(n=Hn()){return/iemobile/i.test(n)}function U1(n=Hn()){return/android/i.test(n)}function z1(n=Hn()){return/blackberry/i.test(n)}function H1(n=Hn()){return/webos/i.test(n)}function af(n=Hn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function F_(n=Hn()){var t;return af(n)&&!!((t=window.navigator)!=null&&t.standalone)}function M_(){return F2()&&document.documentMode===10}function W1(n=Hn()){return af(n)||U1(n)||H1(n)||z1(n)||/windows phone/i.test(n)||q1(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(n,t=[]){let e;switch(n){case"Browser":e=ig(Hn());break;case"Worker":e=`${ig(Hn())}-${n}`;break;default:e=n}const r=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${za}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const r=s=>new Promise((o,l)=>{try{const u=t(s);o(u)}catch(u){l(u)}});r.onAbort=e,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const r of this.queue)await r(t),r.onAbort&&e.push(r.onAbort)}catch(r){e.reverse();for(const i of e)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j_(n,t={}){return ro(n,"GET","/v2/passwordPolicy",no(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_=6;class q_{constructor(t){var r;const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??B_,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=t.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(e.meetsMinPasswordLength=t.length>=r),i&&(e.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(e,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,e,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(t,e,r,i){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sg(this),this.idTokenSubscription=new sg(this),this.beforeStateQueue=new V_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=R1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Zi(e)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Ra.create(this,t),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await fu(this,{idToken:t}),r=await oi._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(r)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(Er(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let r=e,i=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===l)&&(u!=null&&u.user)&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await pu(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=__()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Er(this.app))return Promise.reject(es(this));const e=t?Dn(t):null;return e&&te(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&te(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Er(this.app)?Promise.reject(es(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Er(this.app)?Promise.reject(es(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await j_(this),e=new q_(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Yc("auth","Firebase",t())}onAuthStateChanged(t,e,r){return this.registerStateListener(this.authStateSubscription,t,e,r)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,r){return this.registerStateListener(this.idTokenSubscription,t,e,r)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(r.tenantId=this.tenantId),await O_(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,e){const r=await this.getOrInitRedirectPersistenceManager(e);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Zi(t)||this._popupRedirectResolver;te(e,this,"argument-error"),this.redirectPersistenceManager=await Ra.create(this,[Zi(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,r;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)==null?void 0:e._redirectEventId)===t?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((e=this.currentUser)==null?void 0:e.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,r,i){if(this._deleted)return()=>{};const s=typeof e=="function"?e:e.next.bind(e);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof e=="function"){const u=t.addObserver(e,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(e);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=$1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());e&&(t["X-Firebase-Client"]=e);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(Er(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getToken());return t!=null&&t.error&&m_(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function io(n){return Dn(n)}class sg{constructor(t){this.auth=t,this.observer=null,this.addObserver=H2(e=>this.observer=e)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function z_(n){Mu=n}function G1(n){return Mu.loadJS(n)}function H_(){return Mu.recaptchaEnterpriseScript}function W_(){return Mu.gapiScript}function $_(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class G_{constructor(){this.enterprise=new K_}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class K_{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const Y_="recaptcha-enterprise",K1="NO_RECAPTCHA";class J_{constructor(t){this.type=Y_,this.auth=io(t)}async verify(t="verify",e=!1){async function r(s){if(!e){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{P_(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new T_(u);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,o(d.siteKey)}}).catch(u=>{l(u)})})}function i(s,o,l){const u=window.grecaptcha;tg(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:t}).then(d=>{o(d)}).catch(()=>{o(K1)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new G_().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(l=>{if(!e&&tg(window.grecaptcha))i(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=H_();u.length!==0&&(u+=l),G1(u).then(()=>{i(l,s,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function yc(n,t,e,r=!1,i=!1){const s=new J_(n);let o;if(i)o=K1;else try{o=await s.verify(e)}catch{o=await s.verify(e,!0)}const l={...t};if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function nd(n,t,e,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if((s=n._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await yc(n,t,e,e==="getOobCode");return r(n,l)}else return r(n,t).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await yc(n,t,e,e==="getOobCode");return r(n,u)}else return Promise.reject(l)});else if(i==="PHONE_PROVIDER")if((o=n._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const l=await yc(n,t,e);return r(n,l).catch(async u=>{var d;if(((d=n._getRecaptchaConfig())==null?void 0:d.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${e} flow.`);const m=await yc(n,t,e,!1,!0);return r(n,m)}return Promise.reject(u)})}else{const l=await yc(n,t,e,!1,!0);return r(n,l)}else return Promise.reject(i+" provider is not supported.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(n,t){const e=wd(n,"auth");if(e.isInitialized()){const i=e.getImmediate(),s=e.getOptions();if(Mo(s,t??{}))return i;zr(i,"already-initialized")}return e.initialize({options:t})}function X_(n,t){const e=(t==null?void 0:t.persistence)||[],r=(Array.isArray(e)?e:[e]).map(Zi);t!=null&&t.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function Z_(n,t,e){const r=io(n);te(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(e!=null&&e.disableWarnings),s=Y1(t),{host:o,port:l}=tb(t),u=l===null?"":`:${l}`,d={url:`${s}//${o}${u}/`},m=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),te(Mo(d,r.config.emulator)&&Mo(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,Ua(o)?(Wg(`${s}//${o}${u}`),$g("Auth",!0)):i||eb()}function Y1(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function tb(n){const t=Y1(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const r=e[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:og(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:og(o)}}}function og(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function eb(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Xi("not implemented")}_getIdTokenResponse(t){return Xi("not implemented")}_linkToIdToken(t,e){return Xi("not implemented")}_getReauthenticationResolver(t){return Xi("not implemented")}}async function nb(n,t){return ro(n,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rb(n,t){return rl(n,"POST","/v1/accounts:signInWithPassword",no(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ib(n,t){return rl(n,"POST","/v1/accounts:signInWithEmailLink",no(n,t))}async function sb(n,t){return rl(n,"POST","/v1/accounts:signInWithEmailLink",no(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c extends cf{constructor(t,e,r,i=null){super("password",r),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new $c(t,e,"password")}static _fromEmailAndCode(t,e,r=null){return new $c(t,e,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e!=null&&e.email&&(e!=null&&e.password)){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nd(t,e,"signInWithPassword",rb,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return ib(t,{email:this._email,oobCode:this._password});default:zr(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const r={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nd(t,r,"signUpPassword",nb,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return sb(t,{idToken:e,email:this._email,oobCode:this._password});default:zr(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ka(n,t){return rl(n,"POST","/v1/accounts:signInWithIdp",no(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob="http://localhost";class qo extends cf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new qo(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):zr("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i,...s}=e;if(!r||!i)return null;const o=new qo(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const e=this.buildRequest();return ka(t,e)}_linkToIdToken(t,e){const r=this.buildRequest();return r.idToken=e,ka(t,r)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,ka(t,e)}buildRequest(){const t={requestUri:ob,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Jc(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cb(n){const t=_c(bc(n)).link,e=t?_c(bc(t)).deep_link_id:null,r=_c(bc(n)).deep_link_id;return(r?_c(bc(r)).link:null)||r||e||t||n}class lf{constructor(t){const e=_c(bc(t)),r=e.apiKey??null,i=e.oobCode??null,s=ab(e.mode??null);te(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=e.continueUrl??null,this.languageCode=e.lang??null,this.tenantId=e.tenantId??null}static parseLink(t){const e=cb(t);try{return new lf(e)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(){this.providerId=Ya.PROVIDER_ID}static credential(t,e){return $c._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const r=lf.parseLink(e);return te(r,"argument-error"),$c._fromEmailAndCode(t,r.code,r.tenantId)}}Ya.PROVIDER_ID="password";Ya.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ya.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il extends uf{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks extends il{constructor(){super("facebook.com")}static credential(t){return qo._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ks.credentialFromTaggedObject(t)}static credentialFromError(t){return ks.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ks.credential(t.oauthAccessToken)}catch{return null}}}ks.FACEBOOK_SIGN_IN_METHOD="facebook.com";ks.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends il{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return qo._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Qi.credentialFromTaggedObject(t)}static credentialFromError(t){return Qi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:r}=t;if(!e&&!r)return null;try{return Qi.credential(e,r)}catch{return null}}}Qi.GOOGLE_SIGN_IN_METHOD="google.com";Qi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds extends il{constructor(){super("github.com")}static credential(t){return qo._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ds.credentialFromTaggedObject(t)}static credentialFromError(t){return Ds.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ds.credential(t.oauthAccessToken)}catch{return null}}}Ds.GITHUB_SIGN_IN_METHOD="github.com";Ds.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends il{constructor(){super("twitter.com")}static credential(t,e){return qo._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Os.credentialFromTaggedObject(t)}static credentialFromError(t){return Os.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:r}=t;if(!e||!r)return null;try{return Os.credential(e,r)}catch{return null}}}Os.TWITTER_SIGN_IN_METHOD="twitter.com";Os.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lb(n,t){return rl(n,"POST","/v1/accounts:signUp",no(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,r,i=!1){const s=await oi._fromIdTokenResponse(t,r,i),o=ag(r);return new Uo({user:s,providerId:o,_tokenResponse:r,operationType:e})}static async _forOperation(t,e,r){await t._updateTokensIfNecessary(r,!0);const i=ag(r);return new Uo({user:t,providerId:i,_tokenResponse:r,operationType:e})}}function ag(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu extends as{constructor(t,e,r,i){super(e.code,e.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,gu.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,e,r,i){return new gu(t,e,r,i)}}function J1(n,t,e,r){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?gu._fromErrorAndOperation(n,s,t,r):s})}async function ub(n,t,e=!1){const r=await Wc(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return Uo._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hb(n,t,e=!1){const{auth:r}=n;if(Er(r.app))return Promise.reject(es(r));const i="reauthenticate";try{const s=await Wc(n,J1(r,i,t,n),e);te(s.idToken,r,"internal-error");const o=of(s.idToken);te(o,r,"internal-error");const{sub:l}=o;return te(n.uid===l,r,"user-mismatch"),Uo._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&zr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q1(n,t,e=!1){if(Er(n.app))return Promise.reject(es(n));const r="signIn",i=await J1(n,r,t),s=await Uo._fromIdTokenResponse(n,r,i);return e||await n._updateCurrentUser(s.user),s}async function db(n,t){return Q1(io(n),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X1(n){const t=io(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function fb(n,t,e){if(Er(n.app))return Promise.reject(es(n));const r=io(n),o=await nd(r,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lb,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&X1(n),u}),l=await Uo._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function pb(n,t,e){return Er(n.app)?Promise.reject(es(n)):db(Dn(n),Ya.credential(t,e)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&X1(n),r})}function gb(n,t,e,r){return Dn(n).onIdTokenChanged(t,e,r)}function mb(n,t,e){return Dn(n).beforeAuthStateChanged(t,e)}function yb(n,t,e,r){return Dn(n).onAuthStateChanged(t,e,r)}function vb(n){return Dn(n).signOut()}const mu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(mu,"1"),this.storage.removeItem(mu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb=1e3,_b=10;class t0 extends Z1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=W1(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const r=this.storage.getItem(e),i=this.localCache[e];r!==i&&t(e,i,r)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=t.key;e?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!e&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);M_()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,_b):i()}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:r}),!0)})},wb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}t0.type="LOCAL";const bb=t0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0 extends Z1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}e0.type="SESSION";const n0=e0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(i=>i.isListeningto(t));if(e)return e;const r=new Vu(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:r,eventType:i,data:s}=e.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;e.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async d=>d(e.origin,s)),u=await Ab(l);e.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Vu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(n="",t=10){let e="";for(let r=0;r<t;r++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,u)=>{const d=hf("",20);i.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(v){const _=v;if(_.data.eventId===d)switch(_.data.status){case"ack":clearTimeout(m),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(_.data.response);break;default:clearTimeout(m),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:d,data:e},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(){return window}function Ib(n){Li().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(){return typeof Li().WorkerGlobalScope<"u"&&typeof Li().importScripts=="function"}async function Sb(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Tb(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function Pb(){return r0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="firebaseLocalStorageDb",Nb=1,yu="firebaseLocalStorage",s0="fbase_key";class sl{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function ju(n,t){return n.transaction([yu],t?"readwrite":"readonly").objectStore(yu)}function xb(){const n=indexedDB.deleteDatabase(i0);return new sl(n).toPromise()}function rd(){const n=indexedDB.open(i0,Nb);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(yu,{keyPath:s0})}catch(i){e(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(yu)?t(r):(r.close(),await xb(),t(await rd()))})})}async function cg(n,t,e){const r=ju(n,!0).put({[s0]:t,value:e});return new sl(r).toPromise()}async function Cb(n,t){const e=ju(n,!1).get(t),r=await new sl(e).toPromise();return r===void 0?null:r.value}function lg(n,t){const e=ju(n,!0).delete(t);return new sl(e).toPromise()}const Lb=800,Rb=3;class o0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rd(),this.db)}async _withRetries(t){let e=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(e++>Rb)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return r0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vu._getInstance(Pb()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await Sb(),!this.activeServiceWorker)return;this.sender=new Eb(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(e=t[0])!=null&&e.fulfilled&&(r=t[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Tb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await rd();return await cg(t,mu,"1"),await lg(t,mu),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(r=>cg(r,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(r=>Cb(r,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>lg(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=ju(i,!1).getAll();return new sl(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),e.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),e.push(i));return e}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Lb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}o0.type="LOCAL";const kb=o0;new nl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(n,t){return t?Zi(t):(te(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df extends cf{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return ka(t,this._buildIdpRequest())}_linkToIdToken(t,e){return ka(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return ka(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function Db(n){return Q1(n.auth,new df(n),n.bypassAuthState)}function Ob(n){const{auth:t,user:e}=n;return te(e,t,"internal-error"),hb(e,new df(n),n.bypassAuthState)}async function Fb(n){const{auth:t,user:e}=n;return te(e,t,"internal-error"),ub(e,new df(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(t,e,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:e,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Db;case"linkViaPopup":case"linkViaRedirect":return Fb;case"reauthViaPopup":case"reauthViaRedirect":return Ob;default:zr(this.auth,"internal-error")}}resolve(t){os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb=new nl(2e3,1e4);async function Vb(n,t,e){if(Er(n.app))return Promise.reject(ci(n,"operation-not-supported-in-this-environment"));const r=io(n);y_(n,t,uf);const i=a0(r,e);return new Po(r,"signInViaPopup",t,i).executeNotNull()}class Po extends c0{constructor(t,e,r,i,s){super(t,e,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Po.currentPopupAction&&Po.currentPopupAction.cancel(),Po.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return te(t,this.auth,"internal-error"),t}async onExecution(){os(this.filter.length===1,"Popup operations only handle one event");const t=hf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(ci(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(ci(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Po.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,r;if((r=(e=this.authWindow)==null?void 0:e.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ci(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Mb.get())};t()}}Po.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb="pendingRedirect",Yl=new Map;class Bb extends c0{constructor(t,e,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,r),this.eventId=null}async execute(){let t=Yl.get(this.auth._key());if(!t){try{const r=await qb(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(e){t=()=>Promise.reject(e)}Yl.set(this.auth._key(),t)}return this.bypassAuthState||Yl.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function qb(n,t){const e=Hb(t),r=zb(n);if(!await r._isAvailable())return!1;const i=await r._get(e)==="true";return await r._remove(e),i}function Ub(n,t){Yl.set(n._key(),t)}function zb(n){return Zi(n._redirectPersistence)}function Hb(n){return Kl(jb,n.config.apiKey,n.name)}async function Wb(n,t,e=!1){if(Er(n.app))return Promise.reject(es(n));const r=io(n),i=a0(r,t),o=await new Bb(r,i,e).execute();return o&&!e&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b=10*60*1e3;class Gb{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(e=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Kb(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var r;if(t.error&&!l0(t)){const i=((r=t.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";e.onError(ci(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const r=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=$b&&this.cachedEventUids.clear(),this.cachedEventUids.has(ug(t))}saveEventToCache(t){this.cachedEventUids.add(ug(t)),this.lastProcessedEventTime=Date.now()}}function ug(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function l0({type:n,error:t}){return n==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function Kb(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return l0(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yb(n,t={}){return ro(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Qb=/^https?/;async function Xb(n){if(n.config.emulator)return;const{authorizedDomains:t}=await Yb(n);for(const e of t)try{if(Zb(e))return}catch{}zr(n,"unauthorized-domain")}function Zb(n){const t=td(),{protocol:e,hostname:r}=new URL(t);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&o.hostname===r}if(!Qb.test(e))return!1;if(Jb.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4=new nl(3e4,6e4);function hg(){const n=Li().___jsl;if(n!=null&&n.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function e4(n){return new Promise((t,e)=>{var i,s,o;function r(){hg(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{hg(),e(ci(n,"network-request-failed"))},timeout:t4.get()})}if((s=(i=Li().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((o=Li().gapi)!=null&&o.load)r();else{const l=$_("iframefcb");return Li()[l]=()=>{gapi.load?r():e(ci(n,"network-request-failed"))},G1(`${W_()}?onload=${l}`).catch(u=>e(u))}}).catch(t=>{throw Jl=null,t})}let Jl=null;function n4(n){return Jl=Jl||e4(n),Jl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4=new nl(5e3,15e3),i4="__/auth/iframe",s4="emulator/auth/iframe",o4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},a4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function c4(n){const t=n.config;te(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?sf(t,s4):`https://${n.config.authDomain}/${i4}`,r={apiKey:t.apiKey,appName:n.name,v:za},i=a4.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${e}?${Jc(r).slice(1)}`}async function l4(n){const t=await n4(n),e=Li().gapi;return te(e,n,"internal-error"),t.open({where:document.body,url:c4(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:o4,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=ci(n,"network-request-failed"),l=Li().setTimeout(()=>{s(o)},r4.get());function u(){Li().clearTimeout(l),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},h4=500,d4=600,f4="_blank",p4="http://localhost";class dg{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function g4(n,t,e,r=h4,i=d4){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u={...u4,width:r.toString(),height:i.toString(),top:s,left:o},d=Hn().toLowerCase();e&&(l=B1(d)?f4:e),V1(d)&&(t=t||p4,u.scrollbars="yes");const m=Object.entries(u).reduce((_,[g,N])=>`${_}${g}=${N},`,"");if(F_(d)&&l!=="_self")return m4(t||"",l),new dg(null);const v=window.open(t||"",l,m);te(v,n,"popup-blocked");try{v.focus()}catch{}return new dg(v)}function m4(n,t){const e=document.createElement("a");e.href=n,e.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4="__/auth/handler",v4="emulator/auth/handler",w4=encodeURIComponent("fac");async function fg(n,t,e,r,i,s){te(n.config.authDomain,n,"auth-domain-config-required"),te(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:r,v:za,eventId:i};if(t instanceof uf){t.setDefaultLanguage(n.languageCode),o.providerId=t.providerId||"",z2(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[m,v]of Object.entries(s||{}))o[m]=v}if(t instanceof il){const m=t.getScopes().filter(v=>v!=="");m.length>0&&(o.scopes=m.join(","))}n.tenantId&&(o.tid=n.tenantId);const l=o;for(const m of Object.keys(l))l[m]===void 0&&delete l[m];const u=await n._getAppCheckToken(),d=u?`#${w4}=${encodeURIComponent(u)}`:"";return`${_4(n)}?${Jc(l).slice(1)}${d}`}function _4({config:n}){return n.emulator?sf(n,v4):`https://${n.authDomain}/${y4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh="webStorageSupport";class b4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=n0,this._completeRedirectFn=Wb,this._overrideRedirectResult=Ub}async _openPopup(t,e,r,i){var o;os((o=this.eventManagers[t._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await fg(t,e,r,td(),i);return g4(t,s,hf())}async _openRedirect(t,e,r,i){await this._originValidation(t);const s=await fg(t,e,r,td(),i);return Ib(s),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:i,promise:s}=this.eventManagers[e];return i?Promise.resolve(i):(os(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[e]={promise:r},r.catch(()=>{delete this.eventManagers[e]}),r}async initAndGetManager(t){const e=await l4(t),r=new Gb(t);return e.register("authEvent",i=>(te(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=e,r}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(vh,{type:vh},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[vh];s!==void 0&&e(!!s),zr(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=Xb(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return W1()||j1()||af()}}const A4=b4;var pg="@firebase/auth",gg="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function S4(n){Da(new Vo("auth",(t,{options:e})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$1(n)},d=new U_(r,i,s,u);return X_(d,e),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,r)=>{t.getProvider("auth-internal").initialize()})),Da(new Vo("auth-internal",t=>{const e=io(t.getProvider("auth").getImmediate());return(r=>new E4(r))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),qs(pg,gg,I4(n)),qs(pg,gg,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4=5*60,P4=Hg("authIdTokenMaxAge")||T4;let mg=null;const N4=n=>async t=>{const e=t&&await t.getIdTokenResult(),r=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(r&&r>P4)return;const i=e==null?void 0:e.token;mg!==i&&(mg=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function x4(n=Jg()){const t=wd(n,"auth");if(t.isInitialized())return t.getImmediate();const e=Q_(n,{popupRedirectResolver:A4,persistence:[kb,bb,n0]}),r=Hg("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=N4(s.toString());mb(e,o,()=>o(e.currentUser)),gb(e,l=>o(l))}}const i=Ug("auth");return i&&Z_(e,`http://${i}`),e}function C4(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}z_({loadJS(n){return new Promise((t,e)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=t,r.onerror=i=>{const s=ci("internal-error");s.customData=i,e(s)},r.type="text/javascript",r.charset="UTF-8",C4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});S4("Browser");const L4={apiKey:"AIzaSyB_fmSnrQGxITVXbgwAGgNTEI3scwkRuck",authDomain:"aquabuild-pool.firebaseapp.com",projectId:"aquabuild-pool",storageBucket:"aquabuild-pool.firebasestorage.app",messagingSenderId:"915454751717",appId:"1:915454751717:web:0b986679cc027087a1750c"};let wh,er,No,id;try{wh=Yg(L4),er=Zw(wh),No=x4(wh),id=new Qi}catch(n){console.error("Error al inicializar Firebase:",n),er=null,No=null,id=null}const Ro={async getAll(){try{return(await Xd(qa(er,"clients"))).docs.map(t=>({id:t.id,...t.data()}))}catch(n){throw console.error("Error al obtener clientes:",n),new Error("No se pudieron cargar los clientes")}},async getById(n){try{const t=Hs(er,"clients",n),e=await Zh(t);return e.exists()?{id:e.id,...e.data()}:null}catch(t){throw console.error("Error al obtener cliente:",t),new Error("No se pudo cargar el cliente")}},async create(n){try{if(!n.name)throw new Error("Nombre es requerido");return{id:(await tf(qa(er,"clients"),{...n,createdAt:new Date().toISOString()})).id,...n}}catch(t){throw console.error("Error al crear cliente:",t),new Error("Error al crear el cliente: "+t.message)}},async update(n,t){try{if(!t.name)throw new Error("Nombre es requerido");const e=Hs(er,"clients",n);return await f_(e,t),{id:n,...t}}catch(e){throw console.error("Error al actualizar cliente:",e),new Error("Error al actualizar el cliente: "+e.message)}},async delete(n){try{await Zd(Hs(er,"clients",n))}catch(t){throw console.error("Error al eliminar cliente:",t),new Error("Error al eliminar el cliente: "+t.message)}}},sd={async getAll(){try{return(await Xd(qa(er,"quotes"))).docs.map(t=>({id:t.id,...t.data()}))}catch(n){throw console.error("Error al obtener cotizaciones:",n),new Error("No se pudieron cargar las cotizaciones")}},async create(n){try{if(!n.clientName)throw new Error("Nombre del cliente es requerido");const t=n.items.reduce((o,l)=>o+l.total,0),r=(await this.getAll()).length+1,i={clientId:n.clientId||"",clientName:n.clientName,clientPhone:n.clientPhone||"",clientAddress:n.clientAddress||"",date:n.date,items:n.items,subtotal:t,total:t,number:`COT-${r.toString().padStart(4,"0")}`,status:"Pendiente",converted:!1,createdAt:new Date().toISOString()};return{id:(await tf(qa(er,"quotes"),i)).id,...i}}catch(t){throw console.error("Error al crear cotizaci√≥n:",t),new Error("Error al crear la cotizaci√≥n: "+t.message)}},async delete(n){try{await Zd(Hs(er,"quotes",n))}catch(t){throw console.error("Error al eliminar cotizaci√≥n:",t),new Error("Error al eliminar la cotizaci√≥n: "+t.message)}}},Ql={async getAll(){try{return(await Xd(qa(er,"invoices"))).docs.map(t=>({id:t.id,...t.data()}))}catch(n){throw console.error("Error al obtener facturas:",n),new Error("No se pudieron cargar las facturas")}},async create(n){try{if(!n.clientName)throw new Error("Nombre del cliente es requerido");const t=n.items.reduce((o,l)=>o+l.total,0),r=(await this.getAll()).length+1,i={clientId:n.clientId||"",clientName:n.clientName,clientPhone:n.clientPhone||"",clientAddress:n.clientAddress||"",date:n.date,items:n.items,subtotal:t,total:t,number:`FAC-${r.toString().padStart(4,"0")}`,relatedQuoteId:n.relatedQuoteId||null,createdAt:new Date().toISOString()};return{id:(await tf(qa(er,"invoices"),i)).id,...i}}catch(t){throw console.error("Error al crear factura:",t),new Error("Error al crear la factura: "+t.message)}},async delete(n){try{await Zd(Hs(er,"invoices",n))}catch(t){throw console.error("Error al eliminar factura:",t),new Error("Error al eliminar la factura: "+t.message)}}};class R4{constructor(t,e){this.onEdit=t,this.onDelete=e}render(){const t=document.createElement("div");return t.className="card",t.innerHTML=`
      <div class="text-center py-8">
        <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"></div>
        <p class="text-gray-600">Cargando clientes...</p>
      </div>
    `,this.loadClients(t),t}async loadClients(t){try{const e=await Ro.getAll();if(e.length===0){t.innerHTML=`
          <div class="text-center py-8">
            <p class="text-gray-500">No hay clientes registrados</p>
          </div>
        `;return}const i=`
        <div class="table-container">
          <table class="table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Email</th>
                <th>Tel√©fono</th>
                <th>Direcci√≥n</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              ${e.sort((s,o)=>s.name.localeCompare(o.name)).map(s=>`
                <tr>
                  <td class="font-mono text-xs">${s.id.substring(0,8)}</td>
                  <td class="font-medium">${this.escapeHtml(s.name)}</td>
                  <td>${s.email||"-"}</td>
                  <td>${s.phone}</td>
                  <td>${s.address||"-"}</td>
                  <td>
                    <div class="flex space-x-2">
                      <button class="btn btn-warning btn-sm edit-client" data-id="${s.id}">Editar</button>
                      <button class="btn btn-danger btn-sm delete-client" data-id="${s.id}">Eliminar</button>
                    </div>
                  </td>
                </tr>
              `).join("")}
            </tbody>
          </table>
        </div>
      `;t.innerHTML=i,t.querySelectorAll(".edit-client").forEach(s=>{s.addEventListener("click",o=>{const l=o.target.getAttribute("data-id"),u=e.find(d=>d.id===l);u&&this.onEdit(u)})}),t.querySelectorAll(".delete-client").forEach(s=>{s.addEventListener("click",o=>{const l=o.target.getAttribute("data-id");confirm("¬øEst√° seguro de eliminar este cliente?")&&this.handleDelete(l)})})}catch(e){console.error("Error al cargar clientes:",e),t.innerHTML=`
        <div class="text-center py-8">
          <p class="text-red-500">Error al cargar los clientes</p>
          <button class="btn btn-primary mt-4 retry-button">Reintentar</button>
        </div>
      `,t.querySelector(".retry-button").addEventListener("click",()=>{this.loadClients(t)})}}async handleDelete(t){try{await Ro.delete(t),toast.success("Cliente eliminado exitosamente"),this.onDelete()}catch(e){toast.error("Error al eliminar cliente: "+e.message)}}escapeHtml(t){if(!t)return"";const e=document.createElement("div");return e.textContent=t,e.innerHTML}}class ff{constructor(){this.element=null}show(t,e,r="Confirmar",i=null){this.element=document.createElement("div"),this.element.className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",this.element.innerHTML=`
      <div class="bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-screen overflow-y-auto">
        <div class="flex justify-between items-center p-6 border-b">
          <h3 class="text-lg font-semibold text-gray-900">${t}</h3>
          <button class="close-modal text-gray-400 hover:text-gray-600">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        </div>
        <div class="p-6">
          ${e}
        </div>
        <div class="flex justify-end space-x-3 p-6 border-t">
          <button class="btn btn-outline cancel-modal">Cancelar</button>
          <button class="btn btn-primary confirm-modal">${r}</button>
        </div>
      </div>
    `,document.body.appendChild(this.element),this.element.querySelector(".close-modal").addEventListener("click",()=>this.close()),this.element.querySelector(".cancel-modal").addEventListener("click",()=>this.close()),this.element.querySelector("div.bg-white").addEventListener("click",s=>{s.stopPropagation()}),i&&i(this)}close(){this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.element=null)}}class k4{constructor(){this.toastContainer=null,this.init()}init(){this.toastContainer=document.createElement("div"),this.toastContainer.id="toast-container",this.toastContainer.className="fixed z-50 pointer-events-none";const t=document.createElement("style");t.textContent=`
      #toast-container {
        top: 20px;
        right: 20px;
      }
      
      @media (max-width: 768px) {
        #toast-container {
          top: auto;
          bottom: 20px;
          right: 20px;
          left: 20px;
        }
      }
      
      .toast {
        @apply pointer-events-auto flex items-center p-4 mb-3 rounded-lg shadow-lg text-white font-medium transition-all duration-300 transform;
        animation: toastSlideIn 0.3s ease-out, toastFadeIn 0.3s ease-out;
        max-width: 400px;
      }
      
      @media (max-width: 768px) {
        .toast {
          max-width: none;
          width: calc(100% - 40px);
        }
      }
      
      .toast-success { @apply bg-green-600; }
      .toast-error { @apply bg-red-600; }
      .toast-warning { @apply bg-yellow-600 text-gray-900; }
      .toast-info { @apply bg-blue-600; }
      
      .toast-icon {
        @apply mr-3 flex-shrink-0;
        width: 20px;
        height: 20px;
      }
      
      .toast-content {
        @apply flex-1 min-w-0;
      }
      
      .toast-message {
        @apply text-sm break-words;
      }
      
      .toast-close {
        @apply ml-3 flex-shrink-0 text-white hover:text-gray-200 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-current rounded-full;
        width: 24px;
        height: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      
      @keyframes toastSlideIn {
        from {
          transform: translateY(-20px) translateX(100px);
        }
        to {
          transform: translateY(0) translateX(0);
        }
      }
      
      @media (max-width: 768px) {
        @keyframes toastSlideIn {
          from {
            transform: translateY(20px) translateX(0);
          }
          to {
            transform: translateY(0) translateX(0);
          }
        }
      }
      
      @keyframes toastFadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }
      
      .toast-exit {
        animation: toastSlideOut 0.2s ease-in forwards, toastFadeOut 0.2s ease-in forwards;
      }
      
      @keyframes toastSlideOut {
        from {
          transform: translateY(0) translateX(0);
        }
        to {
          transform: translateY(-20px) translateX(100px);
        }
      }
      
      @media (max-width: 768px) {
        @keyframes toastSlideOut {
          from {
            transform: translateY(0) translateX(0);
          }
          to {
            transform: translateY(20px) translateX(0);
          }
        }
      }
      
      @keyframes toastFadeOut {
        from { opacity: 1; }
        to { opacity: 0; }
      }
    `,document.head.appendChild(t),document.body.appendChild(this.toastContainer)}show(t,e="info",r=5e3){const i=document.createElement("div");i.className=`toast toast-${e}`,i.setAttribute("role","alert"),i.setAttribute("aria-live","polite");const s=this.getIcon(e),o=this.createCloseButton();i.innerHTML=`
      ${s}
      <div class="toast-content">
        <div class="toast-message">${this.escapeHtml(t)}</div>
      </div>
      ${o.outerHTML}
    `,this.toastContainer.appendChild(i);const l=setTimeout(()=>{this.removeToast(i)},r),u=i.querySelector(".toast-close");return u.addEventListener("click",()=>{clearTimeout(l),this.removeToast(i)}),u.addEventListener("keydown",d=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),clearTimeout(l),this.removeToast(i))}),i}success(t,e=5e3){return this.show(t,"success",e)}error(t,e=7e3){return this.show(t,"error",e)}warning(t,e=6e3){return this.show(t,"warning",e)}info(t,e=5e3){return this.show(t,"info",e)}getIcon(t){const e={success:'<svg class="toast-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>',error:'<svg class="toast-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',warning:'<svg class="toast-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>',info:'<svg class="toast-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>'};return e[t]||e.info}createCloseButton(){const t=document.createElement("button");return t.className="toast-close",t.setAttribute("aria-label","Cerrar notificaci√≥n"),t.innerHTML='<svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="16" height="16"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',t}removeToast(t){t.classList.add("toast-exit"),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},200)}escapeHtml(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}}const Na=new k4;class D4{constructor(t){this.onSubmit=t,this.modal=new ff}show(t=null){const e=t?"Editar Cliente":"Nuevo Cliente",r=`
      <form id="client-form" class="space-y-4">
        <input type="hidden" id="client-id">
        <div>
          <label for="client-name" class="block text-sm font-medium text-gray-700 mb-1">Nombre Completo *</label>
          <input type="text" id="client-name" class="form-control" required>
        </div>
        <div>
          <label for="client-email" class="block text-sm font-medium text-gray-700 mb-1">Email (opcional)</label>
          <input type="email" id="client-email" class="form-control" placeholder="correo@ejemplo.com">
        </div>
        <div>
          <label for="client-phone" class="block text-sm font-medium text-gray-700 mb-1">Tel√©fono (opcional)</label>
          <input type="tel" id="client-phone" class="form-control" placeholder="(809) 123-4567">
        </div>
        <div>
          <label for="client-address" class="block text-sm font-medium text-gray-700 mb-1">Direcci√≥n (opcional)</label>
          <input type="text" id="client-address" class="form-control" placeholder="Calle Principal #123">
        </div>
        <div id="error-message" class="text-red-500 text-sm hidden"></div>
      </form>
    `;this.modal.show(e,r,"Guardar Cliente",i=>{document.getElementById("error-message"),t&&(document.getElementById("client-id").value=t.id,document.getElementById("client-name").value=t.name,document.getElementById("client-email").value=t.email||"",document.getElementById("client-phone").value=t.phone||"",document.getElementById("client-address").value=t.address||"");const s=i.element.querySelector(".confirm-modal");s&&s.addEventListener("click",async()=>{await this.handleSave(i)})})}async handleSave(t){const e=document.getElementById("error-message");e&&(e.classList.add("hidden"),e.textContent="");try{const r=document.getElementById("client-id").value,i=document.getElementById("client-name").value.trim(),s=document.getElementById("client-email").value.trim(),o=document.getElementById("client-phone").value.trim(),l=document.getElementById("client-address").value.trim();if(!i){Na.error("Por favor ingrese el nombre completo");return}const u={name:i,email:s||"",phone:o||"",address:l||""};let d;r?(d=await Ro.update(r,u),Na.success("Cliente actualizado exitosamente")):(d=await Ro.create(u),Na.success("Cliente creado exitosamente")),this.onSubmit(),t.close()}catch(r){console.error("Error al guardar cliente:",r),Na.error(r.message||"Error al guardar el cliente")}}}class O4{constructor(){this.clientForm=new D4(()=>this.refresh())}render(){const t=document.createElement("div");t.className="space-y-6";const e=document.createElement("div");e.className="flex justify-between items-center",e.innerHTML=`
      <h2 class="text-2xl font-bold text-gray-800">Gesti√≥n de Clientes</h2>
      <button id="new-client-btn" class="btn btn-primary">+ Nuevo Cliente</button>
    `,t.appendChild(e);const r=new R4(i=>this.clientForm.show(i),()=>this.refresh());return t.appendChild(r.render()),t.querySelector("#new-client-btn").addEventListener("click",()=>{this.clientForm.show()}),t}refresh(){const t=this.render(),e=document.querySelector("#page-content");e&&(e.innerHTML="",e.appendChild(t))}}function ke(n){"@babel/helpers - typeof";return ke=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ke(n)}var zn=Uint8Array,Sr=Uint16Array,pf=Int32Array,Bu=new zn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),qu=new zn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),od=new zn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u0=function(n,t){for(var e=new Sr(31),r=0;r<31;++r)e[r]=t+=1<<n[r-1];for(var i=new pf(e[30]),r=1;r<30;++r)for(var s=e[r];s<e[r+1];++s)i[s]=s-e[r]<<5|r;return{b:e,r:i}},h0=u0(Bu,2),d0=h0.b,ad=h0.r;d0[28]=258,ad[258]=28;var f0=u0(qu,0),F4=f0.b,yg=f0.r,cd=new Sr(32768);for(var We=0;We<32768;++We){var Ls=(We&43690)>>1|(We&21845)<<1;Ls=(Ls&52428)>>2|(Ls&13107)<<2,Ls=(Ls&61680)>>4|(Ls&3855)<<4,cd[We]=((Ls&65280)>>8|(Ls&255)<<8)>>1}var Ri=function(n,t,e){for(var r=n.length,i=0,s=new Sr(t);i<r;++i)n[i]&&++s[n[i]-1];var o=new Sr(t);for(i=1;i<t;++i)o[i]=o[i-1]+s[i-1]<<1;var l;if(e){l=new Sr(1<<t);var u=15-t;for(i=0;i<r;++i)if(n[i])for(var d=i<<4|n[i],m=t-n[i],v=o[n[i]-1]++<<m,_=v|(1<<m)-1;v<=_;++v)l[cd[v]>>u]=d}else for(l=new Sr(r),i=0;i<r;++i)n[i]&&(l[i]=cd[o[n[i]-1]++]>>15-n[i]);return l},Xs=new zn(288);for(var We=0;We<144;++We)Xs[We]=8;for(var We=144;We<256;++We)Xs[We]=9;for(var We=256;We<280;++We)Xs[We]=7;for(var We=280;We<288;++We)Xs[We]=8;var Gc=new zn(32);for(var We=0;We<32;++We)Gc[We]=5;var M4=Ri(Xs,9,0),V4=Ri(Xs,9,1),j4=Ri(Gc,5,0),B4=Ri(Gc,5,1),_h=function(n){for(var t=n[0],e=1;e<n.length;++e)n[e]>t&&(t=n[e]);return t},ri=function(n,t,e){var r=t/8|0;return(n[r]|n[r+1]<<8)>>(t&7)&e},bh=function(n,t){var e=t/8|0;return(n[e]|n[e+1]<<8|n[e+2]<<16)>>(t&7)},gf=function(n){return(n+7)/8|0},p0=function(n,t,e){return(t==null||t<0)&&(t=0),(e==null||e>n.length)&&(e=n.length),new zn(n.subarray(t,e))},q4=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],si=function(n,t,e){var r=new Error(t||q4[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,si),!e)throw r;return r},U4=function(n,t,e,r){var i=n.length,s=r?r.length:0;if(!i||t.f&&!t.l)return e||new zn(0);var o=!e,l=o||t.i!=2,u=t.i;o&&(e=new zn(i*3));var d=function(St){var Lt=e.length;if(St>Lt){var kt=new zn(Math.max(Lt*2,St));kt.set(e),e=kt}},m=t.f||0,v=t.p||0,_=t.b||0,g=t.l,N=t.d,L=t.m,O=t.n,C=i*8;do{if(!g){m=ri(n,v,1);var R=ri(n,v+1,3);if(v+=3,R)if(R==1)g=V4,N=B4,L=9,O=5;else if(R==2){var Q=ri(n,v,31)+257,S=ri(n,v+10,15)+4,E=Q+ri(n,v+5,31)+1;v+=14;for(var x=new zn(E),F=new zn(19),b=0;b<S;++b)F[od[b]]=ri(n,v+b*3,7);v+=S*3;for(var A=_h(F),T=(1<<A)-1,W=Ri(F,A,1),b=0;b<E;){var ct=W[ri(n,v,T)];v+=ct&15;var M=ct>>4;if(M<16)x[b++]=M;else{var J=0,Y=0;for(M==16?(Y=3+ri(n,v,3),v+=2,J=x[b-1]):M==17?(Y=3+ri(n,v,7),v+=3):M==18&&(Y=11+ri(n,v,127),v+=7);Y--;)x[b++]=J}}var et=x.subarray(0,Q),Z=x.subarray(Q);L=_h(et),O=_h(Z),g=Ri(et,L,1),N=Ri(Z,O,1)}else si(1);else{var M=gf(v)+4,q=n[M-4]|n[M-3]<<8,K=M+q;if(K>i){u&&si(0);break}l&&d(_+q),e.set(n.subarray(M,K),_),t.b=_+=q,t.p=v=K*8,t.f=m;continue}if(v>C){u&&si(0);break}}l&&d(_+131072);for(var at=(1<<L)-1,mt=(1<<O)-1,k=v;;k=v){var J=g[bh(n,v)&at],z=J>>4;if(v+=J&15,v>C){u&&si(0);break}if(J||si(2),z<256)e[_++]=z;else if(z==256){k=v,g=null;break}else{var $=z-254;if(z>264){var b=z-257,X=Bu[b];$=ri(n,v,(1<<X)-1)+d0[b],v+=X}var nt=N[bh(n,v)&mt],ut=nt>>4;nt||si(3),v+=nt&15;var Z=F4[ut];if(ut>3){var X=qu[ut];Z+=bh(n,v)&(1<<X)-1,v+=X}if(v>C){u&&si(0);break}l&&d(_+131072);var ht=_+$;if(_<Z){var pt=s-Z,Tt=Math.min(Z,ht);for(pt+_<0&&si(3);_<Tt;++_)e[_]=r[pt+_]}for(;_<ht;++_)e[_]=e[_-Z]}}t.l=g,t.p=k,t.b=_,t.f=m,g&&(m=1,t.m=L,t.d=N,t.n=O)}while(!m);return _!=e.length&&o?p0(e,0,_):e.subarray(0,_)},Ji=function(n,t,e){e<<=t&7;var r=t/8|0;n[r]|=e,n[r+1]|=e>>8},vc=function(n,t,e){e<<=t&7;var r=t/8|0;n[r]|=e,n[r+1]|=e>>8,n[r+2]|=e>>16},Ah=function(n,t){for(var e=[],r=0;r<n.length;++r)n[r]&&e.push({s:r,f:n[r]});var i=e.length,s=e.slice();if(!i)return{t:m0,l:0};if(i==1){var o=new zn(e[0].s+1);return o[e[0].s]=1,{t:o,l:1}}e.sort(function(K,Q){return K.f-Q.f}),e.push({s:-1,f:25001});var l=e[0],u=e[1],d=0,m=1,v=2;for(e[0]={s:-1,f:l.f+u.f,l,r:u};m!=i-1;)l=e[e[d].f<e[v].f?d++:v++],u=e[d!=m&&e[d].f<e[v].f?d++:v++],e[m++]={s:-1,f:l.f+u.f,l,r:u};for(var _=s[0].s,r=1;r<i;++r)s[r].s>_&&(_=s[r].s);var g=new Sr(_+1),N=ld(e[m-1],g,0);if(N>t){var r=0,L=0,O=N-t,C=1<<O;for(s.sort(function(Q,S){return g[S.s]-g[Q.s]||Q.f-S.f});r<i;++r){var R=s[r].s;if(g[R]>t)L+=C-(1<<N-g[R]),g[R]=t;else break}for(L>>=O;L>0;){var M=s[r].s;g[M]<t?L-=1<<t-g[M]++-1:++r}for(;r>=0&&L;--r){var q=s[r].s;g[q]==t&&(--g[q],++L)}N=t}return{t:new zn(g),l:N}},ld=function(n,t,e){return n.s==-1?Math.max(ld(n.l,t,e+1),ld(n.r,t,e+1)):t[n.s]=e},vg=function(n){for(var t=n.length;t&&!n[--t];);for(var e=new Sr(++t),r=0,i=n[0],s=1,o=function(u){e[r++]=u},l=1;l<=t;++l)if(n[l]==i&&l!=t)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=n[l]}return{c:e.subarray(0,r),n:t}},wc=function(n,t){for(var e=0,r=0;r<t.length;++r)e+=n[r]*t[r];return e},g0=function(n,t,e){var r=e.length,i=gf(t+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var s=0;s<r;++s)n[i+s+4]=e[s];return(i+4+r)*8},wg=function(n,t,e,r,i,s,o,l,u,d,m){Ji(t,m++,e),++i[256];for(var v=Ah(i,15),_=v.t,g=v.l,N=Ah(s,15),L=N.t,O=N.l,C=vg(_),R=C.c,M=C.n,q=vg(L),K=q.c,Q=q.n,S=new Sr(19),E=0;E<R.length;++E)++S[R[E]&31];for(var E=0;E<K.length;++E)++S[K[E]&31];for(var x=Ah(S,7),F=x.t,b=x.l,A=19;A>4&&!F[od[A-1]];--A);var T=d+5<<3,W=wc(i,Xs)+wc(s,Gc)+o,ct=wc(i,_)+wc(s,L)+o+14+3*A+wc(S,F)+2*S[16]+3*S[17]+7*S[18];if(u>=0&&T<=W&&T<=ct)return g0(t,m,n.subarray(u,u+d));var J,Y,et,Z;if(Ji(t,m,1+(ct<W)),m+=2,ct<W){J=Ri(_,g,0),Y=_,et=Ri(L,O,0),Z=L;var at=Ri(F,b,0);Ji(t,m,M-257),Ji(t,m+5,Q-1),Ji(t,m+10,A-4),m+=14;for(var E=0;E<A;++E)Ji(t,m+3*E,F[od[E]]);m+=3*A;for(var mt=[R,K],k=0;k<2;++k)for(var z=mt[k],E=0;E<z.length;++E){var $=z[E]&31;Ji(t,m,at[$]),m+=F[$],$>15&&(Ji(t,m,z[E]>>5&127),m+=z[E]>>12)}}else J=M4,Y=Xs,et=j4,Z=Gc;for(var E=0;E<l;++E){var X=r[E];if(X>255){var $=X>>18&31;vc(t,m,J[$+257]),m+=Y[$+257],$>7&&(Ji(t,m,X>>23&31),m+=Bu[$]);var nt=X&31;vc(t,m,et[nt]),m+=Z[nt],nt>3&&(vc(t,m,X>>5&8191),m+=qu[nt])}else vc(t,m,J[X]),m+=Y[X]}return vc(t,m,J[256]),m+Y[256]},z4=new pf([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),m0=new zn(0),H4=function(n,t,e,r,i,s){var o=s.z||n.length,l=new zn(r+o+5*(1+Math.ceil(o/7e3))+i),u=l.subarray(r,l.length-i),d=s.l,m=(s.r||0)&7;if(t){m&&(u[0]=s.r>>3);for(var v=z4[t-1],_=v>>13,g=v&8191,N=(1<<e)-1,L=s.p||new Sr(32768),O=s.h||new Sr(N+1),C=Math.ceil(e/3),R=2*C,M=function($t){return(n[$t]^n[$t+1]<<C^n[$t+2]<<R)&N},q=new pf(25e3),K=new Sr(288),Q=new Sr(32),S=0,E=0,x=s.i||0,F=0,b=s.w||0,A=0;x+2<o;++x){var T=M(x),W=x&32767,ct=O[T];if(L[W]=ct,O[T]=W,b<=x){var J=o-x;if((S>7e3||F>24576)&&(J>423||!d)){m=wg(n,u,0,q,K,Q,E,F,A,x-A,m),F=S=E=0,A=x;for(var Y=0;Y<286;++Y)K[Y]=0;for(var Y=0;Y<30;++Y)Q[Y]=0}var et=2,Z=0,at=g,mt=W-ct&32767;if(J>2&&T==M(x-mt))for(var k=Math.min(_,J)-1,z=Math.min(32767,x),$=Math.min(258,J);mt<=z&&--at&&W!=ct;){if(n[x+et]==n[x+et-mt]){for(var X=0;X<$&&n[x+X]==n[x+X-mt];++X);if(X>et){if(et=X,Z=mt,X>k)break;for(var nt=Math.min(mt,X-2),ut=0,Y=0;Y<nt;++Y){var ht=x-mt+Y&32767,pt=L[ht],Tt=ht-pt&32767;Tt>ut&&(ut=Tt,ct=ht)}}}W=ct,ct=L[W],mt+=W-ct&32767}if(Z){q[F++]=268435456|ad[et]<<18|yg[Z];var St=ad[et]&31,Lt=yg[Z]&31;E+=Bu[St]+qu[Lt],++K[257+St],++Q[Lt],b=x+et,++S}else q[F++]=n[x],++K[n[x]]}}for(x=Math.max(x,b);x<o;++x)q[F++]=n[x],++K[n[x]];m=wg(n,u,d,q,K,Q,E,F,A,x-A,m),d||(s.r=m&7|u[m/8|0]<<3,m-=7,s.h=O,s.p=L,s.i=x,s.w=b)}else{for(var x=s.w||0;x<o+d;x+=65535){var kt=x+65535;kt>=o&&(u[m/8|0]=d,kt=o),m=g0(u,m+1,n.subarray(x,kt))}s.i=o}return p0(l,0,r+gf(m)+i)},y0=function(){var n=1,t=0;return{p:function(e){for(var r=n,i=t,s=e.length|0,o=0;o!=s;){for(var l=Math.min(o+2655,s);o<l;++o)i+=r+=e[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,t=i},d:function(){return n%=65521,t%=65521,(n&255)<<24|(n&65280)<<8|(t&255)<<8|t>>8}}},W4=function(n,t,e,r,i){if(!i&&(i={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),o=new zn(s.length+n.length);o.set(s),o.set(n,s.length),n=o,i.w=s.length}return H4(n,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+t.mem,e,r,i)},v0=function(n,t,e){for(;e;++t)n[t]=e,e>>>=8},$4=function(n,t){var e=t.level,r=e==0?0:e<6?1:e==9?3:2;if(n[0]=120,n[1]=r<<6|(t.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,t.dictionary){var i=y0();i.p(t.dictionary),v0(n,2,i.d())}},G4=function(n,t){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&si(6,"invalid zlib data"),(n[1]>>5&1)==+!t&&si(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function ud(n,t){t||(t={});var e=y0();e.p(n);var r=W4(n,t,t.dictionary?6:2,4);return $4(r,t),v0(r,r.length-4,e.d()),r}function K4(n,t){return U4(n.subarray(G4(n,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var Y4=typeof TextDecoder<"u"&&new TextDecoder,J4=0;try{Y4.decode(m0,{stream:!0}),J4=1}catch{}var Zt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Eh(){Zt.console&&typeof Zt.console.log=="function"&&Zt.console.log.apply(Zt.console,arguments)}var Me={log:Eh,warn:function(n){Zt.console&&(typeof Zt.console.warn=="function"?Zt.console.warn.apply(Zt.console,arguments):Eh.call(null,arguments))},error:function(n){Zt.console&&(typeof Zt.console.error=="function"?Zt.console.error.apply(Zt.console,arguments):Eh(n))}};function Ih(n,t,e){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){So(r.response,t,e)},r.onerror=function(){Me.error("could not download file")},r.send()}function _g(n){var t=new XMLHttpRequest;t.open("HEAD",n,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Ml(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(t)}}var Rc,hd,So=Zt.saveAs||((typeof window>"u"?"undefined":ke(window))!=="object"||window!==Zt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,t,e){var r=Zt.URL||Zt.webkitURL,i=document.createElement("a");t=t||n.name||"download",i.download=t,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?_g(i.href)?Ih(n,t,e):Ml(i,i.target="_blank"):Ml(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Ml(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,t,e){if(t=t||n.name||"download",typeof n=="string")if(_g(n))Ih(n,t,e);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){Ml(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:ke(s)!=="object"&&(Me.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob([String.fromCharCode(65279),i],{type:i.type}):i}(n,e),t)}:function(n,t,e,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return Ih(n,t,e);var i=n.type==="application/octet-stream",s=/constructor/i.test(Zt.HTMLElement)||Zt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":ke(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var m=l.result;m=o?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=m:location=m,r=null},l.readAsDataURL(n)}else{var u=Zt.URL||Zt.webkitURL,d=u.createObjectURL(n);r?r.location=d:location.href=d,r=null,setTimeout(function(){u.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function w0(n){var t;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],r=0;r<e.length;r++){var i=e[r].re,s=e[r].process,o=i.exec(n);o&&(t=s(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),u=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),d.length==1&&(d="0"+d),"#"+l+u+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Sh(n,t){var e=n[0],r=n[1],i=n[2],s=n[3];e=Mn(e,r,i,s,t[0],7,-680876936),s=Mn(s,e,r,i,t[1],12,-389564586),i=Mn(i,s,e,r,t[2],17,606105819),r=Mn(r,i,s,e,t[3],22,-1044525330),e=Mn(e,r,i,s,t[4],7,-176418897),s=Mn(s,e,r,i,t[5],12,1200080426),i=Mn(i,s,e,r,t[6],17,-1473231341),r=Mn(r,i,s,e,t[7],22,-45705983),e=Mn(e,r,i,s,t[8],7,1770035416),s=Mn(s,e,r,i,t[9],12,-1958414417),i=Mn(i,s,e,r,t[10],17,-42063),r=Mn(r,i,s,e,t[11],22,-1990404162),e=Mn(e,r,i,s,t[12],7,1804603682),s=Mn(s,e,r,i,t[13],12,-40341101),i=Mn(i,s,e,r,t[14],17,-1502002290),e=Vn(e,r=Mn(r,i,s,e,t[15],22,1236535329),i,s,t[1],5,-165796510),s=Vn(s,e,r,i,t[6],9,-1069501632),i=Vn(i,s,e,r,t[11],14,643717713),r=Vn(r,i,s,e,t[0],20,-373897302),e=Vn(e,r,i,s,t[5],5,-701558691),s=Vn(s,e,r,i,t[10],9,38016083),i=Vn(i,s,e,r,t[15],14,-660478335),r=Vn(r,i,s,e,t[4],20,-405537848),e=Vn(e,r,i,s,t[9],5,568446438),s=Vn(s,e,r,i,t[14],9,-1019803690),i=Vn(i,s,e,r,t[3],14,-187363961),r=Vn(r,i,s,e,t[8],20,1163531501),e=Vn(e,r,i,s,t[13],5,-1444681467),s=Vn(s,e,r,i,t[2],9,-51403784),i=Vn(i,s,e,r,t[7],14,1735328473),e=jn(e,r=Vn(r,i,s,e,t[12],20,-1926607734),i,s,t[5],4,-378558),s=jn(s,e,r,i,t[8],11,-2022574463),i=jn(i,s,e,r,t[11],16,1839030562),r=jn(r,i,s,e,t[14],23,-35309556),e=jn(e,r,i,s,t[1],4,-1530992060),s=jn(s,e,r,i,t[4],11,1272893353),i=jn(i,s,e,r,t[7],16,-155497632),r=jn(r,i,s,e,t[10],23,-1094730640),e=jn(e,r,i,s,t[13],4,681279174),s=jn(s,e,r,i,t[0],11,-358537222),i=jn(i,s,e,r,t[3],16,-722521979),r=jn(r,i,s,e,t[6],23,76029189),e=jn(e,r,i,s,t[9],4,-640364487),s=jn(s,e,r,i,t[12],11,-421815835),i=jn(i,s,e,r,t[15],16,530742520),e=Bn(e,r=jn(r,i,s,e,t[2],23,-995338651),i,s,t[0],6,-198630844),s=Bn(s,e,r,i,t[7],10,1126891415),i=Bn(i,s,e,r,t[14],15,-1416354905),r=Bn(r,i,s,e,t[5],21,-57434055),e=Bn(e,r,i,s,t[12],6,1700485571),s=Bn(s,e,r,i,t[3],10,-1894986606),i=Bn(i,s,e,r,t[10],15,-1051523),r=Bn(r,i,s,e,t[1],21,-2054922799),e=Bn(e,r,i,s,t[8],6,1873313359),s=Bn(s,e,r,i,t[15],10,-30611744),i=Bn(i,s,e,r,t[6],15,-1560198380),r=Bn(r,i,s,e,t[13],21,1309151649),e=Bn(e,r,i,s,t[4],6,-145523070),s=Bn(s,e,r,i,t[11],10,-1120210379),i=Bn(i,s,e,r,t[2],15,718787259),r=Bn(r,i,s,e,t[9],21,-343485551),n[0]=Vs(e,n[0]),n[1]=Vs(r,n[1]),n[2]=Vs(i,n[2]),n[3]=Vs(s,n[3])}function Uu(n,t,e,r,i,s){return t=Vs(Vs(t,n),Vs(r,s)),Vs(t<<i|t>>>32-i,e)}function Mn(n,t,e,r,i,s,o){return Uu(t&e|~t&r,n,t,i,s,o)}function Vn(n,t,e,r,i,s,o){return Uu(t&r|e&~r,n,t,i,s,o)}function jn(n,t,e,r,i,s,o){return Uu(t^e^r,n,t,i,s,o)}function Bn(n,t,e,r,i,s,o){return Uu(e^(t|~r),n,t,i,s,o)}function _0(n){var t,e=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=n.length;t+=64)Sh(r,Q4(n.substring(t-64,t)));n=n.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<n.length;t++)i[t>>2]|=n.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(Sh(r,i),t=0;t<16;t++)i[t]=0;return i[14]=8*e,Sh(r,i),r}function Q4(n){var t,e=[];for(t=0;t<64;t+=4)e[t>>2]=n.charCodeAt(t)+(n.charCodeAt(t+1)<<8)+(n.charCodeAt(t+2)<<16)+(n.charCodeAt(t+3)<<24);return e}Rc=Zt.atob.bind(Zt),hd=Zt.btoa.bind(Zt);var bg="0123456789abcdef".split("");function X4(n){for(var t="",e=0;e<4;e++)t+=bg[n>>8*e+4&15]+bg[n>>8*e&15];return t}function Z4(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function dd(n){return _0(n).map(Z4).join("")}var t3=function(n){for(var t=0;t<n.length;t++)n[t]=X4(n[t]);return n.join("")}(_0("hello"))!="5d41402abc4b2a76b9719d911017c592";function Vs(n,t){if(t3){var e=(65535&n)+(65535&t);return(n>>16)+(t>>16)+(e>>16)<<16|65535&e}return n+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function fd(n,t){var e,r,i,s;if(n!==e){for(var o=(i=n,s=1+(256/n.length>>0),new Array(s+1).join(i)),l=[],u=0;u<256;u++)l[u]=u;var d=0;for(u=0;u<256;u++){var m=l[u];d=(d+m+o.charCodeAt(u))%256,l[u]=l[d],l[d]=m}e=n,r=l}else l=r;var v=t.length,_=0,g=0,N="";for(u=0;u<v;u++)g=(g+(m=l[_=(_+1)%256]))%256,l[_]=l[g],l[g]=m,o=l[(l[_]+l[g])%256],N+=String.fromCharCode(t.charCodeAt(u)^o);return N}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Ag={print:4,modify:8,copy:16,"annot-forms":32};function Ta(n,t,e,r){this.v=1,this.r=2;var i=192;n.forEach(function(l){if(Ag.perm!==void 0)throw new Error("Invalid permission: "+l);i+=Ag[l]}),this.padding="(¬øN^Nu¬äAd\0NV√ø√∫\b..\0¬∂√êh>¬Ä/\f¬©√ædSiz";var s=(t+this.padding).substr(0,32),o=(e+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=dd(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=fd(this.encryptionKey,this.padding)}function Pa(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var t="",e=n.length,r=0;r<e;r++){var i=n.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?t+="#"+("0"+i.toString(16)).slice(-2):t+=n[r]}return t}function Eg(n){if(ke(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,r,i){if(i=i||!1,typeof e!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var s=Math.random().toString(35);return t[e][s]=[r,!!i],s},this.unsubscribe=function(e){for(var r in t)if(t[r][e])return delete t[r][e],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(e){if(t.hasOwnProperty(e)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in t[e]){var o=t[e][s];try{o[0].apply(n,r)}catch(l){Zt.console&&Me.error("jsPDF PubSub Error",l.message,l)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Kc(n){if(!(this instanceof Kc))return new Kc(n);var t="opacity,stroke-opacity".split(",");for(var e in n)n.hasOwnProperty(e)&&t.indexOf(e)>=0&&(this[e]=n[e]);this.id="",this.objectNumber=-1}function b0(n,t){this.gState=n,this.matrix=t,this.id="",this.objectNumber=-1}function Fs(n,t,e,r,i){if(!(this instanceof Fs))return new Fs(n,t,e,r,i);this.type=n==="axial"?2:3,this.coords=t,this.colors=e,b0.call(this,r,i)}function xo(n,t,e,r,i){if(!(this instanceof xo))return new xo(n,t,e,r,i);this.boundingBox=n,this.xStep=t,this.yStep=e,this.stream="",this.cloneIndex=0,b0.call(this,r,i)}function Kt(n){var t,e=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],l=1,u=16,d="S",m=null;ke(n=n||{})==="object"&&(e=n.orientation,r=n.unit||r,i=n.format||i,s=n.compress||n.compressPdf||s,(m=n.encryption||null)!==null&&(m.userPassword=m.userPassword||"",m.ownerPassword=m.ownerPassword||"",m.userPermissions=m.userPermissions||[]),l=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(t=n.precision),n.floatPrecision!==void 0&&(u=n.floatPrecision),d=n.defaultPathOperation||"S"),o=n.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",e=(""+(e||"P")).toLowerCase();var v=n.putOnlyUsedFonts||!1,_={},g={internal:{},__private__:{}};g.__private__.PubSub=Eg;var N="1.3",L=g.__private__.getPdfVersion=function(){return N};g.__private__.setPdfVersion=function(p){N=p};var O={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return O};var C=g.__private__.getPageFormat=function(p){return O[p]};i=i||"a4";var R={COMPAT:"compat",ADVANCED:"advanced"},M=R.COMPAT;function q(){this.saveGraphicsState(),rt(new Jt(Ft,0,0,-Ft,0,ti()*Ft).toString()+" cm"),this.setFontSize(this.getFontSize()/Ft),d="n",M=R.ADVANCED}function K(){this.restoreGraphicsState(),d="S",M=R.COMPAT}var Q=g.__private__.combineFontStyleAndFontWeight=function(p,a){if(p=="bold"&&a=="normal"||p=="bold"&&a==400||p=="normal"&&a=="italic"||p=="bold"&&a=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return a&&(p=a==400||a==="normal"?p==="italic"?"italic":"normal":a!=700&&a!=="bold"||p!=="normal"?(a==700?"bold":a)+""+p:"bold"),p};g.advancedAPI=function(p){var a=M===R.COMPAT;return a&&q.call(this),typeof p!="function"||(p(this),a&&K.call(this)),this},g.compatAPI=function(p){var a=M===R.ADVANCED;return a&&K.call(this),typeof p!="function"||(p(this),a&&q.call(this)),this},g.isAdvancedAPI=function(){return M===R.ADVANCED};var S,E=function(p){if(M!==R.ADVANCED)throw new Error(p+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},x=g.roundToPrecision=g.__private__.roundToPrecision=function(p,a){var f=t||a;if(isNaN(p)||isNaN(f))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return p.toFixed(f).replace(/0+$/,"")};S=g.hpf=g.__private__.hpf=typeof u=="number"?function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.hpf");return x(p,u)}:u==="smart"?function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.hpf");return x(p,p>-1&&p<1?16:5)}:function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.hpf");return x(p,16)};var F=g.f2=g.__private__.f2=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.f2");return x(p,2)},b=g.__private__.f3=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.f3");return x(p,3)},A=g.scale=g.__private__.scale=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.scale");return M===R.COMPAT?p*Ft:M===R.ADVANCED?p:void 0},T=function(p){return M===R.COMPAT?ti()-p:M===R.ADVANCED?p:void 0},W=function(p){return A(T(p))};g.__private__.setPrecision=g.setPrecision=function(p){typeof parseInt(p,10)=="number"&&(t=parseInt(p,10))};var ct,J="00000000000000000000000000000000",Y=g.__private__.getFileId=function(){return J},et=g.__private__.setFileId=function(p){return J=p!==void 0&&/^[a-fA-F0-9]{32}$/.test(p)?p.toUpperCase():J.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),m!==null&&(An=new Ta(m.userPermissions,m.userPassword,m.ownerPassword,J)),J};g.setFileId=function(p){return et(p),this},g.getFileId=function(){return Y()};var Z=g.__private__.convertDateToPDFDate=function(p){var a=p.getTimezoneOffset(),f=a<0?"+":"-",w=Math.floor(Math.abs(a/60)),P=Math.abs(a%60),H=[f,$(w),"'",$(P),"'"].join("");return["D:",p.getFullYear(),$(p.getMonth()+1),$(p.getDate()),$(p.getHours()),$(p.getMinutes()),$(p.getSeconds()),H].join("")},at=g.__private__.convertPDFDateToDate=function(p){var a=parseInt(p.substr(2,4),10),f=parseInt(p.substr(6,2),10)-1,w=parseInt(p.substr(8,2),10),P=parseInt(p.substr(10,2),10),H=parseInt(p.substr(12,2),10),tt=parseInt(p.substr(14,2),10);return new Date(a,f,w,P,H,tt,0)},mt=g.__private__.setCreationDate=function(p){var a;if(p===void 0&&(p=new Date),p instanceof Date)a=Z(p);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(p))throw new Error("Invalid argument passed to jsPDF.setCreationDate");a=p}return ct=a},k=g.__private__.getCreationDate=function(p){var a=ct;return p==="jsDate"&&(a=at(ct)),a};g.setCreationDate=function(p){return mt(p),this},g.getCreationDate=function(p){return k(p)};var z,$=g.__private__.padd2=function(p){return("0"+parseInt(p)).slice(-2)},X=g.__private__.padd2Hex=function(p){return("00"+(p=p.toString())).substr(p.length)},nt=0,ut=[],ht=[],pt=0,Tt=[],St=[],Lt=!1,kt=ht,$t=function(){nt=0,pt=0,ht=[],ut=[],Tt=[],bn=$e(),nr=$e()};g.__private__.setCustomOutputDestination=function(p){Lt=!0,kt=p};var vt=function(p){Lt||(kt=p)};g.__private__.resetCustomOutputDestination=function(){Lt=!1,kt=ht};var rt=g.__private__.out=function(p){return p=p.toString(),pt+=p.length+1,kt.push(p),kt},ne=g.__private__.write=function(p){return rt(arguments.length===1?p.toString():Array.prototype.join.call(arguments," "))},qt=g.__private__.getArrayBuffer=function(p){for(var a=p.length,f=new ArrayBuffer(a),w=new Uint8Array(f);a--;)w[a]=p.charCodeAt(a);return f},Pt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return Pt};var Nt=n.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(p){return Nt=M===R.ADVANCED?p/Ft:p,this};var Ct,Rt=g.__private__.getFontSize=g.getFontSize=function(){return M===R.COMPAT?Nt:Nt*Ft},Ht=n.R2L||!1;g.__private__.setR2L=g.setR2L=function(p){return Ht=p,this},g.__private__.getR2L=g.getR2L=function(){return Ht};var re,le=g.__private__.setZoomMode=function(p){var a=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(p))Ct=p;else if(isNaN(p)){if(a.indexOf(p)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+p+'" is not recognized.');Ct=p}else Ct=parseInt(p,10)};g.__private__.getZoomMode=function(){return Ct};var oe,pe=g.__private__.setPageMode=function(p){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(p)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+p+'" is not recognized.');re=p};g.__private__.getPageMode=function(){return re};var Se=g.__private__.setLayoutMode=function(p){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(p)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+p+'" is not recognized.');oe=p};g.__private__.getLayoutMode=function(){return oe},g.__private__.setDisplayMode=g.setDisplayMode=function(p,a,f){return le(p),Se(a),pe(f),this};var Xt={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(p){if(Object.keys(Xt).indexOf(p)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Xt[p]},g.__private__.getDocumentProperties=function(){return Xt},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(p){for(var a in Xt)Xt.hasOwnProperty(a)&&p[a]&&(Xt[a]=p[a]);return this},g.__private__.setDocumentProperty=function(p,a){if(Object.keys(Xt).indexOf(p)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Xt[p]=a};var he,Ft,hn,_e,Tn,Te={},De={},_n=[],Ee={},Tr={},qe={},Pn={},Pr=null,de=0,ie=[],ge=new Eg(g),gr=n.hotfixes||[],dn={},Nr={},Nn=[],Jt=function p(a,f,w,P,H,tt){if(!(this instanceof p))return new p(a,f,w,P,H,tt);isNaN(a)&&(a=1),isNaN(f)&&(f=0),isNaN(w)&&(w=0),isNaN(P)&&(P=1),isNaN(H)&&(H=0),isNaN(tt)&&(tt=0),this._matrix=[a,f,w,P,H,tt]};Object.defineProperty(Jt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(p){this._matrix[0]=p}}),Object.defineProperty(Jt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(p){this._matrix[1]=p}}),Object.defineProperty(Jt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(p){this._matrix[2]=p}}),Object.defineProperty(Jt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(p){this._matrix[3]=p}}),Object.defineProperty(Jt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(p){this._matrix[4]=p}}),Object.defineProperty(Jt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(p){this._matrix[5]=p}}),Object.defineProperty(Jt.prototype,"a",{get:function(){return this._matrix[0]},set:function(p){this._matrix[0]=p}}),Object.defineProperty(Jt.prototype,"b",{get:function(){return this._matrix[1]},set:function(p){this._matrix[1]=p}}),Object.defineProperty(Jt.prototype,"c",{get:function(){return this._matrix[2]},set:function(p){this._matrix[2]=p}}),Object.defineProperty(Jt.prototype,"d",{get:function(){return this._matrix[3]},set:function(p){this._matrix[3]=p}}),Object.defineProperty(Jt.prototype,"e",{get:function(){return this._matrix[4]},set:function(p){this._matrix[4]=p}}),Object.defineProperty(Jt.prototype,"f",{get:function(){return this._matrix[5]},set:function(p){this._matrix[5]=p}}),Object.defineProperty(Jt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Jt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Jt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Jt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Jt.prototype.join=function(p){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(S).join(p)},Jt.prototype.multiply=function(p){var a=p.sx*this.sx+p.shy*this.shx,f=p.sx*this.shy+p.shy*this.sy,w=p.shx*this.sx+p.sy*this.shx,P=p.shx*this.shy+p.sy*this.sy,H=p.tx*this.sx+p.ty*this.shx+this.tx,tt=p.tx*this.shy+p.ty*this.sy+this.ty;return new Jt(a,f,w,P,H,tt)},Jt.prototype.decompose=function(){var p=this.sx,a=this.shy,f=this.shx,w=this.sy,P=this.tx,H=this.ty,tt=Math.sqrt(p*p+a*a),gt=(p/=tt)*f+(a/=tt)*w;f-=p*gt,w-=a*gt;var xt=Math.sqrt(f*f+w*w);return gt/=xt,p*(w/=xt)<a*(f/=xt)&&(p=-p,a=-a,gt=-gt,tt=-tt),{scale:new Jt(tt,0,0,xt,0,0),translate:new Jt(1,0,0,1,P,H),rotate:new Jt(p,a,-a,p,0,0),skew:new Jt(1,0,gt,1,0,0)}},Jt.prototype.toString=function(p){return this.join(" ")},Jt.prototype.inversed=function(){var p=this.sx,a=this.shy,f=this.shx,w=this.sy,P=this.tx,H=this.ty,tt=1/(p*w-a*f),gt=w*tt,xt=-a*tt,Ut=-f*tt,Mt=p*tt;return new Jt(gt,xt,Ut,Mt,-gt*P-Ut*H,-xt*P-Mt*H)},Jt.prototype.applyToPoint=function(p){var a=p.x*this.sx+p.y*this.shx+this.tx,f=p.x*this.shy+p.y*this.sy+this.ty;return new qi(a,f)},Jt.prototype.applyToRectangle=function(p){var a=this.applyToPoint(p),f=this.applyToPoint(new qi(p.x+p.w,p.y+p.h));return new vr(a.x,a.y,f.x-a.x,f.y-a.y)},Jt.prototype.clone=function(){var p=this.sx,a=this.shy,f=this.shx,w=this.sy,P=this.tx,H=this.ty;return new Jt(p,a,f,w,P,H)},g.Matrix=Jt;var mr=g.matrixMult=function(p,a){return a.multiply(p)},Wn=new Jt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=Wn;var xn=function(p,a){if(!Tr[p]){var f=(a instanceof Fs?"Sh":"P")+(Object.keys(Ee).length+1).toString(10);a.id=f,Tr[p]=f,Ee[f]=a,ge.publish("addPattern",a)}};g.ShadingPattern=Fs,g.TilingPattern=xo,g.addShadingPattern=function(p,a){return E("addShadingPattern()"),xn(p,a),this},g.beginTilingPattern=function(p){E("beginTilingPattern()"),yo(p.boundingBox[0],p.boundingBox[1],p.boundingBox[2]-p.boundingBox[0],p.boundingBox[3]-p.boundingBox[1],p.matrix)},g.endTilingPattern=function(p,a){E("endTilingPattern()"),a.stream=St[z].join(`
`),xn(p,a),ge.publish("endTilingPattern",a),Nn.pop().restore()};var Je=g.__private__.newObject=function(){var p=$e();return fn(p,!0),p},$e=g.__private__.newObjectDeferred=function(){return nt++,ut[nt]=function(){return pt},nt},fn=function(p,a){return a=typeof a=="boolean"&&a,ut[p]=pt,a&&rt(p+" 0 obj"),p},cs=g.__private__.newAdditionalObject=function(){var p={objId:$e(),content:""};return Tt.push(p),p},bn=$e(),nr=$e(),rr=g.__private__.decodeColorString=function(p){var a=p.split(" ");if(a.length!==2||a[1]!=="g"&&a[1]!=="G")a.length===5&&(a[4]==="k"||a[4]==="K")&&(a=[(1-a[0])*(1-a[3]),(1-a[1])*(1-a[3]),(1-a[2])*(1-a[3]),"r"]);else{var f=parseFloat(a[0]);a=[f,f,f,"r"]}for(var w="#",P=0;P<3;P++)w+=("0"+Math.floor(255*parseFloat(a[P])).toString(16)).slice(-2);return w},$n=g.__private__.encodeColorString=function(p){var a;typeof p=="string"&&(p={ch1:p});var f=p.ch1,w=p.ch2,P=p.ch3,H=p.ch4,tt=p.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof f=="string"&&f.charAt(0)!=="#"){var gt=new w0(f);if(gt.ok)f=gt.toHex();else if(!/^\d*\.?\d*$/.test(f))throw new Error('Invalid color "'+f+'" passed to jsPDF.encodeColorString.')}if(typeof f=="string"&&/^#[0-9A-Fa-f]{3}$/.test(f)&&(f="#"+f[1]+f[1]+f[2]+f[2]+f[3]+f[3]),typeof f=="string"&&/^#[0-9A-Fa-f]{6}$/.test(f)){var xt=parseInt(f.substr(1),16);f=xt>>16&255,w=xt>>8&255,P=255&xt}if(w===void 0||H===void 0&&f===w&&w===P)if(typeof f=="string")a=f+" "+tt[0];else switch(p.precision){case 2:a=F(f/255)+" "+tt[0];break;case 3:default:a=b(f/255)+" "+tt[0]}else if(H===void 0||ke(H)==="object"){if(H&&!isNaN(H.a)&&H.a===0)return a=["1.","1.","1.",tt[1]].join(" ");if(typeof f=="string")a=[f,w,P,tt[1]].join(" ");else switch(p.precision){case 2:a=[F(f/255),F(w/255),F(P/255),tt[1]].join(" ");break;default:case 3:a=[b(f/255),b(w/255),b(P/255),tt[1]].join(" ")}}else if(typeof f=="string")a=[f,w,P,H,tt[2]].join(" ");else switch(p.precision){case 2:a=[F(f),F(w),F(P),F(H),tt[2]].join(" ");break;case 3:default:a=[b(f),b(w),b(P),b(H),tt[2]].join(" ")}return a},ir=g.__private__.getFilters=function(){return o},Gn=g.__private__.putStream=function(p){var a=(p=p||{}).data||"",f=p.filters||ir(),w=p.alreadyAppliedFilters||[],P=p.addLength1||!1,H=a.length,tt=p.objectId,gt=function(Ue){return Ue};if(m!==null&&tt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");m!==null&&(gt=An.encryptor(tt,0));var xt={};f===!0&&(f=["FlateEncode"]);var Ut=p.additionalKeyValues||[],Mt=(xt=Kt.API.processDataByFilters!==void 0?Kt.API.processDataByFilters(a,f):{data:a,reverseChain:[]}).reverseChain+(Array.isArray(w)?w.join(" "):w.toString());if(xt.data.length!==0&&(Ut.push({key:"Length",value:xt.data.length}),P===!0&&Ut.push({key:"Length1",value:H})),Mt.length!=0)if(Mt.split("/").length-1==1)Ut.push({key:"Filter",value:Mt});else{Ut.push({key:"Filter",value:"["+Mt+"]"});for(var Gt=0;Gt<Ut.length;Gt+=1)if(Ut[Gt].key==="DecodeParms"){for(var be=[],Ne=0;Ne<xt.reverseChain.split("/").length-1;Ne+=1)be.push("null");be.push(Ut[Gt].value),Ut[Gt].value="["+be.join(" ")+"]"}}rt("<<");for(var Ce=0;Ce<Ut.length;Ce++)rt("/"+Ut[Ce].key+" "+Ut[Ce].value);rt(">>"),xt.data.length!==0&&(rt("stream"),rt(gt(xt.data)),rt("endstream"))},xr=g.__private__.putPage=function(p){var a=p.number,f=p.data,w=p.objId,P=p.contentsObjId;fn(w,!0),rt("<</Type /Page"),rt("/Parent "+p.rootDictionaryObjId+" 0 R"),rt("/Resources "+p.resourceDictionaryObjId+" 0 R"),rt("/MediaBox ["+parseFloat(S(p.mediaBox.bottomLeftX))+" "+parseFloat(S(p.mediaBox.bottomLeftY))+" "+S(p.mediaBox.topRightX)+" "+S(p.mediaBox.topRightY)+"]"),p.cropBox!==null&&rt("/CropBox ["+S(p.cropBox.bottomLeftX)+" "+S(p.cropBox.bottomLeftY)+" "+S(p.cropBox.topRightX)+" "+S(p.cropBox.topRightY)+"]"),p.bleedBox!==null&&rt("/BleedBox ["+S(p.bleedBox.bottomLeftX)+" "+S(p.bleedBox.bottomLeftY)+" "+S(p.bleedBox.topRightX)+" "+S(p.bleedBox.topRightY)+"]"),p.trimBox!==null&&rt("/TrimBox ["+S(p.trimBox.bottomLeftX)+" "+S(p.trimBox.bottomLeftY)+" "+S(p.trimBox.topRightX)+" "+S(p.trimBox.topRightY)+"]"),p.artBox!==null&&rt("/ArtBox ["+S(p.artBox.bottomLeftX)+" "+S(p.artBox.bottomLeftY)+" "+S(p.artBox.topRightX)+" "+S(p.artBox.topRightY)+"]"),typeof p.userUnit=="number"&&p.userUnit!==1&&rt("/UserUnit "+p.userUnit),ge.publish("putPage",{objId:w,pageContext:ie[a],pageNumber:a,page:f}),rt("/Contents "+P+" 0 R"),rt(">>"),rt("endobj");var H=f.join(`
`);return M===R.ADVANCED&&(H+=`
Q`),fn(P,!0),Gn({data:H,filters:ir(),objectId:P}),rt("endobj"),w},hi=g.__private__.putPages=function(){var p,a,f=[];for(p=1;p<=de;p++)ie[p].objId=$e(),ie[p].contentsObjId=$e();for(p=1;p<=de;p++)f.push(xr({number:p,data:St[p],objId:ie[p].objId,contentsObjId:ie[p].contentsObjId,mediaBox:ie[p].mediaBox,cropBox:ie[p].cropBox,bleedBox:ie[p].bleedBox,trimBox:ie[p].trimBox,artBox:ie[p].artBox,userUnit:ie[p].userUnit,rootDictionaryObjId:bn,resourceDictionaryObjId:nr}));fn(bn,!0),rt("<</Type /Pages");var w="/Kids [";for(a=0;a<de;a++)w+=f[a]+" 0 R ";rt(w+"]"),rt("/Count "+de),rt(">>"),rt("endobj"),ge.publish("postPutPages")},ls=function(p){ge.publish("putFont",{font:p,out:rt,newObject:Je,putStream:Gn}),p.isAlreadyPutted!==!0&&(p.objectNumber=Je(),rt("<<"),rt("/Type /Font"),rt("/BaseFont /"+Pa(p.postScriptName)),rt("/Subtype /Type1"),typeof p.encoding=="string"&&rt("/Encoding /"+p.encoding),rt("/FirstChar 32"),rt("/LastChar 255"),rt(">>"),rt("endobj"))},Hr=function(){for(var p in Te)Te.hasOwnProperty(p)&&(v===!1||v===!0&&_.hasOwnProperty(p))&&ls(Te[p])},Fi=function(p){p.objectNumber=Je();var a=[];a.push({key:"Type",value:"/XObject"}),a.push({key:"Subtype",value:"/Form"}),a.push({key:"BBox",value:"["+[S(p.x),S(p.y),S(p.x+p.width),S(p.y+p.height)].join(" ")+"]"}),a.push({key:"Matrix",value:"["+p.matrix.toString()+"]"});var f=p.pages[1].join(`
`);Gn({data:f,additionalKeyValues:a,objectId:p.objectNumber}),rt("endobj")},di=function(){for(var p in dn)dn.hasOwnProperty(p)&&Fi(dn[p])},fi=function(p,a){var f,w=[],P=1/(a-1);for(f=0;f<1;f+=P)w.push(f);if(w.push(1),p[0].offset!=0){var H={offset:0,color:p[0].color};p.unshift(H)}if(p[p.length-1].offset!=1){var tt={offset:1,color:p[p.length-1].color};p.push(tt)}for(var gt="",xt=0,Ut=0;Ut<w.length;Ut++){for(f=w[Ut];f>p[xt+1].offset;)xt++;var Mt=p[xt].offset,Gt=(f-Mt)/(p[xt+1].offset-Mt),be=p[xt].color,Ne=p[xt+1].color;gt+=X(Math.round((1-Gt)*be[0]+Gt*Ne[0]).toString(16))+X(Math.round((1-Gt)*be[1]+Gt*Ne[1]).toString(16))+X(Math.round((1-Gt)*be[2]+Gt*Ne[2]).toString(16))}return gt.trim()},Wr=function(p,a){a||(a=21);var f=Je(),w=fi(p.colors,a),P=[];P.push({key:"FunctionType",value:"0"}),P.push({key:"Domain",value:"[0.0 1.0]"}),P.push({key:"Size",value:"["+a+"]"}),P.push({key:"BitsPerSample",value:"8"}),P.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),P.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Gn({data:w,additionalKeyValues:P,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:f}),rt("endobj"),p.objectNumber=Je(),rt("<< /ShadingType "+p.type),rt("/ColorSpace /DeviceRGB");var H="/Coords ["+S(parseFloat(p.coords[0]))+" "+S(parseFloat(p.coords[1]))+" ";p.type===2?H+=S(parseFloat(p.coords[2]))+" "+S(parseFloat(p.coords[3])):H+=S(parseFloat(p.coords[2]))+" "+S(parseFloat(p.coords[3]))+" "+S(parseFloat(p.coords[4]))+" "+S(parseFloat(p.coords[5])),rt(H+="]"),p.matrix&&rt("/Matrix ["+p.matrix.toString()+"]"),rt("/Function "+f+" 0 R"),rt("/Extend [true true]"),rt(">>"),rt("endobj")},so=function(p,a){var f=$e(),w=Je();a.push({resourcesOid:f,objectOid:w}),p.objectNumber=w;var P=[];P.push({key:"Type",value:"/Pattern"}),P.push({key:"PatternType",value:"1"}),P.push({key:"PaintType",value:"1"}),P.push({key:"TilingType",value:"1"}),P.push({key:"BBox",value:"["+p.boundingBox.map(S).join(" ")+"]"}),P.push({key:"XStep",value:S(p.xStep)}),P.push({key:"YStep",value:S(p.yStep)}),P.push({key:"Resources",value:f+" 0 R"}),p.matrix&&P.push({key:"Matrix",value:"["+p.matrix.toString()+"]"}),Gn({data:p.stream,additionalKeyValues:P,objectId:p.objectNumber}),rt("endobj")},us=function(p){var a;for(a in Ee)Ee.hasOwnProperty(a)&&(Ee[a]instanceof Fs?Wr(Ee[a]):Ee[a]instanceof xo&&so(Ee[a],p))},oo=function(p){for(var a in p.objectNumber=Je(),rt("<<"),p)switch(a){case"opacity":rt("/ca "+F(p[a]));break;case"stroke-opacity":rt("/CA "+F(p[a]))}rt(">>"),rt("endobj")},$o=function(){var p;for(p in qe)qe.hasOwnProperty(p)&&oo(qe[p])},hs=function(){for(var p in rt("/XObject <<"),dn)dn.hasOwnProperty(p)&&dn[p].objectNumber>=0&&rt("/"+p+" "+dn[p].objectNumber+" 0 R");ge.publish("putXobjectDict"),rt(">>")},ao=function(){An.oid=Je(),rt("<<"),rt("/Filter /Standard"),rt("/V "+An.v),rt("/R "+An.r),rt("/U <"+An.toHexString(An.U)+">"),rt("/O <"+An.toHexString(An.O)+">"),rt("/P "+An.P),rt(">>"),rt("endobj")},ds=function(){for(var p in rt("/Font <<"),Te)Te.hasOwnProperty(p)&&(v===!1||v===!0&&_.hasOwnProperty(p))&&rt("/"+p+" "+Te[p].objectNumber+" 0 R");rt(">>")},Go=function(){if(Object.keys(Ee).length>0){for(var p in rt("/Shading <<"),Ee)Ee.hasOwnProperty(p)&&Ee[p]instanceof Fs&&Ee[p].objectNumber>=0&&rt("/"+p+" "+Ee[p].objectNumber+" 0 R");ge.publish("putShadingPatternDict"),rt(">>")}},Mi=function(p){if(Object.keys(Ee).length>0){for(var a in rt("/Pattern <<"),Ee)Ee.hasOwnProperty(a)&&Ee[a]instanceof g.TilingPattern&&Ee[a].objectNumber>=0&&Ee[a].objectNumber<p&&rt("/"+a+" "+Ee[a].objectNumber+" 0 R");ge.publish("putTilingPatternDict"),rt(">>")}},Ko=function(){if(Object.keys(qe).length>0){var p;for(p in rt("/ExtGState <<"),qe)qe.hasOwnProperty(p)&&qe[p].objectNumber>=0&&rt("/"+p+" "+qe[p].objectNumber+" 0 R");ge.publish("putGStateDict"),rt(">>")}},Ge=function(p){fn(p.resourcesOid,!0),rt("<<"),rt("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ds(),Go(),Mi(p.objectOid),Ko(),hs(),rt(">>"),rt("endobj")},yr=function(){var p=[];Hr(),$o(),di(),us(p),ge.publish("putResources"),p.forEach(Ge),Ge({resourcesOid:nr,objectOid:Number.MAX_SAFE_INTEGER}),ge.publish("postPutResources")},Kn=function(){ge.publish("putAdditionalObjects");for(var p=0;p<Tt.length;p++){var a=Tt[p];fn(a.objId,!0),rt(a.content),rt("endobj")}ge.publish("postPutAdditionalObjects")},pi=function(p){De[p.fontName]=De[p.fontName]||{},De[p.fontName][p.fontStyle]=p.id},$r=function(p,a,f,w,P){var H={id:"F"+(Object.keys(Te).length+1).toString(10),postScriptName:p,fontName:a,fontStyle:f,encoding:w,isStandardFont:P||!1,metadata:{}};return ge.publish("addFont",{font:H,instance:this}),Te[H.id]=H,pi(H),H.id},co=function(p){for(var a=0,f=Pt.length;a<f;a++){var w=$r.call(this,p[a][0],p[a][1],p[a][2],Pt[a][3],!0);v===!1&&(_[w]=!0);var P=p[a][0].split("-");pi({id:w,fontName:P[0],fontStyle:P[1]||""})}ge.publish("addFonts",{fonts:Te,dictionary:De})},fe=function(p){return p.foo=function(){try{return p.apply(this,arguments)}catch(w){var a=w.stack||"";~a.indexOf(" at ")&&(a=a.split(" at ")[1]);var f="Error in function "+a.split(`
`)[0].split("<")[0]+": "+w.message;if(!Zt.console)throw new Error(f);Zt.console.error(f,w),Zt.alert&&alert(f)}},p.foo.bar=p,p.foo},Gr=function(p,a){var f,w,P,H,tt,gt,xt,Ut,Mt;if(P=(a=a||{}).sourceEncoding||"Unicode",tt=a.outputEncoding,(a.autoencode||tt)&&Te[he].metadata&&Te[he].metadata[P]&&Te[he].metadata[P].encoding&&(H=Te[he].metadata[P].encoding,!tt&&Te[he].encoding&&(tt=Te[he].encoding),!tt&&H.codePages&&(tt=H.codePages[0]),typeof tt=="string"&&(tt=H[tt]),tt)){for(xt=!1,gt=[],f=0,w=p.length;f<w;f++)(Ut=tt[p.charCodeAt(f)])?gt.push(String.fromCharCode(Ut)):gt.push(p[f]),gt[f].charCodeAt(0)>>8&&(xt=!0);p=gt.join("")}for(f=p.length;xt===void 0&&f!==0;)p.charCodeAt(f-1)>>8&&(xt=!0),f--;if(!xt)return p;for(gt=a.noBOM?[]:[254,255],f=0,w=p.length;f<w;f++){if((Mt=(Ut=p.charCodeAt(f))>>8)>>8)throw new Error("Character at position "+f+" of string '"+p+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");gt.push(Mt),gt.push(Ut-(Mt<<8))}return String.fromCharCode.apply(void 0,gt)},on=g.__private__.pdfEscape=g.pdfEscape=function(p,a){return Gr(p,a).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Kr=g.__private__.beginPage=function(p){St[++de]=[],ie[de]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(p[0]),topRightY:Number(p[1])}},Qo(de),vt(St[z])},Yo=function(p,a){var f,w,P;switch(e=a||e,typeof p=="string"&&(f=C(p.toLowerCase()),Array.isArray(f)&&(w=f[0],P=f[1])),Array.isArray(p)&&(w=p[0]*Ft,P=p[1]*Ft),isNaN(w)&&(w=i[0],P=i[1]),(w>14400||P>14400)&&(Me.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),w=Math.min(14400,w),P=Math.min(14400,P)),i=[w,P],e.substr(0,1)){case"l":P>w&&(i=[P,w]);break;case"p":w>P&&(i=[P,w])}Kr(i),ra(sr),rt(or),ms!==0&&rt(ms+" J"),bi!==0&&rt(bi+" j"),ge.publish("addPage",{pageNumber:de})},Jo=function(p){p>0&&p<=de&&(St.splice(p,1),ie.splice(p,1),de--,z>de&&(z=de),this.setPage(z))},Qo=function(p){p>0&&p<=de&&(z=p)},Ja=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return St.length-1},Xo=function(p,a,f){var w,P=void 0;return f=f||{},p=p!==void 0?p:Te[he].fontName,a=a!==void 0?a:Te[he].fontStyle,w=p.toLowerCase(),De[w]!==void 0&&De[w][a]!==void 0?P=De[w][a]:De[p]!==void 0&&De[p][a]!==void 0?P=De[p][a]:f.disableWarning===!1&&Me.warn("Unable to look up font label for font '"+p+"', '"+a+"'. Refer to getFontList() for available fonts."),P||f.noFallback||(P=De.times[a])==null&&(P=De.times.normal),P},Qa=g.__private__.putInfo=function(){var p=Je(),a=function(w){return w};for(var f in m!==null&&(a=An.encryptor(p,0)),rt("<<"),rt("/Producer ("+on(a("jsPDF "+Kt.version))+")"),Xt)Xt.hasOwnProperty(f)&&Xt[f]&&rt("/"+f.substr(0,1).toUpperCase()+f.substr(1)+" ("+on(a(Xt[f]))+")");rt("/CreationDate ("+on(a(ct))+")"),rt(">>"),rt("endobj")},Yr=g.__private__.putCatalog=function(p){var a=(p=p||{}).rootDictionaryObjId||bn;switch(Je(),rt("<<"),rt("/Type /Catalog"),rt("/Pages "+a+" 0 R"),Ct||(Ct="fullwidth"),Ct){case"fullwidth":rt("/OpenAction [3 0 R /FitH null]");break;case"fullheight":rt("/OpenAction [3 0 R /FitV null]");break;case"fullpage":rt("/OpenAction [3 0 R /Fit]");break;case"original":rt("/OpenAction [3 0 R /XYZ null null 1]");break;default:var f=""+Ct;f.substr(f.length-1)==="%"&&(Ct=parseInt(Ct)/100),typeof Ct=="number"&&rt("/OpenAction [3 0 R /XYZ null null "+F(Ct)+"]")}switch(oe||(oe="continuous"),oe){case"continuous":rt("/PageLayout /OneColumn");break;case"single":rt("/PageLayout /SinglePage");break;case"two":case"twoleft":rt("/PageLayout /TwoColumnLeft");break;case"tworight":rt("/PageLayout /TwoColumnRight")}re&&rt("/PageMode /"+re),ge.publish("putCatalog"),rt(">>"),rt("endobj")},Jr=g.__private__.putTrailer=function(){rt("trailer"),rt("<<"),rt("/Size "+(nt+1)),rt("/Root "+nt+" 0 R"),rt("/Info "+(nt-1)+" 0 R"),m!==null&&rt("/Encrypt "+An.oid+" 0 R"),rt("/ID [ <"+J+"> <"+J+"> ]"),rt(">>")},Zo=g.__private__.putHeader=function(){rt("%PDF-"+N),rt("%¬∫√ü¬¨√†")},ta=g.__private__.putXRef=function(){var p="0000000000";rt("xref"),rt("0 "+(nt+1)),rt("0000000000 65535 f ");for(var a=1;a<=nt;a++)typeof ut[a]=="function"?rt((p+ut[a]()).slice(-10)+" 00000 n "):ut[a]!==void 0?rt((p+ut[a]).slice(-10)+" 00000 n "):rt("0000000000 00000 n ")},Cr=g.__private__.buildDocument=function(){$t(),vt(ht),ge.publish("buildDocument"),Zo(),hi(),Kn(),yr(),m!==null&&ao(),Qa(),Yr();var p=pt;return ta(),Jr(),rt("startxref"),rt(""+p),rt("%%EOF"),vt(St[z]),ht.join(`
`)},Vi=g.__private__.getBlob=function(p){return new Blob([qt(p)],{type:"application/pdf"})},ji=g.output=g.__private__.output=fe(function(p,a){switch(typeof(a=a||{})=="string"?a={filename:a}:a.filename=a.filename||"generated.pdf",p){case void 0:return Cr();case"save":g.save(a.filename);break;case"arraybuffer":return qt(Cr());case"blob":return Vi(Cr());case"bloburi":case"bloburl":if(Zt.URL!==void 0&&typeof Zt.URL.createObjectURL=="function")return Zt.URL&&Zt.URL.createObjectURL(Vi(Cr()))||void 0;Me.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var f="",w=Cr();try{f=hd(w)}catch{f=hd(unescape(encodeURIComponent(w)))}return"data:application/pdf;filename="+a.filename+";base64,"+f;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Zt)==="[object Window]"){var P="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",H=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';a.pdfObjectUrl&&(P=a.pdfObjectUrl,H="");var tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+P+'"'+H+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(a)+");<\/script></body></html>",gt=Zt.open();return gt!==null&&gt.document.write(tt),gt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Zt)==="[object Window]"){var xt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(a.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+a.filename+'" width="500px" height="400px" /></body></html>',Ut=Zt.open();if(Ut!==null){Ut.document.write(xt);var Mt=this;Ut.document.documentElement.querySelector("#pdfViewer").onload=function(){Ut.document.title=a.filename,Ut.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Mt.output("bloburl"))}}return Ut}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Zt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Gt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",a)+'"></iframe></body></html>',be=Zt.open();if(be!==null&&(be.document.write(Gt),be.document.title=a.filename),be||typeof safari>"u")return be;break;case"datauri":case"dataurl":return Zt.document.location.href=this.output("datauristring",a);default:return null}}),Qr=function(p){return Array.isArray(gr)===!0&&gr.indexOf(p)>-1};switch(r){case"pt":Ft=1;break;case"mm":Ft=72/25.4;break;case"cm":Ft=72/2.54;break;case"in":Ft=72;break;case"px":Ft=Qr("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ft=12;break;case"ex":Ft=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Ft=r}var An=null;mt(),et();var Xa=function(p){return m!==null?An.encryptor(p,0):function(a){return a}},ea=g.__private__.getPageInfo=g.getPageInfo=function(p){if(isNaN(p)||p%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ie[p].objId,pageNumber:p,pageContext:ie[p]}},Wt=g.__private__.getPageInfoByObjId=function(p){if(isNaN(p)||p%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var a in ie)if(ie[a].objId===p)break;return ea(a)},Za=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:ie[z].objId,pageNumber:z,pageContext:ie[z]}};g.addPage=function(){return Yo.apply(this,arguments),this},g.setPage=function(){return Qo.apply(this,arguments),vt.call(this,St[z]),this},g.insertPage=function(p){return this.addPage(),this.movePage(z,p),this},g.movePage=function(p,a){var f,w;if(p>a){f=St[p],w=ie[p];for(var P=p;P>a;P--)St[P]=St[P-1],ie[P]=ie[P-1];St[a]=f,ie[a]=w,this.setPage(a)}else if(p<a){f=St[p],w=ie[p];for(var H=p;H<a;H++)St[H]=St[H+1],ie[H]=ie[H+1];St[a]=f,ie[a]=w,this.setPage(a)}return this},g.deletePage=function(){return Jo.apply(this,arguments),this},g.__private__.text=g.text=function(p,a,f,w,P){var H,tt,gt,xt,Ut,Mt,Gt,be,Ne,Ce=(w=w||{}).scope||this;if(typeof p=="number"&&typeof a=="number"&&(typeof f=="string"||Array.isArray(f))){var Ue=f;f=a,a=p,p=Ue}if(arguments[3]instanceof Jt?(E("The transform parameter of text() with a Matrix value"),Ne=P):(gt=arguments[4],xt=arguments[5],ke(Gt=arguments[3])==="object"&&Gt!==null||(typeof gt=="string"&&(xt=gt,gt=null),typeof Gt=="string"&&(xt=Gt,Gt=null),typeof Gt=="number"&&(gt=Gt,Gt=null),w={flags:Gt,angle:gt,align:xt})),isNaN(a)||isNaN(f)||p==null)throw new Error("Invalid arguments passed to jsPDF.text");if(p.length===0)return Ce;var Ke="",Qn=!1,wr=typeof w.lineHeightFactor=="number"?w.lineHeightFactor:Rr,Ai=Ce.internal.scaleFactor;function ol(je){return je=je.split("	").join(Array(w.TabLen||9).join(" ")),on(je,Gt)}function ec(je){for(var Be,tn=je.concat(),gn=[],$i=tn.length;$i--;)typeof(Be=tn.shift())=="string"?gn.push(Be):Array.isArray(je)&&(Be.length===1||Be[1]===void 0&&Be[2]===void 0)?gn.push(Be[0]):gn.push([Be[0],Be[1],Be[2]]);return gn}function nc(je,Be){var tn;if(typeof je=="string")tn=Be(je)[0];else if(Array.isArray(je)){for(var gn,$i,uc=je.concat(),ga=[],hl=uc.length;hl--;)typeof(gn=uc.shift())=="string"?ga.push(Be(gn)[0]):Array.isArray(gn)&&typeof gn[0]=="string"&&($i=Be(gn[0],gn[1],gn[2]),ga.push([$i[0],$i[1],$i[2]]));tn=ga}return tn}var oa=!1,rc=!0;if(typeof p=="string")oa=!0;else if(Array.isArray(p)){var ic=p.concat();tt=[];for(var aa,Cn=ic.length;Cn--;)(typeof(aa=ic.shift())!="string"||Array.isArray(aa)&&typeof aa[0]!="string")&&(rc=!1);oa=rc}if(oa===!1)throw new Error('Type of text must be string or Array. "'+p+'" is not recognized.');typeof p=="string"&&(p=p.match(/[\r?\n]/)?p.split(/\r\n|\r|\n/g):[p]);var ca=Nt/Ce.internal.scaleFactor,la=ca*(wr-1);switch(w.baseline){case"bottom":f-=la;break;case"top":f+=ca-la;break;case"hanging":f+=ca-2*la;break;case"middle":f+=ca/2-la}if((Mt=w.maxWidth||0)>0&&(typeof p=="string"?p=Ce.splitTextToSize(p,Mt):Object.prototype.toString.call(p)==="[object Array]"&&(p=p.reduce(function(je,Be){return je.concat(Ce.splitTextToSize(Be,Mt))},[]))),H={text:p,x:a,y:f,options:w,mutex:{pdfEscape:on,activeFontKey:he,fonts:Te,activeFontSize:Nt}},ge.publish("preProcessText",H),p=H.text,gt=(w=H.options).angle,!(Ne instanceof Jt)&&gt&&typeof gt=="number"){gt*=Math.PI/180,w.rotationDirection===0&&(gt=-gt),M===R.ADVANCED&&(gt=-gt);var ua=Math.cos(gt),sc=Math.sin(gt);Ne=new Jt(ua,sc,-sc,ua,0,0)}else gt&&gt instanceof Jt&&(Ne=gt);M!==R.ADVANCED||Ne||(Ne=Wn),(Ut=w.charSpace||_i)!==void 0&&(Ke+=S(A(Ut))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(be=w.horizontalScale)!==void 0&&(Ke+=S(100*be)+` Tz
`),w.lang;var ar=-1,zu=w.renderingMode!==void 0?w.renderingMode:w.stroke,oc=Ce.internal.getCurrentPageInfo().pageContext;switch(zu){case 0:case!1:case"fill":ar=0;break;case 1:case!0:case"stroke":ar=1;break;case 2:case"fillThenStroke":ar=2;break;case 3:case"invisible":ar=3;break;case 4:case"fillAndAddForClipping":ar=4;break;case 5:case"strokeAndAddPathForClipping":ar=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ar=6;break;case 7:case"addToPathForClipping":ar=7}var al=oc.usedRenderingMode!==void 0?oc.usedRenderingMode:-1;ar!==-1?Ke+=ar+` Tr
`:al!==-1&&(Ke+=`0 Tr
`),ar!==-1&&(oc.usedRenderingMode=ar),xt=w.align||"left";var Or,ha=Nt*wr,cl=Ce.internal.pageSize.getWidth(),ll=Te[he];Ut=w.charSpace||_i,Mt=w.maxWidth||0,Gt=Object.assign({autoencode:!0,noBOM:!0},w.flags);var ws=[],vo=function(je){return Ce.getStringUnitWidth(je,{font:ll,charSpace:Ut,fontSize:Nt,doKerning:!1})*Nt/Ai};if(Object.prototype.toString.call(p)==="[object Array]"){var cr;tt=ec(p),xt!=="left"&&(Or=tt.map(vo));var Xn,_s=0;if(xt==="right"){a-=Or[0],p=[],Cn=tt.length;for(var zi=0;zi<Cn;zi++)zi===0?(Xn=Jn(a),cr=kr(f)):(Xn=A(_s-Or[zi]),cr=-ha),p.push([tt[zi],Xn,cr]),_s=Or[zi]}else if(xt==="center"){a-=Or[0]/2,p=[],Cn=tt.length;for(var Hi=0;Hi<Cn;Hi++)Hi===0?(Xn=Jn(a),cr=kr(f)):(Xn=A((_s-Or[Hi])/2),cr=-ha),p.push([tt[Hi],Xn,cr]),_s=Or[Hi]}else if(xt==="left"){p=[],Cn=tt.length;for(var da=0;da<Cn;da++)p.push(tt[da])}else if(xt==="justify"&&ll.encoding==="Identity-H"){p=[],Cn=tt.length,Mt=Mt!==0?Mt:cl;for(var Wi=0,Ze=0;Ze<Cn;Ze++)if(cr=Ze===0?kr(f):-ha,Xn=Ze===0?Jn(a):Wi,Ze<Cn-1){var ac=A((Mt-Or[Ze])/(tt[Ze].split(" ").length-1)),Zn=tt[Ze].split(" ");p.push([Zn[0]+" ",Xn,cr]),Wi=0;for(var Fr=1;Fr<Zn.length;Fr++){var fa=(vo(Zn[Fr-1]+" "+Zn[Fr])-vo(Zn[Fr]))*Ai+ac;Fr==Zn.length-1?p.push([Zn[Fr],fa,0]):p.push([Zn[Fr]+" ",fa,0]),Wi-=fa}}else p.push([tt[Ze],Xn,cr]);p.push(["",Wi,0])}else{if(xt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(p=[],Cn=tt.length,Mt=Mt!==0?Mt:cl,Ze=0;Ze<Cn;Ze++)cr=Ze===0?kr(f):-ha,Xn=Ze===0?Jn(a):0,Ze<Cn-1?ws.push(S(A((Mt-Or[Ze])/(tt[Ze].split(" ").length-1)))):ws.push(0),p.push([tt[Ze],Xn,cr])}}var ul=typeof w.R2L=="boolean"?w.R2L:Ht;ul===!0&&(p=nc(p,function(je,Be,tn){return[je.split("").reverse().join(""),Be,tn]})),H={text:p,x:a,y:f,options:w,mutex:{pdfEscape:on,activeFontKey:he,fonts:Te,activeFontSize:Nt}},ge.publish("postProcessText",H),p=H.text,Qn=H.mutex.isHex||!1;var cc=Te[he].encoding;cc!=="WinAnsiEncoding"&&cc!=="StandardEncoding"||(p=nc(p,function(je,Be,tn){return[ol(je),Be,tn]})),tt=ec(p),p=[];for(var wo,_o,bs,bo=0,pa=1,Ao=Array.isArray(tt[0])?pa:bo,As="",lc=function(je,Be,tn){var gn="";return tn instanceof Jt?(tn=typeof w.angle=="number"?mr(tn,new Jt(1,0,0,1,je,Be)):mr(new Jt(1,0,0,1,je,Be),tn),M===R.ADVANCED&&(tn=mr(new Jt(1,0,0,-1,0,0),tn)),gn=tn.join(" ")+` Tm
`):gn=S(je)+" "+S(Be)+` Td
`,gn},Mr=0;Mr<tt.length;Mr++){switch(As="",Ao){case pa:bs=(Qn?"<":"(")+tt[Mr][0]+(Qn?">":")"),wo=parseFloat(tt[Mr][1]),_o=parseFloat(tt[Mr][2]);break;case bo:bs=(Qn?"<":"(")+tt[Mr]+(Qn?">":")"),wo=Jn(a),_o=kr(f)}ws!==void 0&&ws[Mr]!==void 0&&(As=ws[Mr]+` Tw
`),Mr===0?p.push(As+lc(wo,_o,Ne)+bs):Ao===bo?p.push(As+bs):Ao===pa&&p.push(As+lc(wo,_o,Ne)+bs)}p=Ao===bo?p.join(` Tj
T* `):p.join(` Tj
`),p+=` Tj
`;var Vr=`BT
/`;return Vr+=he+" "+Nt+` Tf
`,Vr+=S(Nt*wr)+` TL
`,Vr+=wi+`
`,Vr+=Ke,Vr+=p,rt(Vr+="ET"),_[he]=!0,Ce};var lo=g.__private__.clip=g.clip=function(p){return rt(p==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return lo("evenodd")},g.__private__.discardPath=g.discardPath=function(){return rt("n"),this};var Yn=g.__private__.isValidStyle=function(p){var a=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(p)!==-1&&(a=!0),a};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(p){return Yn(p)&&(d=p),this};var uo=g.__private__.getStyle=g.getStyle=function(p){var a=d;switch(p){case"D":case"S":a="S";break;case"F":a="f";break;case"FD":case"DF":a="B";break;case"f":case"f*":case"B":case"B*":a=p}return a},gi=g.close=function(){return rt("h"),this};g.stroke=function(){return rt("S"),this},g.fill=function(p){return Lr("f",p),this},g.fillEvenOdd=function(p){return Lr("f*",p),this},g.fillStroke=function(p){return Lr("B",p),this},g.fillStrokeEvenOdd=function(p){return Lr("B*",p),this};var Lr=function(p,a){ke(a)==="object"?Ve(a,p):rt(p)},fs=function(p){p===null||M===R.ADVANCED&&p===void 0||(p=uo(p),rt(p))};function ho(p,a,f,w,P){var H=new xo(a||this.boundingBox,f||this.xStep,w||this.yStep,this.gState,P||this.matrix);H.stream=this.stream;var tt=p+"$$"+this.cloneIndex+++"$$";return xn(tt,H),H}var Ve=function(p,a){var f=Tr[p.key],w=Ee[f];if(w instanceof Fs)rt("q"),rt(tc(a)),w.gState&&g.setGState(w.gState),rt(p.matrix.toString()+" cm"),rt("/"+f+" sh"),rt("Q");else if(w instanceof xo){var P=new Jt(1,0,0,-1,0,ti());p.matrix&&(P=P.multiply(p.matrix||Wn),f=ho.call(w,p.key,p.boundingBox,p.xStep,p.yStep,P).id),rt("q"),rt("/Pattern cs"),rt("/"+f+" scn"),w.gState&&g.setGState(w.gState),rt(a),rt("Q")}},tc=function(p){switch(p){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},fo=g.moveTo=function(p,a){return rt(S(A(p))+" "+S(W(a))+" m"),this},mi=g.lineTo=function(p,a){return rt(S(A(p))+" "+S(W(a))+" l"),this},Xr=g.curveTo=function(p,a,f,w,P,H){return rt([S(A(p)),S(W(a)),S(A(f)),S(W(w)),S(A(P)),S(W(H)),"c"].join(" ")),this};g.__private__.line=g.line=function(p,a,f,w,P){if(isNaN(p)||isNaN(a)||isNaN(f)||isNaN(w)||!Yn(P))throw new Error("Invalid arguments passed to jsPDF.line");return M===R.COMPAT?this.lines([[f-p,w-a]],p,a,[1,1],P||"S"):this.lines([[f-p,w-a]],p,a,[1,1]).stroke()},g.__private__.lines=g.lines=function(p,a,f,w,P,H){var tt,gt,xt,Ut,Mt,Gt,be,Ne,Ce,Ue,Ke,Qn;if(typeof p=="number"&&(Qn=f,f=a,a=p,p=Qn),w=w||[1,1],H=H||!1,isNaN(a)||isNaN(f)||!Array.isArray(p)||!Array.isArray(w)||!Yn(P)||typeof H!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(fo(a,f),tt=w[0],gt=w[1],Ut=p.length,Ue=a,Ke=f,xt=0;xt<Ut;xt++)(Mt=p[xt]).length===2?(Ue=Mt[0]*tt+Ue,Ke=Mt[1]*gt+Ke,mi(Ue,Ke)):(Gt=Mt[0]*tt+Ue,be=Mt[1]*gt+Ke,Ne=Mt[2]*tt+Ue,Ce=Mt[3]*gt+Ke,Ue=Mt[4]*tt+Ue,Ke=Mt[5]*gt+Ke,Xr(Gt,be,Ne,Ce,Ue,Ke));return H&&gi(),fs(P),this},g.path=function(p){for(var a=0;a<p.length;a++){var f=p[a],w=f.c;switch(f.op){case"m":fo(w[0],w[1]);break;case"l":mi(w[0],w[1]);break;case"c":Xr.apply(this,w);break;case"h":gi()}}return this},g.__private__.rect=g.rect=function(p,a,f,w,P){if(isNaN(p)||isNaN(a)||isNaN(f)||isNaN(w)||!Yn(P))throw new Error("Invalid arguments passed to jsPDF.rect");return M===R.COMPAT&&(w=-w),rt([S(A(p)),S(W(a)),S(A(f)),S(A(w)),"re"].join(" ")),fs(P),this},g.__private__.triangle=g.triangle=function(p,a,f,w,P,H,tt){if(isNaN(p)||isNaN(a)||isNaN(f)||isNaN(w)||isNaN(P)||isNaN(H)||!Yn(tt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[f-p,w-a],[P-f,H-w],[p-P,a-H]],p,a,[1,1],tt,!0),this},g.__private__.roundedRect=g.roundedRect=function(p,a,f,w,P,H,tt){if(isNaN(p)||isNaN(a)||isNaN(f)||isNaN(w)||isNaN(P)||isNaN(H)||!Yn(tt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var gt=4/3*(Math.SQRT2-1);return P=Math.min(P,.5*f),H=Math.min(H,.5*w),this.lines([[f-2*P,0],[P*gt,0,P,H-H*gt,P,H],[0,w-2*H],[0,H*gt,-P*gt,H,-P,H],[2*P-f,0],[-P*gt,0,-P,-H*gt,-P,-H],[0,2*H-w],[0,-H*gt,P*gt,-H,P,-H]],p+P,a,[1,1],tt,!0),this},g.__private__.ellipse=g.ellipse=function(p,a,f,w,P){if(isNaN(p)||isNaN(a)||isNaN(f)||isNaN(w)||!Yn(P))throw new Error("Invalid arguments passed to jsPDF.ellipse");var H=4/3*(Math.SQRT2-1)*f,tt=4/3*(Math.SQRT2-1)*w;return fo(p+f,a),Xr(p+f,a-tt,p+H,a-w,p,a-w),Xr(p-H,a-w,p-f,a-tt,p-f,a),Xr(p-f,a+tt,p-H,a+w,p,a+w),Xr(p+H,a+w,p+f,a+tt,p+f,a),fs(P),this},g.__private__.circle=g.circle=function(p,a,f,w){if(isNaN(p)||isNaN(a)||isNaN(f)||!Yn(w))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(p,a,f,f,w)},g.setFont=function(p,a,f){return f&&(a=Q(a,f)),he=Xo(p,a,{disableWarning:!1}),this};var na=g.__private__.getFont=g.getFont=function(){return Te[Xo.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var p,a,f={};for(p in De)if(De.hasOwnProperty(p))for(a in f[p]=[],De[p])De[p].hasOwnProperty(a)&&f[p].push(a);return f},g.addFont=function(p,a,f,w,P){var H=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&H.indexOf(arguments[3])!==-1?P=arguments[3]:arguments[3]&&H.indexOf(arguments[3])==-1&&(f=Q(f,w)),P=P||"Identity-H",$r.call(this,p,a,f,P)};var Rr,sr=n.lineWidth||.200025,Bi=g.__private__.getLineWidth=g.getLineWidth=function(){return sr},ra=g.__private__.setLineWidth=g.setLineWidth=function(p){return sr=p,rt(S(A(p))+" w"),this};g.__private__.setLineDash=Kt.API.setLineDash=Kt.API.setLineDashPattern=function(p,a){if(p=p||[],a=a||0,isNaN(a)||!Array.isArray(p))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return p=p.map(function(f){return S(A(f))}).join(" "),a=S(A(a)),rt("["+p+"] "+a+" d"),this};var yi=g.__private__.getLineHeight=g.getLineHeight=function(){return Nt*Rr};g.__private__.getLineHeight=g.getLineHeight=function(){return Nt*Rr};var po=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(p){return typeof(p=p||1.15)=="number"&&(Rr=p),this},ps=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return Rr};po(n.lineHeight);var Jn=g.__private__.getHorizontalCoordinate=function(p){return A(p)},kr=g.__private__.getVerticalCoordinate=function(p){return M===R.ADVANCED?p:ie[z].mediaBox.topRightY-ie[z].mediaBox.bottomLeftY-A(p)},gs=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(p){return S(Jn(p))},vi=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(p){return S(kr(p))},or=n.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return rr(or)},g.__private__.setStrokeColor=g.setDrawColor=function(p,a,f,w){return or=$n({ch1:p,ch2:a,ch3:f,ch4:w,pdfColorType:"draw",precision:2}),rt(or),this};var Zr=n.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return rr(Zr)},g.__private__.setFillColor=g.setFillColor=function(p,a,f,w){return Zr=$n({ch1:p,ch2:a,ch3:f,ch4:w,pdfColorType:"fill",precision:2}),rt(Zr),this};var wi=n.textColor||"0 g",ia=g.__private__.getTextColor=g.getTextColor=function(){return rr(wi)};g.__private__.setTextColor=g.setTextColor=function(p,a,f,w){return wi=$n({ch1:p,ch2:a,ch3:f,ch4:w,pdfColorType:"text",precision:3}),this};var _i=n.charSpace,go=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(_i||0)};g.__private__.setCharSpace=g.setCharSpace=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return _i=p,this};var ms=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(p){var a=g.CapJoinStyles[p];if(a===void 0)throw new Error("Line cap style of '"+p+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ms=a,rt(a+" J"),this};var bi=0;g.__private__.setLineJoin=g.setLineJoin=function(p){var a=g.CapJoinStyles[p];if(a===void 0)throw new Error("Line join style of '"+p+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return bi=a,rt(a+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(p){if(p=p||0,isNaN(p))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return rt(S(A(p))+" M"),this},g.GState=Kc,g.setGState=function(p){(p=typeof p=="string"?qe[Pn[p]]:mo(null,p)).equals(Pr)||(rt("/"+p.id+" gs"),Pr=p)};var mo=function(p,a){if(!p||!Pn[p]){var f=!1;for(var w in qe)if(qe.hasOwnProperty(w)&&qe[w].equals(a)){f=!0;break}if(f)a=qe[w];else{var P="GS"+(Object.keys(qe).length+1).toString(10);qe[P]=a,a.id=P}return p&&(Pn[p]=a.id),ge.publish("addGState",a),a}};g.addGState=function(p,a){return mo(p,a),this},g.saveGraphicsState=function(){return rt("q"),_n.push({key:he,size:Nt,color:wi}),this},g.restoreGraphicsState=function(){rt("Q");var p=_n.pop();return he=p.key,Nt=p.size,wi=p.color,Pr=null,this},g.setCurrentTransformationMatrix=function(p){return rt(p.toString()+" cm"),this},g.comment=function(p){return rt("#"+p),this};var qi=function(p,a){var f=p||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(H){isNaN(H)||(f=parseFloat(H))}});var w=a||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return w},set:function(H){isNaN(H)||(w=parseFloat(H))}});var P="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return P},set:function(H){P=H.toString()}}),this},vr=function(p,a,f,w){qi.call(this,p,a),this.type="rect";var P=f||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return P},set:function(tt){isNaN(tt)||(P=parseFloat(tt))}});var H=w||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return H},set:function(tt){isNaN(tt)||(H=parseFloat(tt))}}),this},ys=function(){this.page=de,this.currentPage=z,this.pages=St.slice(0),this.pagesContext=ie.slice(0),this.x=hn,this.y=_e,this.matrix=Tn,this.width=Dr(z),this.height=ti(z),this.outputDestination=kt,this.id="",this.objectNumber=-1};ys.prototype.restore=function(){de=this.page,z=this.currentPage,ie=this.pagesContext,St=this.pages,hn=this.x,_e=this.y,Tn=this.matrix,pn(z,this.width),vs(z,this.height),kt=this.outputDestination};var yo=function(p,a,f,w,P){Nn.push(new ys),de=z=0,St=[],hn=p,_e=a,Tn=P,Kr([f,w])},sa=function(p){if(Nr[p])Nn.pop().restore();else{var a=new ys,f="Xo"+(Object.keys(dn).length+1).toString(10);a.id=f,Nr[p]=f,dn[f]=a,ge.publish("addFormObject",a),Nn.pop().restore()}};for(var Ui in g.beginFormObject=function(p,a,f,w,P){return yo(p,a,f,w,P),this},g.endFormObject=function(p){return sa(p),this},g.doFormObject=function(p,a){var f=dn[Nr[p]];return rt("q"),rt(a.toString()+" cm"),rt("/"+f.id+" Do"),rt("Q"),this},g.getFormObject=function(p){var a=dn[Nr[p]];return{x:a.x,y:a.y,width:a.width,height:a.height,matrix:a.matrix}},g.save=function(p,a){return p=p||"generated.pdf",(a=a||{}).returnPromise=a.returnPromise||!1,a.returnPromise===!1?(So(Vi(Cr()),p),typeof So.unload=="function"&&Zt.setTimeout&&setTimeout(So.unload,911),this):new Promise(function(f,w){try{var P=So(Vi(Cr()),p);typeof So.unload=="function"&&Zt.setTimeout&&setTimeout(So.unload,911),f(P)}catch(H){w(H.message)}})},Kt.API)Kt.API.hasOwnProperty(Ui)&&(Ui==="events"&&Kt.API.events.length?function(p,a){var f,w,P;for(P=a.length-1;P!==-1;P--)f=a[P][0],w=a[P][1],p.subscribe.apply(p,[f].concat(typeof w=="function"?[w]:w))}(ge,Kt.API.events):g[Ui]=Kt.API[Ui]);var Dr=g.getPageWidth=function(p){return(ie[p=p||z].mediaBox.topRightX-ie[p].mediaBox.bottomLeftX)/Ft},pn=g.setPageWidth=function(p,a){ie[p].mediaBox.topRightX=a*Ft+ie[p].mediaBox.bottomLeftX},ti=g.getPageHeight=function(p){return(ie[p=p||z].mediaBox.topRightY-ie[p].mediaBox.bottomLeftY)/Ft},vs=g.setPageHeight=function(p,a){ie[p].mediaBox.topRightY=a*Ft+ie[p].mediaBox.bottomLeftY};return g.internal={pdfEscape:on,getStyle:uo,getFont:na,getFontSize:Rt,getCharSpace:go,getTextColor:ia,getLineHeight:yi,getLineHeightFactor:ps,getLineWidth:Bi,write:ne,getHorizontalCoordinate:Jn,getVerticalCoordinate:kr,getCoordinateString:gs,getVerticalCoordinateString:vi,collections:{},newObject:Je,newAdditionalObject:cs,newObjectDeferred:$e,newObjectDeferredBegin:fn,getFilters:ir,putStream:Gn,events:ge,scaleFactor:Ft,pageSize:{getWidth:function(){return Dr(z)},setWidth:function(p){pn(z,p)},getHeight:function(){return ti(z)},setHeight:function(p){vs(z,p)}},encryptionOptions:m,encryption:An,getEncryptor:Xa,output:ji,getNumberOfPages:Ja,pages:St,out:rt,f2:F,f3:b,getPageInfo:ea,getPageInfoByObjId:Wt,getCurrentPageInfo:Za,getPDFVersion:L,Point:qi,Rectangle:vr,Matrix:Jt,hasHotfix:Qr},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return Dr(z)},set:function(p){pn(z,p)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return ti(z)},set:function(p){vs(z,p)},enumerable:!0,configurable:!0}),co.call(g,Pt),he="F1",Yo(i,e),ge.publish("initialized"),g}Ta.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},Ta.prototype.toHexString=function(n){return n.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ta.prototype.hexToBytes=function(n){for(var t=[],e=0;e<n.length;e+=2)t.push(String.fromCharCode(parseInt(n.substr(e,2),16)));return t.join("")},Ta.prototype.processOwnerPassword=function(n,t){return fd(dd(t).substr(0,5),n)},Ta.prototype.encryptor=function(n,t){var e=dd(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return fd(e,r)}},Kc.prototype.equals=function(n){var t,e="id,objectNumber,equals";if(!n||ke(n)!==ke(this))return!1;var r=0;for(t in this)if(!(e.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!n.hasOwnProperty(t)||this[t]!==n[t])return!1;r++}for(t in n)n.hasOwnProperty(t)&&e.indexOf(t)<0&&r--;return r===0},Kt.API={events:[]},Kt.version="2.5.2";var Xe=Kt.API,mf=1,Wo=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_a=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ae=function(n){return n.toFixed(2)},Rs=function(n){return n.toFixed(5)};Xe.__acroform__={};var pr=function(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n},Ig=function(n){return n*mf},Ii=function(n){var t=new E0,e=Bt.internal.getHeight(n)||0,r=Bt.internal.getWidth(n)||0;return t.BBox=[0,0,Number(ae(r)),Number(ae(e))],t},e3=Xe.__acroform__.setBit=function(n,t){if(n=n||0,t=t||0,isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<t},n3=Xe.__acroform__.clearBit=function(n,t){if(n=n||0,t=t||0,isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<t)},r3=Xe.__acroform__.getBit=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<t?1:0},nn=Xe.__acroform__.getBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return r3(n,t-1)},rn=Xe.__acroform__.setBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return e3(n,t-1)},sn=Xe.__acroform__.clearBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return n3(n,t-1)},i3=Xe.__acroform__.calculateCoordinates=function(n,t){var e=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,i=n[0],s=n[1],o=n[2],l=n[3],u={};return u.lowerLeft_X=e(i)||0,u.lowerLeft_Y=r(s+l)||0,u.upperRight_X=e(i+o)||0,u.upperRight_Y=r(s)||0,[Number(ae(u.lowerLeft_X)),Number(ae(u.lowerLeft_Y)),Number(ae(u.upperRight_X)),Number(ae(u.upperRight_Y))]},s3=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var t=[],e=n._V||n.DV,r=pd(n,e),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(n.scope.__private__.encodeColorString(n.color)),t.push("/"+i+" "+ae(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=Ii(n);return s.scope=n.scope,s.stream=t.join(`
`),s}},pd=function(n,t){var e=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=n.multiline?i.map(function(b){return b.split(`
`)}):i.map(function(b){return[b]});var s=e,o=Bt.internal.getHeight(n)||0;o=o<0?-o:o;var l=Bt.internal.getWidth(n)||0;l=l<0?-l:l;var u=function(b,A,T){if(b+1<i.length){var W=A+" "+i[b+1][0];return Vl(W,n,T).width<=l-4}return!1};s++;t:for(;s>0;){t="",s--;var d,m,v=Vl("3",n,s).height,_=n.multiline?o-s:(o-v)/2,g=_+=2,N=0,L=0,O=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+Vl(t,n,s=12).width+", FieldWidth:"+l+`
`;break}for(var C="",R=0,M=0;M<i.length;M++)if(i.hasOwnProperty(M)){var q=!1;if(i[M].length!==1&&O!==i[M].length-1){if((v+2)*(R+2)+2>o)continue t;C+=i[M][O],q=!0,L=M,M--}else{C=(C+=i[M][O]+" ").substr(C.length-1)==" "?C.substr(0,C.length-1):C;var K=parseInt(M),Q=u(K,C,s),S=M>=i.length-1;if(Q&&!S){C+=" ",O=0;continue}if(Q||S){if(S)L=K;else if(n.multiline&&(v+2)*(R+2)+2>o)continue t}else{if(!n.multiline||(v+2)*(R+2)+2>o)continue t;L=K}}for(var E="",x=N;x<=L;x++){var F=i[x];if(n.multiline){if(x===L){E+=F[O]+" ",O=(O+1)%F.length;continue}if(x===N){E+=F[F.length-1]+" ";continue}}E+=F[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,m=Vl(E,n,s).width,n.textAlign){case"right":d=l-m-2;break;case"center":d=(l-m)/2;break;case"left":default:d=2}t+=ae(d)+" "+ae(g)+` Td
`,t+="("+Wo(E)+`) Tj
`,t+=-ae(d)+` 0 Td
`,g=-(s+2),m=0,N=q?L:L+1,R++,C=""}break}return r.text=t,r.fontSize=s,r},Vl=function(n,t,e){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(e),charSpace:0})*parseFloat(e);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(e),charSpace:0})*parseFloat(e)*1.5,width:i}},o3={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},a3=function(n,t){var e={type:"reference",object:n};t.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===e.type&&r.object===e.object})===void 0&&t.internal.getPageInfo(n.page).pageContext.annotations.push(e)},c3=function(n,t){for(var e in n)if(n.hasOwnProperty(e)){var r=e,i=n[e];t.internal.newObjectDeferredBegin(i.objId,!0),ke(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete n[r]}},l3=function(n,t){if(t.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(li.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(o3)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");mf=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new I0,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&a3(s,e)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(e){if(e.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(e){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var l=r[o],u=[],d=l.Rect;if(l.Rect&&(l.Rect=i3(l.Rect,i)),i.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Bt.createDefaultAppearanceStream(l),ke(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(u=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var m=s3(l);u.push({key:"AP",value:"<</N "+m+">>"}),i.internal.acroformPlugin.xForms.push(m)}if(l.appearanceStreamContent){var v="";for(var _ in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(_)){var g=l.appearanceStreamContent[_];if(v+="/"+_+" ",v+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var o in g)if(g.hasOwnProperty(o)){var N=g[o];typeof N=="function"&&(N=N.call(i,l)),v+="/"+o+" "+N+" ",i.internal.acroformPlugin.xForms.indexOf(N)>=0||i.internal.acroformPlugin.xForms.push(N)}}else typeof(N=g)=="function"&&(N=N.call(i,l)),v+="/"+o+" "+N,i.internal.acroformPlugin.xForms.indexOf(N)>=0||i.internal.acroformPlugin.xForms.push(N);v+=">>"}u.push({key:"AP",value:`<<
`+v+">>"})}i.internal.putStream({additionalKeyValues:u,objectId:l.objId}),i.internal.out("endobj")}s&&c3(i.internal.acroformPlugin.xForms,i)})(e,n)}),n.internal.acroformPlugin.isInitialized=!0}},A0=Xe.__acroform__.arrayToPdfArray=function(n,t,e){var r=function(o){return o};if(Array.isArray(n)){for(var i="[",s=0;s<n.length;s++)switch(s!==0&&(i+=" "),ke(n[s])){case"boolean":case"number":case"object":i+=n[s].toString();break;case"string":n[s].substr(0,1)!=="/"?(t!==void 0&&e&&(r=e.internal.getEncryptor(t)),i+="("+Wo(r(n[s].toString()))+")"):i+=n[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Th=function(n,t,e){var r=function(i){return i};return t!==void 0&&e&&(r=e.internal.getEncryptor(t)),(n=n||"").toString(),n="("+Wo(r(n))+")"},Ti=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ti.prototype.toString=function(){return this.objId+" 0 R"},Ti.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Ti.prototype.getKeyValueListForStream=function(){var n=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var e in t)if(Object.getOwnPropertyDescriptor(this,t[e]).configurable===!1){var r=t[e],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:A0(i,this.objId,this.scope)}):i instanceof Ti?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var E0=function(){Ti.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){n=e.trim()},get:function(){return n||null}})};pr(E0,Ti);var I0=function(){Ti.call(this);var n,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var e=function(r){return r};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+Wo(e(n))+")"}},set:function(e){n=e}})};pr(I0,Ti);var li=function n(){Ti.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute F supplied.');t=C}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!nn(t,3)},set:function(C){C?this.F=rn(t,3):this.F=sn(t,3)}});var e=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return e},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute Ff supplied.');e=C}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(C){r=C!==void 0?C:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(C){r[0]=C}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(C){r[1]=C}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(C){r[2]=C}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(C){r[3]=C}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(C){switch(C){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=C;break;default:throw new Error('Invalid value "'+C+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof vu)return;s="FieldObject"+n.FieldNum++}var C=function(R){return R};return this.scope&&(C=this.scope.internal.getEncryptor(this.objId)),"("+Wo(C(s))+")"},set:function(C){s=C.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(C){s=C}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(C){o=C}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(C){l=C}});var u=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return u},set:function(C){u=C}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/mf:d},set:function(C){d=C}});var m="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return m},set:function(C){m=C}});var v="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!v||this instanceof vu||this instanceof Ws))return Th(v,this.objId,this.scope)},set:function(C){C=C.toString(),v=C}});var _=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(_)return this instanceof mn?_:Th(_,this.objId,this.scope)},set:function(C){C=C.toString(),_=this instanceof mn?C:C.substr(0,1)==="("?_a(C.substr(1,C.length-2)):_a(C)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof mn?_a(_.substr(1,_.length-1)):_},set:function(C){C=C.toString(),_=this instanceof mn?"/"+C:C}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(C){this.V=C}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof mn?g:Th(g,this.objId,this.scope)},set:function(C){C=C.toString(),g=this instanceof mn?C:C.substr(0,1)==="("?_a(C.substr(1,C.length-2)):_a(C)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof mn?_a(g.substr(1,g.length-1)):g},set:function(C){C=C.toString(),g=this instanceof mn?"/"+C:C}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var N,L=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return L},set:function(C){C=!!C,L=C}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(N)return N},set:function(C){N=C}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,1)},set:function(C){C?this.Ff=rn(this.Ff,1):this.Ff=sn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,2)},set:function(C){C?this.Ff=rn(this.Ff,2):this.Ff=sn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,3)},set:function(C){C?this.Ff=rn(this.Ff,3):this.Ff=sn(this.Ff,3)}});var O=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(O!==null)return O},set:function(C){if([0,1,2].indexOf(C)===-1)throw new Error('Invalid value "'+C+'" for attribute Q supplied.');O=C}}),Object.defineProperty(this,"textAlign",{get:function(){var C;switch(O){case 0:default:C="left";break;case 1:C="center";break;case 2:C="right"}return C},configurable:!0,enumerable:!0,set:function(C){switch(C){case"right":case 2:O=2;break;case"center":case 1:O=1;break;case"left":case 0:default:O=0}}})};pr(li,Ti);var ko=function(){li.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){n=e}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return A0(t,this.objId,this.scope)},set:function(e){var r,i;i=[],typeof(r=e)=="string"&&(i=function(s,o,l){l||(l=1);for(var u,d=[];u=o.exec(s);)d.push(u[l]);return d}(r,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,r){for(r=r||!1,e=(e=e||"").toString();t.indexOf(e)!==-1&&(t.splice(t.indexOf(e),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,18)},set:function(e){e?this.Ff=rn(this.Ff,18):this.Ff=sn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,19)},set:function(e){this.combo===!0&&(e?this.Ff=rn(this.Ff,19):this.Ff=sn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,20)},set:function(e){e?(this.Ff=rn(this.Ff,20),t.sort()):this.Ff=sn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,22)},set:function(e){e?this.Ff=rn(this.Ff,22):this.Ff=sn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,23)},set:function(e){e?this.Ff=rn(this.Ff,23):this.Ff=sn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,27)},set:function(e){e?this.Ff=rn(this.Ff,27):this.Ff=sn(this.Ff,27)}}),this.hasAppearanceStream=!1};pr(ko,li);var Do=function(){ko.call(this),this.fontName="helvetica",this.combo=!1};pr(Do,ko);var Oo=function(){Do.call(this),this.combo=!0};pr(Oo,Do);var kc=function(){Oo.call(this),this.edit=!0};pr(kc,Oo);var mn=function(){li.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,15)},set:function(e){e?this.Ff=rn(this.Ff,15):this.Ff=sn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,16)},set:function(e){e?this.Ff=rn(this.Ff,16):this.Ff=sn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,17)},set:function(e){e?this.Ff=rn(this.Ff,17):this.Ff=sn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,26)},set:function(e){e?this.Ff=rn(this.Ff,26):this.Ff=sn(this.Ff,26)}});var n,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(s){return s};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,i=[];for(r in i.push("<<"),t)i.push("/"+r+" ("+Wo(e(t[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(e){ke(e)==="object"&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){typeof e=="string"&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}})};pr(mn,li);var Dc=function(){mn.call(this),this.pushButton=!0};pr(Dc,mn);var Fo=function(){mn.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t!==void 0?t:[]}})};pr(Fo,mn);var vu=function(){var n,t;li.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var e,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(l){return l};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+Wo(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){ke(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(i){e="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Bt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};pr(vu,li),Fo.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var e=this.Kids[t];e.appearanceStreamContent=n.createAppearanceStream(e.optionName),e.caption=n.getCA()}},Fo.prototype.createOption=function(n){var t=new vu;return t.Parent=this,t.optionName=n,this.Kids.push(t),u3.call(this.scope,t),t};var Oc=function(){mn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Bt.CheckBox.createAppearanceStream()};pr(Oc,mn);var Ws=function(){li.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,13)},set:function(t){t?this.Ff=rn(this.Ff,13):this.Ff=sn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,21)},set:function(t){t?this.Ff=rn(this.Ff,21):this.Ff=sn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,23)},set:function(t){t?this.Ff=rn(this.Ff,23):this.Ff=sn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,24)},set:function(t){t?this.Ff=rn(this.Ff,24):this.Ff=sn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,25)},set:function(t){t?this.Ff=rn(this.Ff,25):this.Ff=sn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,26)},set:function(t){t?this.Ff=rn(this.Ff,26):this.Ff=sn(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){Number.isInteger(t)&&(n=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};pr(Ws,li);var Fc=function(){Ws.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,14)},set:function(n){n?this.Ff=rn(this.Ff,14):this.Ff=sn(this.Ff,14)}}),this.password=!0};pr(Fc,Ws);var Bt={CheckBox:{createAppearanceStream:function(){return{N:{On:Bt.CheckBox.YesNormal},D:{On:Bt.CheckBox.YesPushDown,Off:Bt.CheckBox.OffPushDown}}},YesPushDown:function(n){var t=Ii(n);t.scope=n.scope;var e=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),s=pd(n,n.caption);return e.push("0.749023 g"),e.push("0 0 "+ae(Bt.internal.getWidth(n))+" "+ae(Bt.internal.getHeight(n))+" re"),e.push("f"),e.push("BMC"),e.push("q"),e.push("0 0 1 rg"),e.push("/"+r+" "+ae(s.fontSize)+" Tf "+i),e.push("BT"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC"),t.stream=e.join(`
`),t},YesNormal:function(n){var t=Ii(n);t.scope=n.scope;var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],s=Bt.internal.getHeight(n),o=Bt.internal.getWidth(n),l=pd(n,n.caption);return i.push("1 g"),i.push("0 0 "+ae(o)+" "+ae(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+ae(o-1)+" "+ae(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+e+" "+ae(l.fontSize)+" Tf "+r),i.push(l.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(n){var t=Ii(n);t.scope=n.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+ae(Bt.internal.getWidth(n))+" "+ae(Bt.internal.getHeight(n))+" re"),e.push("f"),t.stream=e.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(n){var t={D:{Off:Bt.RadioButton.Circle.OffPushDown},N:{}};return t.N[n]=Bt.RadioButton.Circle.YesNormal,t.D[n]=Bt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(n){var t=Ii(n);t.scope=n.scope;var e=[],r=Bt.internal.getWidth(n)<=Bt.internal.getHeight(n)?Bt.internal.getWidth(n)/4:Bt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Bt.internal.Bezier_C,s=Number((r*i).toFixed(5));return e.push("q"),e.push("1 0 0 1 "+Rs(Bt.internal.getWidth(n)/2)+" "+Rs(Bt.internal.getHeight(n)/2)+" cm"),e.push(r+" 0 m"),e.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),e.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),e.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),e.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(n){var t=Ii(n);t.scope=n.scope;var e=[],r=Bt.internal.getWidth(n)<=Bt.internal.getHeight(n)?Bt.internal.getWidth(n)/4:Bt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Bt.internal.Bezier_C).toFixed(5)),o=Number((r*Bt.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+Rs(Bt.internal.getWidth(n)/2)+" "+Rs(Bt.internal.getHeight(n)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),e.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),e.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),e.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),e.push("f"),e.push("Q"),e.push("0 g"),e.push("q"),e.push("1 0 0 1 "+Rs(Bt.internal.getWidth(n)/2)+" "+Rs(Bt.internal.getHeight(n)/2)+" cm"),e.push(r+" 0 m"),e.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),e.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),e.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),e.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},OffPushDown:function(n){var t=Ii(n);t.scope=n.scope;var e=[],r=Bt.internal.getWidth(n)<=Bt.internal.getHeight(n)?Bt.internal.getWidth(n)/4:Bt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Bt.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+Rs(Bt.internal.getWidth(n)/2)+" "+Rs(Bt.internal.getHeight(n)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),e.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),e.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),e.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t}},Cross:{createAppearanceStream:function(n){var t={D:{Off:Bt.RadioButton.Cross.OffPushDown},N:{}};return t.N[n]=Bt.RadioButton.Cross.YesNormal,t.D[n]=Bt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(n){var t=Ii(n);t.scope=n.scope;var e=[],r=Bt.internal.calculateCross(n);return e.push("q"),e.push("1 1 "+ae(Bt.internal.getWidth(n)-2)+" "+ae(Bt.internal.getHeight(n)-2)+" re"),e.push("W"),e.push("n"),e.push(ae(r.x1.x)+" "+ae(r.x1.y)+" m"),e.push(ae(r.x2.x)+" "+ae(r.x2.y)+" l"),e.push(ae(r.x4.x)+" "+ae(r.x4.y)+" m"),e.push(ae(r.x3.x)+" "+ae(r.x3.y)+" l"),e.push("s"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(n){var t=Ii(n);t.scope=n.scope;var e=Bt.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+ae(Bt.internal.getWidth(n))+" "+ae(Bt.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+ae(Bt.internal.getWidth(n)-2)+" "+ae(Bt.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(ae(e.x1.x)+" "+ae(e.x1.y)+" m"),r.push(ae(e.x2.x)+" "+ae(e.x2.y)+" l"),r.push(ae(e.x4.x)+" "+ae(e.x4.y)+" m"),r.push(ae(e.x3.x)+" "+ae(e.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(n){var t=Ii(n);t.scope=n.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+ae(Bt.internal.getWidth(n))+" "+ae(Bt.internal.getHeight(n))+" re"),e.push("f"),t.stream=e.join(`
`),t}}},createDefaultAppearanceStream:function(n){var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,e=n.scope.__private__.encodeColorString(n.color);return"/"+t+" "+n.fontSize+" Tf "+e}};Bt.internal={Bezier_C:.551915024494,calculateCross:function(n){var t=Bt.internal.getWidth(n),e=Bt.internal.getHeight(n),r=Math.min(t,e);return{x1:{x:(t-r)/2,y:(e-r)/2+r},x2:{x:(t-r)/2+r,y:(e-r)/2},x3:{x:(t-r)/2,y:(e-r)/2},x4:{x:(t-r)/2+r,y:(e-r)/2+r}}}},Bt.internal.getWidth=function(n){var t=0;return ke(n)==="object"&&(t=Ig(n.Rect[2])),t},Bt.internal.getHeight=function(n){var t=0;return ke(n)==="object"&&(t=Ig(n.Rect[3])),t};var u3=Xe.addField=function(n){if(l3(this,n),!(n instanceof li))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=n).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Xe.AcroFormChoiceField=ko,Xe.AcroFormListBox=Do,Xe.AcroFormComboBox=Oo,Xe.AcroFormEditBox=kc,Xe.AcroFormButton=mn,Xe.AcroFormPushButton=Dc,Xe.AcroFormRadioButton=Fo,Xe.AcroFormCheckBox=Oc,Xe.AcroFormTextField=Ws,Xe.AcroFormPasswordField=Fc,Xe.AcroFormAppearance=Bt,Xe.AcroForm={ChoiceField:ko,ListBox:Do,ComboBox:Oo,EditBox:kc,Button:mn,PushButton:Dc,RadioButton:Fo,CheckBox:Oc,TextField:Ws,PasswordField:Fc,Appearance:Bt},Kt.AcroForm={ChoiceField:ko,ListBox:Do,ComboBox:Oo,EditBox:kc,Button:mn,PushButton:Dc,RadioButton:Fo,CheckBox:Oc,TextField:Ws,PasswordField:Fc,Appearance:Bt};var h3=Kt.AcroForm;function S0(n){return n.reduce(function(t,e,r){return t[e]=r,t},{})}(function(n){n.__addimage__={};var t="UNKNOWN",e={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(b,A){var T,W,ct,J,Y,et=t;if((A=A||t)==="RGBA"||b.data!==void 0&&b.data instanceof Uint8ClampedArray&&"height"in b&&"width"in b)return"RGBA";if(Q(b))for(Y in e)for(ct=e[Y],T=0;T<ct.length;T+=1){for(J=!0,W=0;W<ct[T].length;W+=1)if(ct[T][W]!==void 0&&ct[T][W]!==b[W]){J=!1;break}if(J===!0){et=Y;break}}else for(Y in e)for(ct=e[Y],T=0;T<ct.length;T+=1){for(J=!0,W=0;W<ct[T].length;W+=1)if(ct[T][W]!==void 0&&ct[T][W]!==b.charCodeAt(W)){J=!1;break}if(J===!0){et=Y;break}}return et===t&&A!==t&&(et=A),et},i=function b(A){for(var T=this.internal.write,W=this.internal.putStream,ct=(0,this.internal.getFilters)();ct.indexOf("FlateEncode")!==-1;)ct.splice(ct.indexOf("FlateEncode"),1);A.objectId=this.internal.newObject();var J=[];if(J.push({key:"Type",value:"/XObject"}),J.push({key:"Subtype",value:"/Image"}),J.push({key:"Width",value:A.width}),J.push({key:"Height",value:A.height}),A.colorSpace===O.INDEXED?J.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(A.palette.length/3-1)+" "+("sMask"in A&&A.sMask!==void 0?A.objectId+2:A.objectId+1)+" 0 R]"}):(J.push({key:"ColorSpace",value:"/"+A.colorSpace}),A.colorSpace===O.DEVICE_CMYK&&J.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),J.push({key:"BitsPerComponent",value:A.bitsPerComponent}),"decodeParameters"in A&&A.decodeParameters!==void 0&&J.push({key:"DecodeParms",value:"<<"+A.decodeParameters+">>"}),"transparency"in A&&Array.isArray(A.transparency)){for(var Y="",et=0,Z=A.transparency.length;et<Z;et++)Y+=A.transparency[et]+" "+A.transparency[et]+" ";J.push({key:"Mask",value:"["+Y+"]"})}A.sMask!==void 0&&J.push({key:"SMask",value:A.objectId+1+" 0 R"});var at=A.filter!==void 0?["/"+A.filter]:void 0;if(W({data:A.data,additionalKeyValues:J,alreadyAppliedFilters:at,objectId:A.objectId}),T("endobj"),"sMask"in A&&A.sMask!==void 0){var mt="/Predictor "+A.predictor+" /Colors 1 /BitsPerComponent "+A.bitsPerComponent+" /Columns "+A.width,k={width:A.width,height:A.height,colorSpace:"DeviceGray",bitsPerComponent:A.bitsPerComponent,decodeParameters:mt,data:A.sMask};"filter"in A&&(k.filter=A.filter),b.call(this,k)}if(A.colorSpace===O.INDEXED){var z=this.internal.newObject();W({data:E(new Uint8Array(A.palette)),objectId:z}),T("endobj")}},s=function(){var b=this.internal.collections.addImage_images;for(var A in b)i.call(this,b[A])},o=function(){var b,A=this.internal.collections.addImage_images,T=this.internal.write;for(var W in A)T("/I"+(b=A[W]).index,b.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},u=function(){var b=this.internal.collections.addImage_images;return l.call(this),b},d=function(){return Object.keys(this.internal.collections.addImage_images).length},m=function(b){return typeof n["process"+b.toUpperCase()]=="function"},v=function(b){return ke(b)==="object"&&b.nodeType===1},_=function(b,A){if(b.nodeName==="IMG"&&b.hasAttribute("src")){var T=""+b.getAttribute("src");if(T.indexOf("data:image/")===0)return Rc(unescape(T).split("base64,").pop());var W=n.loadFile(T,!0);if(W!==void 0)return W}if(b.nodeName==="CANVAS"){if(b.width===0||b.height===0)throw new Error("Given canvas must have data. Canvas width: "+b.width+", height: "+b.height);var ct;switch(A){case"PNG":ct="image/png";break;case"WEBP":ct="image/webp";break;case"JPEG":case"JPG":default:ct="image/jpeg"}return Rc(b.toDataURL(ct,1).split("base64,").pop())}},g=function(b){var A=this.internal.collections.addImage_images;if(A){for(var T in A)if(b===A[T].alias)return A[T]}},N=function(b,A,T){return b||A||(b=-96,A=-96),b<0&&(b=-1*T.width*72/b/this.internal.scaleFactor),A<0&&(A=-1*T.height*72/A/this.internal.scaleFactor),b===0&&(b=A*T.width/T.height),A===0&&(A=b*T.height/T.width),[b,A]},L=function(b,A,T,W,ct,J){var Y=N.call(this,T,W,ct),et=this.internal.getCoordinateString,Z=this.internal.getVerticalCoordinateString,at=u.call(this);if(T=Y[0],W=Y[1],at[ct.index]=ct,J){J*=Math.PI/180;var mt=Math.cos(J),k=Math.sin(J),z=function(X){return X.toFixed(4)},$=[z(mt),z(k),z(-1*k),z(mt),0,0,"cm"]}this.internal.write("q"),J?(this.internal.write([1,"0","0",1,et(b),Z(A+W),"cm"].join(" ")),this.internal.write($.join(" ")),this.internal.write([et(T),"0","0",et(W),"0","0","cm"].join(" "))):this.internal.write([et(T),"0","0",et(W),et(b),Z(A+W),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ct.index+" Do"),this.internal.write("Q")},O=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var C=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},R=n.__addimage__.sHashCode=function(b){var A,T,W=0;if(typeof b=="string")for(T=b.length,A=0;A<T;A++)W=(W<<5)-W+b.charCodeAt(A),W|=0;else if(Q(b))for(T=b.byteLength/2,A=0;A<T;A++)W=(W<<5)-W+b[A],W|=0;return W},M=n.__addimage__.validateStringAsBase64=function(b){(b=b||"").toString().trim();var A=!0;return b.length===0&&(A=!1),b.length%4!=0&&(A=!1),/^[A-Za-z0-9+/]+$/.test(b.substr(0,b.length-2))===!1&&(A=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(b.substr(-2))===!1&&(A=!1),A},q=n.__addimage__.extractImageFromDataUrl=function(b){var A=(b=b||"").split("base64,"),T=null;if(A.length===2){var W=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(A[0]);Array.isArray(W)&&(T={mimeType:W[1],charset:W[2],data:A[1]})}return T},K=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(b){return K()&&b instanceof ArrayBuffer};var Q=n.__addimage__.isArrayBufferView=function(b){return K()&&typeof Uint32Array<"u"&&(b instanceof Int8Array||b instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&b instanceof Uint8ClampedArray||b instanceof Int16Array||b instanceof Uint16Array||b instanceof Int32Array||b instanceof Uint32Array||b instanceof Float32Array||b instanceof Float64Array)},S=n.__addimage__.binaryStringToUint8Array=function(b){for(var A=b.length,T=new Uint8Array(A),W=0;W<A;W++)T[W]=b.charCodeAt(W);return T},E=n.__addimage__.arrayBufferToBinaryString=function(b){for(var A="",T=Q(b)?b:new Uint8Array(b),W=0;W<T.length;W+=8192)A+=String.fromCharCode.apply(null,T.subarray(W,W+8192));return A};n.addImage=function(){var b,A,T,W,ct,J,Y,et,Z;if(typeof arguments[1]=="number"?(A=t,T=arguments[1],W=arguments[2],ct=arguments[3],J=arguments[4],Y=arguments[5],et=arguments[6],Z=arguments[7]):(A=arguments[1],T=arguments[2],W=arguments[3],ct=arguments[4],J=arguments[5],Y=arguments[6],et=arguments[7],Z=arguments[8]),ke(b=arguments[0])==="object"&&!v(b)&&"imageData"in b){var at=b;b=at.imageData,A=at.format||A||t,T=at.x||T||0,W=at.y||W||0,ct=at.w||at.width||ct,J=at.h||at.height||J,Y=at.alias||Y,et=at.compression||et,Z=at.rotation||at.angle||Z}var mt=this.internal.getFilters();if(et===void 0&&mt.indexOf("FlateEncode")!==-1&&(et="SLOW"),isNaN(T)||isNaN(W))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var k=x.call(this,b,A,Y,et);return L.call(this,T,W,ct,J,k,Z),this};var x=function(b,A,T,W){var ct,J,Y;if(typeof b=="string"&&r(b)===t){b=unescape(b);var et=F(b,!1);(et!==""||(et=n.loadFile(b,!0))!==void 0)&&(b=et)}if(v(b)&&(b=_(b,A)),A=r(b,A),!m(A))throw new Error("addImage does not support files of type '"+A+"', please ensure that a plugin for '"+A+"' support is added.");if(((Y=T)==null||Y.length===0)&&(T=function(Z){return typeof Z=="string"||Q(Z)?R(Z):Q(Z.data)?R(Z.data):null}(b)),(ct=g.call(this,T))||(K()&&(b instanceof Uint8Array||A==="RGBA"||(J=b,b=S(b))),ct=this["process"+A.toUpperCase()](b,d.call(this),T,function(Z){return Z&&typeof Z=="string"&&(Z=Z.toUpperCase()),Z in n.image_compression?Z:C.NONE}(W),J)),!ct)throw new Error("An unknown error occurred whilst processing the image.");return ct},F=n.__addimage__.convertBase64ToBinaryString=function(b,A){var T;A=typeof A!="boolean"||A;var W,ct="";if(typeof b=="string"){W=(T=q(b))!==null?T.data:b;try{ct=Rc(W)}catch(J){if(A)throw M(W)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+J.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ct};n.getImageProperties=function(b){var A,T,W="";if(v(b)&&(b=_(b)),typeof b=="string"&&r(b)===t&&((W=F(b,!1))===""&&(W=n.loadFile(b)||""),b=W),T=r(b),!m(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(!K()||b instanceof Uint8Array||(b=S(b)),!(A=this["process"+T.toUpperCase()](b)))throw new Error("An unknown error occurred whilst processing the image");return A.fileType=T,A}})(Kt.API),function(n){var t=function(e){if(e!==void 0&&e!="")return!0};Kt.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(e){for(var r,i,s,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,u=this.internal.getPageInfoByObjId(e.objId),d=e.pageContext.annotations,m=!1,v=0;v<d.length&&!m;v++)switch((r=d[v]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(m=!0);break;case"reference":case"text":case"freetext":m=!0}if(m!=0){this.internal.write("/Annots [");for(var _=0;_<d.length;_++){r=d[_];var g=this.internal.pdfEscape,N=this.internal.getEncryptor(e.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var L=this.internal.newAdditionalObject(),O=this.internal.newAdditionalObject(),C=this.internal.getEncryptor(L.objId),R=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+l(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y)+"] ")+"/Contents ("+g(C(r.contents))+")",s+=" /Popup "+O.objId+" 0 R",s+=" /P "+u.objId+" 0 R",s+=" /T ("+g(C(R))+") >>",L.content=s;var M=L.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+l(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+l(r.bounds.y)+"] ")+" /Parent "+M,r.open&&(s+=" /Open true"),s+=" >>",O.content=s,this.internal.write(L.objId,"0 R",O.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+l(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y+r.bounds.h)+"] ";var q=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+g(N(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+q+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var K=this.annotations._nameMap[r.options.name];r.options.pageNumber=K.page,r.options.top=K.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+g(N(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var Q=l(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+Q+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(e){var r=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":r.pageContext.annotations.push(e)}},n.link=function(e,r,i,s,o){var l=this.internal.getCurrentPageInfo(),u=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:u(e),y:d(r),w:u(e+i),h:d(r+s)},options:o,type:"link"})},n.textWithLink=function(e,r,i,s){var o,l,u=this.getTextWidth(e),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var m=this.splitTextToSize(e,l).length;o=Math.ceil(d*m)}else l=u,o=d;return this.text(e,r,i,s),i+=.2*d,s.align==="center"&&(r-=u/2),s.align==="right"&&(r-=u),this.link(r,i-d,l,o,s),u},n.getTextWidth=function(e){var r=this.internal.getFontSize();return this.getStringUnitWidth(e)*r/this.internal.scaleFactor}}(Kt.API),function(n){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},e={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(L){return t[L.charCodeAt(0)]!==void 0},o=n.__arabicParser__.isArabicLetter=function(L){return typeof L=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(L)},l=n.__arabicParser__.isArabicEndLetter=function(L){return o(L)&&s(L)&&t[L.charCodeAt(0)].length<=2},u=n.__arabicParser__.isArabicAlfLetter=function(L){return o(L)&&i.indexOf(L.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(L){return o(L)&&s(L)&&t[L.charCodeAt(0)].length>=1};var d=n.__arabicParser__.arabicLetterHasFinalForm=function(L){return o(L)&&s(L)&&t[L.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(L){return o(L)&&s(L)&&t[L.charCodeAt(0)].length>=3};var m=n.__arabicParser__.arabicLetterHasMedialForm=function(L){return o(L)&&s(L)&&t[L.charCodeAt(0)].length==4},v=n.__arabicParser__.resolveLigatures=function(L){var O=0,C=e,R="",M=0;for(O=0;O<L.length;O+=1)C[L.charCodeAt(O)]!==void 0?(M++,typeof(C=C[L.charCodeAt(O)])=="number"&&(R+=String.fromCharCode(C),C=e,M=0),O===L.length-1&&(C=e,R+=L.charAt(O-(M-1)),O-=M-1,M=0)):(C=e,R+=L.charAt(O-M),O-=M,M=0);return R};n.__arabicParser__.isArabicDiacritic=function(L){return L!==void 0&&r[L.charCodeAt(0)]!==void 0};var _=n.__arabicParser__.getCorrectForm=function(L,O,C){return o(L)?s(L)===!1?-1:!d(L)||!o(O)&&!o(C)||!o(C)&&l(O)||l(L)&&!o(O)||l(L)&&u(O)||l(L)&&l(O)?0:m(L)&&o(O)&&!l(O)&&o(C)&&d(C)?3:l(L)||!o(C)?1:2:-1},g=function(L){var O=0,C=0,R=0,M="",q="",K="",Q=(L=L||"").split("\\s+"),S=[];for(O=0;O<Q.length;O+=1){for(S.push(""),C=0;C<Q[O].length;C+=1)M=Q[O][C],q=Q[O][C-1],K=Q[O][C+1],o(M)?(R=_(M,q,K),S[O]+=R!==-1?String.fromCharCode(t[M.charCodeAt(0)][R]):M):S[O]+=M;S[O]=v(S[O])}return S.join(" ")},N=n.__arabicParser__.processArabic=n.processArabic=function(){var L,O=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,C=[];if(Array.isArray(O)){var R=0;for(C=[],R=0;R<O.length;R+=1)Array.isArray(O[R])?C.push([g(O[R][0]),O[R][1],O[R][2]]):C.push([g(O[R])]);L=C}else L=g(O);return typeof arguments[0]=="string"?L:(arguments[0].text=L,arguments[0])};n.events.push(["preProcessText",N])}(Kt.API),Kt.API.autoPrint=function(n){var t;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(n){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(l){e=l}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(l){r=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(l){i=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,r){var i;if((e=e||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Kt.API),function(n){var t={left:0,top:0,bottom:0,right:0},e=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var u=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return u},set:function(L){u=L}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(L){d=L}});var m=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return m},set:function(L){m=L}});var v=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return v},set:function(L){v=L}});var _=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return _},set:function(L){_=L}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(L){g=L}});var N=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return N},set:function(L){N=L}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(u){return r.call(this),this.internal.__cell__.headerFunction=typeof u=="function"?u:void 0,this},n.getTextDimensions=function(u,d){r.call(this);var m=(d=d||{}).fontSize||this.getFontSize(),v=d.font||this.getFont(),_=d.scaleFactor||this.internal.scaleFactor,g=0,N=0,L=0,O=this;if(!Array.isArray(u)&&typeof u!="string"){if(typeof u!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");u=String(u)}var C=d.maxWidth;C>0?typeof u=="string"?u=this.splitTextToSize(u,C):Object.prototype.toString.call(u)==="[object Array]"&&(u=u.reduce(function(M,q){return M.concat(O.splitTextToSize(q,C))},[])):u=Array.isArray(u)?u:[u];for(var R=0;R<u.length;R++)g<(L=this.getStringUnitWidth(u[R],{font:v})*m)&&(g=L);return g!==0&&(N=u.length),{w:g/=_,h:Math.max((N*m*this.getLineHeightFactor()-m*(this.getLineHeightFactor()-1))/_,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var u=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(u.left,u.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=n.cell=function(){var u;u=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var d=this.internal.__cell__.lastCell,m=this.internal.__cell__.padding,v=this.internal.__cell__.margins||t,_=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===u.lineNumber?(u.x=(d.x||0)+(d.width||0),u.y=d.y||0):d.y+d.height+u.height+v.bottom>this.getPageHeight()?(this.cellAddPage(),u.y=v.top,g&&_&&(this.printHeaderRow(u.lineNumber,!0),u.y+=_[0].height)):u.y=d.y+d.height||u.y),u.text[0]!==void 0&&(this.rect(u.x,u.y,u.width,u.height,e===!0?"FD":void 0),u.align==="right"?this.text(u.text,u.x+u.width-m,u.y+m,{align:"right",baseline:"top"}):u.align==="center"?this.text(u.text,u.x+u.width/2,u.y+m,{align:"center",baseline:"top",maxWidth:u.width-m-m}):this.text(u.text,u.x+m,u.y+m,{align:"left",baseline:"top",maxWidth:u.width-m-m})),this.internal.__cell__.lastCell=u,this};n.table=function(u,d,m,v,_){if(r.call(this),!m)throw new Error("No data for PDF table.");var g,N,L,O,C=[],R=[],M=[],q={},K={},Q=[],S=[],E=(_=_||{}).autoSize||!1,x=_.printHeaders!==!1,F=_.css&&_.css["font-size"]!==void 0?16*_.css["font-size"]:_.fontSize||12,b=_.margins||Object.assign({width:this.getPageWidth()},t),A=typeof _.padding=="number"?_.padding:3,T=_.headerBackgroundColor||"#c8c8c8",W=_.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=x,this.internal.__cell__.margins=b,this.internal.__cell__.table_font_size=F,this.internal.__cell__.padding=A,this.internal.__cell__.headerBackgroundColor=T,this.internal.__cell__.headerTextColor=W,this.setFontSize(F),v==null)R=C=Object.keys(m[0]),M=C.map(function(){return"left"});else if(Array.isArray(v)&&ke(v[0])==="object")for(C=v.map(function(at){return at.name}),R=v.map(function(at){return at.prompt||at.name||""}),M=v.map(function(at){return at.align||"left"}),g=0;g<v.length;g+=1)K[v[g].name]=v[g].width*(19.049976/25.4);else Array.isArray(v)&&typeof v[0]=="string"&&(R=C=v,M=C.map(function(){return"left"}));if(E||Array.isArray(v)&&typeof v[0]=="string")for(g=0;g<C.length;g+=1){for(q[O=C[g]]=m.map(function(at){return at[O]}),this.setFont(void 0,"bold"),Q.push(this.getTextDimensions(R[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),N=q[O],this.setFont(void 0,"normal"),L=0;L<N.length;L+=1)Q.push(this.getTextDimensions(N[L],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);K[O]=Math.max.apply(null,Q)+A+A,Q=[]}if(x){var ct={};for(g=0;g<C.length;g+=1)ct[C[g]]={},ct[C[g]].text=R[g],ct[C[g]].align=M[g];var J=l.call(this,ct,K);S=C.map(function(at){return new s(u,d,K[at],J,ct[at].text,void 0,ct[at].align)}),this.setTableHeaderRow(S),this.printHeaderRow(1,!1)}var Y=v.reduce(function(at,mt){return at[mt.name]=mt.align,at},{});for(g=0;g<m.length;g+=1){"rowStart"in _&&_.rowStart instanceof Function&&_.rowStart({row:g,data:m[g]},this);var et=l.call(this,m[g],K);for(L=0;L<C.length;L+=1){var Z=m[g][C[L]];"cellStart"in _&&_.cellStart instanceof Function&&_.cellStart({row:g,col:L,data:Z},this),o.call(this,new s(u,d,K[C[L]],et,Z,g+2,Y[C[L]]))}}return this.internal.__cell__.table_x=u,this.internal.__cell__.table_y=d,this};var l=function(u,d){var m=this.internal.__cell__.padding,v=this.internal.__cell__.table_font_size,_=this.internal.scaleFactor;return Object.keys(u).map(function(g){var N=u[g];return this.splitTextToSize(N.hasOwnProperty("text")?N.text:N,d[g]-m-m)},this).map(function(g){return this.getLineHeightFactor()*g.length*v/_+m+m},this).reduce(function(g,N){return Math.max(g,N)},0)};n.setTableHeaderRow=function(u){r.call(this),this.internal.__cell__.tableHeaderRow=u},n.printHeaderRow=function(u,d){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var m;if(e=!0,typeof this.internal.__cell__.headerFunction=="function"){var v=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(v[0],v[1],v[2],v[3],void 0,-1)}this.setFont(void 0,"bold");for(var _=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){m=this.internal.__cell__.tableHeaderRow[g].clone(),d&&(m.y=this.internal.__cell__.margins.top||0,_.push(m)),m.lineNumber=u;var N=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,m),this.setTextColor(N)}_.length>0&&this.setTableHeaderRow(_),this.setFont(void 0,"normal"),e=!1}}(Kt.API);var T0={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},P0=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],gd=S0(P0),N0=[100,200,300,400,500,600,700,800,900],d3=S0(N0);function md(n){var t=n.family.replace(/"|'/g,"").toLowerCase(),e=function(s){return T0[s=s||"normal"]?s:"normal"}(n.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(n.weight),i=function(s){return typeof gd[s=s||"normal"]=="number"?s:"normal"}(n.stretch);return{family:t,style:e,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:t,style:[i,e,r].join(" ")}}}function Sg(n,t,e,r){var i;for(i=e;i>=0&&i<t.length;i+=r)if(n[t[i]])return n[t[i]];for(i=e;i>=0&&i<t.length;i-=r)if(n[t[i]])return n[t[i]]}var f3={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Tg={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Pg(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function p3(n,t,e){for(var r=(e=e||{}).defaultFontFamily||"times",i=Object.assign({},f3,e.genericFontFamilies||{}),s=null,o=null,l=0;l<t.length;++l)if(i[(s=md(t[l])).family]&&(s.family=i[s.family]),n.hasOwnProperty(s.family)){o=n[s.family];break}if(!(o=o||n[r]))throw new Error("Could not find a font-family for the rule '"+Pg(s)+"' and default family '"+r+"'.");if(o=function(u,d){if(d[u])return d[u];var m=gd[u],v=m<=gd.normal?-1:1,_=Sg(d,P0,m,v);if(!_)throw new Error("Could not find a matching font-stretch value for "+u);return _}(s.stretch,o),o=function(u,d){if(d[u])return d[u];for(var m=T0[u],v=0;v<m.length;++v)if(d[m[v]])return d[m[v]];throw new Error("Could not find a matching font-style for "+u)}(s.style,o),!(o=function(u,d){if(d[u])return d[u];if(u===400&&d[500])return d[500];if(u===500&&d[400])return d[400];var m=d3[u],v=Sg(d,N0,m,u<400?-1:1);if(!v)throw new Error("Could not find a matching font-weight for value "+u);return v}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+Pg(s)+"'.");return o}function Ng(n){return n.trimLeft()}function g3(n,t){for(var e=0;e<n.length;){if(n.charAt(e)===t)return[n.substring(0,e),n.substring(e+1)];e+=1}return null}function m3(n){var t=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],n.substring(t[0].length)]}var jl,xg,Cg,Ph=["times"];(function(n){var t,e,r,i,s,o,l,u,d,m=function(k){return k=k||{},this.isStrokeTransparent=k.isStrokeTransparent||!1,this.strokeOpacity=k.strokeOpacity||1,this.strokeStyle=k.strokeStyle||"#000000",this.fillStyle=k.fillStyle||"#000000",this.isFillTransparent=k.isFillTransparent||!1,this.fillOpacity=k.fillOpacity||1,this.font=k.font||"10px sans-serif",this.textBaseline=k.textBaseline||"alphabetic",this.textAlign=k.textAlign||"left",this.lineWidth=k.lineWidth||1,this.lineJoin=k.lineJoin||"miter",this.lineCap=k.lineCap||"butt",this.path=k.path||[],this.transform=k.transform!==void 0?k.transform.clone():new u,this.globalCompositeOperation=k.globalCompositeOperation||"normal",this.globalAlpha=k.globalAlpha||1,this.clip_path=k.clip_path||[],this.currentPoint=k.currentPoint||new o,this.miterLimit=k.miterLimit||10,this.lastPoint=k.lastPoint||new o,this.lineDashOffset=k.lineDashOffset||0,this.lineDash=k.lineDash||[],this.margin=k.margin||[0,0,0,0],this.prevPageLastElemOffset=k.prevPageLastElemOffset||0,this.ignoreClearRect=typeof k.ignoreClearRect!="boolean"||k.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new v(this),t=this.internal.f2,e=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,u=this.internal.Matrix,d=new m}]);var v=function(k){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var z=k;Object.defineProperty(this,"pdf",{get:function(){return z}});var $=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return $},set:function(vt){$=!!vt}});var X=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return X},set:function(vt){X=!!vt}});var nt=0;Object.defineProperty(this,"posX",{get:function(){return nt},set:function(vt){isNaN(vt)||(nt=vt)}});var ut=0;Object.defineProperty(this,"posY",{get:function(){return ut},set:function(vt){isNaN(vt)||(ut=vt)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(vt){var rt;typeof vt=="number"?rt=[vt,vt,vt,vt]:((rt=new Array(4))[0]=vt[0],rt[1]=vt.length>=2?vt[1]:rt[0],rt[2]=vt.length>=3?vt[2]:rt[0],rt[3]=vt.length>=4?vt[3]:rt[1]),d.margin=rt}});var ht=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ht},set:function(vt){ht=vt}});var pt=0;Object.defineProperty(this,"lastBreak",{get:function(){return pt},set:function(vt){pt=vt}});var Tt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Tt},set:function(vt){Tt=vt}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(vt){vt instanceof m&&(d=vt)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(vt){d.path=vt}});var St=[];Object.defineProperty(this,"ctxStack",{get:function(){return St},set:function(vt){St=vt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(vt){var rt;rt=_(vt),this.ctx.fillStyle=rt.style,this.ctx.isFillTransparent=rt.a===0,this.ctx.fillOpacity=rt.a,this.pdf.setFillColor(rt.r,rt.g,rt.b,{a:rt.a}),this.pdf.setTextColor(rt.r,rt.g,rt.b,{a:rt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(vt){var rt=_(vt);this.ctx.strokeStyle=rt.style,this.ctx.isStrokeTransparent=rt.a===0,this.ctx.strokeOpacity=rt.a,rt.a===0?this.pdf.setDrawColor(255,255,255):(rt.a,this.pdf.setDrawColor(rt.r,rt.g,rt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(vt){["butt","round","square"].indexOf(vt)!==-1&&(this.ctx.lineCap=vt,this.pdf.setLineCap(vt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(vt){isNaN(vt)||(this.ctx.lineWidth=vt,this.pdf.setLineWidth(vt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(vt){["bevel","round","miter"].indexOf(vt)!==-1&&(this.ctx.lineJoin=vt,this.pdf.setLineJoin(vt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(vt){isNaN(vt)||(this.ctx.miterLimit=vt,this.pdf.setMiterLimit(vt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(vt){this.ctx.textBaseline=vt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(vt){["right","end","center","left","start"].indexOf(vt)!==-1&&(this.ctx.textAlign=vt)}});var Lt=null;function kt(vt,rt){if(Lt===null){var ne=function(qt){var Pt=[];return Object.keys(qt).forEach(function(Nt){qt[Nt].forEach(function(Ct){var Rt=null;switch(Ct){case"bold":Rt={family:Nt,weight:"bold"};break;case"italic":Rt={family:Nt,style:"italic"};break;case"bolditalic":Rt={family:Nt,weight:"bold",style:"italic"};break;case"":case"normal":Rt={family:Nt}}Rt!==null&&(Rt.ref={name:Nt,style:Ct},Pt.push(Rt))})}),Pt}(vt.getFontList());Lt=function(qt){for(var Pt={},Nt=0;Nt<qt.length;++Nt){var Ct=md(qt[Nt]),Rt=Ct.family,Ht=Ct.stretch,re=Ct.style,le=Ct.weight;Pt[Rt]=Pt[Rt]||{},Pt[Rt][Ht]=Pt[Rt][Ht]||{},Pt[Rt][Ht][re]=Pt[Rt][Ht][re]||{},Pt[Rt][Ht][re][le]=Ct}return Pt}(ne.concat(rt))}return Lt}var $t=null;Object.defineProperty(this,"fontFaces",{get:function(){return $t},set:function(vt){Lt=null,$t=vt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(vt){var rt;if(this.ctx.font=vt,(rt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(vt))!==null){var ne=rt[1],qt=(rt[2],rt[3]),Pt=rt[4],Nt=(rt[5],rt[6]),Ct=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Pt)[2];Pt=Math.floor(Ct==="px"?parseFloat(Pt)*this.pdf.internal.scaleFactor:Ct==="em"?parseFloat(Pt)*this.pdf.getFontSize():parseFloat(Pt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Pt);var Rt=function(Xt){var he,Ft,hn=[],_e=Xt.trim();if(_e==="")return Ph;if(_e in Tg)return[Tg[_e]];for(;_e!=="";){switch(Ft=null,he=(_e=Ng(_e)).charAt(0)){case'"':case"'":Ft=g3(_e.substring(1),he);break;default:Ft=m3(_e)}if(Ft===null||(hn.push(Ft[0]),(_e=Ng(Ft[1]))!==""&&_e.charAt(0)!==","))return Ph;_e=_e.replace(/^,/,"")}return hn}(Nt);if(this.fontFaces){var Ht=p3(kt(this.pdf,this.fontFaces),Rt.map(function(Xt){return{family:Xt,stretch:"normal",weight:qt,style:ne}}));this.pdf.setFont(Ht.ref.name,Ht.ref.style)}else{var re="";(qt==="bold"||parseInt(qt,10)>=700||ne==="bold")&&(re="bold"),ne==="italic"&&(re+="italic"),re.length===0&&(re="normal");for(var le="",oe={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},pe=0;pe<Rt.length;pe++){if(this.pdf.internal.getFont(Rt[pe],re,{noFallback:!0,disableWarning:!0})!==void 0){le=Rt[pe];break}if(re==="bolditalic"&&this.pdf.internal.getFont(Rt[pe],"bold",{noFallback:!0,disableWarning:!0})!==void 0)le=Rt[pe],re="bold";else if(this.pdf.internal.getFont(Rt[pe],"normal",{noFallback:!0,disableWarning:!0})!==void 0){le=Rt[pe],re="normal";break}}if(le===""){for(var Se=0;Se<Rt.length;Se++)if(oe[Rt[Se]]){le=oe[Rt[Se]];break}}le=le===""?"Times":le,this.pdf.setFont(le,re)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(vt){this.ctx.globalCompositeOperation=vt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(vt){this.ctx.globalAlpha=vt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(vt){this.ctx.lineDashOffset=vt,mt.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(vt){this.ctx.lineDash=vt,mt.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(vt){this.ctx.ignoreClearRect=!!vt}})};v.prototype.setLineDash=function(k){this.lineDash=k},v.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},v.prototype.fill=function(){q.call(this,"fill",!1)},v.prototype.stroke=function(){q.call(this,"stroke",!1)},v.prototype.beginPath=function(){this.path=[{type:"begin"}]},v.prototype.moveTo=function(k,z){if(isNaN(k)||isNaN(z))throw Me.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var $=this.ctx.transform.applyToPoint(new o(k,z));this.path.push({type:"mt",x:$.x,y:$.y}),this.ctx.lastPoint=new o(k,z)},v.prototype.closePath=function(){var k=new o(0,0),z=0;for(z=this.path.length-1;z!==-1;z--)if(this.path[z].type==="begin"&&ke(this.path[z+1])==="object"&&typeof this.path[z+1].x=="number"){k=new o(this.path[z+1].x,this.path[z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(k.x,k.y)},v.prototype.lineTo=function(k,z){if(isNaN(k)||isNaN(z))throw Me.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var $=this.ctx.transform.applyToPoint(new o(k,z));this.path.push({type:"lt",x:$.x,y:$.y}),this.ctx.lastPoint=new o($.x,$.y)},v.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),q.call(this,null,!0)},v.prototype.quadraticCurveTo=function(k,z,$,X){if(isNaN($)||isNaN(X)||isNaN(k)||isNaN(z))throw Me.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var nt=this.ctx.transform.applyToPoint(new o($,X)),ut=this.ctx.transform.applyToPoint(new o(k,z));this.path.push({type:"qct",x1:ut.x,y1:ut.y,x:nt.x,y:nt.y}),this.ctx.lastPoint=new o(nt.x,nt.y)},v.prototype.bezierCurveTo=function(k,z,$,X,nt,ut){if(isNaN(nt)||isNaN(ut)||isNaN(k)||isNaN(z)||isNaN($)||isNaN(X))throw Me.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ht=this.ctx.transform.applyToPoint(new o(nt,ut)),pt=this.ctx.transform.applyToPoint(new o(k,z)),Tt=this.ctx.transform.applyToPoint(new o($,X));this.path.push({type:"bct",x1:pt.x,y1:pt.y,x2:Tt.x,y2:Tt.y,x:ht.x,y:ht.y}),this.ctx.lastPoint=new o(ht.x,ht.y)},v.prototype.arc=function(k,z,$,X,nt,ut){if(isNaN(k)||isNaN(z)||isNaN($)||isNaN(X)||isNaN(nt))throw Me.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ut=!!ut,!this.ctx.transform.isIdentity){var ht=this.ctx.transform.applyToPoint(new o(k,z));k=ht.x,z=ht.y;var pt=this.ctx.transform.applyToPoint(new o(0,$)),Tt=this.ctx.transform.applyToPoint(new o(0,0));$=Math.sqrt(Math.pow(pt.x-Tt.x,2)+Math.pow(pt.y-Tt.y,2))}Math.abs(nt-X)>=2*Math.PI&&(X=0,nt=2*Math.PI),this.path.push({type:"arc",x:k,y:z,radius:$,startAngle:X,endAngle:nt,counterclockwise:ut})},v.prototype.arcTo=function(k,z,$,X,nt){throw new Error("arcTo not implemented.")},v.prototype.rect=function(k,z,$,X){if(isNaN(k)||isNaN(z)||isNaN($)||isNaN(X))throw Me.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(k,z),this.lineTo(k+$,z),this.lineTo(k+$,z+X),this.lineTo(k,z+X),this.lineTo(k,z),this.lineTo(k+$,z),this.lineTo(k,z)},v.prototype.fillRect=function(k,z,$,X){if(isNaN(k)||isNaN(z)||isNaN($)||isNaN(X))throw Me.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var nt={};this.lineCap!=="butt"&&(nt.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(nt.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(k,z,$,X),this.fill(),nt.hasOwnProperty("lineCap")&&(this.lineCap=nt.lineCap),nt.hasOwnProperty("lineJoin")&&(this.lineJoin=nt.lineJoin)}},v.prototype.strokeRect=function(k,z,$,X){if(isNaN(k)||isNaN(z)||isNaN($)||isNaN(X))throw Me.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");N.call(this)||(this.beginPath(),this.rect(k,z,$,X),this.stroke())},v.prototype.clearRect=function(k,z,$,X){if(isNaN(k)||isNaN(z)||isNaN($)||isNaN(X))throw Me.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(k,z,$,X))},v.prototype.save=function(k){k=typeof k!="boolean"||k;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,$=0;$<this.pdf.internal.getNumberOfPages();$++)this.pdf.setPage($+1),this.pdf.internal.out("q");if(this.pdf.setPage(z),k){this.ctx.fontSize=this.pdf.internal.getFontSize();var X=new m(this.ctx);this.ctxStack.push(this.ctx),this.ctx=X}},v.prototype.restore=function(k){k=typeof k!="boolean"||k;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,$=0;$<this.pdf.internal.getNumberOfPages();$++)this.pdf.setPage($+1),this.pdf.internal.out("Q");this.pdf.setPage(z),k&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},v.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var _=function(k){var z,$,X,nt;if(k.isCanvasGradient===!0&&(k=k.getColor()),!k)return{r:0,g:0,b:0,a:0,style:k};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(k))z=0,$=0,X=0,nt=0;else{var ut=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(k);if(ut!==null)z=parseInt(ut[1]),$=parseInt(ut[2]),X=parseInt(ut[3]),nt=1;else if((ut=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(k))!==null)z=parseInt(ut[1]),$=parseInt(ut[2]),X=parseInt(ut[3]),nt=parseFloat(ut[4]);else{if(nt=1,typeof k=="string"&&k.charAt(0)!=="#"){var ht=new w0(k);k=ht.ok?ht.toHex():"#000000"}k.length===4?(z=k.substring(1,2),z+=z,$=k.substring(2,3),$+=$,X=k.substring(3,4),X+=X):(z=k.substring(1,3),$=k.substring(3,5),X=k.substring(5,7)),z=parseInt(z,16),$=parseInt($,16),X=parseInt(X,16)}}return{r:z,g:$,b:X,a:nt,style:k}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},N=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};v.prototype.fillText=function(k,z,$,X){if(isNaN(z)||isNaN($)||typeof k!="string")throw Me.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(X=isNaN(X)?void 0:X,!g.call(this)){var nt=et(this.ctx.transform.rotation),ut=this.ctx.transform.scaleX;A.call(this,{text:k,x:z,y:$,scale:ut,angle:nt,align:this.textAlign,maxWidth:X})}},v.prototype.strokeText=function(k,z,$,X){if(isNaN(z)||isNaN($)||typeof k!="string")throw Me.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!N.call(this)){X=isNaN(X)?void 0:X;var nt=et(this.ctx.transform.rotation),ut=this.ctx.transform.scaleX;A.call(this,{text:k,x:z,y:$,scale:ut,renderingMode:"stroke",angle:nt,align:this.textAlign,maxWidth:X})}},v.prototype.measureText=function(k){if(typeof k!="string")throw Me.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var z=this.pdf,$=this.pdf.internal.scaleFactor,X=z.internal.getFontSize(),nt=z.getStringUnitWidth(k)*X/z.internal.scaleFactor,ut=function(ht){var pt=(ht=ht||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return pt}}),this};return new ut({width:nt*=Math.round(96*$/72*1e4)/1e4})},v.prototype.scale=function(k,z){if(isNaN(k)||isNaN(z))throw Me.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var $=new u(k,0,0,z,0,0);this.ctx.transform=this.ctx.transform.multiply($)},v.prototype.rotate=function(k){if(isNaN(k))throw Me.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var z=new u(Math.cos(k),Math.sin(k),-Math.sin(k),Math.cos(k),0,0);this.ctx.transform=this.ctx.transform.multiply(z)},v.prototype.translate=function(k,z){if(isNaN(k)||isNaN(z))throw Me.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var $=new u(1,0,0,1,k,z);this.ctx.transform=this.ctx.transform.multiply($)},v.prototype.transform=function(k,z,$,X,nt,ut){if(isNaN(k)||isNaN(z)||isNaN($)||isNaN(X)||isNaN(nt)||isNaN(ut))throw Me.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ht=new u(k,z,$,X,nt,ut);this.ctx.transform=this.ctx.transform.multiply(ht)},v.prototype.setTransform=function(k,z,$,X,nt,ut){k=isNaN(k)?1:k,z=isNaN(z)?0:z,$=isNaN($)?0:$,X=isNaN(X)?1:X,nt=isNaN(nt)?0:nt,ut=isNaN(ut)?0:ut,this.ctx.transform=new u(k,z,$,X,nt,ut)};var L=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};v.prototype.drawImage=function(k,z,$,X,nt,ut,ht,pt,Tt){var St=this.pdf.getImageProperties(k),Lt=1,kt=1,$t=1,vt=1;X!==void 0&&pt!==void 0&&($t=pt/X,vt=Tt/nt,Lt=St.width/X*pt/X,kt=St.height/nt*Tt/nt),ut===void 0&&(ut=z,ht=$,z=0,$=0),X!==void 0&&pt===void 0&&(pt=X,Tt=nt),X===void 0&&pt===void 0&&(pt=St.width,Tt=St.height);for(var rt,ne=this.ctx.transform.decompose(),qt=et(ne.rotate.shx),Pt=new u,Nt=(Pt=(Pt=(Pt=Pt.multiply(ne.translate)).multiply(ne.skew)).multiply(ne.scale)).applyToRectangle(new l(ut-z*$t,ht-$*vt,X*Lt,nt*kt)),Ct=O.call(this,Nt),Rt=[],Ht=0;Ht<Ct.length;Ht+=1)Rt.indexOf(Ct[Ht])===-1&&Rt.push(Ct[Ht]);if(M(Rt),this.autoPaging)for(var re=Rt[0],le=Rt[Rt.length-1],oe=re;oe<le+1;oe++){this.pdf.setPage(oe);var pe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Se=oe===1?this.posY+this.margin[0]:this.margin[0],Xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],he=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ft=oe===1?0:Xt+(oe-2)*he;if(this.ctx.clip_path.length!==0){var hn=this.path;rt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(rt,this.posX+this.margin[3],-Ft+Se+this.ctx.prevPageLastElemOffset),K.call(this,"fill",!0),this.path=hn}var _e=JSON.parse(JSON.stringify(Nt));_e=R([_e],this.posX+this.margin[3],-Ft+Se+this.ctx.prevPageLastElemOffset)[0];var Tn=(oe>re||oe<le)&&L.call(this);Tn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pe,he,null).clip().discardPath()),this.pdf.addImage(k,"JPEG",_e.x,_e.y,_e.w,_e.h,null,null,qt),Tn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(k,"JPEG",Nt.x,Nt.y,Nt.w,Nt.h,null,null,qt)};var O=function(k,z,$){var X=[];z=z||this.pdf.internal.pageSize.width,$=$||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var nt=this.posY+this.ctx.prevPageLastElemOffset;switch(k.type){default:case"mt":case"lt":X.push(Math.floor((k.y+nt)/$)+1);break;case"arc":X.push(Math.floor((k.y+nt-k.radius)/$)+1),X.push(Math.floor((k.y+nt+k.radius)/$)+1);break;case"qct":var ut=Z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x,k.y);X.push(Math.floor((ut.y+nt)/$)+1),X.push(Math.floor((ut.y+ut.h+nt)/$)+1);break;case"bct":var ht=at(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x2,k.y2,k.x,k.y);X.push(Math.floor((ht.y+nt)/$)+1),X.push(Math.floor((ht.y+ht.h+nt)/$)+1);break;case"rect":X.push(Math.floor((k.y+nt)/$)+1),X.push(Math.floor((k.y+k.h+nt)/$)+1)}for(var pt=0;pt<X.length;pt+=1)for(;this.pdf.internal.getNumberOfPages()<X[pt];)C.call(this);return X},C=function(){var k=this.fillStyle,z=this.strokeStyle,$=this.font,X=this.lineCap,nt=this.lineWidth,ut=this.lineJoin;this.pdf.addPage(),this.fillStyle=k,this.strokeStyle=z,this.font=$,this.lineCap=X,this.lineWidth=nt,this.lineJoin=ut},R=function(k,z,$){for(var X=0;X<k.length;X++)switch(k[X].type){case"bct":k[X].x2+=z,k[X].y2+=$;case"qct":k[X].x1+=z,k[X].y1+=$;case"mt":case"lt":case"arc":default:k[X].x+=z,k[X].y+=$}return k},M=function(k){return k.sort(function(z,$){return z-$})},q=function(k,z){for(var $,X,nt=this.fillStyle,ut=this.strokeStyle,ht=this.lineCap,pt=this.lineWidth,Tt=Math.abs(pt*this.ctx.transform.scaleX),St=this.lineJoin,Lt=JSON.parse(JSON.stringify(this.path)),kt=JSON.parse(JSON.stringify(this.path)),$t=[],vt=0;vt<kt.length;vt++)if(kt[vt].x!==void 0)for(var rt=O.call(this,kt[vt]),ne=0;ne<rt.length;ne+=1)$t.indexOf(rt[ne])===-1&&$t.push(rt[ne]);for(var qt=0;qt<$t.length;qt++)for(;this.pdf.internal.getNumberOfPages()<$t[qt];)C.call(this);if(M($t),this.autoPaging)for(var Pt=$t[0],Nt=$t[$t.length-1],Ct=Pt;Ct<Nt+1;Ct++){this.pdf.setPage(Ct),this.fillStyle=nt,this.strokeStyle=ut,this.lineCap=ht,this.lineWidth=Tt,this.lineJoin=St;var Rt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ht=Ct===1?this.posY+this.margin[0]:this.margin[0],re=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],le=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],oe=Ct===1?0:re+(Ct-2)*le;if(this.ctx.clip_path.length!==0){var pe=this.path;$=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R($,this.posX+this.margin[3],-oe+Ht+this.ctx.prevPageLastElemOffset),K.call(this,k,!0),this.path=pe}if(X=JSON.parse(JSON.stringify(Lt)),this.path=R(X,this.posX+this.margin[3],-oe+Ht+this.ctx.prevPageLastElemOffset),z===!1||Ct===0){var Se=(Ct>Pt||Ct<Nt)&&L.call(this);Se&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Rt,le,null).clip().discardPath()),K.call(this,k,z),Se&&this.pdf.restoreGraphicsState()}this.lineWidth=pt}else this.lineWidth=Tt,K.call(this,k,z),this.lineWidth=pt;this.path=Lt},K=function(k,z){if((k!=="stroke"||z||!N.call(this))&&(k==="stroke"||z||!g.call(this))){for(var $,X,nt=[],ut=this.path,ht=0;ht<ut.length;ht++){var pt=ut[ht];switch(pt.type){case"begin":nt.push({begin:!0});break;case"close":nt.push({close:!0});break;case"mt":nt.push({start:pt,deltas:[],abs:[]});break;case"lt":var Tt=nt.length;if(ut[ht-1]&&!isNaN(ut[ht-1].x)&&($=[pt.x-ut[ht-1].x,pt.y-ut[ht-1].y],Tt>0)){for(;Tt>=0;Tt--)if(nt[Tt-1].close!==!0&&nt[Tt-1].begin!==!0){nt[Tt-1].deltas.push($),nt[Tt-1].abs.push(pt);break}}break;case"bct":$=[pt.x1-ut[ht-1].x,pt.y1-ut[ht-1].y,pt.x2-ut[ht-1].x,pt.y2-ut[ht-1].y,pt.x-ut[ht-1].x,pt.y-ut[ht-1].y],nt[nt.length-1].deltas.push($);break;case"qct":var St=ut[ht-1].x+2/3*(pt.x1-ut[ht-1].x),Lt=ut[ht-1].y+2/3*(pt.y1-ut[ht-1].y),kt=pt.x+2/3*(pt.x1-pt.x),$t=pt.y+2/3*(pt.y1-pt.y),vt=pt.x,rt=pt.y;$=[St-ut[ht-1].x,Lt-ut[ht-1].y,kt-ut[ht-1].x,$t-ut[ht-1].y,vt-ut[ht-1].x,rt-ut[ht-1].y],nt[nt.length-1].deltas.push($);break;case"arc":nt.push({deltas:[],abs:[],arc:!0}),Array.isArray(nt[nt.length-1].abs)&&nt[nt.length-1].abs.push(pt)}}X=z?null:k==="stroke"?"stroke":"fill";for(var ne=!1,qt=0;qt<nt.length;qt++)if(nt[qt].arc)for(var Pt=nt[qt].abs,Nt=0;Nt<Pt.length;Nt++){var Ct=Pt[Nt];Ct.type==="arc"?E.call(this,Ct.x,Ct.y,Ct.radius,Ct.startAngle,Ct.endAngle,Ct.counterclockwise,void 0,z,!ne):T.call(this,Ct.x,Ct.y),ne=!0}else if(nt[qt].close===!0)this.pdf.internal.out("h"),ne=!1;else if(nt[qt].begin!==!0){var Rt=nt[qt].start.x,Ht=nt[qt].start.y;W.call(this,nt[qt].deltas,Rt,Ht),ne=!0}X&&x.call(this,X),z&&F.call(this)}},Q=function(k){var z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,$=z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return k-$;case"top":return k+z-$;case"hanging":return k+z-2*$;case"middle":return k+z/2-$;case"ideographic":return k;case"alphabetic":default:return k}},S=function(k){return k+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};v.prototype.createLinearGradient=function(){var k=function(){};return k.colorStops=[],k.addColorStop=function(z,$){this.colorStops.push([z,$])},k.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},k.isCanvasGradient=!0,k},v.prototype.createPattern=function(){return this.createLinearGradient()},v.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(k,z,$,X,nt,ut,ht,pt,Tt){for(var St=J.call(this,$,X,nt,ut),Lt=0;Lt<St.length;Lt++){var kt=St[Lt];Lt===0&&(Tt?b.call(this,kt.x1+k,kt.y1+z):T.call(this,kt.x1+k,kt.y1+z)),ct.call(this,k,z,kt.x2,kt.y2,kt.x3,kt.y3,kt.x4,kt.y4)}pt?F.call(this):x.call(this,ht)},x=function(k){switch(k){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},F=function(){this.pdf.clip(),this.pdf.discardPath()},b=function(k,z){this.pdf.internal.out(e(k)+" "+r(z)+" m")},A=function(k){var z;switch(k.align){case"right":case"end":z="right";break;case"center":z="center";break;case"left":case"start":default:z="left"}var $=this.pdf.getTextDimensions(k.text),X=Q.call(this,k.y),nt=S.call(this,X)-$.h,ut=this.ctx.transform.applyToPoint(new o(k.x,X)),ht=this.ctx.transform.decompose(),pt=new u;pt=(pt=(pt=pt.multiply(ht.translate)).multiply(ht.skew)).multiply(ht.scale);for(var Tt,St,Lt,kt=this.ctx.transform.applyToRectangle(new l(k.x,X,$.w,$.h)),$t=pt.applyToRectangle(new l(k.x,nt,$.w,$.h)),vt=O.call(this,$t),rt=[],ne=0;ne<vt.length;ne+=1)rt.indexOf(vt[ne])===-1&&rt.push(vt[ne]);if(M(rt),this.autoPaging)for(var qt=rt[0],Pt=rt[rt.length-1],Nt=qt;Nt<Pt+1;Nt++){this.pdf.setPage(Nt);var Ct=Nt===1?this.posY+this.margin[0]:this.margin[0],Rt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ht=this.pdf.internal.pageSize.height-this.margin[2],re=Ht-this.margin[0],le=this.pdf.internal.pageSize.width-this.margin[1],oe=le-this.margin[3],pe=Nt===1?0:Rt+(Nt-2)*re;if(this.ctx.clip_path.length!==0){var Se=this.path;Tt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(Tt,this.posX+this.margin[3],-1*pe+Ct),K.call(this,"fill",!0),this.path=Se}var Xt=R([JSON.parse(JSON.stringify($t))],this.posX+this.margin[3],-pe+Ct+this.ctx.prevPageLastElemOffset)[0];k.scale>=.01&&(St=this.pdf.internal.getFontSize(),this.pdf.setFontSize(St*k.scale),Lt=this.lineWidth,this.lineWidth=Lt*k.scale);var he=this.autoPaging!=="text";if(he||Xt.y+Xt.h<=Ht){if(he||Xt.y>=Ct&&Xt.x<=le){var Ft=he?k.text:this.pdf.splitTextToSize(k.text,k.maxWidth||le-Xt.x)[0],hn=R([JSON.parse(JSON.stringify(kt))],this.posX+this.margin[3],-pe+Ct+this.ctx.prevPageLastElemOffset)[0],_e=he&&(Nt>qt||Nt<Pt)&&L.call(this);_e&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],oe,re,null).clip().discardPath()),this.pdf.text(Ft,hn.x,hn.y,{angle:k.angle,align:z,renderingMode:k.renderingMode}),_e&&this.pdf.restoreGraphicsState()}}else Xt.y<Ht&&(this.ctx.prevPageLastElemOffset+=Ht-Xt.y);k.scale>=.01&&(this.pdf.setFontSize(St),this.lineWidth=Lt)}else k.scale>=.01&&(St=this.pdf.internal.getFontSize(),this.pdf.setFontSize(St*k.scale),Lt=this.lineWidth,this.lineWidth=Lt*k.scale),this.pdf.text(k.text,ut.x+this.posX,ut.y+this.posY,{angle:k.angle,align:z,renderingMode:k.renderingMode,maxWidth:k.maxWidth}),k.scale>=.01&&(this.pdf.setFontSize(St),this.lineWidth=Lt)},T=function(k,z,$,X){$=$||0,X=X||0,this.pdf.internal.out(e(k+$)+" "+r(z+X)+" l")},W=function(k,z,$){return this.pdf.lines(k,z,$,null,null)},ct=function(k,z,$,X,nt,ut,ht,pt){this.pdf.internal.out([t(i($+k)),t(s(X+z)),t(i(nt+k)),t(s(ut+z)),t(i(ht+k)),t(s(pt+z)),"c"].join(" "))},J=function(k,z,$,X){for(var nt=2*Math.PI,ut=Math.PI/2;z>$;)z-=nt;var ht=Math.abs($-z);ht<nt&&X&&(ht=nt-ht);for(var pt=[],Tt=X?-1:1,St=z;ht>1e-5;){var Lt=St+Tt*Math.min(ht,ut);pt.push(Y.call(this,k,St,Lt)),ht-=Math.abs(Lt-St),St=Lt}return pt},Y=function(k,z,$){var X=($-z)/2,nt=k*Math.cos(X),ut=k*Math.sin(X),ht=nt,pt=-ut,Tt=ht*ht+pt*pt,St=Tt+ht*nt+pt*ut,Lt=4/3*(Math.sqrt(2*Tt*St)-St)/(ht*ut-pt*nt),kt=ht-Lt*pt,$t=pt+Lt*ht,vt=kt,rt=-$t,ne=X+z,qt=Math.cos(ne),Pt=Math.sin(ne);return{x1:k*Math.cos(z),y1:k*Math.sin(z),x2:kt*qt-$t*Pt,y2:kt*Pt+$t*qt,x3:vt*qt-rt*Pt,y3:vt*Pt+rt*qt,x4:k*Math.cos($),y4:k*Math.sin($)}},et=function(k){return 180*k/Math.PI},Z=function(k,z,$,X,nt,ut){var ht=k+.5*($-k),pt=z+.5*(X-z),Tt=nt+.5*($-nt),St=ut+.5*(X-ut),Lt=Math.min(k,nt,ht,Tt),kt=Math.max(k,nt,ht,Tt),$t=Math.min(z,ut,pt,St),vt=Math.max(z,ut,pt,St);return new l(Lt,$t,kt-Lt,vt-$t)},at=function(k,z,$,X,nt,ut,ht,pt){var Tt,St,Lt,kt,$t,vt,rt,ne,qt,Pt,Nt,Ct,Rt,Ht,re=$-k,le=X-z,oe=nt-$,pe=ut-X,Se=ht-nt,Xt=pt-ut;for(St=0;St<41;St++)qt=(rt=(Lt=k+(Tt=St/40)*re)+Tt*(($t=$+Tt*oe)-Lt))+Tt*($t+Tt*(nt+Tt*Se-$t)-rt),Pt=(ne=(kt=z+Tt*le)+Tt*((vt=X+Tt*pe)-kt))+Tt*(vt+Tt*(ut+Tt*Xt-vt)-ne),St==0?(Nt=qt,Ct=Pt,Rt=qt,Ht=Pt):(Nt=Math.min(Nt,qt),Ct=Math.min(Ct,Pt),Rt=Math.max(Rt,qt),Ht=Math.max(Ht,Pt));return new l(Math.round(Nt),Math.round(Ct),Math.round(Rt-Nt),Math.round(Ht-Ct))},mt=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var k,z,$=(k=this.ctx.lineDash,z=this.ctx.lineDashOffset,JSON.stringify({lineDash:k,lineDashOffset:z}));this.prevLineDash!==$&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=$)}}})(Kt.API),function(n){var t=function(s){var o,l,u,d,m,v,_,g,N,L;for(l=[],u=0,d=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;d>u;u+=4)(m=(s.charCodeAt(u)<<24)+(s.charCodeAt(u+1)<<16)+(s.charCodeAt(u+2)<<8)+s.charCodeAt(u+3))!==0?(v=(m=((m=((m=((m=(m-(L=m%85))/85)-(N=m%85))/85)-(g=m%85))/85)-(_=m%85))/85)%85,l.push(v+33,_+33,g+33,N+33,L+33)):l.push(122);return function(O,C){for(var R=C;R>0;R--)O.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},e=function(s){var o,l,u,d,m,v=String,_="length",g=255,N="charCodeAt",L="slice",O="replace";for(s[L](-2),s=s[L](0,-2)[O](/\s/g,"")[O]("z","!!!!!"),u=[],d=0,m=(s+=o="uuuuu"[L](s[_]%5||5))[_];m>d;d+=5)l=52200625*(s[N](d)-33)+614125*(s[N](d+1)-33)+7225*(s[N](d+2)-33)+85*(s[N](d+3)-33)+(s[N](d+4)-33),u.push(g&l>>24,g&l>>16,g&l>>8,g&l);return function(C,R){for(var M=R;M>0;M--)C.pop()}(u,o[_]),v.fromCharCode.apply(v,u)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var l="",u=0;u<s.length;u+=2)l+=String.fromCharCode("0x"+(s[u]+s[u+1]));return l},i=function(s){for(var o=new Uint8Array(s.length),l=s.length;l--;)o[l]=s.charCodeAt(l);return s=(o=ud(o)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};n.processDataByFilters=function(s,o){var l=0,u=s||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":u=e(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=t(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=r(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=u.split("").map(function(m){return("0"+m.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=i(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}(Kt.API),function(n){n.loadFile=function(t,e,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(u,d,m){var v=new XMLHttpRequest,_=0,g=function(N){var L=N.length,O=[],C=String.fromCharCode;for(_=0;_<L;_+=1)O.push(C(255&N.charCodeAt(_)));return O.join("")};if(v.open("GET",u,!d),v.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(v.onload=function(){v.status===200?m(g(this.responseText)):m(void 0)}),v.send(null),d&&v.status===200)return g(v.responseText)}(i,s,o)}catch{}return l}(t,e,r)},n.loadImageFile=n.loadFile}(Kt.API),function(n){function t(){return(Zt.html2canvas?Promise.resolve(Zt.html2canvas):Ch(()=>import("./html2canvas.esm-e0a7d97b.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function e(){return(Zt.DOMPurify?Promise.resolve(Zt.DOMPurify):Ch(()=>import("./purify.es-2de9db7f.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var l=ke(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(o,l){var u=document.createElement(o);for(var d in l.className&&(u.className=l.className),l.innerHTML&&l.dompurify&&(u.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)u.style[d]=l.style[d];return u},s=function o(l){var u=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),u);return d=(d=d.setProgress(1,o,1,[o])).set(l)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,l){return o.__proto__=l||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(u){switch(r(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(e).then(function(u){return this.set({src:i("div",{innerHTML:o,dompurify:u})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function u(d,m){for(var v=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),_=d.firstChild;_;_=_.nextSibling)m!==!0&&_.nodeType===1&&_.nodeName==="SCRIPT"||v.appendChild(u(_,m));return d.nodeType===1&&(d.nodeName==="CANVAS"?(v.width=d.width,v.height=d.height,v.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(v.value=d.value),v.addEventListener("load",function(){v.scrollTop=d.scrollTop,v.scrollLeft=d.scrollLeft},!0)),v}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,l(this.prop.container,u)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var u=this.opt.jsPDF,d=this.opt.fontFaces,m=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,v=Object.assign({async:!0,allowTaint:!0,scale:m,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete v.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var _=0;_<d.length;++_){var g=d[_],N=g.src.find(function(L){return L.format==="truetype"});N&&u.addFont(N.url,g.ref.name,g.ref.style)}return v.windowHeight=v.windowHeight||0,v.windowHeight=v.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):v.windowHeight,u.context2d.save(!0),l(this.prop.container,v)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,l,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},s.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var l=Object.keys(o||{}).map(function(u){if(u in s.template.prop)return function(){this.prop[u]=o[u]};switch(u){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[u]=o[u]}}},this);return this.then(function(){return this.thenList(l)})},s.prototype.get=function(o,l){return this.then(function(){var u=o in s.template.prop?this.prop[o]:this.opt[o];return l?l(u):u})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function l(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(o=o||Kt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,l,u,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,l,u,d){return this.setProgress(o?this.progress.val+o:null,l||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},s.prototype.then=function(o,l){var u=this;return this.thenCore(o,l,function(d,m){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(v){return u.updateProgress(null,d),v}).then(d,m).then(function(v){return u.updateProgress(1),v})})},s.prototype.thenCore=function(o,l,u){u=u||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),m=u.call(d,o,l);return s.convert(m,this.__proto__)},s.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},s.prototype.thenList=function(o){var l=this;return o.forEach(function(u){l=l.thenCore(u)}),l},s.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return s.convert(l,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Kt.getPageSize=function(o,l,u){if(ke(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,u=d.format||u}l=l||"mm",u=u||"a4",o=(""+(o||"P")).toLowerCase();var m,v=(""+u).toLowerCase(),_={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":m=1;break;case"mm":m=72/25.4;break;case"cm":m=72/2.54;break;case"in":m=72;break;case"px":m=.75;break;case"pc":case"em":m=12;break;case"ex":m=6;break;default:throw"Invalid unit: "+l}var g,N=0,L=0;if(_.hasOwnProperty(v))N=_[v][1]/m,L=_[v][0]/m;else try{N=u[1],L=u[0]}catch{throw new Error("Invalid format: "+u)}if(o==="p"||o==="portrait")o="p",L>N&&(g=L,L=N,N=g);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",N>L&&(g=L,L=N,N=g)}return{width:L,height:N,unit:l,k:m,orientation:o}},n.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(md):null;var u=new s(l);return l.worker?u:u.from(o).doCallback()}}(Kt.API),Kt.API.addJS=function(n){return Cg=n,this.internal.events.subscribe("postPutResources",function(){jl=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(jl+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),xg=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Cg+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){jl!==void 0&&xg!==void 0&&this.internal.out("/Names <</JavaScript "+jl+" 0 R>>")}),this},function(n){var t;n.events.push(["postPutResources",function(){var e=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=e.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],l=r.exec(o);if(l!=null){var u=l[1];e.internal.newObjectDeferredBegin(u,!1)}e.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,m=[];for(s=0;s<d;s++){var v=e.internal.newObject();m.push(v);var _=e.internal.getPageInfo(s+1);e.internal.write("<< /D["+_.objId+" 0 R /XYZ null null null]>> endobj")}var g=e.internal.newObject();for(e.internal.write("<< /Names [ "),s=0;s<m.length;s++)e.internal.write("(page_"+(s+1)+")"+m[s]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+g+" 0 R"),e.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),n.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(r){r.id=e.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},e.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},e.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var u=e.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+u.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var d=0;d<r.children.length;d++)this.renderItems(r.children[d])},e.outline.line=function(r){this.ctx.val+=r+`\r
`},e.outline.makeRef=function(r){return r.id+" 0 R"},e.outline.makeString=function(r){return"("+e.internal.pdfEscape(r)+")"},e.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},e.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},e.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(Kt.API),function(n){var t=[192,193,194,195,196,197,198,199];n.processJPEG=function(e,r,i,s,o,l){var u,d=this.decode.DCT_DECODE,m=null;if(typeof e=="string"||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=o||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(u=function(v){for(var _,g=256*v.charCodeAt(4)+v.charCodeAt(5),N=v.length,L={width:0,height:0,numcomponents:1},O=4;O<N;O+=2){if(O+=g,t.indexOf(v.charCodeAt(O+1))!==-1){_=256*v.charCodeAt(O+5)+v.charCodeAt(O+6),L={width:256*v.charCodeAt(O+7)+v.charCodeAt(O+8),height:_,numcomponents:v.charCodeAt(O+9)};break}g=256*v.charCodeAt(O+2)+v.charCodeAt(O+3)}return L}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}m={data:e,width:u.width,height:u.height,colorSpace:l,bitsPerComponent:8,filter:d,index:r,alias:i}}return m}}(Kt.API);var ba,Bl,Lg,Rg,kg,y3=function(){var n,t,e;function r(s){var o,l,u,d,m,v,_,g,N,L,O,C,R,M;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},v=null;;){switch(o=this.readUInt32(),N=(function(){var q,K;for(K=[],q=0;q<4;++q)K.push(String.fromCharCode(this.data[this.pos++]));return K}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":v&&this.animation.frames.push(v),this.pos+=4,v={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},m=this.readUInt16(),d=this.readUInt16()||100,v.delay=1e3*m/d,v.disposeOp=this.data[this.pos++],v.blendOp=this.data[this.pos++],v.data=[];break;case"IDAT":case"fdAT":for(N==="fdAT"&&(this.pos+=4,o-=4),s=(v!=null?v.data:void 0)||this.imgData,C=0;0<=o?C<o:C>o;0<=o?++C:--C)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(u=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>u)throw new Error("More transparent colors than palette size");if((L=u-this.transparency.indexed.length)>0)for(R=0;0<=L?R<L:R>L;0<=L?++R:--R)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":_=(O=this.read(o)).indexOf(0),g=String.fromCharCode.apply(String,O.slice(0,_)),this.text[g]=String.fromCharCode.apply(String,O.slice(_+1));break;case"IEND":return v&&this.animation.frames.push(v),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(M=this.colorType)===4||M===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,l;for(l=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)l.push(this.data[this.pos++]);return l},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),u=0,d=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function m(v,_,g,N){var L,O,C,R,M,q,K,Q,S,E,x,F,b,A,T,W,ct,J,Y,et,Z,at=Math.ceil((d.width-v)/g),mt=Math.ceil((d.height-_)/N),k=d.width==at&&d.height==mt;for(A=o*at,F=k?l:new Uint8Array(A*mt),q=s.length,b=0,O=0;b<mt&&u<q;){switch(s[u++]){case 0:for(R=ct=0;ct<A;R=ct+=1)F[O++]=s[u++];break;case 1:for(R=J=0;J<A;R=J+=1)L=s[u++],M=R<o?0:F[O-o],F[O++]=(L+M)%256;break;case 2:for(R=Y=0;Y<A;R=Y+=1)L=s[u++],C=(R-R%o)/o,T=b&&F[(b-1)*A+C*o+R%o],F[O++]=(T+L)%256;break;case 3:for(R=et=0;et<A;R=et+=1)L=s[u++],C=(R-R%o)/o,M=R<o?0:F[O-o],T=b&&F[(b-1)*A+C*o+R%o],F[O++]=(L+Math.floor((M+T)/2))%256;break;case 4:for(R=Z=0;Z<A;R=Z+=1)L=s[u++],C=(R-R%o)/o,M=R<o?0:F[O-o],b===0?T=W=0:(T=F[(b-1)*A+C*o+R%o],W=C&&F[(b-1)*A+(C-1)*o+R%o]),K=M+T-W,Q=Math.abs(K-M),E=Math.abs(K-T),x=Math.abs(K-W),S=Q<=E&&Q<=x?M:E<=x?T:W,F[O++]=(L+S)%256;break;default:throw new Error("Invalid filter algorithm: "+s[u-1])}if(!k){var z=((_+b*N)*d.width+v)*o,$=b*A;for(R=0;R<at;R+=1){for(var X=0;X<o;X+=1)l[z++]=F[$++];z+=(g-1)*o}}b++}}return s=K4(s),d.interlaceMethod==1?(m(0,0,8,8),m(4,0,8,8),m(0,4,4,8),m(2,0,4,4),m(0,2,2,4),m(1,0,2,2),m(0,1,1,2)):m(0,0,1,1),l},r.prototype.decodePalette=function(){var s,o,l,u,d,m,v,_,g;for(l=this.palette,m=this.transparency.indexed||[],d=new Uint8Array((m.length||0)+l.length),u=0,s=0,o=v=0,_=l.length;v<_;o=v+=3)d[u++]=l[o],d[u++]=l[o+1],d[u++]=l[o+2],d[u++]=(g=m[s++])!=null?g:255;return d},r.prototype.copyToImageData=function(s,o){var l,u,d,m,v,_,g,N,L,O,C;if(u=this.colors,L=null,l=this.hasAlphaChannel,this.palette.length&&(L=(C=this._decodedPalette)!=null?C:this._decodedPalette=this.decodePalette(),u=4,l=!0),N=(d=s.data||s).length,v=L||o,m=_=0,u===1)for(;m<N;)g=L?4*o[m/4]:_,O=v[g++],d[m++]=O,d[m++]=O,d[m++]=O,d[m++]=l?v[g++]:255,_=g;else for(;m<N;)g=L?4*o[m/4]:_,d[m++]=v[g++],d[m++]=v[g++],d[m++]=v[g++],d[m++]=l?v[g++]:255,_=g},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(Zt)==="[object Window]"){try{t=Zt.document.createElement("canvas"),e=t.getContext("2d")}catch{return!1}return!0}return!1};return i(),n=function(s){var o;if(i()===!0)return e.width=s.width,e.height=s.height,e.clearRect(0,0,s.width,s.height),e.putImageData(s,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,l,u,d,m,v,_,g;if(this.animation){for(g=[],l=m=0,v=(_=this.animation.frames).length;m<v;l=++m)o=_[l],u=s.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(u,d),o.imageData=u,g.push(o.image=n(u));return g}},r.prototype.renderFrame=function(s,o){var l,u,d;return l=(u=this.animation.frames)[o],d=u[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?s.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&s.putImageData(d.imageData,d.xOffset,d.yOffset),l.blendOp===0&&s.clearRect(l.xOffset,l.yOffset,l.width,l.height),s.drawImage(l.image,l.xOffset,l.yOffset)},r.prototype.animate=function(s){var o,l,u,d,m,v,_=this;return l=0,v=this.animation,d=v.numFrames,u=v.frames,m=v.numPlays,(o=function(){var g,N;if(g=l++%d,N=u[g],_.renderFrame(s,g),d>1&&l/d<m)return _.animation._timeout=setTimeout(o,N.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,l;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function v3(n){var t=0;if(n[t++]!==71||n[t++]!==73||n[t++]!==70||n[t++]!==56||(n[t++]+1&253)!=56||n[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var e=n[t++]|n[t++]<<8,r=n[t++]|n[t++]<<8,i=n[t++],s=i>>7,o=1<<(7&i)+1;n[t++],n[t++];var l=null,u=null;s&&(l=t,u=o,t+=3*o);var d=!0,m=[],v=0,_=null,g=0,N=null;for(this.width=e,this.height=r;d&&t<n.length;)switch(n[t++]){case 33:switch(n[t++]){case 255:if(n[t]!==11||n[t+1]==78&&n[t+2]==69&&n[t+3]==84&&n[t+4]==83&&n[t+5]==67&&n[t+6]==65&&n[t+7]==80&&n[t+8]==69&&n[t+9]==50&&n[t+10]==46&&n[t+11]==48&&n[t+12]==3&&n[t+13]==1&&n[t+16]==0)t+=14,N=n[t++]|n[t++]<<8,t++;else for(t+=12;;){if(!((b=n[t++])>=0))throw Error("Invalid block size");if(b===0)break;t+=b}break;case 249:if(n[t++]!==4||n[t+4]!==0)throw new Error("Invalid graphics extension block.");var L=n[t++];v=n[t++]|n[t++]<<8,_=n[t++],!(1&L)&&(_=null),g=L>>2&7,t++;break;case 254:for(;;){if(!((b=n[t++])>=0))throw Error("Invalid block size");if(b===0)break;t+=b}break;default:throw new Error("Unknown graphic control label: 0x"+n[t-1].toString(16))}break;case 44:var O=n[t++]|n[t++]<<8,C=n[t++]|n[t++]<<8,R=n[t++]|n[t++]<<8,M=n[t++]|n[t++]<<8,q=n[t++],K=q>>6&1,Q=1<<(7&q)+1,S=l,E=u,x=!1;q>>7&&(x=!0,S=t,E=Q,t+=3*Q);var F=t;for(t++;;){var b;if(!((b=n[t++])>=0))throw Error("Invalid block size");if(b===0)break;t+=b}m.push({x:O,y:C,width:R,height:M,has_local_palette:x,palette_offset:S,palette_size:E,data_offset:F,data_length:t-F,transparent_index:_,interlaced:!!K,delay:v,disposal:g});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+n[t-1].toString(16))}this.numFrames=function(){return m.length},this.loopCount=function(){return N},this.frameInfo=function(A){if(A<0||A>=m.length)throw new Error("Frame index out of range.");return m[A]},this.decodeAndBlitFrameBGRA=function(A,T){var W=this.frameInfo(A),ct=W.width*W.height,J=new Uint8Array(ct);Dg(n,W.data_offset,J,ct);var Y=W.palette_offset,et=W.transparent_index;et===null&&(et=256);var Z=W.width,at=e-Z,mt=Z,k=4*(W.y*e+W.x),z=4*((W.y+W.height)*e+W.x),$=k,X=4*at;W.interlaced===!0&&(X+=4*e*7);for(var nt=8,ut=0,ht=J.length;ut<ht;++ut){var pt=J[ut];if(mt===0&&(mt=Z,($+=X)>=z&&(X=4*at+4*e*(nt-1),$=k+(Z+at)*(nt<<1),nt>>=1)),pt===et)$+=4;else{var Tt=n[Y+3*pt],St=n[Y+3*pt+1],Lt=n[Y+3*pt+2];T[$++]=Lt,T[$++]=St,T[$++]=Tt,T[$++]=255}--mt}},this.decodeAndBlitFrameRGBA=function(A,T){var W=this.frameInfo(A),ct=W.width*W.height,J=new Uint8Array(ct);Dg(n,W.data_offset,J,ct);var Y=W.palette_offset,et=W.transparent_index;et===null&&(et=256);var Z=W.width,at=e-Z,mt=Z,k=4*(W.y*e+W.x),z=4*((W.y+W.height)*e+W.x),$=k,X=4*at;W.interlaced===!0&&(X+=4*e*7);for(var nt=8,ut=0,ht=J.length;ut<ht;++ut){var pt=J[ut];if(mt===0&&(mt=Z,($+=X)>=z&&(X=4*at+4*e*(nt-1),$=k+(Z+at)*(nt<<1),nt>>=1)),pt===et)$+=4;else{var Tt=n[Y+3*pt],St=n[Y+3*pt+1],Lt=n[Y+3*pt+2];T[$++]=Tt,T[$++]=St,T[$++]=Lt,T[$++]=255}--mt}}}function Dg(n,t,e,r){for(var i=n[t++],s=1<<i,o=s+1,l=o+1,u=i+1,d=(1<<u)-1,m=0,v=0,_=0,g=n[t++],N=new Int32Array(4096),L=null;;){for(;m<16&&g!==0;)v|=n[t++]<<m,m+=8,g===1?g=n[t++]:--g;if(m<u)break;var O=v&d;if(v>>=u,m-=u,O!==s){if(O===o)break;for(var C=O<l?O:L,R=0,M=C;M>s;)M=N[M]>>8,++R;var q=M;if(_+R+(C!==O?1:0)>r)return void Me.log("Warning, gif stream longer than expected.");e[_++]=q;var K=_+=R;for(C!==O&&(e[_++]=q),M=C;R--;)M=N[M],e[--K]=255&M,M>>=8;L!==null&&l<4096&&(N[l++]=L<<8|q,l>=d+1&&u<12&&(++u,d=d<<1|1)),L=O}else l=o+1,d=(1<<(u=i+1))-1,L=null}return _!==r&&Me.log("Warning, gif stream shorter than expected."),e}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Nh(n){var t,e,r,i,s,o=Math.floor,l=new Array(64),u=new Array(64),d=new Array(64),m=new Array(64),v=new Array(65535),_=new Array(65535),g=new Array(64),N=new Array(64),L=[],O=0,C=7,R=new Array(64),M=new Array(64),q=new Array(64),K=new Array(256),Q=new Array(2048),S=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],x=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],b=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],A=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ct=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function J(k,z){for(var $=0,X=0,nt=new Array,ut=1;ut<=16;ut++){for(var ht=1;ht<=k[ut];ht++)nt[z[X]]=[],nt[z[X]][0]=$,nt[z[X]][1]=ut,X++,$++;$*=2}return nt}function Y(k){for(var z=k[0],$=k[1]-1;$>=0;)z&1<<$&&(O|=1<<C),$--,--C<0&&(O==255?(et(255),et(0)):et(O),C=7,O=0)}function et(k){L.push(k)}function Z(k){et(k>>8&255),et(255&k)}function at(k,z,$,X,nt){for(var ut,ht=nt[0],pt=nt[240],Tt=function(Pt,Nt){var Ct,Rt,Ht,re,le,oe,pe,Se,Xt,he,Ft=0;for(Xt=0;Xt<8;++Xt){Ct=Pt[Ft],Rt=Pt[Ft+1],Ht=Pt[Ft+2],re=Pt[Ft+3],le=Pt[Ft+4],oe=Pt[Ft+5],pe=Pt[Ft+6];var hn=Ct+(Se=Pt[Ft+7]),_e=Ct-Se,Tn=Rt+pe,Te=Rt-pe,De=Ht+oe,_n=Ht-oe,Ee=re+le,Tr=re-le,qe=hn+Ee,Pn=hn-Ee,Pr=Tn+De,de=Tn-De;Pt[Ft]=qe+Pr,Pt[Ft+4]=qe-Pr;var ie=.707106781*(de+Pn);Pt[Ft+2]=Pn+ie,Pt[Ft+6]=Pn-ie;var ge=.382683433*((qe=Tr+_n)-(de=Te+_e)),gr=.5411961*qe+ge,dn=1.306562965*de+ge,Nr=.707106781*(Pr=_n+Te),Nn=_e+Nr,Jt=_e-Nr;Pt[Ft+5]=Jt+gr,Pt[Ft+3]=Jt-gr,Pt[Ft+1]=Nn+dn,Pt[Ft+7]=Nn-dn,Ft+=8}for(Ft=0,Xt=0;Xt<8;++Xt){Ct=Pt[Ft],Rt=Pt[Ft+8],Ht=Pt[Ft+16],re=Pt[Ft+24],le=Pt[Ft+32],oe=Pt[Ft+40],pe=Pt[Ft+48];var mr=Ct+(Se=Pt[Ft+56]),Wn=Ct-Se,xn=Rt+pe,Je=Rt-pe,$e=Ht+oe,fn=Ht-oe,cs=re+le,bn=re-le,nr=mr+cs,rr=mr-cs,$n=xn+$e,ir=xn-$e;Pt[Ft]=nr+$n,Pt[Ft+32]=nr-$n;var Gn=.707106781*(ir+rr);Pt[Ft+16]=rr+Gn,Pt[Ft+48]=rr-Gn;var xr=.382683433*((nr=bn+fn)-(ir=Je+Wn)),hi=.5411961*nr+xr,ls=1.306562965*ir+xr,Hr=.707106781*($n=fn+Je),Fi=Wn+Hr,di=Wn-Hr;Pt[Ft+40]=di+hi,Pt[Ft+24]=di-hi,Pt[Ft+8]=Fi+ls,Pt[Ft+56]=Fi-ls,Ft++}for(Xt=0;Xt<64;++Xt)he=Pt[Xt]*Nt[Xt],g[Xt]=he>0?he+.5|0:he-.5|0;return g}(k,z),St=0;St<64;++St)N[S[St]]=Tt[St];var Lt=N[0]-$;$=N[0],Lt==0?Y(X[0]):(Y(X[_[ut=32767+Lt]]),Y(v[ut]));for(var kt=63;kt>0&&N[kt]==0;)kt--;if(kt==0)return Y(ht),$;for(var $t,vt=1;vt<=kt;){for(var rt=vt;N[vt]==0&&vt<=kt;)++vt;var ne=vt-rt;if(ne>=16){$t=ne>>4;for(var qt=1;qt<=$t;++qt)Y(pt);ne&=15}ut=32767+N[vt],Y(nt[(ne<<4)+_[ut]]),Y(v[ut]),vt++}return kt!=63&&Y(ht),$}function mt(k){k=Math.min(Math.max(k,1),100),s!=k&&(function(z){for(var $=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],X=0;X<64;X++){var nt=o(($[X]*z+50)/100);nt=Math.min(Math.max(nt,1),255),l[S[X]]=nt}for(var ut=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ht=0;ht<64;ht++){var pt=o((ut[ht]*z+50)/100);pt=Math.min(Math.max(pt,1),255),u[S[ht]]=pt}for(var Tt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],St=0,Lt=0;Lt<8;Lt++)for(var kt=0;kt<8;kt++)d[St]=1/(l[S[St]]*Tt[Lt]*Tt[kt]*8),m[St]=1/(u[S[St]]*Tt[Lt]*Tt[kt]*8),St++}(k<50?Math.floor(5e3/k):Math.floor(200-2*k)),s=k)}this.encode=function(k,z){z&&mt(z),L=new Array,O=0,C=7,Z(65496),Z(65504),Z(16),et(74),et(70),et(73),et(70),et(0),et(1),et(1),et(0),Z(1),Z(1),et(0),et(0),function(){Z(65499),Z(132),et(0);for(var Rt=0;Rt<64;Rt++)et(l[Rt]);et(1);for(var Ht=0;Ht<64;Ht++)et(u[Ht])}(),function(Rt,Ht){Z(65472),Z(17),et(8),Z(Ht),Z(Rt),et(3),et(1),et(17),et(0),et(2),et(17),et(1),et(3),et(17),et(1)}(k.width,k.height),function(){Z(65476),Z(418),et(0);for(var Rt=0;Rt<16;Rt++)et(E[Rt+1]);for(var Ht=0;Ht<=11;Ht++)et(x[Ht]);et(16);for(var re=0;re<16;re++)et(F[re+1]);for(var le=0;le<=161;le++)et(b[le]);et(1);for(var oe=0;oe<16;oe++)et(A[oe+1]);for(var pe=0;pe<=11;pe++)et(T[pe]);et(17);for(var Se=0;Se<16;Se++)et(W[Se+1]);for(var Xt=0;Xt<=161;Xt++)et(ct[Xt])}(),Z(65498),Z(12),et(3),et(1),et(0),et(2),et(17),et(3),et(17),et(0),et(63),et(0);var $=0,X=0,nt=0;O=0,C=7,this.encode.displayName="_encode_";for(var ut,ht,pt,Tt,St,Lt,kt,$t,vt,rt=k.data,ne=k.width,qt=k.height,Pt=4*ne,Nt=0;Nt<qt;){for(ut=0;ut<Pt;){for(St=Pt*Nt+ut,kt=-1,$t=0,vt=0;vt<64;vt++)Lt=St+($t=vt>>3)*Pt+(kt=4*(7&vt)),Nt+$t>=qt&&(Lt-=Pt*(Nt+1+$t-qt)),ut+kt>=Pt&&(Lt-=ut+kt-Pt+4),ht=rt[Lt++],pt=rt[Lt++],Tt=rt[Lt++],R[vt]=(Q[ht]+Q[pt+256>>0]+Q[Tt+512>>0]>>16)-128,M[vt]=(Q[ht+768>>0]+Q[pt+1024>>0]+Q[Tt+1280>>0]>>16)-128,q[vt]=(Q[ht+1280>>0]+Q[pt+1536>>0]+Q[Tt+1792>>0]>>16)-128;$=at(R,d,$,t,r),X=at(M,m,X,e,i),nt=at(q,m,nt,e,i),ut+=32}Nt+=8}if(C>=0){var Ct=[];Ct[1]=C+1,Ct[0]=(1<<C+1)-1,Y(Ct)}return Z(65497),new Uint8Array(L)},n=n||50,function(){for(var k=String.fromCharCode,z=0;z<256;z++)K[z]=k(z)}(),t=J(E,x),e=J(A,T),r=J(F,b),i=J(W,ct),function(){for(var k=1,z=2,$=1;$<=15;$++){for(var X=k;X<z;X++)_[32767+X]=$,v[32767+X]=[],v[32767+X][1]=$,v[32767+X][0]=X;for(var nt=-(z-1);nt<=-k;nt++)_[32767+nt]=$,v[32767+nt]=[],v[32767+nt][1]=$,v[32767+nt][0]=z-1+nt;k<<=1,z<<=1}}(),function(){for(var k=0;k<256;k++)Q[k]=19595*k,Q[k+256>>0]=38470*k,Q[k+512>>0]=7471*k+32768,Q[k+768>>0]=-11059*k,Q[k+1024>>0]=-21709*k,Q[k+1280>>0]=32768*k+8421375,Q[k+1536>>0]=-27439*k,Q[k+1792>>0]=-5329*k}(),mt(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ii(n,t){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Og(n){function t(E){if(!E)throw Error("assert :P")}function e(E,x,F){for(var b=0;4>b;b++)if(E[x+b]!=F.charCodeAt(b))return!0;return!1}function r(E,x,F,b,A){for(var T=0;T<A;T++)E[x+T]=F[b+T]}function i(E,x,F,b){for(var A=0;A<b;A++)E[x+A]=F}function s(E){return new Int32Array(E)}function o(E,x){for(var F=[],b=0;b<E;b++)F.push(new x);return F}function l(E,x){var F=[];return function b(A,T,W){for(var ct=W[T],J=0;J<ct&&(A.push(W.length>T+1?[]:new x),!(W.length<T+1));J++)b(A[J],T+1,W)}(F,0,E),F}var u=function(){var E=this;function x(c,h){for(var y=1<<h-1>>>0;c&y;)y>>>=1;return y?(c&y-1)+y:c}function F(c,h,y,I,D){t(!(I%y));do c[h+(I-=y)]=D;while(0<I)}function b(c,h,y,I,D){if(t(2328>=D),512>=D)var V=s(512);else if((V=s(D))==null)return 0;return function(j,B,U,G,it,dt){var ft,lt,bt=B,yt=1<<U,st=s(16),ot=s(16);for(t(it!=0),t(G!=null),t(j!=null),t(0<U),lt=0;lt<it;++lt){if(15<G[lt])return 0;++st[G[lt]]}if(st[0]==it)return 0;for(ot[1]=0,ft=1;15>ft;++ft){if(st[ft]>1<<ft)return 0;ot[ft+1]=ot[ft]+st[ft]}for(lt=0;lt<it;++lt)ft=G[lt],0<G[lt]&&(dt[ot[ft]++]=lt);if(ot[15]==1)return(G=new A).g=0,G.value=dt[0],F(j,bt,1,yt,G),yt;var wt,Et=-1,_t=yt-1,Vt=0,Dt=1,Qt=1,Ot=1<<U;for(lt=0,ft=1,it=2;ft<=U;++ft,it<<=1){if(Dt+=Qt<<=1,0>(Qt-=st[ft]))return 0;for(;0<st[ft];--st[ft])(G=new A).g=ft,G.value=dt[lt++],F(j,bt+Vt,it,Ot,G),Vt=x(Vt,ft)}for(ft=U+1,it=2;15>=ft;++ft,it<<=1){if(Dt+=Qt<<=1,0>(Qt-=st[ft]))return 0;for(;0<st[ft];--st[ft]){if(G=new A,(Vt&_t)!=Et){for(bt+=Ot,wt=1<<(Et=ft)-U;15>Et&&!(0>=(wt-=st[Et]));)++Et,wt<<=1;yt+=Ot=1<<(wt=Et-U),j[B+(Et=Vt&_t)].g=wt+U,j[B+Et].value=bt-B-Et}G.g=ft-U,G.value=dt[lt++],F(j,bt+(Vt>>U),it,Ot,G),Vt=x(Vt,ft)}}return Dt!=2*ot[15]-1?0:yt}(c,h,y,I,D,V)}function A(){this.value=this.g=0}function T(){this.value=this.g=0}function W(){this.G=o(5,A),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Cn,T)}function ct(c,h,y,I){t(c!=null),t(h!=null),t(2147483648>I),c.Ca=254,c.I=0,c.b=-8,c.Ka=0,c.oa=h,c.pa=y,c.Jd=h,c.Yc=y+I,c.Zc=4<=I?y+I-4+1:y,ut(c)}function J(c,h){for(var y=0;0<h--;)y|=pt(c,128)<<h;return y}function Y(c,h){var y=J(c,h);return ht(c)?-y:y}function et(c,h,y,I){var D,V=0;for(t(c!=null),t(h!=null),t(4294967288>I),c.Sb=I,c.Ra=0,c.u=0,c.h=0,4<I&&(I=4),D=0;D<I;++D)V+=h[y+D]<<8*D;c.Ra=V,c.bb=I,c.oa=h,c.pa=y}function Z(c){for(;8<=c.u&&c.bb<c.Sb;)c.Ra>>>=8,c.Ra+=c.oa[c.pa+c.bb]<<ua-8>>>0,++c.bb,c.u-=8;$(c)&&(c.h=1,c.u=0)}function at(c,h){if(t(0<=h),!c.h&&h<=la){var y=z(c)&ca[h];return c.u+=h,Z(c),y}return c.h=1,c.u=0}function mt(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function k(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function z(c){return c.Ra>>>(c.u&ua-1)>>>0}function $(c){return t(c.bb<=c.Sb),c.h||c.bb==c.Sb&&c.u>ua}function X(c,h){c.u=h,c.h=$(c)}function nt(c){c.u>=sc&&(t(c.u>=sc),Z(c))}function ut(c){t(c!=null&&c.oa!=null),c.pa<c.Zc?(c.I=(c.oa[c.pa++]|c.I<<8)>>>0,c.b+=8):(t(c!=null&&c.oa!=null),c.pa<c.Yc?(c.b+=8,c.I=c.oa[c.pa++]|c.I<<8):c.Ka?c.b=0:(c.I<<=8,c.b+=8,c.Ka=1))}function ht(c){return J(c,1)}function pt(c,h){var y=c.Ca;0>c.b&&ut(c);var I=c.b,D=y*h>>>8,V=(c.I>>>I>D)+0;for(V?(y-=D,c.I-=D+1<<I>>>0):y=D+1,I=y,D=0;256<=I;)D+=8,I>>=8;return I=7^D+ar[I],c.b-=I,c.Ca=(y<<I)-1,V}function Tt(c,h,y){c[h+0]=y>>24&255,c[h+1]=y>>16&255,c[h+2]=y>>8&255,c[h+3]=y>>0&255}function St(c,h){return c[h+0]<<0|c[h+1]<<8}function Lt(c,h){return St(c,h)|c[h+2]<<16}function kt(c,h){return St(c,h)|St(c,h+2)<<16}function $t(c,h){var y=1<<h;return t(c!=null),t(0<h),c.X=s(y),c.X==null?0:(c.Mb=32-h,c.Xa=h,1)}function vt(c,h){t(c!=null),t(h!=null),t(c.Xa==h.Xa),r(h.X,0,c.X,0,1<<h.Xa)}function rt(){this.X=[],this.Xa=this.Mb=0}function ne(c,h,y,I){t(y!=null),t(I!=null);var D=y[0],V=I[0];return D==0&&(D=(c*V+h/2)/h),V==0&&(V=(h*D+c/2)/c),0>=D||0>=V?0:(y[0]=D,I[0]=V,1)}function qt(c,h){return c+(1<<h)-1>>>h}function Pt(c,h){return((4278255360&c)+(4278255360&h)>>>0&4278255360)+((16711935&c)+(16711935&h)>>>0&16711935)>>>0}function Nt(c,h){E[h]=function(y,I,D,V,j,B,U){var G;for(G=0;G<j;++G){var it=E[c](B[U+G-1],D,V+G);B[U+G]=Pt(y[I+G],it)}}}function Ct(){this.ud=this.hd=this.jd=0}function Rt(c,h){return((4278124286&(c^h))>>>1)+(c&h)>>>0}function Ht(c){return 0<=c&&256>c?c:0>c?0:255<c?255:void 0}function re(c,h){return Ht(c+(c-h+.5>>1))}function le(c,h,y){return Math.abs(h-y)-Math.abs(c-y)}function oe(c,h,y,I,D,V,j){for(I=V[j-1],y=0;y<D;++y)V[j+y]=I=Pt(c[h+y],I)}function pe(c,h,y,I,D){var V;for(V=0;V<y;++V){var j=c[h+V],B=j>>8&255,U=16711935&(U=(U=16711935&j)+((B<<16)+B));I[D+V]=(4278255360&j)+U>>>0}}function Se(c,h){h.jd=c>>0&255,h.hd=c>>8&255,h.ud=c>>16&255}function Xt(c,h,y,I,D,V){var j;for(j=0;j<I;++j){var B=h[y+j],U=B>>>8,G=B,it=255&(it=(it=B>>>16)+((c.jd<<24>>24)*(U<<24>>24)>>>5));G=255&(G=(G=G+((c.hd<<24>>24)*(U<<24>>24)>>>5))+((c.ud<<24>>24)*(it<<24>>24)>>>5)),D[V+j]=(4278255360&B)+(it<<16)+G}}function he(c,h,y,I,D){E[h]=function(V,j,B,U,G,it,dt,ft,lt){for(U=dt;U<ft;++U)for(dt=0;dt<lt;++dt)G[it++]=D(B[I(V[j++])])},E[c]=function(V,j,B,U,G,it,dt){var ft=8>>V.b,lt=V.Ea,bt=V.K[0],yt=V.w;if(8>ft)for(V=(1<<V.b)-1,yt=(1<<ft)-1;j<B;++j){var st,ot=0;for(st=0;st<lt;++st)st&V||(ot=I(U[G++])),it[dt++]=D(bt[ot&yt]),ot>>=ft}else E["VP8LMapColor"+y](U,G,bt,yt,it,dt,j,B,lt)}}function Ft(c,h,y,I,D){for(y=h+y;h<y;){var V=c[h++];I[D++]=V>>16&255,I[D++]=V>>8&255,I[D++]=V>>0&255}}function hn(c,h,y,I,D){for(y=h+y;h<y;){var V=c[h++];I[D++]=V>>16&255,I[D++]=V>>8&255,I[D++]=V>>0&255,I[D++]=V>>24&255}}function _e(c,h,y,I,D){for(y=h+y;h<y;){var V=(j=c[h++])>>16&240|j>>12&15,j=j>>0&240|j>>28&15;I[D++]=V,I[D++]=j}}function Tn(c,h,y,I,D){for(y=h+y;h<y;){var V=(j=c[h++])>>16&248|j>>13&7,j=j>>5&224|j>>3&31;I[D++]=V,I[D++]=j}}function Te(c,h,y,I,D){for(y=h+y;h<y;){var V=c[h++];I[D++]=V>>0&255,I[D++]=V>>8&255,I[D++]=V>>16&255}}function De(c,h,y,I,D,V){if(V==0)for(y=h+y;h<y;)Tt(I,((V=c[h++])[0]>>24|V[1]>>8&65280|V[2]<<8&16711680|V[3]<<24)>>>0),D+=32;else r(I,D,c,h,y)}function _n(c,h){E[h][0]=E[c+"0"],E[h][1]=E[c+"1"],E[h][2]=E[c+"2"],E[h][3]=E[c+"3"],E[h][4]=E[c+"4"],E[h][5]=E[c+"5"],E[h][6]=E[c+"6"],E[h][7]=E[c+"7"],E[h][8]=E[c+"8"],E[h][9]=E[c+"9"],E[h][10]=E[c+"10"],E[h][11]=E[c+"11"],E[h][12]=E[c+"12"],E[h][13]=E[c+"13"],E[h][14]=E[c+"0"],E[h][15]=E[c+"0"]}function Ee(c){return c==$u||c==Gu||c==yl||c==Ku}function Tr(){this.eb=[],this.size=this.A=this.fb=0}function qe(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Pn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Tr,this.f.kb=new qe,this.sd=null}function Pr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function de(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ie(c){return alert("todo:WebPSamplerProcessPlane"),c.T}function ge(c,h){var y=c.T,I=h.ba.f.RGBA,D=I.eb,V=I.fb+c.ka*I.A,j=Br[h.ba.S],B=c.y,U=c.O,G=c.f,it=c.N,dt=c.ea,ft=c.W,lt=h.cc,bt=h.dc,yt=h.Mc,st=h.Nc,ot=c.ka,wt=c.ka+c.T,Et=c.U,_t=Et+1>>1;for(ot==0?j(B,U,null,null,G,it,dt,ft,G,it,dt,ft,D,V,null,null,Et):(j(h.ec,h.fc,B,U,lt,bt,yt,st,G,it,dt,ft,D,V-I.A,D,V,Et),++y);ot+2<wt;ot+=2)lt=G,bt=it,yt=dt,st=ft,it+=c.Rc,ft+=c.Rc,V+=2*I.A,j(B,(U+=2*c.fa)-c.fa,B,U,lt,bt,yt,st,G,it,dt,ft,D,V-I.A,D,V,Et);return U+=c.fa,c.j+wt<c.o?(r(h.ec,h.fc,B,U,Et),r(h.cc,h.dc,G,it,_t),r(h.Mc,h.Nc,dt,ft,_t),y--):1&wt||j(B,U,null,null,G,it,dt,ft,G,it,dt,ft,D,V+I.A,null,null,Et),y}function gr(c,h,y){var I=c.F,D=[c.J];if(I!=null){var V=c.U,j=h.ba.S,B=j==ml||j==yl;h=h.ba.f.RGBA;var U=[0],G=c.ka;U[0]=c.T,c.Kb&&(G==0?--U[0]:(--G,D[0]-=c.width),c.j+c.ka+c.T==c.o&&(U[0]=c.o-c.j-G));var it=h.eb;G=h.fb+G*h.A,c=Be(I,D[0],c.width,V,U,it,G+(B?0:3),h.A),t(y==U),c&&Ee(j)&&Vr(it,G,B,V,U,h.A)}return 0}function dn(c){var h=c.ma,y=h.ba.S,I=11>y,D=y==pl||y==gl||y==ml||y==Wu||y==12||Ee(y);if(h.memory=null,h.Ib=null,h.Jb=null,h.Nd=null,!rc(h.Oa,c,D?11:12))return 0;if(D&&Ee(y)&&tt(),c.da)alert("todo:use_scaling");else{if(I){if(h.Ib=ie,c.Kb){if(y=c.U+1>>1,h.memory=s(c.U+2*y),h.memory==null)return 0;h.ec=h.memory,h.fc=0,h.cc=h.ec,h.dc=h.fc+c.U,h.Mc=h.cc,h.Nc=h.dc+y,h.Ib=ge,tt()}}else alert("todo:EmitYUV");D&&(h.Jb=gr,I&&P())}if(I&&!Pf){for(c=0;256>c;++c)Q0[c]=89858*(c-128)+wl>>vl,t2[c]=-22014*(c-128)+wl,Z0[c]=-45773*(c-128),X0[c]=113618*(c-128)+wl>>vl;for(c=dc;c<Qu;++c)h=76283*(c-16)+wl>>vl,e2[c-dc]=wr(h,255),n2[c-dc]=wr(h+8>>4,15);Pf=1}return 1}function Nr(c){var h=c.ma,y=c.U,I=c.T;return t(!(1&c.ka)),0>=y||0>=I?0:(y=h.Ib(c,h),h.Jb!=null&&h.Jb(c,h,y),h.Dc+=y,1)}function Nn(c){c.ma.memory=null}function Jt(c,h,y,I){return at(c,8)!=47?0:(h[0]=at(c,14)+1,y[0]=at(c,14)+1,I[0]=at(c,1),at(c,3)!=0?0:!c.h)}function mr(c,h){if(4>c)return c+1;var y=c-2>>1;return(2+(1&c)<<y)+at(h,y)+1}function Wn(c,h){return 120<h?h-120:1<=(y=((y=M0[h-1])>>4)*c+(8-(15&y)))?y:1;var y}function xn(c,h,y){var I=z(y),D=c[h+=255&I].g-8;return 0<D&&(X(y,y.u+8),I=z(y),h+=c[h].value,h+=I&(1<<D)-1),X(y,y.u+c[h].g),c[h].value}function Je(c,h,y){return y.g+=c.g,y.value+=c.value<<h>>>0,t(8>=y.g),c.g}function $e(c,h,y){var I=c.xc;return t((h=I==0?0:c.vc[c.md*(y>>I)+(h>>I)])<c.Wb),c.Ya[h]}function fn(c,h,y,I){var D=c.ab,V=c.c*h,j=c.C;h=j+h;var B=y,U=I;for(I=c.Ta,y=c.Ua;0<D--;){var G=c.gc[D],it=j,dt=h,ft=B,lt=U,bt=(U=I,B=y,G.Ea);switch(t(it<dt),t(dt<=G.nc),G.hc){case 2:al(ft,lt,(dt-it)*bt,U,B);break;case 0:var yt=it,st=dt,ot=U,wt=B,Et=(Ot=G).Ea;yt==0&&(zu(ft,lt,null,null,1,ot,wt),oe(ft,lt+1,0,0,Et-1,ot,wt+1),lt+=Et,wt+=Et,++yt);for(var _t=1<<Ot.b,Vt=_t-1,Dt=qt(Et,Ot.b),Qt=Ot.K,Ot=Ot.w+(yt>>Ot.b)*Dt;yt<st;){var Pe=Qt,Le=Ot,Ie=1;for(oc(ft,lt,ot,wt-Et,1,ot,wt);Ie<Et;){var me=(Ie&~Vt)+_t;me>Et&&(me=Et),(0,ws[Pe[Le++]>>8&15])(ft,lt+ +Ie,ot,wt+Ie-Et,me-Ie,ot,wt+Ie),Ie=me}lt+=Et,wt+=Et,++yt&Vt||(Ot+=Dt)}dt!=G.nc&&r(U,B-bt,U,B+(dt-it-1)*bt,bt);break;case 1:for(bt=ft,st=lt,Et=(ft=G.Ea)-(wt=ft&~(ot=(lt=1<<G.b)-1)),yt=qt(ft,G.b),_t=G.K,G=G.w+(it>>G.b)*yt;it<dt;){for(Vt=_t,Dt=G,Qt=new Ct,Ot=st+wt,Pe=st+ft;st<Ot;)Se(Vt[Dt++],Qt),vo(Qt,bt,st,lt,U,B),st+=lt,B+=lt;st<Pe&&(Se(Vt[Dt++],Qt),vo(Qt,bt,st,Et,U,B),st+=Et,B+=Et),++it&ot||(G+=yt)}break;case 3:if(ft==U&&lt==B&&0<G.b){for(st=U,ft=bt=B+(dt-it)*bt-(wt=(dt-it)*qt(G.Ea,G.b)),lt=U,ot=B,yt=[],wt=(Et=wt)-1;0<=wt;--wt)yt[wt]=lt[ot+wt];for(wt=Et-1;0<=wt;--wt)st[ft+wt]=yt[wt];Or(G,it,dt,U,bt,U,B)}else Or(G,it,dt,ft,lt,U,B)}B=I,U=y}U!=y&&r(I,y,B,U,V)}function cs(c,h){var y=c.V,I=c.Ba+c.c*c.C,D=h-c.C;if(t(h<=c.l.o),t(16>=D),0<D){var V=c.l,j=c.Ta,B=c.Ua,U=V.width;if(fn(c,D,y,I),D=B=[B],t((y=c.C)<(I=h)),t(V.v<V.va),I>V.o&&(I=V.o),y<V.j){var G=V.j-y;y=V.j,D[0]+=G*U}if(y>=I?y=0:(D[0]+=4*V.v,V.ka=y-V.j,V.U=V.va-V.v,V.T=I-y,y=1),y){if(B=B[0],11>(y=c.ca).S){var it=y.f.RGBA,dt=(I=y.S,D=V.U,V=V.T,G=it.eb,it.A),ft=V;for(it=it.fb+c.Ma*it.A;0<ft--;){var lt=j,bt=B,yt=D,st=G,ot=it;switch(I){case fl:cr(lt,bt,yt,st,ot);break;case pl:Xn(lt,bt,yt,st,ot);break;case $u:Xn(lt,bt,yt,st,ot),Vr(st,ot,0,yt,1,0);break;case yf:Hi(lt,bt,yt,st,ot);break;case gl:De(lt,bt,yt,st,ot,1);break;case Gu:De(lt,bt,yt,st,ot,1),Vr(st,ot,0,yt,1,0);break;case ml:De(lt,bt,yt,st,ot,0);break;case yl:De(lt,bt,yt,st,ot,0),Vr(st,ot,1,yt,1,0);break;case Wu:_s(lt,bt,yt,st,ot);break;case Ku:_s(lt,bt,yt,st,ot),je(st,ot,yt,1,0);break;case vf:zi(lt,bt,yt,st,ot);break;default:t(0)}B+=U,it+=dt}c.Ma+=V}else alert("todo:EmitRescaledRowsYUVA");t(c.Ma<=y.height)}}c.C=h,t(c.C<=c.i)}function bn(c){var h;if(0<c.ua)return 0;for(h=0;h<c.Wb;++h){var y=c.Ya[h].G,I=c.Ya[h].H;if(0<y[1][I[1]+0].g||0<y[2][I[2]+0].g||0<y[3][I[3]+0].g)return 0}return 1}function nr(c,h,y,I,D,V){if(c.Z!=0){var j=c.qd,B=c.rd;for(t(Is[c.Z]!=null);h<y;++h)Is[c.Z](j,B,I,D,I,D,V),j=I,B=D,D+=V;c.qd=j,c.rd=B}}function rr(c,h){var y=c.l.ma,I=y.Z==0||y.Z==1?c.l.j:c.C;if(I=c.C<I?I:c.C,t(h<=c.l.o),h>I){var D=c.l.width,V=y.ca,j=y.tb+D*I,B=c.V,U=c.Ba+c.c*I,G=c.gc;t(c.ab==1),t(G[0].hc==3),cl(G[0],I,h,B,U,V,j),nr(y,I,h,V,j,D)}c.C=c.Ma=h}function $n(c,h,y,I,D,V,j){var B=c.$/I,U=c.$%I,G=c.m,it=c.s,dt=y+c.$,ft=dt;D=y+I*D;var lt=y+I*V,bt=280+it.ua,yt=c.Pb?B:16777216,st=0<it.ua?it.Wa:null,ot=it.wc,wt=dt<lt?$e(it,U,B):null;t(c.C<V),t(lt<=D);var Et=!1;t:for(;;){for(;Et||dt<lt;){var _t=0;if(B>=yt){var Vt=dt-y;t((yt=c).Pb),yt.wd=yt.m,yt.xd=Vt,0<yt.s.ua&&vt(yt.s.Wa,yt.s.vb),yt=B+j0}if(U&ot||(wt=$e(it,U,B)),t(wt!=null),wt.Qb&&(h[dt]=wt.qb,Et=!0),!Et)if(nt(G),wt.jc){_t=G,Vt=h;var Dt=dt,Qt=wt.pd[z(_t)&Cn-1];t(wt.jc),256>Qt.g?(X(_t,_t.u+Qt.g),Vt[Dt]=Qt.value,_t=0):(X(_t,_t.u+Qt.g-256),t(256<=Qt.value),_t=Qt.value),_t==0&&(Et=!0)}else _t=xn(wt.G[0],wt.H[0],G);if(G.h)break;if(Et||256>_t){if(!Et)if(wt.nd)h[dt]=(wt.qb|_t<<8)>>>0;else{if(nt(G),Et=xn(wt.G[1],wt.H[1],G),nt(G),Vt=xn(wt.G[2],wt.H[2],G),Dt=xn(wt.G[3],wt.H[3],G),G.h)break;h[dt]=(Dt<<24|Et<<16|_t<<8|Vt)>>>0}if(Et=!1,++dt,++U>=I&&(U=0,++B,j!=null&&B<=V&&!(B%16)&&j(c,B),st!=null))for(;ft<dt;)_t=h[ft++],st.X[(506832829*_t&4294967295)>>>st.Mb]=_t}else if(280>_t){if(_t=mr(_t-256,G),Vt=xn(wt.G[4],wt.H[4],G),nt(G),Vt=Wn(I,Vt=mr(Vt,G)),G.h)break;if(dt-y<Vt||D-dt<_t)break t;for(Dt=0;Dt<_t;++Dt)h[dt+Dt]=h[dt+Dt-Vt];for(dt+=_t,U+=_t;U>=I;)U-=I,++B,j!=null&&B<=V&&!(B%16)&&j(c,B);if(t(dt<=D),U&ot&&(wt=$e(it,U,B)),st!=null)for(;ft<dt;)_t=h[ft++],st.X[(506832829*_t&4294967295)>>>st.Mb]=_t}else{if(!(_t<bt))break t;for(Et=_t-280,t(st!=null);ft<dt;)_t=h[ft++],st.X[(506832829*_t&4294967295)>>>st.Mb]=_t;_t=dt,t(!(Et>>>(Vt=st).Xa)),h[_t]=Vt.X[Et],Et=!0}Et||t(G.h==$(G))}if(c.Pb&&G.h&&dt<D)t(c.m.h),c.a=5,c.m=c.wd,c.$=c.xd,0<c.s.ua&&vt(c.s.vb,c.s.Wa);else{if(G.h)break t;j!=null&&j(c,B>V?V:B),c.a=0,c.$=dt-y}return 1}return c.a=3,0}function ir(c){t(c!=null),c.vc=null,c.yc=null,c.Ya=null;var h=c.Wa;h!=null&&(h.X=null),c.vb=null,t(c!=null)}function Gn(){var c=new sa;return c==null?null:(c.a=0,c.xb=bf,_n("Predictor","VP8LPredictors"),_n("Predictor","VP8LPredictors_C"),_n("PredictorAdd","VP8LPredictorsAdd"),_n("PredictorAdd","VP8LPredictorsAdd_C"),al=pe,vo=Xt,cr=Ft,Xn=hn,_s=_e,zi=Tn,Hi=Te,E.VP8LMapColor32b=ha,E.VP8LMapColor8b=ll,c)}function xr(c,h,y,I,D){var V=1,j=[c],B=[h],U=I.m,G=I.s,it=null,dt=0;t:for(;;){if(y)for(;V&&at(U,1);){var ft=j,lt=B,bt=I,yt=1,st=bt.m,ot=bt.gc[bt.ab],wt=at(st,2);if(bt.Oc&1<<wt)V=0;else{switch(bt.Oc|=1<<wt,ot.hc=wt,ot.Ea=ft[0],ot.nc=lt[0],ot.K=[null],++bt.ab,t(4>=bt.ab),wt){case 0:case 1:ot.b=at(st,3)+2,yt=xr(qt(ot.Ea,ot.b),qt(ot.nc,ot.b),0,bt,ot.K),ot.K=ot.K[0];break;case 3:var Et,_t=at(st,8)+1,Vt=16<_t?0:4<_t?1:2<_t?2:3;if(ft[0]=qt(ot.Ea,Vt),ot.b=Vt,Et=yt=xr(_t,1,0,bt,ot.K)){var Dt,Qt=_t,Ot=ot,Pe=1<<(8>>Ot.b),Le=s(Pe);if(Le==null)Et=0;else{var Ie=Ot.K[0],me=Ot.w;for(Le[0]=Ot.K[0][0],Dt=1;Dt<1*Qt;++Dt)Le[Dt]=Pt(Ie[me+Dt],Le[Dt-1]);for(;Dt<4*Pe;++Dt)Le[Dt]=0;Ot.K[0]=null,Ot.K[0]=Le,Et=1}}yt=Et;break;case 2:break;default:t(0)}V=yt}}if(j=j[0],B=B[0],V&&at(U,1)&&!(V=1<=(dt=at(U,4))&&11>=dt)){I.a=3;break t}var Fe;if(Fe=V)e:{var Oe,ue,an,lr=I,cn=j,ur=B,Re=dt,br=y,Ar=lr.m,En=lr.s,Ln=[null],tr=1,qr=0,Ei=V0[Re];n:for(;;){if(br&&at(Ar,1)){var In=at(Ar,3)+2,Ki=qt(cn,In),Eo=qt(ur,In),ma=Ki*Eo;if(!xr(Ki,Eo,0,lr,Ln))break n;for(Ln=Ln[0],En.xc=In,Oe=0;Oe<ma;++Oe){var Ss=Ln[Oe]>>8&65535;Ln[Oe]=Ss,Ss>=tr&&(tr=Ss+1)}}if(Ar.h)break n;for(ue=0;5>ue;++ue){var Qe=wf[ue];!ue&&0<Re&&(Qe+=1<<Re),qr<Qe&&(qr=Qe)}var Xu=o(tr*Ei,A),Cf=tr,Lf=o(Cf,W);if(Lf==null)var bl=null;else t(65536>=Cf),bl=Lf;var fc=s(qr);if(bl==null||fc==null||Xu==null){lr.a=1;break n}var Al=Xu;for(Oe=an=0;Oe<tr;++Oe){var ni=bl[Oe],ya=ni.G,va=ni.H,Rf=0,El=1,kf=0;for(ue=0;5>ue;++ue){Qe=wf[ue],ya[ue]=Al,va[ue]=an,!ue&&0<Re&&(Qe+=1<<Re);i:{var Il,Zu=Qe,Sl=lr,pc=fc,s2=Al,o2=an,th=0,Ts=Sl.m,a2=at(Ts,1);if(i(pc,0,0,Zu),a2){var c2=at(Ts,1)+1,l2=at(Ts,1),Df=at(Ts,l2==0?1:8);pc[Df]=1,c2==2&&(pc[Df=at(Ts,8)]=1);var Tl=1}else{var Of=s(19),Ff=at(Ts,4)+4;if(19<Ff){Sl.a=3;var Pl=0;break i}for(Il=0;Il<Ff;++Il)Of[F0[Il]]=at(Ts,3);var eh=void 0,gc=void 0,Mf=Sl,u2=Of,Nl=Zu,Vf=pc,nh=0,Ps=Mf.m,jf=8,Bf=o(128,A);r:for(;b(Bf,0,7,u2,19);){if(at(Ps,1)){var h2=2+2*at(Ps,3);if((eh=2+at(Ps,h2))>Nl)break r}else eh=Nl;for(gc=0;gc<Nl&&eh--;){nt(Ps);var qf=Bf[0+(127&z(Ps))];X(Ps,Ps.u+qf.g);var wa=qf.value;if(16>wa)Vf[gc++]=wa,wa!=0&&(jf=wa);else{var d2=wa==16,Uf=wa-16,f2=D0[Uf],zf=at(Ps,k0[Uf])+f2;if(gc+zf>Nl)break r;for(var p2=d2?jf:0;0<zf--;)Vf[gc++]=p2}}nh=1;break r}nh||(Mf.a=3),Tl=nh}(Tl=Tl&&!Ts.h)&&(th=b(s2,o2,8,pc,Zu)),Tl&&th!=0?Pl=th:(Sl.a=3,Pl=0)}if(Pl==0)break n;if(El&&O0[ue]==1&&(El=Al[an].g==0),Rf+=Al[an].g,an+=Pl,3>=ue){var mc,rh=fc[0];for(mc=1;mc<Qe;++mc)fc[mc]>rh&&(rh=fc[mc]);kf+=rh}}if(ni.nd=El,ni.Qb=0,El&&(ni.qb=(ya[3][va[3]+0].value<<24|ya[1][va[1]+0].value<<16|ya[2][va[2]+0].value)>>>0,Rf==0&&256>ya[0][va[0]+0].value&&(ni.Qb=1,ni.qb+=ya[0][va[0]+0].value<<8)),ni.jc=!ni.Qb&&6>kf,ni.jc){var xl,Yi=ni;for(xl=0;xl<Cn;++xl){var Ns=xl,xs=Yi.pd[Ns],Cl=Yi.G[0][Yi.H[0]+Ns];256<=Cl.value?(xs.g=Cl.g+256,xs.value=Cl.value):(xs.g=0,xs.value=0,Ns>>=Je(Cl,8,xs),Ns>>=Je(Yi.G[1][Yi.H[1]+Ns],16,xs),Ns>>=Je(Yi.G[2][Yi.H[2]+Ns],0,xs),Je(Yi.G[3][Yi.H[3]+Ns],24,xs))}}}En.vc=Ln,En.Wb=tr,En.Ya=bl,En.yc=Xu,Fe=1;break e}Fe=0}if(!(V=Fe)){I.a=3;break t}if(0<dt){if(G.ua=1<<dt,!$t(G.Wa,dt)){I.a=1,V=0;break t}}else G.ua=0;var ih=I,Hf=j,g2=B,sh=ih.s,oh=sh.xc;if(ih.c=Hf,ih.i=g2,sh.md=qt(Hf,oh),sh.wc=oh==0?-1:(1<<oh)-1,y){I.xb=$0;break t}if((it=s(j*B))==null){I.a=1,V=0;break t}V=(V=$n(I,it,0,j,B,B,null))&&!U.h;break t}return V?(D!=null?D[0]=it:(t(it==null),t(y)),I.$=0,y||ir(G)):ir(G),V}function hi(c,h){var y=c.c*c.i,I=y+h+16*h;return t(c.c<=h),c.V=s(I),c.V==null?(c.Ta=null,c.Ua=0,c.a=1,0):(c.Ta=c.V,c.Ua=c.Ba+y+h,1)}function ls(c,h){var y=c.C,I=h-y,D=c.V,V=c.Ba+c.c*y;for(t(h<=c.l.o);0<I;){var j=16<I?16:I,B=c.l.ma,U=c.l.width,G=U*j,it=B.ca,dt=B.tb+U*y,ft=c.Ta,lt=c.Ua;fn(c,j,D,V),tn(ft,lt,it,dt,G),nr(B,y,y+j,it,dt,U),I-=j,D+=j*c.c,y+=j}t(y==h),c.C=c.Ma=h}function Hr(){this.ub=this.yd=this.td=this.Rb=0}function Fi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function di(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function fi(){this.Yb=function(){var c=[];return function h(y,I,D){for(var V=D[I],j=0;j<V&&(y.push(D.length>I+1?[]:0),!(D.length<I+1));j++)h(y[j],I+1,D)}(c,0,[3,11]),c}()}function Wr(){this.jb=s(3),this.Wc=l([4,8],fi),this.Xc=l([4,17],fi)}function so(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function us(){this.ld=this.La=this.dd=this.tc=0}function oo(){this.Na=this.la=0}function $o(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function hs(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ao(){this.uc=this.M=this.Nb=0,this.wa=Array(new us),this.Y=0,this.ya=Array(new hs),this.aa=0,this.l=new Mi}function ds(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Go(){this.cb=this.a=0,this.sc="",this.m=new mt,this.Od=new Hr,this.Kc=new Fi,this.ed=new so,this.Qa=new di,this.Ic=this.$c=this.Aa=0,this.D=new ao,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,mt),this.ia=0,this.pb=o(4,$o),this.Pa=new Wr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ds),this.Hd=0,this.rb=Array(new oo),this.sb=0,this.wa=Array(new us),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new hs),this.L=this.aa=0,this.gd=l([4,2],us),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Mi(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ko(){var c=new Go;return c!=null&&(c.a=0,c.sc="OK",c.cb=0,c.Xb=0,hc||(hc=pi)),c}function Ge(c,h,y){return c.a==0&&(c.a=h,c.sc=y,c.cb=0),0}function yr(c,h,y){return 3<=y&&c[h+0]==157&&c[h+1]==1&&c[h+2]==42}function Kn(c,h){if(c==null)return 0;if(c.a=0,c.sc="OK",h==null)return Ge(c,2,"null VP8Io passed to VP8GetHeaders()");var y=h.data,I=h.w,D=h.ha;if(4>D)return Ge(c,7,"Truncated header.");var V=y[I+0]|y[I+1]<<8|y[I+2]<<16,j=c.Od;if(j.Rb=!(1&V),j.td=V>>1&7,j.yd=V>>4&1,j.ub=V>>5,3<j.td)return Ge(c,3,"Incorrect keyframe parameters.");if(!j.yd)return Ge(c,4,"Frame not displayable.");I+=3,D-=3;var B=c.Kc;if(j.Rb){if(7>D)return Ge(c,7,"cannot parse picture header");if(!yr(y,I,D))return Ge(c,3,"Bad code word");B.c=16383&(y[I+4]<<8|y[I+3]),B.Td=y[I+4]>>6,B.i=16383&(y[I+6]<<8|y[I+5]),B.Ud=y[I+6]>>6,I+=7,D-=7,c.za=B.c+15>>4,c.Ub=B.i+15>>4,h.width=B.c,h.height=B.i,h.Da=0,h.j=0,h.v=0,h.va=h.width,h.o=h.height,h.da=0,h.ib=h.width,h.hb=h.height,h.U=h.width,h.T=h.height,i((V=c.Pa).jb,0,255,V.jb.length),t((V=c.Qa)!=null),V.Cb=0,V.Bb=0,V.Fb=1,i(V.Zb,0,0,V.Zb.length),i(V.Lb,0,0,V.Lb)}if(j.ub>D)return Ge(c,7,"bad partition length");ct(V=c.m,y,I,j.ub),I+=j.ub,D-=j.ub,j.Rb&&(B.Ld=ht(V),B.Kd=ht(V)),B=c.Qa;var U,G=c.Pa;if(t(V!=null),t(B!=null),B.Cb=ht(V),B.Cb){if(B.Bb=ht(V),ht(V)){for(B.Fb=ht(V),U=0;4>U;++U)B.Zb[U]=ht(V)?Y(V,7):0;for(U=0;4>U;++U)B.Lb[U]=ht(V)?Y(V,6):0}if(B.Bb)for(U=0;3>U;++U)G.jb[U]=ht(V)?J(V,8):255}else B.Bb=0;if(V.Ka)return Ge(c,3,"cannot parse segment header");if((B=c.ed).zd=ht(V),B.Tb=J(V,6),B.wb=J(V,3),B.Pc=ht(V),B.Pc&&ht(V)){for(G=0;4>G;++G)ht(V)&&(B.vd[G]=Y(V,6));for(G=0;4>G;++G)ht(V)&&(B.od[G]=Y(V,6))}if(c.L=B.Tb==0?0:B.zd?1:2,V.Ka)return Ge(c,3,"cannot parse filter header");var it=D;if(D=U=I,I=U+it,B=it,c.Xb=(1<<J(c.m,2))-1,it<3*(G=c.Xb))y=7;else{for(U+=3*G,B-=3*G,it=0;it<G;++it){var dt=y[D+0]|y[D+1]<<8|y[D+2]<<16;dt>B&&(dt=B),ct(c.Jc[+it],y,U,dt),U+=dt,B-=dt,D+=3}ct(c.Jc[+G],y,U,B),y=U<I?0:5}if(y!=0)return Ge(c,y,"cannot parse partitions");for(y=J(U=c.m,7),D=ht(U)?Y(U,4):0,I=ht(U)?Y(U,4):0,B=ht(U)?Y(U,4):0,G=ht(U)?Y(U,4):0,U=ht(U)?Y(U,4):0,it=c.Qa,dt=0;4>dt;++dt){if(it.Cb){var ft=it.Zb[dt];it.Fb||(ft+=y)}else{if(0<dt){c.pb[dt]=c.pb[0];continue}ft=y}var lt=c.pb[dt];lt.Sc[0]=Yu[wr(ft+D,127)],lt.Sc[1]=Ju[wr(ft+0,127)],lt.Eb[0]=2*Yu[wr(ft+I,127)],lt.Eb[1]=101581*Ju[wr(ft+B,127)]>>16,8>lt.Eb[1]&&(lt.Eb[1]=8),lt.Qc[0]=Yu[wr(ft+G,117)],lt.Qc[1]=Ju[wr(ft+U,127)],lt.lc=ft+U}if(!j.Rb)return Ge(c,4,"Not a key frame.");for(ht(V),j=c.Pa,y=0;4>y;++y){for(D=0;8>D;++D)for(I=0;3>I;++I)for(B=0;11>B;++B)G=pt(V,H0[y][D][I][B])?J(V,8):U0[y][D][I][B],j.Wc[y][D].Yb[I][B]=G;for(D=0;17>D;++D)j.Xc[y][D]=j.Wc[y][W0[D]]}return c.kc=ht(V),c.kc&&(c.Bd=J(V,8)),c.cb=1}function pi(c,h,y,I,D,V,j){var B=h[D].Yb[y];for(y=0;16>D;++D){if(!pt(c,B[y+0]))return D;for(;!pt(c,B[y+1]);)if(B=h[++D].Yb[0],y=0,D==16)return 16;var U=h[D+1].Yb;if(pt(c,B[y+2])){var G=c,it=0;if(pt(G,(ft=B)[(dt=y)+3]))if(pt(G,ft[dt+6])){for(B=0,dt=2*(it=pt(G,ft[dt+8]))+(ft=pt(G,ft[dt+9+it])),it=0,ft=B0[dt];ft[B];++B)it+=it+pt(G,ft[B]);it+=3+(8<<dt)}else pt(G,ft[dt+7])?(it=7+2*pt(G,165),it+=pt(G,145)):it=5+pt(G,159);else it=pt(G,ft[dt+4])?3+pt(G,ft[dt+5]):2;B=U[2]}else it=1,B=U[1];U=j+q0[D],0>(G=c).b&&ut(G);var dt,ft=G.b,lt=(dt=G.Ca>>1)-(G.I>>ft)>>31;--G.b,G.Ca+=lt,G.Ca|=1,G.I-=(dt+1&lt)<<ft,V[U]=((it^lt)-lt)*I[(0<D)+0]}return 16}function $r(c){var h=c.rb[c.sb-1];h.la=0,h.Na=0,i(c.zc,0,0,c.zc.length),c.ja=0}function co(c,h){if(c==null)return 0;if(h==null)return Ge(c,2,"NULL VP8Io parameter in VP8Decode().");if(!c.cb&&!Kn(c,h))return 0;if(t(c.cb),h.ac==null||h.ac(h)){h.ob&&(c.L=0);var y=_l[c.L];if(c.L==2?(c.yb=0,c.zb=0):(c.yb=h.v-y>>4,c.zb=h.j-y>>4,0>c.yb&&(c.yb=0),0>c.zb&&(c.zb=0)),c.Va=h.o+15+y>>4,c.Hb=h.va+15+y>>4,c.Hb>c.za&&(c.Hb=c.za),c.Va>c.Ub&&(c.Va=c.Ub),0<c.L){var I=c.ed;for(y=0;4>y;++y){var D;if(c.Qa.Cb){var V=c.Qa.Lb[y];c.Qa.Fb||(V+=I.Tb)}else V=I.Tb;for(D=0;1>=D;++D){var j=c.gd[y][D],B=V;if(I.Pc&&(B+=I.vd[0],D&&(B+=I.od[0])),0<(B=0>B?0:63<B?63:B)){var U=B;0<I.wb&&(U=4<I.wb?U>>2:U>>1)>9-I.wb&&(U=9-I.wb),1>U&&(U=1),j.dd=U,j.tc=2*B+U,j.ld=40<=B?2:15<=B?1:0}else j.tc=0;j.La=D}}}y=0}else Ge(c,6,"Frame setup failed"),y=c.a;if(y=y==0){if(y){c.$c=0,0<c.Aa||(c.Ic=i2);t:{y=c.Ic,I=4*(U=c.za);var G=32*U,it=U+1,dt=0<c.L?U*(0<c.Aa?2:1):0,ft=(c.Aa==2?2:1)*U;if((j=I+832+(D=3*(16*y+_l[c.L])/2*G)+(V=c.Fa!=null&&0<c.Fa.length?c.Kc.c*c.Kc.i:0))!=j)y=0;else{if(j>c.Vb){if(c.Vb=0,c.Ec=s(j),c.Fc=0,c.Ec==null){y=Ge(c,1,"no memory during frame initialization.");break t}c.Vb=j}j=c.Ec,B=c.Fc,c.Ac=j,c.Bc=B,B+=I,c.Gd=o(G,ds),c.Hd=0,c.rb=o(it+1,oo),c.sb=1,c.wa=dt?o(dt,us):null,c.Y=0,c.D.Nb=0,c.D.wa=c.wa,c.D.Y=c.Y,0<c.Aa&&(c.D.Y+=U),t(!0),c.oc=j,c.pc=B,B+=832,c.ya=o(ft,hs),c.aa=0,c.D.ya=c.ya,c.D.aa=c.aa,c.Aa==2&&(c.D.aa+=U),c.R=16*U,c.B=8*U,U=(G=_l[c.L])*c.R,G=G/2*c.B,c.sa=j,c.ta=B+U,c.qa=c.sa,c.ra=c.ta+16*y*c.R+G,c.Ha=c.qa,c.Ia=c.ra+8*y*c.B+G,c.$c=0,B+=D,c.mb=V?j:null,c.nb=V?B:null,t(B+V<=c.Fc+c.Vb),$r(c),i(c.Ac,c.Bc,0,I),y=1}}if(y){if(h.ka=0,h.y=c.sa,h.O=c.ta,h.f=c.qa,h.N=c.ra,h.ea=c.Ha,h.Vd=c.Ia,h.fa=c.R,h.Rc=c.B,h.F=null,h.J=0,!hl){for(y=-255;255>=y;++y)gn[255+y]=0>y?-y:y;for(y=-1020;1020>=y;++y)$i[1020+y]=-128>y?-128:127<y?127:y;for(y=-112;112>=y;++y)uc[112+y]=-16>y?-16:15<y?15:y;for(y=-255;510>=y;++y)ga[255+y]=0>y?0:255<y?255:y;hl=1}da=Qa,Wi=Jo,ac=Qo,Zn=Ja,Fr=Xo,Ze=Yo,fa=Zr,ul=wi,cc=go,wo=ms,_o=ia,bs=_i,bo=bi,pa=mo,Ao=ps,As=Jn,lc=kr,Mr=gs,ei[0]=Yn,ei[1]=Jr,ei[2]=Za,ei[3]=lo,ei[4]=uo,ei[5]=Lr,ei[6]=gi,ei[7]=fs,ei[8]=Ve,ei[9]=ho,Es[0]=Qr,Es[1]=ta,Es[2]=Cr,Es[3]=Vi,Es[4]=An,Es[5]=Xa,Es[6]=ea,Gi[0]=Xr,Gi[1]=Zo,Gi[2]=tc,Gi[3]=fo,Gi[4]=Rr,Gi[5]=na,Gi[6]=sr,y=1}else y=0}y&&(y=function(lt,bt){for(lt.M=0;lt.M<lt.Va;++lt.M){var yt,st=lt.Jc[lt.M&lt.Xb],ot=lt.m,wt=lt;for(yt=0;yt<wt.za;++yt){var Et=ot,_t=wt,Vt=_t.Ac,Dt=_t.Bc+4*yt,Qt=_t.zc,Ot=_t.ya[_t.aa+yt];if(_t.Qa.Bb?Ot.$b=pt(Et,_t.Pa.jb[0])?2+pt(Et,_t.Pa.jb[2]):pt(Et,_t.Pa.jb[1]):Ot.$b=0,_t.kc&&(Ot.Ad=pt(Et,_t.Bd)),Ot.Za=!pt(Et,145)+0,Ot.Za){var Pe=Ot.Ob,Le=0;for(_t=0;4>_t;++_t){var Ie,me=Qt[0+_t];for(Ie=0;4>Ie;++Ie){me=z0[Vt[Dt+Ie]][me];for(var Fe=_f[pt(Et,me[0])];0<Fe;)Fe=_f[2*Fe+pt(Et,me[Fe])];me=-Fe,Vt[Dt+Ie]=me}r(Pe,Le,Vt,Dt,4),Le+=4,Qt[0+_t]=me}}else me=pt(Et,156)?pt(Et,128)?1:3:pt(Et,163)?2:0,Ot.Ob[0]=me,i(Vt,Dt,me,4),i(Qt,0,me,4);Ot.Dd=pt(Et,142)?pt(Et,114)?pt(Et,183)?1:3:2:0}if(wt.m.Ka)return Ge(lt,7,"Premature end-of-partition0 encountered.");for(;lt.ja<lt.za;++lt.ja){if(wt=st,Et=(ot=lt).rb[ot.sb-1],Vt=ot.rb[ot.sb+ot.ja],yt=ot.ya[ot.aa+ot.ja],Dt=ot.kc?yt.Ad:0)Et.la=Vt.la=0,yt.Za||(Et.Na=Vt.Na=0),yt.Hc=0,yt.Gc=0,yt.ia=0;else{var Oe,ue;if(Et=Vt,Vt=wt,Dt=ot.Pa.Xc,Qt=ot.ya[ot.aa+ot.ja],Ot=ot.pb[Qt.$b],_t=Qt.ad,Pe=0,Le=ot.rb[ot.sb-1],me=Ie=0,i(_t,Pe,0,384),Qt.Za)var an=0,lr=Dt[3];else{Fe=s(16);var cn=Et.Na+Le.Na;if(cn=hc(Vt,Dt[1],cn,Ot.Eb,0,Fe,0),Et.Na=Le.Na=(0<cn)+0,1<cn)da(Fe,0,_t,Pe);else{var ur=Fe[0]+3>>3;for(Fe=0;256>Fe;Fe+=16)_t[Pe+Fe]=ur}an=1,lr=Dt[0]}var Re=15&Et.la,br=15&Le.la;for(Fe=0;4>Fe;++Fe){var Ar=1&br;for(ur=ue=0;4>ur;++ur)Re=Re>>1|(Ar=(cn=hc(Vt,lr,cn=Ar+(1&Re),Ot.Sc,an,_t,Pe))>an)<<7,ue=ue<<2|(3<cn?3:1<cn?2:_t[Pe+0]!=0),Pe+=16;Re>>=4,br=br>>1|Ar<<7,Ie=(Ie<<8|ue)>>>0}for(lr=Re,an=br>>4,Oe=0;4>Oe;Oe+=2){for(ue=0,Re=Et.la>>4+Oe,br=Le.la>>4+Oe,Fe=0;2>Fe;++Fe){for(Ar=1&br,ur=0;2>ur;++ur)cn=Ar+(1&Re),Re=Re>>1|(Ar=0<(cn=hc(Vt,Dt[2],cn,Ot.Qc,0,_t,Pe)))<<3,ue=ue<<2|(3<cn?3:1<cn?2:_t[Pe+0]!=0),Pe+=16;Re>>=2,br=br>>1|Ar<<5}me|=ue<<4*Oe,lr|=Re<<4<<Oe,an|=(240&br)<<Oe}Et.la=lr,Le.la=an,Qt.Hc=Ie,Qt.Gc=me,Qt.ia=43690&me?0:Ot.ia,Dt=!(Ie|me)}if(0<ot.L&&(ot.wa[ot.Y+ot.ja]=ot.gd[yt.$b][yt.Za],ot.wa[ot.Y+ot.ja].La|=!Dt),wt.Ka)return Ge(lt,7,"Premature end-of-file encountered.")}if($r(lt),ot=bt,wt=1,yt=(st=lt).D,Et=0<st.L&&st.M>=st.zb&&st.M<=st.Va,st.Aa==0)t:{if(yt.M=st.M,yt.uc=Et,nc(st,yt),wt=1,yt=(ue=st.D).Nb,Et=(me=_l[st.L])*st.R,Vt=me/2*st.B,Fe=16*yt*st.R,ur=8*yt*st.B,Dt=st.sa,Qt=st.ta-Et+Fe,Ot=st.qa,_t=st.ra-Vt+ur,Pe=st.Ha,Le=st.Ia-Vt+ur,br=(Re=ue.M)==0,Ie=Re>=st.Va-1,st.Aa==2&&nc(st,ue),ue.uc)for(Ar=(cn=st).D.M,t(cn.D.uc),ue=cn.yb;ue<cn.Hb;++ue){an=ue,lr=Ar;var En=(Ln=(Qe=cn).D).Nb;Oe=Qe.R;var Ln=Ln.wa[Ln.Y+an],tr=Qe.sa,qr=Qe.ta+16*En*Oe+16*an,Ei=Ln.dd,In=Ln.tc;if(In!=0)if(t(3<=In),Qe.L==1)0<an&&As(tr,qr,Oe,In+4),Ln.La&&Mr(tr,qr,Oe,In),0<lr&&Ao(tr,qr,Oe,In+4),Ln.La&&lc(tr,qr,Oe,In);else{var Ki=Qe.B,Eo=Qe.qa,ma=Qe.ra+8*En*Ki+8*an,Ss=Qe.Ha,Qe=Qe.Ia+8*En*Ki+8*an;En=Ln.ld,0<an&&(ul(tr,qr,Oe,In+4,Ei,En),wo(Eo,ma,Ss,Qe,Ki,In+4,Ei,En)),Ln.La&&(bs(tr,qr,Oe,In,Ei,En),pa(Eo,ma,Ss,Qe,Ki,In,Ei,En)),0<lr&&(fa(tr,qr,Oe,In+4,Ei,En),cc(Eo,ma,Ss,Qe,Ki,In+4,Ei,En)),Ln.La&&(_o(tr,qr,Oe,In,Ei,En),bo(Eo,ma,Ss,Qe,Ki,In,Ei,En))}}if(st.ia&&alert("todo:DitherRow"),ot.put!=null){if(ue=16*Re,Re=16*(Re+1),br?(ot.y=st.sa,ot.O=st.ta+Fe,ot.f=st.qa,ot.N=st.ra+ur,ot.ea=st.Ha,ot.W=st.Ia+ur):(ue-=me,ot.y=Dt,ot.O=Qt,ot.f=Ot,ot.N=_t,ot.ea=Pe,ot.W=Le),Ie||(Re-=me),Re>ot.o&&(Re=ot.o),ot.F=null,ot.J=null,st.Fa!=null&&0<st.Fa.length&&ue<Re&&(ot.J=vs(st,ot,ue,Re-ue),ot.F=st.mb,ot.F==null&&ot.F.length==0)){wt=Ge(st,3,"Could not decode alpha data.");break t}ue<ot.j&&(me=ot.j-ue,ue=ot.j,t(!(1&me)),ot.O+=st.R*me,ot.N+=st.B*(me>>1),ot.W+=st.B*(me>>1),ot.F!=null&&(ot.J+=ot.width*me)),ue<Re&&(ot.O+=ot.v,ot.N+=ot.v>>1,ot.W+=ot.v>>1,ot.F!=null&&(ot.J+=ot.v),ot.ka=ue-ot.j,ot.U=ot.va-ot.v,ot.T=Re-ue,wt=ot.put(ot))}yt+1!=st.Ic||Ie||(r(st.sa,st.ta-Et,Dt,Qt+16*st.R,Et),r(st.qa,st.ra-Vt,Ot,_t+8*st.B,Vt),r(st.Ha,st.Ia-Vt,Pe,Le+8*st.B,Vt))}if(!wt)return Ge(lt,6,"Output aborted.")}return 1}(c,h)),h.bc!=null&&h.bc(h),y&=1}return y?(c.cb=0,y):0}function fe(c,h,y,I,D){D=c[h+y+32*I]+(D>>3),c[h+y+32*I]=-256&D?0>D?0:255:D}function Gr(c,h,y,I,D,V){fe(c,h,0,y,I+D),fe(c,h,1,y,I+V),fe(c,h,2,y,I-V),fe(c,h,3,y,I-D)}function on(c){return(20091*c>>16)+c}function Kr(c,h,y,I){var D,V=0,j=s(16);for(D=0;4>D;++D){var B=c[h+0]+c[h+8],U=c[h+0]-c[h+8],G=(35468*c[h+4]>>16)-on(c[h+12]),it=on(c[h+4])+(35468*c[h+12]>>16);j[V+0]=B+it,j[V+1]=U+G,j[V+2]=U-G,j[V+3]=B-it,V+=4,h++}for(D=V=0;4>D;++D)B=(c=j[V+0]+4)+j[V+8],U=c-j[V+8],G=(35468*j[V+4]>>16)-on(j[V+12]),fe(y,I,0,0,B+(it=on(j[V+4])+(35468*j[V+12]>>16))),fe(y,I,1,0,U+G),fe(y,I,2,0,U-G),fe(y,I,3,0,B-it),V++,I+=32}function Yo(c,h,y,I){var D=c[h+0]+4,V=35468*c[h+4]>>16,j=on(c[h+4]),B=35468*c[h+1]>>16;Gr(y,I,0,D+j,c=on(c[h+1]),B),Gr(y,I,1,D+V,c,B),Gr(y,I,2,D-V,c,B),Gr(y,I,3,D-j,c,B)}function Jo(c,h,y,I,D){Kr(c,h,y,I),D&&Kr(c,h+16,y,I+4)}function Qo(c,h,y,I){Wi(c,h+0,y,I,1),Wi(c,h+32,y,I+128,1)}function Ja(c,h,y,I){var D;for(c=c[h+0]+4,D=0;4>D;++D)for(h=0;4>h;++h)fe(y,I,h,D,c)}function Xo(c,h,y,I){c[h+0]&&Zn(c,h+0,y,I),c[h+16]&&Zn(c,h+16,y,I+4),c[h+32]&&Zn(c,h+32,y,I+128),c[h+48]&&Zn(c,h+48,y,I+128+4)}function Qa(c,h,y,I){var D,V=s(16);for(D=0;4>D;++D){var j=c[h+0+D]+c[h+12+D],B=c[h+4+D]+c[h+8+D],U=c[h+4+D]-c[h+8+D],G=c[h+0+D]-c[h+12+D];V[0+D]=j+B,V[8+D]=j-B,V[4+D]=G+U,V[12+D]=G-U}for(D=0;4>D;++D)j=(c=V[0+4*D]+3)+V[3+4*D],B=V[1+4*D]+V[2+4*D],U=V[1+4*D]-V[2+4*D],G=c-V[3+4*D],y[I+0]=j+B>>3,y[I+16]=G+U>>3,y[I+32]=j-B>>3,y[I+48]=G-U>>3,I+=64}function Yr(c,h,y){var I,D=h-32,V=_r,j=255-c[D-1];for(I=0;I<y;++I){var B,U=V,G=j+c[h-1];for(B=0;B<y;++B)c[h+B]=U[G+c[D+B]];h+=32}}function Jr(c,h){Yr(c,h,4)}function Zo(c,h){Yr(c,h,8)}function ta(c,h){Yr(c,h,16)}function Cr(c,h){var y;for(y=0;16>y;++y)r(c,h+32*y,c,h-32,16)}function Vi(c,h){var y;for(y=16;0<y;--y)i(c,h,c[h-1],16),h+=32}function ji(c,h,y){var I;for(I=0;16>I;++I)i(h,y+32*I,c,16)}function Qr(c,h){var y,I=16;for(y=0;16>y;++y)I+=c[h-1+32*y]+c[h+y-32];ji(I>>5,c,h)}function An(c,h){var y,I=8;for(y=0;16>y;++y)I+=c[h-1+32*y];ji(I>>4,c,h)}function Xa(c,h){var y,I=8;for(y=0;16>y;++y)I+=c[h+y-32];ji(I>>4,c,h)}function ea(c,h){ji(128,c,h)}function Wt(c,h,y){return c+2*h+y+2>>2}function Za(c,h){var y,I=h-32;for(I=new Uint8Array([Wt(c[I-1],c[I+0],c[I+1]),Wt(c[I+0],c[I+1],c[I+2]),Wt(c[I+1],c[I+2],c[I+3]),Wt(c[I+2],c[I+3],c[I+4])]),y=0;4>y;++y)r(c,h+32*y,I,0,I.length)}function lo(c,h){var y=c[h-1],I=c[h-1+32],D=c[h-1+64],V=c[h-1+96];Tt(c,h+0,16843009*Wt(c[h-1-32],y,I)),Tt(c,h+32,16843009*Wt(y,I,D)),Tt(c,h+64,16843009*Wt(I,D,V)),Tt(c,h+96,16843009*Wt(D,V,V))}function Yn(c,h){var y,I=4;for(y=0;4>y;++y)I+=c[h+y-32]+c[h-1+32*y];for(I>>=3,y=0;4>y;++y)i(c,h+32*y,I,4)}function uo(c,h){var y=c[h-1+0],I=c[h-1+32],D=c[h-1+64],V=c[h-1-32],j=c[h+0-32],B=c[h+1-32],U=c[h+2-32],G=c[h+3-32];c[h+0+96]=Wt(I,D,c[h-1+96]),c[h+1+96]=c[h+0+64]=Wt(y,I,D),c[h+2+96]=c[h+1+64]=c[h+0+32]=Wt(V,y,I),c[h+3+96]=c[h+2+64]=c[h+1+32]=c[h+0+0]=Wt(j,V,y),c[h+3+64]=c[h+2+32]=c[h+1+0]=Wt(B,j,V),c[h+3+32]=c[h+2+0]=Wt(U,B,j),c[h+3+0]=Wt(G,U,B)}function gi(c,h){var y=c[h+1-32],I=c[h+2-32],D=c[h+3-32],V=c[h+4-32],j=c[h+5-32],B=c[h+6-32],U=c[h+7-32];c[h+0+0]=Wt(c[h+0-32],y,I),c[h+1+0]=c[h+0+32]=Wt(y,I,D),c[h+2+0]=c[h+1+32]=c[h+0+64]=Wt(I,D,V),c[h+3+0]=c[h+2+32]=c[h+1+64]=c[h+0+96]=Wt(D,V,j),c[h+3+32]=c[h+2+64]=c[h+1+96]=Wt(V,j,B),c[h+3+64]=c[h+2+96]=Wt(j,B,U),c[h+3+96]=Wt(B,U,U)}function Lr(c,h){var y=c[h-1+0],I=c[h-1+32],D=c[h-1+64],V=c[h-1-32],j=c[h+0-32],B=c[h+1-32],U=c[h+2-32],G=c[h+3-32];c[h+0+0]=c[h+1+64]=V+j+1>>1,c[h+1+0]=c[h+2+64]=j+B+1>>1,c[h+2+0]=c[h+3+64]=B+U+1>>1,c[h+3+0]=U+G+1>>1,c[h+0+96]=Wt(D,I,y),c[h+0+64]=Wt(I,y,V),c[h+0+32]=c[h+1+96]=Wt(y,V,j),c[h+1+32]=c[h+2+96]=Wt(V,j,B),c[h+2+32]=c[h+3+96]=Wt(j,B,U),c[h+3+32]=Wt(B,U,G)}function fs(c,h){var y=c[h+0-32],I=c[h+1-32],D=c[h+2-32],V=c[h+3-32],j=c[h+4-32],B=c[h+5-32],U=c[h+6-32],G=c[h+7-32];c[h+0+0]=y+I+1>>1,c[h+1+0]=c[h+0+64]=I+D+1>>1,c[h+2+0]=c[h+1+64]=D+V+1>>1,c[h+3+0]=c[h+2+64]=V+j+1>>1,c[h+0+32]=Wt(y,I,D),c[h+1+32]=c[h+0+96]=Wt(I,D,V),c[h+2+32]=c[h+1+96]=Wt(D,V,j),c[h+3+32]=c[h+2+96]=Wt(V,j,B),c[h+3+64]=Wt(j,B,U),c[h+3+96]=Wt(B,U,G)}function ho(c,h){var y=c[h-1+0],I=c[h-1+32],D=c[h-1+64],V=c[h-1+96];c[h+0+0]=y+I+1>>1,c[h+2+0]=c[h+0+32]=I+D+1>>1,c[h+2+32]=c[h+0+64]=D+V+1>>1,c[h+1+0]=Wt(y,I,D),c[h+3+0]=c[h+1+32]=Wt(I,D,V),c[h+3+32]=c[h+1+64]=Wt(D,V,V),c[h+3+64]=c[h+2+64]=c[h+0+96]=c[h+1+96]=c[h+2+96]=c[h+3+96]=V}function Ve(c,h){var y=c[h-1+0],I=c[h-1+32],D=c[h-1+64],V=c[h-1+96],j=c[h-1-32],B=c[h+0-32],U=c[h+1-32],G=c[h+2-32];c[h+0+0]=c[h+2+32]=y+j+1>>1,c[h+0+32]=c[h+2+64]=I+y+1>>1,c[h+0+64]=c[h+2+96]=D+I+1>>1,c[h+0+96]=V+D+1>>1,c[h+3+0]=Wt(B,U,G),c[h+2+0]=Wt(j,B,U),c[h+1+0]=c[h+3+32]=Wt(y,j,B),c[h+1+32]=c[h+3+64]=Wt(I,y,j),c[h+1+64]=c[h+3+96]=Wt(D,I,y),c[h+1+96]=Wt(V,D,I)}function tc(c,h){var y;for(y=0;8>y;++y)r(c,h+32*y,c,h-32,8)}function fo(c,h){var y;for(y=0;8>y;++y)i(c,h,c[h-1],8),h+=32}function mi(c,h,y){var I;for(I=0;8>I;++I)i(h,y+32*I,c,8)}function Xr(c,h){var y,I=8;for(y=0;8>y;++y)I+=c[h+y-32]+c[h-1+32*y];mi(I>>4,c,h)}function na(c,h){var y,I=4;for(y=0;8>y;++y)I+=c[h+y-32];mi(I>>3,c,h)}function Rr(c,h){var y,I=4;for(y=0;8>y;++y)I+=c[h-1+32*y];mi(I>>3,c,h)}function sr(c,h){mi(128,c,h)}function Bi(c,h,y){var I=c[h-y],D=c[h+0],V=3*(D-I)+Hu[1020+c[h-2*y]-c[h+y]],j=dl[112+(V+4>>3)];c[h-y]=_r[255+I+dl[112+(V+3>>3)]],c[h+0]=_r[255+D-j]}function ra(c,h,y,I){var D=c[h+0],V=c[h+y];return jr[255+c[h-2*y]-c[h-y]]>I||jr[255+V-D]>I}function yi(c,h,y,I){return 4*jr[255+c[h-y]-c[h+0]]+jr[255+c[h-2*y]-c[h+y]]<=I}function po(c,h,y,I,D){var V=c[h-3*y],j=c[h-2*y],B=c[h-y],U=c[h+0],G=c[h+y],it=c[h+2*y],dt=c[h+3*y];return 4*jr[255+B-U]+jr[255+j-G]>I?0:jr[255+c[h-4*y]-V]<=D&&jr[255+V-j]<=D&&jr[255+j-B]<=D&&jr[255+dt-it]<=D&&jr[255+it-G]<=D&&jr[255+G-U]<=D}function ps(c,h,y,I){var D=2*I+1;for(I=0;16>I;++I)yi(c,h+I,y,D)&&Bi(c,h+I,y)}function Jn(c,h,y,I){var D=2*I+1;for(I=0;16>I;++I)yi(c,h+I*y,1,D)&&Bi(c,h+I*y,1)}function kr(c,h,y,I){var D;for(D=3;0<D;--D)ps(c,h+=4*y,y,I)}function gs(c,h,y,I){var D;for(D=3;0<D;--D)Jn(c,h+=4,y,I)}function vi(c,h,y,I,D,V,j,B){for(V=2*V+1;0<D--;){if(po(c,h,y,V,j))if(ra(c,h,y,B))Bi(c,h,y);else{var U=c,G=h,it=y,dt=U[G-2*it],ft=U[G-it],lt=U[G+0],bt=U[G+it],yt=U[G+2*it],st=27*(wt=Hu[1020+3*(lt-ft)+Hu[1020+dt-bt]])+63>>7,ot=18*wt+63>>7,wt=9*wt+63>>7;U[G-3*it]=_r[255+U[G-3*it]+wt],U[G-2*it]=_r[255+dt+ot],U[G-it]=_r[255+ft+st],U[G+0]=_r[255+lt-st],U[G+it]=_r[255+bt-ot],U[G+2*it]=_r[255+yt-wt]}h+=I}}function or(c,h,y,I,D,V,j,B){for(V=2*V+1;0<D--;){if(po(c,h,y,V,j))if(ra(c,h,y,B))Bi(c,h,y);else{var U=c,G=h,it=y,dt=U[G-it],ft=U[G+0],lt=U[G+it],bt=dl[112+((yt=3*(ft-dt))+4>>3)],yt=dl[112+(yt+3>>3)],st=bt+1>>1;U[G-2*it]=_r[255+U[G-2*it]+st],U[G-it]=_r[255+dt+yt],U[G+0]=_r[255+ft-bt],U[G+it]=_r[255+lt-st]}h+=I}}function Zr(c,h,y,I,D,V){vi(c,h,y,1,16,I,D,V)}function wi(c,h,y,I,D,V){vi(c,h,1,y,16,I,D,V)}function ia(c,h,y,I,D,V){var j;for(j=3;0<j;--j)or(c,h+=4*y,y,1,16,I,D,V)}function _i(c,h,y,I,D,V){var j;for(j=3;0<j;--j)or(c,h+=4,1,y,16,I,D,V)}function go(c,h,y,I,D,V,j,B){vi(c,h,D,1,8,V,j,B),vi(y,I,D,1,8,V,j,B)}function ms(c,h,y,I,D,V,j,B){vi(c,h,1,D,8,V,j,B),vi(y,I,1,D,8,V,j,B)}function bi(c,h,y,I,D,V,j,B){or(c,h+4*D,D,1,8,V,j,B),or(y,I+4*D,D,1,8,V,j,B)}function mo(c,h,y,I,D,V,j,B){or(c,h+4,1,D,8,V,j,B),or(y,I+4,1,D,8,V,j,B)}function qi(){this.ba=new Pn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new de,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function vr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ys(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function yo(){this.ua=0,this.Wa=new rt,this.vb=new rt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new W,this.yc=new A}function sa(){this.xb=this.a=0,this.l=new Mi,this.ca=new Pn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new k,this.Pb=0,this.wd=new k,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new yo,this.ab=0,this.gc=o(4,ys),this.Oc=0}function Ui(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Mi,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Dr(c,h,y,I,D,V,j){for(c=c==null?0:c[h+0],h=0;h<j;++h)D[V+h]=c+y[I+h]&255,c=D[V+h]}function pn(c,h,y,I,D,V,j){var B;if(c==null)Dr(null,null,y,I,D,V,j);else for(B=0;B<j;++B)D[V+B]=c[h+B]+y[I+B]&255}function ti(c,h,y,I,D,V,j){if(c==null)Dr(null,null,y,I,D,V,j);else{var B,U=c[h+0],G=U,it=U;for(B=0;B<j;++B)G=it+(U=c[h+B])-G,it=y[I+B]+(-256&G?0>G?0:255:G)&255,G=U,D[V+B]=it}}function vs(c,h,y,I){var D=h.width,V=h.o;if(t(c!=null&&h!=null),0>y||0>=I||y+I>V)return null;if(!c.Cc){if(c.ga==null){var j;if(c.ga=new Ui,(j=c.ga==null)||(j=h.width*h.o,t(c.Gb.length==0),c.Gb=s(j),c.Uc=0,c.Gb==null?j=0:(c.mb=c.Gb,c.nb=c.Uc,c.rc=null,j=1),j=!j),!j){j=c.ga;var B=c.Fa,U=c.P,G=c.qc,it=c.mb,dt=c.nb,ft=U+1,lt=G-1,bt=j.l;if(t(B!=null&&it!=null&&h!=null),Is[0]=null,Is[1]=Dr,Is[2]=pn,Is[3]=ti,j.ca=it,j.tb=dt,j.c=h.width,j.i=h.height,t(0<j.c&&0<j.i),1>=G)h=0;else if(j.$a=B[U+0]>>0&3,j.Z=B[U+0]>>2&3,j.Lc=B[U+0]>>4&3,U=B[U+0]>>6&3,0>j.$a||1<j.$a||4<=j.Z||1<j.Lc||U)h=0;else if(bt.put=Nr,bt.ac=dn,bt.bc=Nn,bt.ma=j,bt.width=h.width,bt.height=h.height,bt.Da=h.Da,bt.v=h.v,bt.va=h.va,bt.j=h.j,bt.o=h.o,j.$a)t:{t(j.$a==1),h=Gn();e:for(;;){if(h==null){h=0;break t}if(t(j!=null),j.mc=h,h.c=j.c,h.i=j.i,h.l=j.l,h.l.ma=j,h.l.width=j.c,h.l.height=j.i,h.a=0,et(h.m,B,ft,lt),!xr(j.c,j.i,1,h,null)||(h.ab==1&&h.gc[0].hc==3&&bn(h.s)?(j.ic=1,B=h.c*h.i,h.Ta=null,h.Ua=0,h.V=s(B),h.Ba=0,h.V==null?(h.a=1,h=0):h=1):(j.ic=0,h=hi(h,j.c)),!h))break e;h=1;break t}j.mc=null,h=0}else h=lt>=j.c*j.i;j=!h}if(j)return null;c.ga.Lc!=1?c.Ga=0:I=V-y}t(c.ga!=null),t(y+I<=V);t:{if(h=(B=c.ga).c,V=B.l.o,B.$a==0){if(ft=c.rc,lt=c.Vc,bt=c.Fa,U=c.P+1+y*h,G=c.mb,it=c.nb+y*h,t(U<=c.P+c.qc),B.Z!=0)for(t(Is[B.Z]!=null),j=0;j<I;++j)Is[B.Z](ft,lt,bt,U,G,it,h),ft=G,lt=it,it+=h,U+=h;else for(j=0;j<I;++j)r(G,it,bt,U,h),ft=G,lt=it,it+=h,U+=h;c.rc=ft,c.Vc=lt}else{if(t(B.mc!=null),h=y+I,t((j=B.mc)!=null),t(h<=j.i),j.C>=h)h=1;else if(B.ic||P(),B.ic){B=j.V,ft=j.Ba,lt=j.c;var yt=j.i,st=(bt=1,U=j.$/lt,G=j.$%lt,it=j.m,dt=j.s,j.$),ot=lt*yt,wt=lt*h,Et=dt.wc,_t=st<wt?$e(dt,G,U):null;t(st<=ot),t(h<=yt),t(bn(dt));e:for(;;){for(;!it.h&&st<wt;){if(G&Et||(_t=$e(dt,G,U)),t(_t!=null),nt(it),256>(yt=xn(_t.G[0],_t.H[0],it)))B[ft+st]=yt,++st,++G>=lt&&(G=0,++U<=h&&!(U%16)&&rr(j,U));else{if(!(280>yt)){bt=0;break e}yt=mr(yt-256,it);var Vt,Dt=xn(_t.G[4],_t.H[4],it);if(nt(it),!(st>=(Dt=Wn(lt,Dt=mr(Dt,it)))&&ot-st>=yt)){bt=0;break e}for(Vt=0;Vt<yt;++Vt)B[ft+st+Vt]=B[ft+st+Vt-Dt];for(st+=yt,G+=yt;G>=lt;)G-=lt,++U<=h&&!(U%16)&&rr(j,U);st<wt&&G&Et&&(_t=$e(dt,G,U))}t(it.h==$(it))}rr(j,U>h?h:U);break e}!bt||it.h&&st<ot?(bt=0,j.a=it.h?5:3):j.$=st,h=bt}else h=$n(j,j.V,j.Ba,j.c,j.i,h,ls);if(!h){I=0;break t}}y+I>=V&&(c.Cc=1),I=1}if(!I)return null;if(c.Cc&&((I=c.ga)!=null&&(I.mc=null),c.ga=null,0<c.Ga))return alert("todo:WebPDequantizeLevels"),null}return c.nb+y*D}function p(c,h,y,I,D,V){for(;0<D--;){var j,B=c,U=h+(y?1:0),G=c,it=h+(y?0:3);for(j=0;j<I;++j){var dt=G[it+4*j];dt!=255&&(dt*=32897,B[U+4*j+0]=B[U+4*j+0]*dt>>23,B[U+4*j+1]=B[U+4*j+1]*dt>>23,B[U+4*j+2]=B[U+4*j+2]*dt>>23)}h+=V}}function a(c,h,y,I,D){for(;0<I--;){var V;for(V=0;V<y;++V){var j=c[h+2*V+0],B=15&(G=c[h+2*V+1]),U=4369*B,G=(240&G|G>>4)*U>>16;c[h+2*V+0]=(240&j|j>>4)*U>>16&240|(15&j|j<<4)*U>>16>>4&15,c[h+2*V+1]=240&G|B}h+=D}}function f(c,h,y,I,D,V,j,B){var U,G,it=255;for(G=0;G<D;++G){for(U=0;U<I;++U){var dt=c[h+U];V[j+4*U]=dt,it&=dt}h+=y,j+=B}return it!=255}function w(c,h,y,I,D){var V;for(V=0;V<D;++V)y[I+V]=c[h+V]>>8}function P(){Vr=p,je=a,Be=f,tn=w}function H(c,h,y){E[c]=function(I,D,V,j,B,U,G,it,dt,ft,lt,bt,yt,st,ot,wt,Et){var _t,Vt=Et-1>>1,Dt=B[U+0]|G[it+0]<<16,Qt=dt[ft+0]|lt[bt+0]<<16;t(I!=null);var Ot=3*Dt+Qt+131074>>2;for(h(I[D+0],255&Ot,Ot>>16,yt,st),V!=null&&(Ot=3*Qt+Dt+131074>>2,h(V[j+0],255&Ot,Ot>>16,ot,wt)),_t=1;_t<=Vt;++_t){var Pe=B[U+_t]|G[it+_t]<<16,Le=dt[ft+_t]|lt[bt+_t]<<16,Ie=Dt+Pe+Qt+Le+524296,me=Ie+2*(Pe+Qt)>>3;Ot=me+Dt>>1,Dt=(Ie=Ie+2*(Dt+Le)>>3)+Pe>>1,h(I[D+2*_t-1],255&Ot,Ot>>16,yt,st+(2*_t-1)*y),h(I[D+2*_t-0],255&Dt,Dt>>16,yt,st+(2*_t-0)*y),V!=null&&(Ot=Ie+Qt>>1,Dt=me+Le>>1,h(V[j+2*_t-1],255&Ot,Ot>>16,ot,wt+(2*_t-1)*y),h(V[j+2*_t+0],255&Dt,Dt>>16,ot,wt+(2*_t+0)*y)),Dt=Pe,Qt=Le}1&Et||(Ot=3*Dt+Qt+131074>>2,h(I[D+Et-1],255&Ot,Ot>>16,yt,st+(Et-1)*y),V!=null&&(Ot=3*Qt+Dt+131074>>2,h(V[j+Et-1],255&Ot,Ot>>16,ot,wt+(Et-1)*y)))}}function tt(){Br[fl]=G0,Br[pl]=Af,Br[yf]=K0,Br[gl]=Ef,Br[ml]=If,Br[Wu]=Sf,Br[vf]=Y0,Br[$u]=Af,Br[Gu]=Ef,Br[yl]=If,Br[Ku]=Sf}function gt(c){return c&~J0?0>c?0:255:c>>Tf}function xt(c,h){return gt((19077*c>>8)+(26149*h>>8)-14234)}function Ut(c,h,y){return gt((19077*c>>8)-(6419*h>>8)-(13320*y>>8)+8708)}function Mt(c,h){return gt((19077*c>>8)+(33050*h>>8)-17685)}function Gt(c,h,y,I,D){I[D+0]=xt(c,y),I[D+1]=Ut(c,h,y),I[D+2]=Mt(c,h)}function be(c,h,y,I,D){I[D+0]=Mt(c,h),I[D+1]=Ut(c,h,y),I[D+2]=xt(c,y)}function Ne(c,h,y,I,D){var V=Ut(c,h,y);h=V<<3&224|Mt(c,h)>>3,I[D+0]=248&xt(c,y)|V>>5,I[D+1]=h}function Ce(c,h,y,I,D){var V=240&Mt(c,h)|15;I[D+0]=240&xt(c,y)|Ut(c,h,y)>>4,I[D+1]=V}function Ue(c,h,y,I,D){I[D+0]=255,Gt(c,h,y,I,D+1)}function Ke(c,h,y,I,D){be(c,h,y,I,D),I[D+3]=255}function Qn(c,h,y,I,D){Gt(c,h,y,I,D),I[D+3]=255}function wr(c,h){return 0>c?0:c>h?h:c}function Ai(c,h,y){E[c]=function(I,D,V,j,B,U,G,it,dt){for(var ft=it+(-2&dt)*y;it!=ft;)h(I[D+0],V[j+0],B[U+0],G,it),h(I[D+1],V[j+0],B[U+0],G,it+y),D+=2,++j,++U,it+=2*y;1&dt&&h(I[D+0],V[j+0],B[U+0],G,it)}}function ol(c,h,y){return y==0?c==0?h==0?6:5:h==0?4:0:y}function ec(c,h,y,I,D){switch(c>>>30){case 3:Wi(h,y,I,D,0);break;case 2:Ze(h,y,I,D);break;case 1:Zn(h,y,I,D)}}function nc(c,h){var y,I,D=h.M,V=h.Nb,j=c.oc,B=c.pc+40,U=c.oc,G=c.pc+584,it=c.oc,dt=c.pc+600;for(y=0;16>y;++y)j[B+32*y-1]=129;for(y=0;8>y;++y)U[G+32*y-1]=129,it[dt+32*y-1]=129;for(0<D?j[B-1-32]=U[G-1-32]=it[dt-1-32]=129:(i(j,B-32-1,127,21),i(U,G-32-1,127,9),i(it,dt-32-1,127,9)),I=0;I<c.za;++I){var ft=h.ya[h.aa+I];if(0<I){for(y=-1;16>y;++y)r(j,B+32*y-4,j,B+32*y+12,4);for(y=-1;8>y;++y)r(U,G+32*y-4,U,G+32*y+4,4),r(it,dt+32*y-4,it,dt+32*y+4,4)}var lt=c.Gd,bt=c.Hd+I,yt=ft.ad,st=ft.Hc;if(0<D&&(r(j,B-32,lt[bt].y,0,16),r(U,G-32,lt[bt].f,0,8),r(it,dt-32,lt[bt].ea,0,8)),ft.Za){var ot=j,wt=B-32+16;for(0<D&&(I>=c.za-1?i(ot,wt,lt[bt].y[15],4):r(ot,wt,lt[bt+1].y,0,4)),y=0;4>y;y++)ot[wt+128+y]=ot[wt+256+y]=ot[wt+384+y]=ot[wt+0+y];for(y=0;16>y;++y,st<<=2)ot=j,wt=B+Nf[y],ei[ft.Ob[y]](ot,wt),ec(st,yt,16*+y,ot,wt)}else if(ot=ol(I,D,ft.Ob[0]),Es[ot](j,B),st!=0)for(y=0;16>y;++y,st<<=2)ec(st,yt,16*+y,j,B+Nf[y]);for(y=ft.Gc,ot=ol(I,D,ft.Dd),Gi[ot](U,G),Gi[ot](it,dt),st=yt,ot=U,wt=G,255&(ft=y>>0)&&(170&ft?ac(st,256,ot,wt):Fr(st,256,ot,wt)),ft=it,st=dt,255&(y>>=8)&&(170&y?ac(yt,320,ft,st):Fr(yt,320,ft,st)),D<c.Ub-1&&(r(lt[bt].y,0,j,B+480,16),r(lt[bt].f,0,U,G+224,8),r(lt[bt].ea,0,it,dt+224,8)),y=8*V*c.B,lt=c.sa,bt=c.ta+16*I+16*V*c.R,yt=c.qa,ft=c.ra+8*I+y,st=c.Ha,ot=c.Ia+8*I+y,y=0;16>y;++y)r(lt,bt+y*c.R,j,B+32*y,16);for(y=0;8>y;++y)r(yt,ft+y*c.B,U,G+32*y,8),r(st,ot+y*c.B,it,dt+32*y,8)}}function oa(c,h,y,I,D,V,j,B,U){var G=[0],it=[0],dt=0,ft=U!=null?U.kd:0,lt=U??new vr;if(c==null||12>y)return 7;lt.data=c,lt.w=h,lt.ha=y,h=[h],y=[y],lt.gb=[lt.gb];t:{var bt=h,yt=y,st=lt.gb;if(t(c!=null),t(yt!=null),t(st!=null),st[0]=0,12<=yt[0]&&!e(c,bt[0],"RIFF")){if(e(c,bt[0]+8,"WEBP")){st=3;break t}var ot=kt(c,bt[0]+4);if(12>ot||4294967286<ot){st=3;break t}if(ft&&ot>yt[0]-8){st=7;break t}st[0]=ot,bt[0]+=12,yt[0]-=12}st=0}if(st!=0)return st;for(ot=0<lt.gb[0],y=y[0];;){t:{var wt=c;yt=h,st=y;var Et=G,_t=it,Vt=bt=[0];if((Ot=dt=[dt])[0]=0,8>st[0])st=7;else{if(!e(wt,yt[0],"VP8X")){if(kt(wt,yt[0]+4)!=10){st=3;break t}if(18>st[0]){st=7;break t}var Dt=kt(wt,yt[0]+8),Qt=1+Lt(wt,yt[0]+12);if(2147483648<=Qt*(wt=1+Lt(wt,yt[0]+15))){st=3;break t}Vt!=null&&(Vt[0]=Dt),Et!=null&&(Et[0]=Qt),_t!=null&&(_t[0]=wt),yt[0]+=18,st[0]-=18,Ot[0]=1}st=0}}if(dt=dt[0],bt=bt[0],st!=0)return st;if(yt=!!(2&bt),!ot&&dt)return 3;if(V!=null&&(V[0]=!!(16&bt)),j!=null&&(j[0]=yt),B!=null&&(B[0]=0),j=G[0],bt=it[0],dt&&yt&&U==null){st=0;break}if(4>y){st=7;break}if(ot&&dt||!ot&&!dt&&!e(c,h[0],"ALPH")){y=[y],lt.na=[lt.na],lt.P=[lt.P],lt.Sa=[lt.Sa];t:{Dt=c,st=h,ot=y;var Ot=lt.gb;Et=lt.na,_t=lt.P,Vt=lt.Sa,Qt=22,t(Dt!=null),t(ot!=null),wt=st[0];var Pe=ot[0];for(t(Et!=null),t(Vt!=null),Et[0]=null,_t[0]=null,Vt[0]=0;;){if(st[0]=wt,ot[0]=Pe,8>Pe){st=7;break t}var Le=kt(Dt,wt+4);if(4294967286<Le){st=3;break t}var Ie=8+Le+1&-2;if(Qt+=Ie,0<Ot&&Qt>Ot){st=3;break t}if(!e(Dt,wt,"VP8 ")||!e(Dt,wt,"VP8L")){st=0;break t}if(Pe[0]<Ie){st=7;break t}e(Dt,wt,"ALPH")||(Et[0]=Dt,_t[0]=wt+8,Vt[0]=Le),wt+=Ie,Pe-=Ie}}if(y=y[0],lt.na=lt.na[0],lt.P=lt.P[0],lt.Sa=lt.Sa[0],st!=0)break}y=[y],lt.Ja=[lt.Ja],lt.xa=[lt.xa];t:if(Ot=c,st=h,ot=y,Et=lt.gb[0],_t=lt.Ja,Vt=lt.xa,Dt=st[0],wt=!e(Ot,Dt,"VP8 "),Qt=!e(Ot,Dt,"VP8L"),t(Ot!=null),t(ot!=null),t(_t!=null),t(Vt!=null),8>ot[0])st=7;else{if(wt||Qt){if(Ot=kt(Ot,Dt+4),12<=Et&&Ot>Et-12){st=3;break t}if(ft&&Ot>ot[0]-8){st=7;break t}_t[0]=Ot,st[0]+=8,ot[0]-=8,Vt[0]=Qt}else Vt[0]=5<=ot[0]&&Ot[Dt+0]==47&&!(Ot[Dt+4]>>5),_t[0]=ot[0];st=0}if(y=y[0],lt.Ja=lt.Ja[0],lt.xa=lt.xa[0],h=h[0],st!=0)break;if(4294967286<lt.Ja)return 3;if(B==null||yt||(B[0]=lt.xa?2:1),j=[j],bt=[bt],lt.xa){if(5>y){st=7;break}B=j,ft=bt,yt=V,c==null||5>y?c=0:5<=y&&c[h+0]==47&&!(c[h+4]>>5)?(ot=[0],Ot=[0],Et=[0],et(_t=new k,c,h,y),Jt(_t,ot,Ot,Et)?(B!=null&&(B[0]=ot[0]),ft!=null&&(ft[0]=Ot[0]),yt!=null&&(yt[0]=Et[0]),c=1):c=0):c=0}else{if(10>y){st=7;break}B=bt,c==null||10>y||!yr(c,h+3,y-3)?c=0:(ft=c[h+0]|c[h+1]<<8|c[h+2]<<16,yt=16383&(c[h+7]<<8|c[h+6]),c=16383&(c[h+9]<<8|c[h+8]),1&ft||3<(ft>>1&7)||!(ft>>4&1)||ft>>5>=lt.Ja||!yt||!c?c=0:(j&&(j[0]=yt),B&&(B[0]=c),c=1))}if(!c||(j=j[0],bt=bt[0],dt&&(G[0]!=j||it[0]!=bt)))return 3;U!=null&&(U[0]=lt,U.offset=h-U.w,t(4294967286>h-U.w),t(U.offset==U.ha-y));break}return st==0||st==7&&dt&&U==null?(V!=null&&(V[0]|=lt.na!=null&&0<lt.na.length),I!=null&&(I[0]=j),D!=null&&(D[0]=bt),0):st}function rc(c,h,y){var I=h.width,D=h.height,V=0,j=0,B=I,U=D;if(h.Da=c!=null&&0<c.Da,h.Da&&(B=c.cd,U=c.bd,V=c.v,j=c.j,11>y||(V&=-2,j&=-2),0>V||0>j||0>=B||0>=U||V+B>I||j+U>D))return 0;if(h.v=V,h.j=j,h.va=V+B,h.o=j+U,h.U=B,h.T=U,h.da=c!=null&&0<c.da,h.da){if(!ne(B,U,y=[c.ib],V=[c.hb]))return 0;h.ib=y[0],h.hb=V[0]}return h.ob=c!=null&&c.ob,h.Kb=c==null||!c.Sd,h.da&&(h.ob=h.ib<3*I/4&&h.hb<3*D/4,h.Kb=0),1}function ic(c){if(c==null)return 2;if(11>c.S){var h=c.f.RGBA;h.fb+=(c.height-1)*h.A,h.A=-h.A}else h=c.f.kb,c=c.height,h.O+=(c-1)*h.fa,h.fa=-h.fa,h.N+=(c-1>>1)*h.Ab,h.Ab=-h.Ab,h.W+=(c-1>>1)*h.Db,h.Db=-h.Db,h.F!=null&&(h.J+=(c-1)*h.lb,h.lb=-h.lb);return 0}function aa(c,h,y,I){if(I==null||0>=c||0>=h)return 2;if(y!=null){if(y.Da){var D=y.cd,V=y.bd,j=-2&y.v,B=-2&y.j;if(0>j||0>B||0>=D||0>=V||j+D>c||B+V>h)return 2;c=D,h=V}if(y.da){if(!ne(c,h,D=[y.ib],V=[y.hb]))return 2;c=D[0],h=V[0]}}I.width=c,I.height=h;t:{var U=I.width,G=I.height;if(c=I.S,0>=U||0>=G||!(c>=fl&&13>c))c=2;else{if(0>=I.Rd&&I.sd==null){j=V=D=h=0;var it=(B=U*xf[c])*G;if(11>c||(V=(G+1)/2*(h=(U+1)/2),c==12&&(j=(D=U)*G)),(G=s(it+2*V+j))==null){c=1;break t}I.sd=G,11>c?((U=I.f.RGBA).eb=G,U.fb=0,U.A=B,U.size=it):((U=I.f.kb).y=G,U.O=0,U.fa=B,U.Fd=it,U.f=G,U.N=0+it,U.Ab=h,U.Cd=V,U.ea=G,U.W=0+it+V,U.Db=h,U.Ed=V,c==12&&(U.F=G,U.J=0+it+2*V),U.Tc=j,U.lb=D)}if(h=1,D=I.S,V=I.width,j=I.height,D>=fl&&13>D)if(11>D)c=I.f.RGBA,h&=(B=Math.abs(c.A))*(j-1)+V<=c.size,h&=B>=V*xf[D],h&=c.eb!=null;else{c=I.f.kb,B=(V+1)/2,it=(j+1)/2,U=Math.abs(c.fa),G=Math.abs(c.Ab);var dt=Math.abs(c.Db),ft=Math.abs(c.lb),lt=ft*(j-1)+V;h&=U*(j-1)+V<=c.Fd,h&=G*(it-1)+B<=c.Cd,h=(h&=dt*(it-1)+B<=c.Ed)&U>=V&G>=B&dt>=B,h&=c.y!=null,h&=c.f!=null,h&=c.ea!=null,D==12&&(h&=ft>=V,h&=lt<=c.Tc,h&=c.F!=null)}else h=0;c=h?0:2}}return c!=0||y!=null&&y.fd&&(c=ic(I)),c}var Cn=64,ca=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],la=24,ua=32,sc=8,ar=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Nt("Predictor0","PredictorAdd0"),E.Predictor0=function(){return 4278190080},E.Predictor1=function(c){return c},E.Predictor2=function(c,h,y){return h[y+0]},E.Predictor3=function(c,h,y){return h[y+1]},E.Predictor4=function(c,h,y){return h[y-1]},E.Predictor5=function(c,h,y){return Rt(Rt(c,h[y+1]),h[y+0])},E.Predictor6=function(c,h,y){return Rt(c,h[y-1])},E.Predictor7=function(c,h,y){return Rt(c,h[y+0])},E.Predictor8=function(c,h,y){return Rt(h[y-1],h[y+0])},E.Predictor9=function(c,h,y){return Rt(h[y+0],h[y+1])},E.Predictor10=function(c,h,y){return Rt(Rt(c,h[y-1]),Rt(h[y+0],h[y+1]))},E.Predictor11=function(c,h,y){var I=h[y+0];return 0>=le(I>>24&255,c>>24&255,(h=h[y-1])>>24&255)+le(I>>16&255,c>>16&255,h>>16&255)+le(I>>8&255,c>>8&255,h>>8&255)+le(255&I,255&c,255&h)?I:c},E.Predictor12=function(c,h,y){var I=h[y+0];return(Ht((c>>24&255)+(I>>24&255)-((h=h[y-1])>>24&255))<<24|Ht((c>>16&255)+(I>>16&255)-(h>>16&255))<<16|Ht((c>>8&255)+(I>>8&255)-(h>>8&255))<<8|Ht((255&c)+(255&I)-(255&h)))>>>0},E.Predictor13=function(c,h,y){var I=h[y-1];return(re((c=Rt(c,h[y+0]))>>24&255,I>>24&255)<<24|re(c>>16&255,I>>16&255)<<16|re(c>>8&255,I>>8&255)<<8|re(c>>0&255,I>>0&255))>>>0};var zu=E.PredictorAdd0;E.PredictorAdd1=oe,Nt("Predictor2","PredictorAdd2"),Nt("Predictor3","PredictorAdd3"),Nt("Predictor4","PredictorAdd4"),Nt("Predictor5","PredictorAdd5"),Nt("Predictor6","PredictorAdd6"),Nt("Predictor7","PredictorAdd7"),Nt("Predictor8","PredictorAdd8"),Nt("Predictor9","PredictorAdd9"),Nt("Predictor10","PredictorAdd10"),Nt("Predictor11","PredictorAdd11"),Nt("Predictor12","PredictorAdd12"),Nt("Predictor13","PredictorAdd13");var oc=E.PredictorAdd2;he("ColorIndexInverseTransform","MapARGB","32b",function(c){return c>>8&255},function(c){return c}),he("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(c){return c},function(c){return c>>8&255});var al,Or=E.ColorIndexInverseTransform,ha=E.MapARGB,cl=E.VP8LColorIndexInverseTransformAlpha,ll=E.MapAlpha,ws=E.VP8LPredictorsAdd=[];ws.length=16,(E.VP8LPredictors=[]).length=16,(E.VP8LPredictorsAdd_C=[]).length=16,(E.VP8LPredictors_C=[]).length=16;var vo,cr,Xn,_s,zi,Hi,da,Wi,Ze,ac,Zn,Fr,fa,ul,cc,wo,_o,bs,bo,pa,Ao,As,lc,Mr,Vr,je,Be,tn,gn=s(511),$i=s(2041),uc=s(225),ga=s(767),hl=0,Hu=$i,dl=uc,_r=ga,jr=gn,fl=0,pl=1,yf=2,gl=3,ml=4,Wu=5,vf=6,$u=7,Gu=8,yl=9,Ku=10,k0=[2,3,7],D0=[3,3,11],wf=[280,256,256,256,40],O0=[0,1,1,1,0],F0=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],M0=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],V0=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],j0=8,Yu=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ju=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],hc=null,B0=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],q0=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],_f=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],U0=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],z0=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],H0=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],W0=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Es=[],ei=[],Gi=[],$0=1,bf=2,Is=[],Br=[];H("UpsampleRgbLinePair",Gt,3),H("UpsampleBgrLinePair",be,3),H("UpsampleRgbaLinePair",Qn,4),H("UpsampleBgraLinePair",Ke,4),H("UpsampleArgbLinePair",Ue,4),H("UpsampleRgba4444LinePair",Ce,2),H("UpsampleRgb565LinePair",Ne,2);var G0=E.UpsampleRgbLinePair,K0=E.UpsampleBgrLinePair,Af=E.UpsampleRgbaLinePair,Ef=E.UpsampleBgraLinePair,If=E.UpsampleArgbLinePair,Sf=E.UpsampleRgba4444LinePair,Y0=E.UpsampleRgb565LinePair,vl=16,wl=1<<vl-1,dc=-227,Qu=482,Tf=6,J0=(256<<Tf)-1,Pf=0,Q0=s(256),X0=s(256),Z0=s(256),t2=s(256),e2=s(Qu-dc),n2=s(Qu-dc);Ai("YuvToRgbRow",Gt,3),Ai("YuvToBgrRow",be,3),Ai("YuvToRgbaRow",Qn,4),Ai("YuvToBgraRow",Ke,4),Ai("YuvToArgbRow",Ue,4),Ai("YuvToRgba4444Row",Ce,2),Ai("YuvToRgb565Row",Ne,2);var Nf=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],_l=[0,2,8],r2=[8,7,6,4,4,2,2,2,1,1,1,1],i2=1;this.WebPDecodeRGBA=function(c,h,y,I,D){var V=pl,j=new qi,B=new Pn;j.ba=B,B.S=V,B.width=[B.width],B.height=[B.height];var U=B.width,G=B.height,it=new Pr;if(it==null||c==null)var dt=2;else t(it!=null),dt=oa(c,h,y,it.width,it.height,it.Pd,it.Qd,it.format,null);if(dt!=0?U=0:(U!=null&&(U[0]=it.width[0]),G!=null&&(G[0]=it.height[0]),U=1),U){B.width=B.width[0],B.height=B.height[0],I!=null&&(I[0]=B.width),D!=null&&(D[0]=B.height);t:{if(I=new Mi,(D=new vr).data=c,D.w=h,D.ha=y,D.kd=1,h=[0],t(D!=null),((c=oa(D.data,D.w,D.ha,null,null,null,h,null,D))==0||c==7)&&h[0]&&(c=4),(h=c)==0){if(t(j!=null),I.data=D.data,I.w=D.w+D.offset,I.ha=D.ha-D.offset,I.put=Nr,I.ac=dn,I.bc=Nn,I.ma=j,D.xa){if((c=Gn())==null){j=1;break t}if(function(ft,lt){var bt=[0],yt=[0],st=[0];e:for(;;){if(ft==null)return 0;if(lt==null)return ft.a=2,0;if(ft.l=lt,ft.a=0,et(ft.m,lt.data,lt.w,lt.ha),!Jt(ft.m,bt,yt,st)){ft.a=3;break e}if(ft.xb=bf,lt.width=bt[0],lt.height=yt[0],!xr(bt[0],yt[0],1,ft,null))break e;return 1}return t(ft.a!=0),0}(c,I)){if(I=(h=aa(I.width,I.height,j.Oa,j.ba))==0){e:{I=c;n:for(;;){if(I==null){I=0;break e}if(t(I.s.yc!=null),t(I.s.Ya!=null),t(0<I.s.Wb),t((y=I.l)!=null),t((D=y.ma)!=null),I.xb!=0){if(I.ca=D.ba,I.tb=D.tb,t(I.ca!=null),!rc(D.Oa,y,gl)){I.a=2;break n}if(!hi(I,y.width)||y.da)break n;if((y.da||Ee(I.ca.S))&&P(),11>I.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),I.ca.f.kb.F!=null&&P()),I.Pb&&0<I.s.ua&&I.s.vb.X==null&&!$t(I.s.vb,I.s.Wa.Xa)){I.a=1;break n}I.xb=0}if(!$n(I,I.V,I.Ba,I.c,I.i,y.o,cs))break n;D.Dc=I.Ma,I=1;break e}t(I.a!=0),I=0}I=!I}I&&(h=c.a)}else h=c.a}else{if((c=new Ko)==null){j=1;break t}if(c.Fa=D.na,c.P=D.P,c.qc=D.Sa,Kn(c,I)){if((h=aa(I.width,I.height,j.Oa,j.ba))==0){if(c.Aa=0,y=j.Oa,t((D=c)!=null),y!=null){if(0<(U=0>(U=y.Md)?0:100<U?255:255*U/100)){for(G=it=0;4>G;++G)12>(dt=D.pb[G]).lc&&(dt.ia=U*r2[0>dt.lc?0:dt.lc]>>3),it|=dt.ia;it&&(alert("todo:VP8InitRandom"),D.ia=1)}D.Ga=y.Id,100<D.Ga?D.Ga=100:0>D.Ga&&(D.Ga=0)}co(c,I)||(h=c.a)}}else h=c.a}h==0&&j.Oa!=null&&j.Oa.fd&&(h=ic(j.ba))}j=h}V=j!=0?null:11>V?B.f.RGBA.eb:B.f.kb.y}else V=null;return V};var xf=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(E,x){for(var F="",b=0;b<4;b++)F+=String.fromCharCode(E[x++]);return F}function m(E,x){return(E[x+0]<<0|E[x+1]<<8|E[x+2]<<16)>>>0}function v(E,x){return(E[x+0]<<0|E[x+1]<<8|E[x+2]<<16|E[x+3]<<24)>>>0}new u;var _=[0],g=[0],N=[],L=new u,O=n,C=function(E,x){var F={},b=0,A=!1,T=0,W=0;if(F.frames=[],!function(z,$,X,nt){for(var ut=0;ut<nt;ut++)if(z[$+ut]!=X.charCodeAt(ut))return!0;return!1}(E,x,"RIFF",4)){var ct,J;for(v(E,x+=4),x+=8;x<E.length;){var Y=d(E,x),et=v(E,x+=4);x+=4;var Z=et+(1&et);switch(Y){case"VP8 ":case"VP8L":F.frames[b]===void 0&&(F.frames[b]={}),(k=F.frames[b]).src_off=A?W:x-8,k.src_size=T+et+8,b++,A&&(A=!1,T=0,W=0);break;case"VP8X":(k=F.header={}).feature_flags=E[x];var at=x+4;k.canvas_width=1+m(E,at),at+=3,k.canvas_height=1+m(E,at),at+=3;break;case"ALPH":A=!0,T=Z+8,W=x-8;break;case"ANIM":(k=F.header).bgcolor=v(E,x),at=x+4,k.loop_count=(ct=E)[(J=at)+0]<<0|ct[J+1]<<8,at+=2;break;case"ANMF":var mt,k;(k=F.frames[b]={}).offset_x=2*m(E,x),x+=3,k.offset_y=2*m(E,x),x+=3,k.width=1+m(E,x),x+=3,k.height=1+m(E,x),x+=3,k.duration=m(E,x),x+=3,mt=E[x++],k.dispose=1&mt,k.blend=mt>>1&1}Y!="ANMF"&&(x+=Z)}return F}}(O,0);C.response=O,C.rgbaoutput=!0,C.dataurl=!1;var R=C.header?C.header:null,M=C.frames?C.frames:null;if(R){R.loop_counter=R.loop_count,_=[R.canvas_height],g=[R.canvas_width];for(var q=0;q<M.length&&M[q].blend!=0;q++);}var K=M[0],Q=L.WebPDecodeRGBA(O,K.src_off,K.src_size,g,_);K.rgba=Q,K.imgwidth=g[0],K.imgheight=_[0];for(var S=0;S<g[0]*_[0]*4;S++)N[S]=Q[S];return this.width=g,this.height=_,this.data=N,this}(function(n){var t=function(){return typeof ud=="function"},e=function(_,g,N,L){var O=4,C=o;switch(L){case n.image_compression.FAST:O=1,C=s;break;case n.image_compression.MEDIUM:O=6,C=l;break;case n.image_compression.SLOW:O=9,C=u}_=r(_,g,N,C);var R=ud(_,{level:O});return n.__addimage__.arrayBufferToBinaryString(R)},r=function(_,g,N,L){for(var O,C,R,M=_.length/g,q=new Uint8Array(_.length+M),K=m(),Q=0;Q<M;Q+=1){if(R=Q*g,O=_.subarray(R,R+g),L)q.set(L(O,N,C),R+Q);else{for(var S,E=K.length,x=[];S<E;S+=1)x[S]=K[S](O,N,C);var F=v(x.concat());q.set(x[F],R+Q)}C=O}return q},i=function(_){var g=Array.apply([],_);return g.unshift(0),g},s=function(_,g){var N,L=[],O=_.length;L[0]=1;for(var C=0;C<O;C+=1)N=_[C-g]||0,L[C+1]=_[C]-N+256&255;return L},o=function(_,g,N){var L,O=[],C=_.length;O[0]=2;for(var R=0;R<C;R+=1)L=N&&N[R]||0,O[R+1]=_[R]-L+256&255;return O},l=function(_,g,N){var L,O,C=[],R=_.length;C[0]=3;for(var M=0;M<R;M+=1)L=_[M-g]||0,O=N&&N[M]||0,C[M+1]=_[M]+256-(L+O>>>1)&255;return C},u=function(_,g,N){var L,O,C,R,M=[],q=_.length;M[0]=4;for(var K=0;K<q;K+=1)L=_[K-g]||0,O=N&&N[K]||0,C=N&&N[K-g]||0,R=d(L,O,C),M[K+1]=_[K]-R+256&255;return M},d=function(_,g,N){if(_===g&&g===N)return _;var L=Math.abs(g-N),O=Math.abs(_-N),C=Math.abs(_+g-N-N);return L<=O&&L<=C?_:O<=C?g:N},m=function(){return[i,s,o,l,u]},v=function(_){var g=_.map(function(N){return N.reduce(function(L,O){return L+Math.abs(O)},0)});return g.indexOf(Math.min.apply(null,g))};n.processPNG=function(_,g,N,L){var O,C,R,M,q,K,Q,S,E,x,F,b,A,T,W,ct=this.decode.FLATE_DECODE,J="";if(this.__addimage__.isArrayBuffer(_)&&(_=new Uint8Array(_)),this.__addimage__.isArrayBufferView(_)){if(_=(R=new y3(_)).imgData,C=R.bits,O=R.colorSpace,q=R.colors,[4,6].indexOf(R.colorType)!==-1){if(R.bits===8){E=(S=R.pixelBitlength==32?new Uint32Array(R.decodePixels().buffer):R.pixelBitlength==16?new Uint16Array(R.decodePixels().buffer):new Uint8Array(R.decodePixels().buffer)).length,F=new Uint8Array(E*R.colors),x=new Uint8Array(E);var Y,et=R.pixelBitlength-R.bits;for(T=0,W=0;T<E;T++){for(A=S[T],Y=0;Y<et;)F[W++]=A>>>Y&255,Y+=R.bits;x[T]=A>>>Y&255}}if(R.bits===16){E=(S=new Uint32Array(R.decodePixels().buffer)).length,F=new Uint8Array(E*(32/R.pixelBitlength)*R.colors),x=new Uint8Array(E*(32/R.pixelBitlength)),b=R.colors>1,T=0,W=0;for(var Z=0;T<E;)A=S[T++],F[W++]=A>>>0&255,b&&(F[W++]=A>>>16&255,A=S[T++],F[W++]=A>>>0&255),x[Z++]=A>>>16&255;C=8}L!==n.image_compression.NONE&&t()?(_=e(F,R.width*R.colors,R.colors,L),Q=e(x,R.width,1,L)):(_=F,Q=x,ct=void 0)}if(R.colorType===3&&(O=this.color_spaces.INDEXED,K=R.palette,R.transparency.indexed)){var at=R.transparency.indexed,mt=0;for(T=0,E=at.length;T<E;++T)mt+=at[T];if((mt/=255)===E-1&&at.indexOf(0)!==-1)M=[at.indexOf(0)];else if(mt!==E){for(S=R.decodePixels(),x=new Uint8Array(S.length),T=0,E=S.length;T<E;T++)x[T]=at[S[T]];Q=e(x,R.width,1)}}var k=function(z){var $;switch(z){case n.image_compression.FAST:$=11;break;case n.image_compression.MEDIUM:$=13;break;case n.image_compression.SLOW:$=14;break;default:$=12}return $}(L);return ct===this.decode.FLATE_DECODE&&(J="/Predictor "+k+" "),J+="/Colors "+q+" /BitsPerComponent "+C+" /Columns "+R.width,(this.__addimage__.isArrayBuffer(_)||this.__addimage__.isArrayBufferView(_))&&(_=this.__addimage__.arrayBufferToBinaryString(_)),(Q&&this.__addimage__.isArrayBuffer(Q)||this.__addimage__.isArrayBufferView(Q))&&(Q=this.__addimage__.arrayBufferToBinaryString(Q)),{alias:N,data:_,index:g,filter:ct,decodeParameters:J,transparency:M,palette:K,sMask:Q,predictor:k,width:R.width,height:R.height,bitsPerComponent:C,colorSpace:O}}}})(Kt.API),function(n){n.processGIF89A=function(t,e,r,i){var s=new v3(t),o=s.width,l=s.height,u=[];s.decodeAndBlitFrameRGBA(0,u);var d={data:u,width:o,height:l},m=new Nh(100).encode(d,100);return n.processJPEG.call(this,m,e,r,i)},n.processGIF87A=n.processGIF89A}(Kt.API),ii.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var t=0;t<n;t++){var e=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:r,blue:e,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ii.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[n]()}catch(e){Me.log("bit decode error:"+e)}},ii.prototype.bit1=function(){var n,t=Math.ceil(this.width/8),e=t%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,l=0;l<8&&8*i+l<this.width;l++){var u=this.palette[s>>7-l&1];this.data[o+4*l]=u.blue,this.data[o+4*l+1]=u.green,this.data[o+4*l+2]=u.red,this.data[o+4*l+3]=255}e!==0&&(this.pos+=4-e)}},ii.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),t=n%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<n;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,l=s>>4,u=15&s,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*i+1>=this.width)break;d=this.palette[u],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},ii.prototype.bit8=function(){for(var n=this.width%4,t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},ii.prototype.bit15=function(){for(var n=this.width%3,t=parseInt("11111",2),e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&t)/t*255|0,l=(s>>5&t)/t*255|0,u=(s>>10&t)/t*255|0,d=s>>15?255:0,m=r*this.width*4+4*i;this.data[m]=u,this.data[m+1]=l,this.data[m+2]=o,this.data[m+3]=d}this.pos+=n}},ii.prototype.bit16=function(){for(var n=this.width%3,t=parseInt("11111",2),e=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,u=(o>>5&e)/e*255|0,d=(o>>11)/t*255|0,m=i*this.width*4+4*s;this.data[m]=d,this.data[m+1]=u,this.data[m+2]=l,this.data[m+3]=255}this.pos+=n}},ii.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var t=this.bottom_up?n:this.height-1-n,e=0;e<this.width;e++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*e;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},ii.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var t=this.bottom_up?n:this.height-1-n,e=0;e<this.width;e++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*e;this.data[l]=s,this.data[l+1]=i,this.data[l+2]=r,this.data[l+3]=o}},ii.prototype.getData=function(){return this.data},function(n){n.processBMP=function(t,e,r,i){var s=new ii(t,!1),o=s.width,l=s.height,u={data:s.getData(),width:o,height:l},d=new Nh(100).encode(u,100);return n.processJPEG.call(this,d,e,r,i)}}(Kt.API),Og.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(t,e,r,i){var s=new Og(t),o=s.width,l=s.height,u={data:s.getData(),width:o,height:l},d=new Nh(100).encode(u,100);return n.processJPEG.call(this,d,e,r,i)}}(Kt.API),Kt.API.processRGBA=function(n,t,e){for(var r=n.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),l=0,u=0,d=0;d<i;d+=4){var m=r[d],v=r[d+1],_=r[d+2],g=r[d+3];s[l++]=m,s[l++]=v,s[l++]=_,o[u++]=g}var N=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:N,index:t,alias:e,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Kt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},ba=Kt.API,Bl=ba.getCharWidthsArray=function(n,t){var e,r,i=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:i.metadata.Unicode.widths,u=l.fof?l.fof:1,d=t.kerning?t.kerning:i.metadata.Unicode.kerning,m=d.fof?d.fof:1,v=t.doKerning!==!1,_=0,g=n.length,N=0,L=l[0]||u,O=[];for(e=0;e<g;e++)r=n.charCodeAt(e),typeof i.metadata.widthOfString=="function"?O.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(_=v&&ke(d[r])==="object"&&!isNaN(parseInt(d[r][N],10))?d[r][N]/m:0,O.push((l[r]||L)/u+_)),N=r;return O},Lg=ba.getStringUnitWidth=function(n,t){var e=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return ba.processArabic&&(n=ba.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,e,i)/e:Bl.apply(this,arguments).reduce(function(s,o){return s+o},0)},Rg=function(n,t,e,r){for(var i=[],s=0,o=n.length,l=0;s!==o&&l+t[s]<e;)l+=t[s],s++;i.push(n.slice(0,s));var u=s;for(l=0;s!==o;)l+t[s]>r&&(i.push(n.slice(u,s)),l=0,u=s),l+=t[s],s++;return u!==s&&i.push(n.slice(u,s)),i},kg=function(n,t,e){e||(e={});var r,i,s,o,l,u,d,m=[],v=[m],_=e.textIndent||0,g=0,N=0,L=n.split(" "),O=Bl.apply(this,[" ",e])[0];if(u=e.lineIndent===-1?L[0].length+2:e.lineIndent||0){var C=Array(u).join(" "),R=[];L.map(function(q){(q=q.split(/\s*\n/)).length>1?R=R.concat(q.map(function(K,Q){return(Q&&K.length?`
`:"")+K})):R.push(q[0])}),L=R,u=Lg.apply(this,[C,e])}for(s=0,o=L.length;s<o;s++){var M=0;if(r=L[s],u&&r[0]==`
`&&(r=r.substr(1),M=1),_+g+(N=(i=Bl.apply(this,[r,e])).reduce(function(q,K){return q+K},0))>t||M){if(N>t){for(l=Rg.apply(this,[r,i,t-(_+g),t]),m.push(l.shift()),m=[l.pop()];l.length;)v.push([l.shift()]);N=i.slice(r.length-(m[0]?m[0].length:0)).reduce(function(q,K){return q+K},0)}else m=[r];v.push(m),_=N+u,g=O}else m.push(r),_+=g+N,g=O}return d=u?function(q,K){return(K?C:"")+q.join(" ")}:function(q){return q.join(" ")},v.map(d)},ba.splitTextToSize=function(n,t,e){var r,i=(e=e||{}).fontSize||this.internal.getFontSize(),s=(function(m){if(m.widths&&m.kerning)return{widths:m.widths,kerning:m.kerning};var v=this.internal.getFont(m.fontName,m.fontStyle);return v.metadata.Unicode?{widths:v.metadata.Unicode.widths||{0:1},kerning:v.metadata.Unicode.kerning||{}}:{font:v.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,e);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/i;s.textIndent=e.textIndent?1*e.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=e.lineIndent;var l,u,d=[];for(l=0,u=r.length;l<u;l++)d=d.concat(kg.apply(this,[r[l],o,s]));return d},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",e={},r={},i=0;i<t.length;i++)e[t[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=t[i];var s=function(v){return"0x"+parseInt(v,10).toString(16)},o=n.__fontmetrics__.compress=function(v){var _,g,N,L,O=["{"];for(var C in v){if(_=v[C],isNaN(parseInt(C,10))?g="'"+C+"'":(C=parseInt(C,10),g=(g=s(C).slice(2)).slice(0,-1)+r[g.slice(-1)]),typeof _=="number")_<0?(N=s(_).slice(3),L="-"):(N=s(_).slice(2),L=""),N=L+N.slice(0,-1)+r[N.slice(-1)];else{if(ke(_)!=="object")throw new Error("Don't know what to do with value type "+ke(_)+".");N=o(_)}O.push(g+N)}return O.push("}"),O.join("")},l=n.__fontmetrics__.uncompress=function(v){if(typeof v!="string")throw new Error("Invalid argument passed to uncompress.");for(var _,g,N,L,O={},C=1,R=O,M=[],q="",K="",Q=v.length-1,S=1;S<Q;S+=1)(L=v[S])=="'"?_?(N=_.join(""),_=void 0):_=[]:_?_.push(L):L=="{"?(M.push([R,N]),R={},N=void 0):L=="}"?((g=M.pop())[0][g[1]]=R,N=void 0,R=g[0]):L=="-"?C=-1:N===void 0?e.hasOwnProperty(L)?(q+=e[L],N=parseInt(q,16)*C,C=1,q=""):q+=L:e.hasOwnProperty(L)?(K+=e[L],R[N]=parseInt(K,16)*C,C=1,N=void 0,K=""):K+=L;return O},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},m={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(v){var _=v.font,g=m.Unicode[_.postScriptName];g&&(_.metadata.Unicode={},_.metadata.Unicode.widths=g.widths,_.metadata.Unicode.kerning=g.kerning);var N=d.Unicode[_.postScriptName];N&&(_.metadata.Unicode.encoding=N,_.encoding=N.codePages[0])}])}(Kt.API),function(n){var t=function(e){for(var r=e.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=e.charCodeAt(s);return i};n.API.events.push(["addFont",function(e){var r=void 0,i=e.font,s=e.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(Rc(l)),o.metadata=n.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(Kt),function(n){function t(){return(Zt.canvg?Promise.resolve(Zt.canvg):Ch(()=>import("./index.es-4bb7f0b2.js"),["assets/index.es-4bb7f0b2.js","assets/index-8b06ad69.js","assets/index-58cc7b60.css"])).catch(function(e){return Promise.reject(new Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e})}Kt.API.addSvgAsImage=function(e,r,i,s,o,l,u,d){if(isNaN(r)||isNaN(i))throw Me.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw Me.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var m=document.createElement("canvas");m.width=s,m.height=o;var v=m.getContext("2d");v.fillStyle="#fff",v.fillRect(0,0,m.width,m.height);var _={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return t().then(function(N){return N.fromString(v,e,_)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(N){return N.render(_)}).then(function(){g.addImage(m.toDataURL("image/jpeg",1),r,i,s,o,u,d)})}}(),Kt.API.putTotalPages=function(n){var t,e=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(n,"g"),e=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),e=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(t,e);return this},Kt.API.viewerPreferences=function(n,t){var e;n=n||{},t=t||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),u=[],d=0,m=0,v=0;function _(N,L){var O,C=!1;for(O=0;O<N.length;O+=1)N[O]===L&&(C=!0);return C}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),e=this.internal.viewerpreferences.configuration,n==="reset"||t===!0){var g=l.length;for(v=0;v<g;v+=1)e[l[v]].value=e[l[v]].defaultValue,e[l[v]].explicitSet=!1}if(ke(n)==="object"){for(i in n)if(s=n[i],_(l,i)&&s!==void 0){if(e[i].type==="boolean"&&typeof s=="boolean")e[i].value=s;else if(e[i].type==="name"&&_(e[i].valueSet,s))e[i].value=s;else if(e[i].type==="integer"&&Number.isInteger(s))e[i].value=s;else if(e[i].type==="array"){for(d=0;d<s.length;d+=1)if(r=!0,s[d].length===1&&typeof s[d][0]=="number")u.push(String(s[d]-1));else if(s[d].length>1){for(m=0;m<s[d].length;m+=1)typeof s[d][m]!="number"&&(r=!1);r===!0&&u.push([s[d][0]-1,s[d][1]-1].join(" "))}e[i].value="["+u.join(" ")+"]"}else e[i].value=e[i].defaultValue;e[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var N,L=[];for(N in e)e[N].explicitSet===!0&&(e[N].type==="name"?L.push("/"+N+" /"+e[N].value):L.push("/"+N+" "+e[N].value));L.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+L.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=e,this},function(n){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),u=unescape(encodeURIComponent("</x:xmpmeta>")),d=s.length+o.length+l.length+i.length+u.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+l+u),this.internal.write("endstream"),this.internal.write("endobj")},e=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",e),this.internal.events.subscribe("postPutResources",t)),this}}(Kt.API),function(n){var t=n.API,e=t.pdfEscape16=function(s,o){for(var l,u=o.metadata.Unicode.widths,d=["","0","00","000","0000"],m=[""],v=0,_=s.length;v<_;++v){if(l=o.metadata.characterToGlyph(s.charCodeAt(v)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=s.charCodeAt(v),u.indexOf(l)==-1&&(u.push(l),u.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return m.join("");l=l.toString(16),m.push(d[4-l.length],l)}return m.join("")},r=function(s){var o,l,u,d,m,v,_;for(m=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,u=[],v=0,_=(l=Object.keys(s).sort(function(g,N){return g-N})).length;v<_;v++)o=l[v],u.length>=100&&(m+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar`,u=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(d=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),u.push("<"+o+"><"+d+">"));return u.length&&(m+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar
`),m+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(o){var l=o.font,u=o.out,d=o.newObject,m=o.putStream;if(l.metadata instanceof n.API.TTFFont&&l.encoding==="Identity-H"){for(var v=l.metadata.Unicode.widths,_=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),g="",N=0;N<_.length;N++)g+=String.fromCharCode(_[N]);var L=d();m({data:g,addLength1:!0,objectId:L}),u("endobj");var O=d();m({data:r(l.metadata.toUnicode),addLength1:!0,objectId:O}),u("endobj");var C=d();u("<<"),u("/Type /FontDescriptor"),u("/FontName /"+Pa(l.fontName)),u("/FontFile2 "+L+" 0 R"),u("/FontBBox "+n.API.PDFObject.convert(l.metadata.bbox)),u("/Flags "+l.metadata.flags),u("/StemV "+l.metadata.stemV),u("/ItalicAngle "+l.metadata.italicAngle),u("/Ascent "+l.metadata.ascender),u("/Descent "+l.metadata.decender),u("/CapHeight "+l.metadata.capHeight),u(">>"),u("endobj");var R=d();u("<<"),u("/Type /Font"),u("/BaseFont /"+Pa(l.fontName)),u("/FontDescriptor "+C+" 0 R"),u("/W "+n.API.PDFObject.convert(v)),u("/CIDToGIDMap /Identity"),u("/DW 1000"),u("/Subtype /CIDFontType2"),u("/CIDSystemInfo"),u("<<"),u("/Supplement 0"),u("/Registry (Adobe)"),u("/Ordering ("+l.encoding+")"),u(">>"),u(">>"),u("endobj"),l.objectNumber=d(),u("<<"),u("/Type /Font"),u("/Subtype /Type0"),u("/ToUnicode "+O+" 0 R"),u("/BaseFont /"+Pa(l.fontName)),u("/Encoding /"+l.encoding),u("/DescendantFonts ["+R+" 0 R]"),u(">>"),u("endobj"),l.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(o){var l=o.font,u=o.out,d=o.newObject,m=o.putStream;if(l.metadata instanceof n.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var v=l.metadata.rawData,_="",g=0;g<v.length;g++)_+=String.fromCharCode(v[g]);var N=d();m({data:_,addLength1:!0,objectId:N}),u("endobj");var L=d();m({data:r(l.metadata.toUnicode),addLength1:!0,objectId:L}),u("endobj");var O=d();u("<<"),u("/Descent "+l.metadata.decender),u("/CapHeight "+l.metadata.capHeight),u("/StemV "+l.metadata.stemV),u("/Type /FontDescriptor"),u("/FontFile2 "+N+" 0 R"),u("/Flags 96"),u("/FontBBox "+n.API.PDFObject.convert(l.metadata.bbox)),u("/FontName /"+Pa(l.fontName)),u("/ItalicAngle "+l.metadata.italicAngle),u("/Ascent "+l.metadata.ascender),u(">>"),u("endobj"),l.objectNumber=d();for(var C=0;C<l.metadata.hmtx.widths.length;C++)l.metadata.hmtx.widths[C]=parseInt(l.metadata.hmtx.widths[C]*(1e3/l.metadata.head.unitsPerEm));u("<</Subtype/TrueType/Type/Font/ToUnicode "+L+" 0 R/BaseFont/"+Pa(l.fontName)+"/FontDescriptor "+O+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),u("endobj"),l.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,l=s.text||"",u=s.x,d=s.y,m=s.options||{},v=s.mutex||{},_=v.pdfEscape,g=v.activeFontKey,N=v.fonts,L=g,O="",C=0,R="",M=N[L].encoding;if(N[L].encoding!=="Identity-H")return{text:l,x:u,y:d,options:m,mutex:v};for(R=l,L=g,Array.isArray(l)&&(R=l[0]),C=0;C<R.length;C+=1)N[L].metadata.hasOwnProperty("cmap")&&(o=N[L].metadata.cmap.unicode.codeMap[R[C].charCodeAt(0)]),o||R[C].charCodeAt(0)<256&&N[L].metadata.hasOwnProperty("Unicode")?O+=R[C]:O+="";var q="";return parseInt(L.slice(1))<14||M==="WinAnsiEncoding"?q=_(O,L).split("").map(function(K){return K.charCodeAt(0).toString(16)}).join(""):M==="Identity-H"&&(q=e(O,N[L])),v.isHex=!0,{text:q,x:u,y:d,options:m,mutex:v}};t.events.push(["postProcessText",function(s){var o=s.text||"",l=[],u={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([i(Object.assign({},u,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(i(Object.assign({},u,{text:o[d]})).text);s.text=l}else s.text=i(Object.assign({},u,{text:o})).text}])}(Kt),function(n){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0},n.addFileToVFS=function(e,r){return t.call(this),this.internal.vFS[e]=r,this},n.getFileFromVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0?this.internal.vFS[e]:null}}(Kt.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,s,o,l,u,d,m,v=t,_=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},L={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},O=["(",")","(","<",">","<","[","]","[","{","}","{","¬´","¬ª","¬´","‚Äπ","‚Ä∫","‚Äπ","‚ÅÖ","‚ÅÜ","‚ÅÖ","‚ÅΩ","‚Åæ","‚ÅΩ","‚Çç","‚Çé","‚Çç","‚â§","‚â•","‚â§","‚å©","‚å™","‚å©","Ôπô","Ôπö","Ôπô","Ôπõ","Ôπú","Ôπõ","Ôπù","Ôπû","Ôπù","Ôπ§","Ôπ•","Ôπ§"],C=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),R=!1,M=0;this.__bidiEngine__={};var q=function(b){var A=b.charCodeAt(),T=A>>8,W=L[T];return W!==void 0?v[256*W+(255&A)]:T===252||T===253?"AL":C.test(T)?"L":T===8?"R":"N"},K=function(b){for(var A,T=0;T<b.length;T++){if((A=q(b.charAt(T)))==="L")return!1;if(A==="R")return!0}return!1},Q=function(b,A,T,W){var ct,J,Y,et,Z=A[W];switch(Z){case"L":case"R":R=!1;break;case"N":case"AN":break;case"EN":R&&(Z="AN");break;case"AL":R=!0,Z="R";break;case"WS":Z="N";break;case"CS":W<1||W+1>=A.length||(ct=T[W-1])!=="EN"&&ct!=="AN"||(J=A[W+1])!=="EN"&&J!=="AN"?Z="N":R&&(J="AN"),Z=J===ct?J:"N";break;case"ES":Z=(ct=W>0?T[W-1]:"B")==="EN"&&W+1<A.length&&A[W+1]==="EN"?"EN":"N";break;case"ET":if(W>0&&T[W-1]==="EN"){Z="EN";break}if(R){Z="N";break}for(Y=W+1,et=A.length;Y<et&&A[Y]==="ET";)Y++;Z=Y<et&&A[Y]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(et=A.length,Y=W+1;Y<et&&A[Y]==="NSM";)Y++;if(Y<et){var at=b[W],mt=at>=1425&&at<=2303||at===64286;if(ct=A[Y],mt&&(ct==="R"||ct==="AL")){Z="R";break}}}Z=W<1||(ct=A[W-1])==="B"?"N":T[W-1];break;case"B":R=!1,i=!0,Z=M;break;case"S":s=!0,Z="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":R=!1;break;case"BN":Z="N"}return Z},S=function(b,A,T){var W=b.split("");return T&&E(W,T,{hiLevel:M}),W.reverse(),A&&A.reverse(),W.join("")},E=function(b,A,T){var W,ct,J,Y,et,Z=-1,at=b.length,mt=0,k=[],z=M?g:_,$=[];for(R=!1,i=!1,s=!1,ct=0;ct<at;ct++)$[ct]=q(b[ct]);for(J=0;J<at;J++){if(et=mt,k[J]=Q(b,$,k,J),W=240&(mt=z[et][N[k[J]]]),mt&=15,A[J]=Y=z[mt][5],W>0)if(W===16){for(ct=Z;ct<J;ct++)A[ct]=1;Z=-1}else Z=-1;if(z[mt][6])Z===-1&&(Z=J);else if(Z>-1){for(ct=Z;ct<J;ct++)A[ct]=Y;Z=-1}$[J]==="B"&&(A[J]=0),T.hiLevel|=Y}s&&function(X,nt,ut){for(var ht=0;ht<ut;ht++)if(X[ht]==="S"){nt[ht]=M;for(var pt=ht-1;pt>=0&&X[pt]==="WS";pt--)nt[pt]=M}}($,A,at)},x=function(b,A,T,W,ct){if(!(ct.hiLevel<b)){if(b===1&&M===1&&!i)return A.reverse(),void(T&&T.reverse());for(var J,Y,et,Z,at=A.length,mt=0;mt<at;){if(W[mt]>=b){for(et=mt+1;et<at&&W[et]>=b;)et++;for(Z=mt,Y=et-1;Z<Y;Z++,Y--)J=A[Z],A[Z]=A[Y],A[Y]=J,T&&(J=T[Z],T[Z]=T[Y],T[Y]=J);mt=et}mt++}}},F=function(b,A,T){var W=b.split(""),ct={hiLevel:M};return T||(T=[]),E(W,T,ct),function(J,Y,et){if(et.hiLevel!==0&&m)for(var Z,at=0;at<J.length;at++)Y[at]===1&&(Z=O.indexOf(J[at]))>=0&&(J[at]=O[Z+1])}(W,T,ct),x(2,W,A,T,ct),x(1,W,A,T,ct),W.join("")};return this.__bidiEngine__.doBidiReorder=function(b,A,T){if(function(ct,J){if(J)for(var Y=0;Y<ct.length;Y++)J[Y]=Y;l===void 0&&(l=K(ct)),d===void 0&&(d=K(ct))}(b,A),o||!u||d)if(o&&u&&l^d)M=l?1:0,b=S(b,A,T);else if(!o&&u&&d)M=l?1:0,b=F(b,A,T),b=S(b,A);else if(!o||l||u||d){if(o&&!u&&l^d)b=S(b,A),l?(M=0,b=F(b,A,T)):(M=1,b=F(b,A,T),b=S(b,A));else if(o&&l&&!u&&d)M=1,b=F(b,A,T),b=S(b,A);else if(!o&&!u&&l^d){var W=m;l?(M=1,b=F(b,A,T),M=0,m=!1,b=F(b,A,T),m=W):(M=0,b=F(b,A,T),b=S(b,A),M=1,m=!1,b=F(b,A,T),m=W,b=S(b,A))}}else M=0,b=F(b,A,T);else M=l?1:0,b=F(b,A,T);return b},this.__bidiEngine__.setOptions=function(b){b&&(o=b.isInputVisual,u=b.isOutputVisual,l=b.isInputRtl,d=b.isOutputRtl,m=b.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],e=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,e.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var l=0;for(o=[],l=0;l<i.length;l+=1)Object.prototype.toString.call(i[l])==="[object Array]"?o.push([e.doBidiReorder(i[l][0]),i[l][1],i[l][2]]):o.push([e.doBidiReorder(i[l])]);r.text=o}else r.text=e.doBidiReorder(i);e.setOptions({isInputVisual:!0})}])}(Kt),Kt.API.TTFFont=function(){function n(t){var e;if(this.rawData=t,e=this.contents=new Zs(t),this.contents.pos=4,e.readString(4)==="ttcf")throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new k3(this),this.registerTTF()}return n.open=function(t){return new n(t)},n.prototype.parse=function(){return this.directory=new w3(this.contents),this.head=new b3(this),this.name=new T3(this),this.cmap=new x0(this),this.toUnicode={},this.hhea=new A3(this),this.maxp=new P3(this),this.hmtx=new N3(this),this.post=new I3(this),this.os2=new E3(this),this.loca=new R3(this),this.glyf=new x3(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var t,e,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,u,d;for(d=[],o=0,l=(u=this.bbox).length;o<l;o++)t=u[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(e=i>>16)&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(t){var e;return((e=this.cmap.unicode)!=null?e.codeMap[t]:void 0)||0},n.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},n.prototype.widthOfString=function(t,e,r){var i,s,o,l;for(o=0,s=0,l=(t=""+t).length;0<=l?s<l:s>l;s=0<=l?++s:--s)i=t.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/e)||0;return o*(e/1e3)},n.prototype.lineHeight=function(t,e){var r;return e==null&&(e=!1),r=e?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},n}();var ui,Zs=function(){function n(t){this.data=t??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(t){return this.data[this.pos++]=t},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},n.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},n.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},n.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},n.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},n.prototype.readString=function(t){var e,r;for(r=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)r[e]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(t){var e,r,i;for(i=[],e=0,r=t.length;0<=r?e<r:e>r;e=0<=r?++e:--e)i.push(this.writeByte(t.charCodeAt(e)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(t){return this.writeInt16(t)},n.prototype.readLongLong=function(){var t,e,r,i,s,o,l,u;return t=this.readByte(),e=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),u=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^l)+(255^u)+1):72057594037927940*t+281474976710656*e+1099511627776*r+4294967296*i+16777216*s+65536*o+256*l+u},n.prototype.writeLongLong=function(t){var e,r;return e=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(t){return this.writeInt32(t)},n.prototype.read=function(t){var e,r;for(e=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)e.push(this.readByte());return e},n.prototype.write=function(t){var e,r,i,s;for(s=[],r=0,i=t.length;r<i;r++)e=t[r],s.push(this.writeByte(e));return s},n}(),w3=function(){var n;function t(e){var r,i,s;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(e){var r,i,s,o,l,u,d,m,v,_,g,N,L;for(L in g=Object.keys(e).length,u=Math.log(2),v=16*Math.floor(Math.log(g)/u),o=Math.floor(v/u),m=16*g-v,(i=new Zs).writeInt(this.scalarType),i.writeShort(g),i.writeShort(v),i.writeShort(o),i.writeShort(m),s=16*g,d=i.pos+s,l=null,N=[],e)for(_=e[L],i.writeString(L),i.writeInt(n(_)),i.writeInt(d),i.writeInt(_.length),N=N.concat(_),L==="head"&&(l=d),d+=_.length;d%4;)N.push(0),d++;return i.write(N),r=2981146554-n(i.data),i.pos=l+8,i.writeUInt32(r),i.data},n=function(e){var r,i,s,o;for(e=C0.call(e);e.length%4;)e.push(0);for(s=new Zs(e),i=0,r=0,o=e.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},t}(),_3={}.hasOwnProperty,Oi=function(n,t){for(var e in t)_3.call(t,e)&&(n[e]=t[e]);function r(){this.constructor=n}return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n};ui=function(){function n(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var b3=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Oi(t,ui),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new Zs).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t}(),Fg=function(){function n(t,e){var r,i,s,o,l,u,d,m,v,_,g,N,L,O,C,R,M;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),v=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(u=0;u<256;++u)this.codeMap[u]=t.readByte();break;case 4:for(g=t.readUInt16(),_=g/2,t.pos+=6,s=function(){var q,K;for(K=[],u=q=0;0<=_?q<_:q>_;u=0<=_?++q:--q)K.push(t.readUInt16());return K}(),t.pos+=2,L=function(){var q,K;for(K=[],u=q=0;0<=_?q<_:q>_;u=0<=_?++q:--q)K.push(t.readUInt16());return K}(),d=function(){var q,K;for(K=[],u=q=0;0<=_?q<_:q>_;u=0<=_?++q:--q)K.push(t.readUInt16());return K}(),m=function(){var q,K;for(K=[],u=q=0;0<=_?q<_:q>_;u=0<=_?++q:--q)K.push(t.readUInt16());return K}(),i=(this.length-t.pos+this.offset)/2,l=function(){var q,K;for(K=[],u=q=0;0<=i?q<i:q>i;u=0<=i?++q:--q)K.push(t.readUInt16());return K}(),u=C=0,M=s.length;C<M;u=++C)for(O=s[u],r=R=N=L[u];N<=O?R<=O:R>=O;r=N<=O?++R:--R)m[u]===0?o=r+d[u]:(o=l[m[u]/2+(r-N)-(_-u)]||0)!==0&&(o+=d[u]),this.codeMap[r]=65535&o}t.pos=v}return n.encode=function(t,e){var r,i,s,o,l,u,d,m,v,_,g,N,L,O,C,R,M,q,K,Q,S,E,x,F,b,A,T,W,ct,J,Y,et,Z,at,mt,k,z,$,X,nt,ut,ht,pt,Tt,St,Lt;switch(W=new Zs,o=Object.keys(t).sort(function(kt,$t){return kt-$t}),e){case"macroman":for(L=0,O=function(){var kt=[];for(N=0;N<256;++N)kt.push(0);return kt}(),R={0:0},s={},ct=0,Z=o.length;ct<Z;ct++)R[pt=t[i=o[ct]]]==null&&(R[pt]=++L),s[i]={old:t[i],new:R[t[i]]},O[i]=R[t[i]];return W.writeUInt16(1),W.writeUInt16(0),W.writeUInt32(12),W.writeUInt16(0),W.writeUInt16(262),W.writeUInt16(0),W.write(O),{charMap:s,subtable:W.data,maxGlyphID:L+1};case"unicode":for(A=[],v=[],M=0,R={},r={},C=d=null,J=0,at=o.length;J<at;J++)R[K=t[i=o[J]]]==null&&(R[K]=++M),r[i]={old:K,new:R[K]},l=R[K]-i,C!=null&&l===d||(C&&v.push(C),A.push(i),d=l),C=i;for(C&&v.push(C),v.push(65535),A.push(65535),F=2*(x=A.length),E=2*Math.pow(Math.log(x)/Math.LN2,2),_=Math.log(E/2)/Math.LN2,S=2*x-E,u=[],Q=[],g=[],N=Y=0,mt=A.length;Y<mt;N=++Y){if(b=A[N],m=v[N],b===65535){u.push(0),Q.push(0);break}if(b-(T=r[b].new)>=32768)for(u.push(0),Q.push(2*(g.length+x-N)),i=et=b;b<=m?et<=m:et>=m;i=b<=m?++et:--et)g.push(r[i].new);else u.push(T-b),Q.push(0)}for(W.writeUInt16(3),W.writeUInt16(1),W.writeUInt32(12),W.writeUInt16(4),W.writeUInt16(16+8*x+2*g.length),W.writeUInt16(0),W.writeUInt16(F),W.writeUInt16(E),W.writeUInt16(_),W.writeUInt16(S),ut=0,k=v.length;ut<k;ut++)i=v[ut],W.writeUInt16(i);for(W.writeUInt16(0),ht=0,z=A.length;ht<z;ht++)i=A[ht],W.writeUInt16(i);for(Tt=0,$=u.length;Tt<$;Tt++)l=u[Tt],W.writeUInt16(l);for(St=0,X=Q.length;St<X;St++)q=Q[St],W.writeUInt16(q);for(Lt=0,nt=g.length;Lt<nt;Lt++)L=g[Lt],W.writeUInt16(L);return{charMap:r,subtable:W.data,maxGlyphID:M+1}}},n}(),x0=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Oi(t,ui),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,i,s;for(e.pos=this.offset,this.version=e.readUInt16(),s=e.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new Fg(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var i,s;return r==null&&(r="macroman"),i=Fg.encode(e,r),(s=new Zs).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},t}(),A3=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Oi(t,ui),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),E3=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Oi(t,ui),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(e.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(e.readInt());return i}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(e.readInt());return i}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),I3=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Oi(t,ui),t.prototype.tag="post",t.prototype.parse=function(e){var r,i,s;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:break;case 131072:var o;for(i=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],s=[];e.pos<this.offset+this.length;)r=e.readByte(),s.push(this.names.push(e.readString(r)));return s;case 151552:return i=e.readUInt16(),this.offsets=e.read(i);case 196608:break;case 262144:return this.map=(function(){var l,u,d;for(d=[],o=l=0,u=this.file.maxp.numGlyphs;0<=u?l<u:l>u;o=0<=u?++l:--l)d.push(e.readUInt32());return d}).call(this)}},t}(),S3=function(n,t){this.raw=n,this.length=n.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},T3=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Oi(t,ui),t.prototype.tag="name",t.prototype.parse=function(e){var r,i,s,o,l,u,d,m,v,_,g;for(e.pos=this.offset,e.readShort(),r=e.readShort(),u=e.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+u+e.readShort()});for(d={},o=v=0,_=i.length;v<_;o=++v)s=i[o],e.pos=s.offset,m=e.readString(s.length),l=new S3(m,s),d[g=s.nameID]==null&&(d[g]=[]),d[s.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t}(),P3=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Oi(t,ui),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),N3=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Oi(t,ui),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,i,s,o,l,u,d;for(e.pos=this.offset,this.metrics=[],r=0,u=this.file.hhea.numberOfMetrics;0<=u?r<u:r>u;r=0<=u?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var m,v;for(v=[],r=m=0;0<=s?m<s:m>s;r=0<=s?++m:--m)v.push(e.readInt16());return v}(),this.widths=(function(){var m,v,_,g;for(g=[],m=0,v=(_=this.metrics).length;m<v;m++)o=_[m],g.push(o.advance);return g}).call(this),i=this.widths[this.widths.length-1],d=[],r=l=0;0<=s?l<s:l>s;r=0<=s?++l:--l)d.push(this.widths.push(i));return d},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),C0=[].slice,x3=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Oi(t,ui),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,i,s,o,l,u,d,m,v,_;return e in this.cache?this.cache[e]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(e),(s=o.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+i,l=(u=new Zs(r.read(s))).readShort(),m=u.readShort(),_=u.readShort(),d=u.readShort(),v=u.readShort(),this.cache[e]=l===-1?new L3(u,m,_,d,v):new C3(u,l,m,_,d,v),this.cache[e]))},t.prototype.encode=function(e,r,i){var s,o,l,u,d;for(l=[],o=[],u=0,d=r.length;u<d;u++)s=e[r[u]],o.push(l.length),s&&(l=l.concat(s.encode(i)));return o.push(l.length),{table:l,offsets:o}},t}(),C3=function(){function n(t,e,r,i,s,o){this.raw=t,this.numberOfContours=e,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),L3=function(){function n(t,e,r,i,s){var o,l;for(this.raw=t,this.xMin=e,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return n.prototype.encode=function(){var t,e,r;for(e=new Zs(C0.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)e.pos=this.glyphOffsets[t];return e.data},n}(),R3=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Oi(t,ui),t.prototype.tag="loca",t.prototype.parse=function(e){var r,i;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(e.readUInt32());return o}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,l=0;l<i.length;++l)if(i[l]=s,o<r.length&&r[o]==l){++o,i[l]=s;var u=this.offsets[l],d=this.offsets[l+1]-u;d>0&&(s+=d)}for(var m=new Array(4*i.length),v=0;v<i.length;++v)m[4*v+3]=255&i[v],m[4*v+2]=(65280&i[v])>>8,m[4*v+1]=(16711680&i[v])>>16,m[4*v]=(4278190080&i[v])>>24;return m},t}(),k3=function(){function n(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var t,e,r,i,s;for(e in i=this.font.cmap.tables[0].codeMap,t={},s=this.subset)r=s[e],t[e]=i[r];return t},n.prototype.glyphsFor=function(t){var e,r,i,s,o,l,u;for(i={},o=0,l=t.length;o<l;o++)i[s=t[o]]=this.font.glyf.glyphFor(s);for(s in e=[],i)(r=i[s])!=null&&r.compound&&e.push.apply(e,r.glyphIDs);if(e.length>0)for(s in u=this.glyphsFor(e))r=u[s],i[s]=r;return i},n.prototype.encode=function(t,e){var r,i,s,o,l,u,d,m,v,_,g,N,L,O,C;for(i in r=x0.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),g={0:0},C=r.charMap)g[(u=C[i]).old]=u.new;for(N in _=r.maxGlyphID,o)N in g||(g[N]=_++);return m=function(R){var M,q;for(M in q={},R)q[R[M]]=M;return q}(g),v=Object.keys(m).sort(function(R,M){return R-M}),L=function(){var R,M,q;for(q=[],R=0,M=v.length;R<M;R++)l=v[R],q.push(m[l]);return q}(),s=this.font.glyf.encode(o,L,g),d=this.font.loca.encode(s.offsets,L),O={cmap:this.font.cmap.raw(),glyf:s.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(O["OS/2"]=this.font.os2.raw()),this.font.directory.encode(O)},n}();Kt.API.PDFObject=function(){var n;function t(){}return n=function(e,r){return(Array(r+1).join("0")+e).slice(-r)},t.convert=function(e){var r,i,s,o;if(Array.isArray(e))return"["+function(){var l,u,d;for(d=[],l=0,u=e.length;l<u;l++)r=e[l],d.push(t.convert(r));return d}().join(" ")+"]";if(typeof e=="string")return"/"+e;if(e!=null&&e.isString)return"("+e+")";if(e instanceof Date)return"(D:"+n(e.getUTCFullYear(),4)+n(e.getUTCMonth(),2)+n(e.getUTCDate(),2)+n(e.getUTCHours(),2)+n(e.getUTCMinutes(),2)+n(e.getUTCSeconds(),2)+"Z)";if({}.toString.call(e)==="[object Object]"){for(i in s=["<<"],e)o=e[i],s.push("/"+i+" "+t.convert(o));return s.push(">>"),s.join(`
`)}return""+e},t}();const D3=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:h3,AcroFormAppearance:Bt,AcroFormButton:mn,AcroFormCheckBox:Oc,AcroFormChoiceField:ko,AcroFormComboBox:Oo,AcroFormEditBox:kc,AcroFormListBox:Do,AcroFormPasswordField:Fc,AcroFormPushButton:Dc,AcroFormRadioButton:Fo,AcroFormTextField:Ws,GState:Kc,ShadingPattern:Fs,TilingPattern:xo,default:Kt,jsPDF:Kt},Symbol.toStringTag,{value:"Module"}));var xh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function z3(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function O3(n){if(n.__esModule)return n;var t=n.default;if(typeof t=="function"){var e=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),e}var F3={exports:{}};const M3=O3(D3);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(n,t){(function(r,i){n.exports=i(function(){try{return M3}catch{}}())})(typeof globalThis<"u"?globalThis:typeof xh<"u"?xh:typeof window<"u"?window:typeof self<"u"?self:xh,function(e){return function(){var r={172:function(l,u){var d=this&&this.__extends||function(){var _=function(g,N){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,O){L.__proto__=O}||function(L,O){for(var C in O)Object.prototype.hasOwnProperty.call(O,C)&&(L[C]=O[C])},_(g,N)};return function(g,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");_(g,N);function L(){this.constructor=g}g.prototype=N===null?Object.create(N):(L.prototype=N.prototype,new L)}}();Object.defineProperty(u,"__esModule",{value:!0}),u.CellHookData=u.HookData=void 0;var m=function(){function _(g,N,L){this.table=N,this.pageNumber=N.pageNumber,this.pageCount=this.pageNumber,this.settings=N.settings,this.cursor=L,this.doc=g.getDocument()}return _}();u.HookData=m;var v=function(_){d(g,_);function g(N,L,O,C,R,M){var q=_.call(this,N,L,M)||this;return q.cell=O,q.row=C,q.column=R,q.section=C.section,q}return g}(m);u.CellHookData=v},340:function(l,u,d){Object.defineProperty(u,"__esModule",{value:!0});var m=d(4),v=d(136),_=d(744),g=d(776),N=d(664),L=d(972);function O(C){C.API.autoTable=function(){for(var R=[],M=0;M<arguments.length;M++)R[M]=arguments[M];var q;R.length===1?q=R[0]:(console.error("Use of deprecated autoTable initiation"),q=R[2]||{},q.columns=R[0],q.body=R[1]);var K=(0,g.parseInput)(this,q),Q=(0,L.createTable)(this,K);return(0,N.drawTable)(this,Q),this},C.API.lastAutoTable=!1,C.API.previousAutoTable=!1,C.API.autoTable.previous=!1,C.API.autoTableText=function(R,M,q,K){(0,v.default)(R,M,q,K,this)},C.API.autoTableSetDefaults=function(R){return _.DocHandler.setDefaults(R,this),this},C.autoTableSetDefaults=function(R,M){_.DocHandler.setDefaults(R,M)},C.API.autoTableHtmlToJson=function(R,M){var q;if(M===void 0&&(M=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var K=new _.DocHandler(this),Q=(0,m.parseHtml)(K,R,window,M,!1),S=Q.head,E=Q.body,x=((q=S[0])===null||q===void 0?void 0:q.map(function(F){return F.content}))||[];return{columns:x,rows:E,data:E}},C.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var R=this.lastAutoTable;return R&&R.finalY?R.finalY:0},C.API.autoTableAddPageContent=function(R){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),C.API.autoTable.globalDefaults||(C.API.autoTable.globalDefaults={}),C.API.autoTable.globalDefaults.addPageContent=R,this},C.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}u.default=O},136:function(l,u){Object.defineProperty(u,"__esModule",{value:!0});function d(m,v,_,g,N){g=g||{};var L=1.15,O=N.internal.scaleFactor,C=N.internal.getFontSize()/O,R=N.getLineHeightFactor?N.getLineHeightFactor():L,M=C*R,q=/\r\n|\r|\n/g,K="",Q=1;if((g.valign==="middle"||g.valign==="bottom"||g.halign==="center"||g.halign==="right")&&(K=typeof m=="string"?m.split(q):m,Q=K.length||1),_+=C*(2-L),g.valign==="middle"?_-=Q/2*M:g.valign==="bottom"&&(_-=Q*M),g.halign==="center"||g.halign==="right"){var S=C;if(g.halign==="center"&&(S*=.5),K&&Q>=1){for(var E=0;E<K.length;E++)N.text(K[E],v-N.getStringUnitWidth(K[E])*S,_),_+=M;return N}v-=N.getStringUnitWidth(m)*S}return g.halign==="justify"?N.text(m,v,_,{maxWidth:g.maxWidth||100,align:"justify"}):N.text(m,v,_),N}u.default=d},420:function(l,u){Object.defineProperty(u,"__esModule",{value:!0}),u.getPageAvailableWidth=u.parseSpacing=u.getFillStyle=u.addTableBorder=u.getStringWidth=void 0;function d(N,L,O){O.applyStyles(L,!0);var C=Array.isArray(N)?N:[N],R=C.map(function(M){return O.getTextWidth(M)}).reduce(function(M,q){return Math.max(M,q)},0);return R}u.getStringWidth=d;function m(N,L,O,C){var R=L.settings.tableLineWidth,M=L.settings.tableLineColor;N.applyStyles({lineWidth:R,lineColor:M});var q=v(R,!1);q&&N.rect(O.x,O.y,L.getWidth(N.pageSize().width),C.y-O.y,q)}u.addTableBorder=m;function v(N,L){var O=N>0,C=L||L===0;return O&&C?"DF":O?"S":C?"F":null}u.getFillStyle=v;function _(N,L){var O,C,R,M;if(N=N||L,Array.isArray(N)){if(N.length>=4)return{top:N[0],right:N[1],bottom:N[2],left:N[3]};if(N.length===3)return{top:N[0],right:N[1],bottom:N[2],left:N[1]};if(N.length===2)return{top:N[0],right:N[1],bottom:N[0],left:N[1]};N.length===1?N=N[0]:N=L}return typeof N=="object"?(typeof N.vertical=="number"&&(N.top=N.vertical,N.bottom=N.vertical),typeof N.horizontal=="number"&&(N.right=N.horizontal,N.left=N.horizontal),{left:(O=N.left)!==null&&O!==void 0?O:L,top:(C=N.top)!==null&&C!==void 0?C:L,right:(R=N.right)!==null&&R!==void 0?R:L,bottom:(M=N.bottom)!==null&&M!==void 0?M:L}):(typeof N!="number"&&(N=L),{top:N,right:N,bottom:N,left:N})}u.parseSpacing=_;function g(N,L){var O=_(L.settings.margin,0);return N.pageSize().width-(O.left+O.right)}u.getPageAvailableWidth=g},796:function(l,u){var d=this&&this.__extends||function(){var g=function(N,L){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,C){O.__proto__=C}||function(O,C){for(var R in C)Object.prototype.hasOwnProperty.call(C,R)&&(O[R]=C[R])},g(N,L)};return function(N,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");g(N,L);function O(){this.constructor=N}N.prototype=L===null?Object.create(L):(O.prototype=L.prototype,new O)}}();Object.defineProperty(u,"__esModule",{value:!0}),u.getTheme=u.defaultStyles=u.HtmlRowInput=void 0;var m=function(g){d(N,g);function N(L){var O=g.call(this)||this;return O._element=L,O}return N}(Array);u.HtmlRowInput=m;function v(g){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/g,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}u.defaultStyles=v;function _(g){var N={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return N[g]}u.getTheme=_},903:function(l,u,d){Object.defineProperty(u,"__esModule",{value:!0}),u.parseCss=void 0;var m=d(420);function v(O,C,R,M,q){var K={},Q=1.3333333333333333,S=g(C,function(Z){return q.getComputedStyle(Z).backgroundColor});S!=null&&(K.fillColor=S);var E=g(C,function(Z){return q.getComputedStyle(Z).color});E!=null&&(K.textColor=E);var x=L(M,R);x&&(K.cellPadding=x);var F="borderTopColor",b=Q*R,A=M.borderTopWidth;if(M.borderBottomWidth===A&&M.borderRightWidth===A&&M.borderLeftWidth===A){var T=(parseFloat(A)||0)/b;T&&(K.lineWidth=T)}else K.lineWidth={top:(parseFloat(M.borderTopWidth)||0)/b,right:(parseFloat(M.borderRightWidth)||0)/b,bottom:(parseFloat(M.borderBottomWidth)||0)/b,left:(parseFloat(M.borderLeftWidth)||0)/b},K.lineWidth.top||(K.lineWidth.right?F="borderRightColor":K.lineWidth.bottom?F="borderBottomColor":K.lineWidth.left&&(F="borderLeftColor"));var W=g(C,function(Z){return q.getComputedStyle(Z)[F]});W!=null&&(K.lineColor=W);var ct=["left","right","center","justify"];ct.indexOf(M.textAlign)!==-1&&(K.halign=M.textAlign),ct=["middle","bottom","top"],ct.indexOf(M.verticalAlign)!==-1&&(K.valign=M.verticalAlign);var J=parseInt(M.fontSize||"");isNaN(J)||(K.fontSize=J/Q);var Y=_(M);Y&&(K.fontStyle=Y);var et=(M.fontFamily||"").toLowerCase();return O.indexOf(et)!==-1&&(K.font=et),K}u.parseCss=v;function _(O){var C="";return(O.fontWeight==="bold"||O.fontWeight==="bolder"||parseInt(O.fontWeight)>=700)&&(C="bold"),(O.fontStyle==="italic"||O.fontStyle==="oblique")&&(C+="italic"),C}function g(O,C){var R=N(O,C);if(!R)return null;var M=R.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!M||!Array.isArray(M))return null;var q=[parseInt(M[1]),parseInt(M[2]),parseInt(M[3])],K=parseInt(M[4]);return K===0||isNaN(q[0])||isNaN(q[1])||isNaN(q[2])?null:q}function N(O,C){var R=C(O);return R==="rgba(0, 0, 0, 0)"||R==="transparent"||R==="initial"||R==="inherit"?O.parentElement==null?null:N(O.parentElement,C):R}function L(O,C){var R=[O.paddingTop,O.paddingRight,O.paddingBottom,O.paddingLeft],M=96/(72/C),q=(parseInt(O.lineHeight)-parseInt(O.fontSize))/C/2,K=R.map(function(S){return parseInt(S||"0")/M}),Q=(0,m.parseSpacing)(K,0);return q>Q.top&&(Q.top=q),q>Q.bottom&&(Q.bottom=q),Q}},744:function(l,u){Object.defineProperty(u,"__esModule",{value:!0}),u.DocHandler=void 0;var d={},m=function(){function v(_){this.jsPDFDocument=_,this.userStyles={textColor:_.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:_.internal.getFontSize(),fontStyle:_.internal.getFont().fontStyle,font:_.internal.getFont().fontName,lineWidth:_.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:_.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return v.setDefaults=function(_,g){g===void 0&&(g=null),g?g.__autoTableDocumentDefaults=_:d=_},v.unifyColor=function(_){return Array.isArray(_)?_:typeof _=="number"?[_,_,_]:typeof _=="string"?[_]:null},v.prototype.applyStyles=function(_,g){var N,L,O;g===void 0&&(g=!1),_.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(_.fontStyle);var C=this.jsPDFDocument.internal.getFont(),R=C.fontStyle,M=C.fontName;if(_.font&&(M=_.font),_.fontStyle){R=_.fontStyle;var q=this.getFontList()[M];q&&q.indexOf(R)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(q[0]),R=q[0])}if(this.jsPDFDocument.setFont(M,R),_.fontSize&&this.jsPDFDocument.setFontSize(_.fontSize),!g){var K=v.unifyColor(_.fillColor);K&&(N=this.jsPDFDocument).setFillColor.apply(N,K),K=v.unifyColor(_.textColor),K&&(L=this.jsPDFDocument).setTextColor.apply(L,K),K=v.unifyColor(_.lineColor),K&&(O=this.jsPDFDocument).setDrawColor.apply(O,K),typeof _.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(_.lineWidth)}},v.prototype.splitTextToSize=function(_,g,N){return this.jsPDFDocument.splitTextToSize(_,g,N)},v.prototype.rect=function(_,g,N,L,O){return this.jsPDFDocument.rect(_,g,N,L,O)},v.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},v.prototype.getTextWidth=function(_){return this.jsPDFDocument.getTextWidth(_)},v.prototype.getDocument=function(){return this.jsPDFDocument},v.prototype.setPage=function(_){this.jsPDFDocument.setPage(_)},v.prototype.addPage=function(){return this.jsPDFDocument.addPage()},v.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},v.prototype.getGlobalOptions=function(){return d||{}},v.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},v.prototype.pageSize=function(){var _=this.jsPDFDocument.internal.pageSize;return _.width==null&&(_={width:_.getWidth(),height:_.getHeight()}),_},v.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},v.prototype.getLineHeightFactor=function(){var _=this.jsPDFDocument;return _.getLineHeightFactor?_.getLineHeightFactor():1.15},v.prototype.getLineHeight=function(_){return _/this.scaleFactor()*this.getLineHeightFactor()},v.prototype.pageNumber=function(){var _=this.jsPDFDocument.internal.getCurrentPageInfo();return _?_.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},v}();u.DocHandler=m},4:function(l,u,d){Object.defineProperty(u,"__esModule",{value:!0}),u.parseHtml=void 0;var m=d(903),v=d(796);function _(L,O,C,R,M){var q,K;R===void 0&&(R=!1),M===void 0&&(M=!1);var Q;typeof O=="string"?Q=C.document.querySelector(O):Q=O;var S=Object.keys(L.getFontList()),E=L.scaleFactor(),x=[],F=[],b=[];if(!Q)return console.error("Html table could not be found with input: ",O),{head:x,body:F,foot:b};for(var A=0;A<Q.rows.length;A++){var T=Q.rows[A],W=(K=(q=T==null?void 0:T.parentElement)===null||q===void 0?void 0:q.tagName)===null||K===void 0?void 0:K.toLowerCase(),ct=g(S,E,C,T,R,M);ct&&(W==="thead"?x.push(ct):W==="tfoot"?b.push(ct):F.push(ct))}return{head:x,body:F,foot:b}}u.parseHtml=_;function g(L,O,C,R,M,q){for(var K=new v.HtmlRowInput(R),Q=0;Q<R.cells.length;Q++){var S=R.cells[Q],E=C.getComputedStyle(S);if(M||E.display!=="none"){var x=void 0;q&&(x=(0,m.parseCss)(L,S,O,E,C)),K.push({rowSpan:S.rowSpan,colSpan:S.colSpan,styles:x,_element:S,content:N(S)})}}var F=C.getComputedStyle(R);if(K.length>0&&(M||F.display!=="none"))return K}function N(L){var O=L.cloneNode(!0);return O.innerHTML=O.innerHTML.replace(/\n/g,"").replace(/ +/g," "),O.innerHTML=O.innerHTML.split(/<br.*?>/).map(function(C){return C.trim()}).join(`
`),O.innerText||O.textContent||""}},776:function(l,u,d){Object.defineProperty(u,"__esModule",{value:!0}),u.parseInput=void 0;var m=d(4),v=d(356),_=d(420),g=d(744),N=d(792);function L(Q,S){var E=new g.DocHandler(Q),x=E.getDocumentOptions(),F=E.getGlobalOptions();(0,N.default)(E,F,x,S);var b=(0,v.assign)({},F,x,S),A;typeof window<"u"&&(A=window);var T=O(F,x,S),W=C(F,x,S),ct=R(E,b),J=q(E,b,A);return{id:S.tableId,content:J,hooks:W,styles:T,settings:ct}}u.parseInput=L;function O(Q,S,E){for(var x={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},F=function(W){if(W==="columnStyles"){var ct=Q[W],J=S[W],Y=E[W];x.columnStyles=(0,v.assign)({},ct,J,Y)}else{var et=[Q,S,E],Z=et.map(function(at){return at[W]||{}});x[W]=(0,v.assign)({},Z[0],Z[1],Z[2])}},b=0,A=Object.keys(x);b<A.length;b++){var T=A[b];F(T)}return x}function C(Q,S,E){for(var x=[Q,S,E],F={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},b=0,A=x;b<A.length;b++){var T=A[b];T.didParseCell&&F.didParseCell.push(T.didParseCell),T.willDrawCell&&F.willDrawCell.push(T.willDrawCell),T.didDrawCell&&F.didDrawCell.push(T.didDrawCell),T.willDrawPage&&F.willDrawPage.push(T.willDrawPage),T.didDrawPage&&F.didDrawPage.push(T.didDrawPage)}return F}function R(Q,S){var E,x,F,b,A,T,W,ct,J,Y,et,Z,at=(0,_.parseSpacing)(S.margin,40/Q.scaleFactor()),mt=(E=M(Q,S.startY))!==null&&E!==void 0?E:at.top,k;S.showFoot===!0?k="everyPage":S.showFoot===!1?k="never":k=(x=S.showFoot)!==null&&x!==void 0?x:"everyPage";var z;S.showHead===!0?z="everyPage":S.showHead===!1?z="never":z=(F=S.showHead)!==null&&F!==void 0?F:"everyPage";var $=(b=S.useCss)!==null&&b!==void 0?b:!1,X=S.theme||($?"plain":"striped"),nt=!!S.horizontalPageBreak,ut=(A=S.horizontalPageBreakRepeat)!==null&&A!==void 0?A:null;return{includeHiddenHtml:(T=S.includeHiddenHtml)!==null&&T!==void 0?T:!1,useCss:$,theme:X,startY:mt,margin:at,pageBreak:(W=S.pageBreak)!==null&&W!==void 0?W:"auto",rowPageBreak:(ct=S.rowPageBreak)!==null&&ct!==void 0?ct:"auto",tableWidth:(J=S.tableWidth)!==null&&J!==void 0?J:"auto",showHead:z,showFoot:k,tableLineWidth:(Y=S.tableLineWidth)!==null&&Y!==void 0?Y:0,tableLineColor:(et=S.tableLineColor)!==null&&et!==void 0?et:200,horizontalPageBreak:nt,horizontalPageBreakRepeat:ut,horizontalPageBreakBehaviour:(Z=S.horizontalPageBreakBehaviour)!==null&&Z!==void 0?Z:"afterAllRows"}}function M(Q,S){var E=Q.getLastAutoTable(),x=Q.scaleFactor(),F=Q.pageNumber(),b=!1;if(E&&E.startPageNumber){var A=E.startPageNumber+E.pageNumber-1;b=A===F}return typeof S=="number"?S:(S==null||S===!1)&&b&&(E==null?void 0:E.finalY)!=null?E.finalY+20/x:null}function q(Q,S,E){var x=S.head||[],F=S.body||[],b=S.foot||[];if(S.html){var A=S.includeHiddenHtml;if(E){var T=(0,m.parseHtml)(Q,S.html,E,A,S.useCss)||{};x=T.head||x,F=T.body||x,b=T.foot||x}else console.error("Cannot parse html in non browser environment")}var W=S.columns||K(x,F,b);return{columns:W,head:x,body:F,foot:b}}function K(Q,S,E){var x=Q[0]||S[0]||E[0]||[],F=[];return Object.keys(x).filter(function(b){return b!=="_element"}).forEach(function(b){var A=1,T;Array.isArray(x)?T=x[parseInt(b)]:T=x[b],typeof T=="object"&&!Array.isArray(T)&&(A=(T==null?void 0:T.colSpan)||1);for(var W=0;W<A;W++){var ct=void 0;Array.isArray(x)?ct=F.length:ct=b+(W>0?"_".concat(W):"");var J={dataKey:ct};F.push(J)}}),F}},792:function(l,u){Object.defineProperty(u,"__esModule",{value:!0});function d(v,_,g,N){for(var L=function(M){M&&typeof M!="object"&&console.error("The options parameter should be of type object, is: "+typeof M),typeof M.extendWidth<"u"&&(M.tableWidth=M.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof M.margins<"u"&&(typeof M.margin>"u"&&(M.margin=M.margins),console.error("Use of deprecated option: margins, use margin instead.")),M.startY&&typeof M.startY!="number"&&(console.error("Invalid value for startY option",M.startY),delete M.startY),!M.didDrawPage&&(M.afterPageContent||M.beforePageContent||M.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),M.didDrawPage=function(b){v.applyStyles(v.userStyles),M.beforePageContent&&M.beforePageContent(b),v.applyStyles(v.userStyles),M.afterPageContent&&M.afterPageContent(b),v.applyStyles(v.userStyles),M.afterPageAdd&&b.pageNumber>1&&b.afterPageAdd(b),v.applyStyles(v.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(b){M[b]&&console.error('The "'.concat(b,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(b){var A=b[0],T=b[1];M[T]&&(console.error("Use of deprecated option ".concat(T,". Use ").concat(A," instead")),M[A]=M[T])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(b){var A=typeof b=="string"?b:b[0],T=typeof b=="string"?b:b[1];typeof M[A]<"u"&&(typeof M.styles[T]>"u"&&(M.styles[T]=M[A]),console.error("Use of deprecated option: "+A+", use the style "+T+" instead."))});for(var q=0,K=["styles","bodyStyles","headStyles","footStyles"];q<K.length;q++){var Q=K[q];m(M[Q]||{})}for(var S=M.columnStyles||{},E=0,x=Object.keys(S);E<x.length;E++){var F=x[E];m(S[F]||{})}},O=0,C=[_,g,N];O<C.length;O++){var R=C[O];L(R)}}u.default=d;function m(v){v.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),v.minCellHeight||(v.minCellHeight=v.rowHeight)):v.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),v.cellWidth||(v.cellWidth=v.columnWidth))}},260:function(l,u,d){Object.defineProperty(u,"__esModule",{value:!0}),u.Column=u.Cell=u.Row=u.Table=void 0;var m=d(796),v=d(172),_=d(420),g=function(){function C(R,M){this.pageNumber=1,this.pageCount=1,this.id=R.id,this.settings=R.settings,this.styles=R.styles,this.hooks=R.hooks,this.columns=M.columns,this.head=M.head,this.body=M.body,this.foot=M.foot}return C.prototype.getHeadHeight=function(R){return this.head.reduce(function(M,q){return M+q.getMaxCellHeight(R)},0)},C.prototype.getFootHeight=function(R){return this.foot.reduce(function(M,q){return M+q.getMaxCellHeight(R)},0)},C.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},C.prototype.callCellHooks=function(R,M,q,K,Q,S){for(var E=0,x=M;E<x.length;E++){var F=x[E],b=new v.CellHookData(R,this,q,K,Q,S),A=F(b)===!1;if(q.text=Array.isArray(q.text)?q.text:[q.text],A)return!1}return!0},C.prototype.callEndPageHooks=function(R,M){R.applyStyles(R.userStyles);for(var q=0,K=this.hooks.didDrawPage;q<K.length;q++){var Q=K[q];Q(new v.HookData(R,this,M))}},C.prototype.callWillDrawPageHooks=function(R,M){for(var q=0,K=this.hooks.willDrawPage;q<K.length;q++){var Q=K[q];Q(new v.HookData(R,this,M))}},C.prototype.getWidth=function(R){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var M=this.columns.reduce(function(K,Q){return K+Q.wrappedWidth},0);return M}else{var q=this.settings.margin;return R-q.left-q.right}},C}();u.Table=g;var N=function(){function C(R,M,q,K,Q){Q===void 0&&(Q=!1),this.height=0,this.raw=R,R instanceof m.HtmlRowInput&&(this.raw=R._element,this.element=R._element),this.index=M,this.section=q,this.cells=K,this.spansMultiplePages=Q}return C.prototype.getMaxCellHeight=function(R){var M=this;return R.reduce(function(q,K){var Q;return Math.max(q,((Q=M.cells[K.index])===null||Q===void 0?void 0:Q.height)||0)},0)},C.prototype.hasRowSpan=function(R){var M=this;return R.filter(function(q){var K=M.cells[q.index];return K?K.rowSpan>1:!1}).length>0},C.prototype.canEntireRowFit=function(R,M){return this.getMaxCellHeight(M)<=R},C.prototype.getMinimumRowHeight=function(R,M){var q=this;return R.reduce(function(K,Q){var S=q.cells[Q.index];if(!S)return 0;var E=M.getLineHeight(S.styles.fontSize),x=S.padding("vertical"),F=x+E;return F>K?F:K},0)},C}();u.Row=N;var L=function(){function C(R,M,q){var K,Q;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=M,this.section=q,this.raw=R;var S=R;R!=null&&typeof R=="object"&&!Array.isArray(R)?(this.rowSpan=R.rowSpan||1,this.colSpan=R.colSpan||1,S=(Q=(K=R.content)!==null&&K!==void 0?K:R.title)!==null&&Q!==void 0?Q:R,R._element&&(this.raw=R._element)):(this.rowSpan=1,this.colSpan=1);var E=S!=null?""+S:"",x=/\r\n|\r|\n/g;this.text=E.split(x)}return C.prototype.getTextPos=function(){var R;if(this.styles.valign==="top")R=this.y+this.padding("top");else if(this.styles.valign==="bottom")R=this.y+this.height-this.padding("bottom");else{var M=this.height-this.padding("vertical");R=this.y+M/2+this.padding("top")}var q;if(this.styles.halign==="right")q=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var K=this.width-this.padding("horizontal");q=this.x+K/2+this.padding("left")}else q=this.x+this.padding("left");return{x:q,y:R}},C.prototype.getContentHeight=function(R,M){M===void 0&&(M=1.15);var q=Array.isArray(this.text)?this.text.length:1,K=this.styles.fontSize/R*M,Q=q*K+this.padding("vertical");return Math.max(Q,this.styles.minCellHeight)},C.prototype.padding=function(R){var M=(0,_.parseSpacing)(this.styles.cellPadding,0);return R==="vertical"?M.top+M.bottom:R==="horizontal"?M.left+M.right:M[R]},C}();u.Cell=L;var O=function(){function C(R,M,q){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=R,this.raw=M,this.index=q}return C.prototype.getMaxCustomCellWidth=function(R){for(var M=0,q=0,K=R.allRows();q<K.length;q++){var Q=K[q],S=Q.cells[this.index];S&&typeof S.styles.cellWidth=="number"&&(M=Math.max(M,S.styles.cellWidth))}return M},C}();u.Column=O},356:function(l,u){Object.defineProperty(u,"__esModule",{value:!0}),u.assign=void 0;function d(m,v,_,g,N){if(m==null)throw new TypeError("Cannot convert undefined or null to object");for(var L=Object(m),O=1;O<arguments.length;O++){var C=arguments[O];if(C!=null)for(var R in C)Object.prototype.hasOwnProperty.call(C,R)&&(L[R]=C[R])}return L}u.assign=d},972:function(l,u,d){Object.defineProperty(u,"__esModule",{value:!0}),u.createTable=void 0;var m=d(744),v=d(260),_=d(324),g=d(796),N=d(356);function L(Q,S){var E=new m.DocHandler(Q),x=O(S,E.scaleFactor()),F=new v.Table(S,x);return(0,_.calculateWidths)(E,F),E.applyStyles(E.userStyles),F}u.createTable=L;function O(Q,S){var E=Q.content,x=q(E.columns);if(E.head.length===0){var F=R(x,"head");F&&E.head.push(F)}if(E.foot.length===0){var F=R(x,"foot");F&&E.foot.push(F)}var b=Q.settings.theme,A=Q.styles;return{columns:x,head:C("head",E.head,x,A,b,S),body:C("body",E.body,x,A,b,S),foot:C("foot",E.foot,x,A,b,S)}}function C(Q,S,E,x,F,b){var A={},T=S.map(function(W,ct){for(var J=0,Y={},et=0,Z=0,at=0,mt=E;at<mt.length;at++){var k=mt[at];if(A[k.index]==null||A[k.index].left===0)if(Z===0){var z=void 0;Array.isArray(W)?z=W[k.index-et-J]:z=W[k.dataKey];var $={};typeof z=="object"&&!Array.isArray(z)&&($=(z==null?void 0:z.styles)||{});var X=K(Q,k,ct,F,x,b,$),nt=new v.Cell(z,X,Q);Y[k.dataKey]=nt,Y[k.index]=nt,Z=nt.colSpan-1,A[k.index]={left:nt.rowSpan-1,times:Z}}else Z--,et++;else A[k.index].left--,Z=A[k.index].times,J++}return new v.Row(W,ct,Q,Y)});return T}function R(Q,S){var E={};return Q.forEach(function(x){if(x.raw!=null){var F=M(S,x.raw);F!=null&&(E[x.dataKey]=F)}}),Object.keys(E).length>0?E:null}function M(Q,S){if(Q==="head"){if(typeof S=="object")return S.header||S.title||null;if(typeof S=="string"||typeof S=="number")return S}else if(Q==="foot"&&typeof S=="object")return S.footer;return null}function q(Q){return Q.map(function(S,E){var x,F,b;return typeof S=="object"?b=(F=(x=S.dataKey)!==null&&x!==void 0?x:S.key)!==null&&F!==void 0?F:E:b=E,new v.Column(b,S,E)})}function K(Q,S,E,x,F,b,A){var T=(0,g.getTheme)(x),W;Q==="head"?W=F.headStyles:Q==="body"?W=F.bodyStyles:Q==="foot"&&(W=F.footStyles);var ct=(0,N.assign)({},T.table,T[Q],F.styles,W),J=F.columnStyles[S.dataKey]||F.columnStyles[S.index]||{},Y=Q==="body"?J:{},et=Q==="body"&&E%2===0?(0,N.assign)({},T.alternateRow,F.alternateRowStyles):{},Z=(0,g.defaultStyles)(b),at=(0,N.assign)({},Z,ct,et,Y);return(0,N.assign)(at,A)}},664:function(l,u,d){Object.defineProperty(u,"__esModule",{value:!0}),u.addPage=u.drawTable=void 0;var m=d(420),v=d(260),_=d(744),g=d(356),N=d(136),L=d(224);function O(J,Y){var et=Y.settings,Z=et.startY,at=et.margin,mt={x:at.left,y:Z},k=Y.getHeadHeight(Y.columns)+Y.getFootHeight(Y.columns),z=Z+at.bottom+k;if(et.pageBreak==="avoid"){var $=Y.body,X=$.reduce(function(ht,pt){return ht+pt.height},0);z+=X}var nt=new _.DocHandler(J);(et.pageBreak==="always"||et.startY!=null&&z>nt.pageSize().height)&&(ct(nt),mt.y=at.top),Y.callWillDrawPageHooks(nt,mt);var ut=(0,g.assign)({},mt);Y.startPageNumber=nt.pageNumber(),et.horizontalPageBreak?C(nt,Y,ut,mt):(nt.applyStyles(nt.userStyles),(et.showHead==="firstPage"||et.showHead==="everyPage")&&Y.head.forEach(function(ht){return F(nt,Y,ht,mt,Y.columns)}),nt.applyStyles(nt.userStyles),Y.body.forEach(function(ht,pt){var Tt=pt===Y.body.length-1;x(nt,Y,ht,Tt,ut,mt,Y.columns)}),nt.applyStyles(nt.userStyles),(et.showFoot==="lastPage"||et.showFoot==="everyPage")&&Y.foot.forEach(function(ht){return F(nt,Y,ht,mt,Y.columns)})),(0,m.addTableBorder)(nt,Y,ut,mt),Y.callEndPageHooks(nt,mt),Y.finalY=mt.y,J.lastAutoTable=Y,J.previousAutoTable=Y,J.autoTable&&(J.autoTable.previous=Y),nt.applyStyles(nt.userStyles)}u.drawTable=O;function C(J,Y,et,Z){var at=(0,L.calculateAllColumnsCanFitInPage)(J,Y),mt=Y.settings;if(mt.horizontalPageBreakBehaviour==="afterAllRows")at.forEach(function(X,nt){J.applyStyles(J.userStyles),nt>0?W(J,Y,et,Z,X.columns,!0):R(J,Y,Z,X.columns),M(J,Y,et,Z,X.columns),K(J,Y,Z,X.columns)});else for(var k=-1,z=at[0],$=function(){var X=k;if(z){J.applyStyles(J.userStyles);var nt=z.columns;k>=0?W(J,Y,et,Z,nt,!0):R(J,Y,Z,nt),X=q(J,Y,k+1,Z,nt),K(J,Y,Z,nt)}var ut=X-k;at.slice(1).forEach(function(ht){J.applyStyles(J.userStyles),W(J,Y,et,Z,ht.columns,!0),q(J,Y,k+1,Z,ht.columns,ut),K(J,Y,Z,ht.columns)}),k=X};k<Y.body.length-1;)$()}function R(J,Y,et,Z){var at=Y.settings;J.applyStyles(J.userStyles),(at.showHead==="firstPage"||at.showHead==="everyPage")&&Y.head.forEach(function(mt){return F(J,Y,mt,et,Z)})}function M(J,Y,et,Z,at){J.applyStyles(J.userStyles),Y.body.forEach(function(mt,k){var z=k===Y.body.length-1;x(J,Y,mt,z,et,Z,at)})}function q(J,Y,et,Z,at,mt){J.applyStyles(J.userStyles),mt=mt??Y.body.length;var k=Math.min(et+mt,Y.body.length),z=-1;return Y.body.slice(et,k).forEach(function($,X){var nt=et+X===Y.body.length-1,ut=T(J,Y,nt,Z);$.canEntireRowFit(ut,at)&&(F(J,Y,$,Z,at),z=et+X)}),z}function K(J,Y,et,Z){var at=Y.settings;J.applyStyles(J.userStyles),(at.showFoot==="lastPage"||at.showFoot==="everyPage")&&Y.foot.forEach(function(mt){return F(J,Y,mt,et,Z)})}function Q(J,Y,et){var Z=et.getLineHeight(J.styles.fontSize),at=J.padding("vertical"),mt=Math.floor((Y-at)/Z);return Math.max(0,mt)}function S(J,Y,et,Z){var at={};J.spansMultiplePages=!0,J.height=0;for(var mt=0,k=0,z=et.columns;k<z.length;k++){var $=z[k],X=J.cells[$.index];if(X){Array.isArray(X.text)||(X.text=[X.text]);var nt=new v.Cell(X.raw,X.styles,X.section);nt=(0,g.assign)(nt,X),nt.text=[];var ut=Q(X,Y,Z);X.text.length>ut&&(nt.text=X.text.splice(ut,X.text.length));var ht=Z.scaleFactor(),pt=Z.getLineHeightFactor();X.contentHeight=X.getContentHeight(ht,pt),X.contentHeight>=Y&&(X.contentHeight=Y,nt.styles.minCellHeight-=Y),X.contentHeight>J.height&&(J.height=X.contentHeight),nt.contentHeight=nt.getContentHeight(ht,pt),nt.contentHeight>mt&&(mt=nt.contentHeight),at[$.index]=nt}}var Tt=new v.Row(J.raw,-1,J.section,at,!0);Tt.height=mt;for(var St=0,Lt=et.columns;St<Lt.length;St++){var $=Lt[St],nt=Tt.cells[$.index];nt&&(nt.height=Tt.height);var X=J.cells[$.index];X&&(X.height=J.height)}return Tt}function E(J,Y,et,Z){var at=J.pageSize().height,mt=Z.settings.margin,k=mt.top+mt.bottom,z=at-k;Y.section==="body"&&(z-=Z.getHeadHeight(Z.columns)+Z.getFootHeight(Z.columns));var $=Y.getMinimumRowHeight(Z.columns,J),X=$<et;if($>z)return console.error("Will not be able to print row ".concat(Y.index," correctly since it's minimum height is larger than page height")),!0;if(!X)return!1;var nt=Y.hasRowSpan(Z.columns),ut=Y.getMaxCellHeight(Z.columns)>z;return ut?(nt&&console.error("The content of row ".concat(Y.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(nt||Z.settings.rowPageBreak==="avoid")}function x(J,Y,et,Z,at,mt,k){var z=T(J,Y,Z,mt);if(et.canEntireRowFit(z,k))F(J,Y,et,mt,k);else if(E(J,et,z,Y)){var $=S(et,z,Y,J);F(J,Y,et,mt,k),W(J,Y,at,mt,k),x(J,Y,$,Z,at,mt,k)}else W(J,Y,at,mt,k),x(J,Y,et,Z,at,mt,k)}function F(J,Y,et,Z,at){Z.x=Y.settings.margin.left;for(var mt=0,k=at;mt<k.length;mt++){var z=k[mt],$=et.cells[z.index];if(!$){Z.x+=z.width;continue}J.applyStyles($.styles),$.x=Z.x,$.y=Z.y;var X=Y.callCellHooks(J,Y.hooks.willDrawCell,$,et,z,Z);if(X===!1){Z.x+=z.width;continue}b(J,$,Z);var nt=$.getTextPos();(0,N.default)($.text,nt.x,nt.y,{halign:$.styles.halign,valign:$.styles.valign,maxWidth:Math.ceil($.width-$.padding("left")-$.padding("right"))},J.getDocument()),Y.callCellHooks(J,Y.hooks.didDrawCell,$,et,z,Z),Z.x+=z.width}Z.y+=et.height}function b(J,Y,et){var Z=Y.styles;if(J.getDocument().setFillColor(J.getDocument().getFillColor()),typeof Z.lineWidth=="number"){var at=(0,m.getFillStyle)(Z.lineWidth,Z.fillColor);at&&J.rect(Y.x,et.y,Y.width,Y.height,at)}else typeof Z.lineWidth=="object"&&(Z.fillColor&&J.rect(Y.x,et.y,Y.width,Y.height,"F"),A(J,Y,et,Z.lineWidth))}function A(J,Y,et,Z){var at,mt,k,z;Z.top&&(at=et.x,mt=et.y,k=et.x+Y.width,z=et.y,Z.right&&(k+=.5*Z.right),Z.left&&(at-=.5*Z.left),$(Z.top,at,mt,k,z)),Z.bottom&&(at=et.x,mt=et.y+Y.height,k=et.x+Y.width,z=et.y+Y.height,Z.right&&(k+=.5*Z.right),Z.left&&(at-=.5*Z.left),$(Z.bottom,at,mt,k,z)),Z.left&&(at=et.x,mt=et.y,k=et.x,z=et.y+Y.height,Z.top&&(mt-=.5*Z.top),Z.bottom&&(z+=.5*Z.bottom),$(Z.left,at,mt,k,z)),Z.right&&(at=et.x+Y.width,mt=et.y,k=et.x+Y.width,z=et.y+Y.height,Z.top&&(mt-=.5*Z.top),Z.bottom&&(z+=.5*Z.bottom),$(Z.right,at,mt,k,z));function $(X,nt,ut,ht,pt){J.getDocument().setLineWidth(X),J.getDocument().line(nt,ut,ht,pt,"S")}}function T(J,Y,et,Z){var at=Y.settings.margin.bottom,mt=Y.settings.showFoot;return(mt==="everyPage"||mt==="lastPage"&&et)&&(at+=Y.getFootHeight(Y.columns)),J.pageSize().height-Z.y-at}function W(J,Y,et,Z,at,mt){at===void 0&&(at=[]),mt===void 0&&(mt=!1),J.applyStyles(J.userStyles),Y.settings.showFoot==="everyPage"&&!mt&&Y.foot.forEach(function(z){return F(J,Y,z,Z,at)}),Y.callEndPageHooks(J,Z);var k=Y.settings.margin;(0,m.addTableBorder)(J,Y,et,Z),ct(J),Y.pageNumber++,Y.pageCount++,Z.x=k.left,Z.y=k.top,et.y=k.top,Y.callWillDrawPageHooks(J,Z),Y.settings.showHead==="everyPage"&&(Y.head.forEach(function(z){return F(J,Y,z,Z,at)}),J.applyStyles(J.userStyles))}u.addPage=W;function ct(J){var Y=J.pageNumber();J.setPage(Y+1);var et=J.pageNumber();return et===Y?(J.addPage(),!0):!1}},224:function(l,u,d){Object.defineProperty(u,"__esModule",{value:!0}),u.calculateAllColumnsCanFitInPage=void 0;var m=d(420);function v(g,N,L){var O;L===void 0&&(L={});var C=(0,m.getPageAvailableWidth)(g,N),R=new Map,M=[],q=[],K=[];N.settings.horizontalPageBreakRepeat,Array.isArray(N.settings.horizontalPageBreakRepeat)?K=N.settings.horizontalPageBreakRepeat:(typeof N.settings.horizontalPageBreakRepeat=="string"||typeof N.settings.horizontalPageBreakRepeat=="number")&&(K=[N.settings.horizontalPageBreakRepeat]),K.forEach(function(x){var F=N.columns.find(function(b){return b.dataKey===x||b.index===x});F&&!R.has(F.index)&&(R.set(F.index,!0),M.push(F.index),q.push(N.columns[F.index]),C-=F.wrappedWidth)});for(var Q=!0,S=(O=L==null?void 0:L.start)!==null&&O!==void 0?O:0;S<N.columns.length;){if(R.has(S)){S++;continue}var E=N.columns[S].wrappedWidth;if(Q||C>=E)Q=!1,M.push(S),q.push(N.columns[S]),C-=E;else break;S++}return{colIndexes:M,columns:q,lastIndex:S-1}}function _(g,N){for(var L=[],O=0;O<N.columns.length;O++){var C=v(g,N,{start:O});C.columns.length&&(L.push(C),O=C.lastIndex)}return L}u.calculateAllColumnsCanFitInPage=_},324:function(l,u,d){Object.defineProperty(u,"__esModule",{value:!0}),u.ellipsize=u.resizeColumns=u.calculateWidths=void 0;var m=d(420);function v(M,q){_(M,q);var K=[],Q=0;q.columns.forEach(function(E){var x=E.getMaxCustomCellWidth(q);x?E.width=x:(E.width=E.wrappedWidth,K.push(E)),Q+=E.width});var S=q.getWidth(M.pageSize().width)-Q;S&&(S=g(K,S,function(E){return Math.max(E.minReadableWidth,E.minWidth)})),S&&(S=g(K,S,function(E){return E.minWidth})),S=Math.abs(S),!q.settings.horizontalPageBreak&&S>.1/M.scaleFactor()&&(S=S<1?S:Math.round(S),console.warn("Of the table content, ".concat(S," units width could not fit page"))),L(q),O(q,M),N(q)}u.calculateWidths=v;function _(M,q){var K=M.scaleFactor(),Q=q.settings.horizontalPageBreak,S=(0,m.getPageAvailableWidth)(M,q);q.allRows().forEach(function(E){for(var x=0,F=q.columns;x<F.length;x++){var b=F[x],A=E.cells[b.index];if(A){var T=q.hooks.didParseCell;q.callCellHooks(M,T,A,E,b,null);var W=A.padding("horizontal");A.contentWidth=(0,m.getStringWidth)(A.text,A.styles,M)+W;var ct=(0,m.getStringWidth)(A.text.join(" ").split(/[^\S\u00A0]+/),A.styles,M);if(A.minReadableWidth=ct+A.padding("horizontal"),typeof A.styles.cellWidth=="number")A.minWidth=A.styles.cellWidth,A.wrappedWidth=A.styles.cellWidth;else if(A.styles.cellWidth==="wrap"||Q===!0)A.contentWidth>S?(A.minWidth=S,A.wrappedWidth=S):(A.minWidth=A.contentWidth,A.wrappedWidth=A.contentWidth);else{var J=10/K;A.minWidth=A.styles.minCellWidth||J,A.wrappedWidth=A.contentWidth,A.minWidth>A.wrappedWidth&&(A.wrappedWidth=A.minWidth)}}}}),q.allRows().forEach(function(E){for(var x=0,F=q.columns;x<F.length;x++){var b=F[x],A=E.cells[b.index];if(A&&A.colSpan===1)b.wrappedWidth=Math.max(b.wrappedWidth,A.wrappedWidth),b.minWidth=Math.max(b.minWidth,A.minWidth),b.minReadableWidth=Math.max(b.minReadableWidth,A.minReadableWidth);else{var T=q.styles.columnStyles[b.dataKey]||q.styles.columnStyles[b.index]||{},W=T.cellWidth||T.minCellWidth;W&&typeof W=="number"&&(b.minWidth=W,b.wrappedWidth=W)}A&&(A.colSpan>1&&!b.minWidth&&(b.minWidth=A.minWidth),A.colSpan>1&&!b.wrappedWidth&&(b.wrappedWidth=A.minWidth))}})}function g(M,q,K){for(var Q=q,S=M.reduce(function(J,Y){return J+Y.wrappedWidth},0),E=0;E<M.length;E++){var x=M[E],F=x.wrappedWidth/S,b=Q*F,A=x.width+b,T=K(x),W=A<T?T:A;q-=W-x.width,x.width=W}if(q=Math.round(q*1e10)/1e10,q){var ct=M.filter(function(J){return q<0?J.width>K(J):!0});ct.length&&(q=g(ct,q,K))}return q}u.resizeColumns=g;function N(M){for(var q={},K=1,Q=M.allRows(),S=0;S<Q.length;S++)for(var E=Q[S],x=0,F=M.columns;x<F.length;x++){var b=F[x],A=q[b.index];if(K>1)K--,delete E.cells[b.index];else if(A)A.cell.height+=E.height,K=A.cell.colSpan,delete E.cells[b.index],A.left--,A.left<=1&&delete q[b.index];else{var T=E.cells[b.index];if(!T)continue;if(T.height=E.height,T.rowSpan>1){var W=Q.length-S,ct=T.rowSpan>W?W:T.rowSpan;q[b.index]={cell:T,left:ct,row:E}}}}}function L(M){for(var q=M.allRows(),K=0;K<q.length;K++)for(var Q=q[K],S=null,E=0,x=0,F=0;F<M.columns.length;F++){var b=M.columns[F];if(x-=1,x>1&&M.columns[F+1])E+=b.width,delete Q.cells[b.index];else if(S){var A=S;delete Q.cells[b.index],S=null,A.width=b.width+E}else{var A=Q.cells[b.index];if(!A)continue;if(x=A.colSpan,E=0,A.colSpan>1){S=A,E+=b.width;continue}A.width=b.width+E}}}function O(M,q){for(var K={count:0,height:0},Q=0,S=M.allRows();Q<S.length;Q++){for(var E=S[Q],x=0,F=M.columns;x<F.length;x++){var b=F[x],A=E.cells[b.index];if(A){q.applyStyles(A.styles,!0);var T=A.width-A.padding("horizontal");if(A.styles.overflow==="linebreak")A.text=q.splitTextToSize(A.text,T+1/q.scaleFactor(),{fontSize:A.styles.fontSize});else if(A.styles.overflow==="ellipsize")A.text=C(A.text,T,A.styles,q,"...");else if(A.styles.overflow==="hidden")A.text=C(A.text,T,A.styles,q,"");else if(typeof A.styles.overflow=="function"){var W=A.styles.overflow(A.text,T);typeof W=="string"?A.text=[W]:A.text=W}A.contentHeight=A.getContentHeight(q.scaleFactor(),q.getLineHeightFactor());var ct=A.contentHeight/A.rowSpan;A.rowSpan>1&&K.count*K.height<ct*A.rowSpan?K={height:ct,count:A.rowSpan}:K&&K.count>0&&K.height>ct&&(ct=K.height),ct>E.height&&(E.height=ct)}}K.count--}}function C(M,q,K,Q,S){return M.map(function(E){return R(E,q,K,Q,S)})}u.ellipsize=C;function R(M,q,K,Q,S){var E=1e4*Q.scaleFactor();if(q=Math.ceil(q*E)/E,q>=(0,m.getStringWidth)(M,K,Q))return M;for(;q<(0,m.getStringWidth)(M+S,K,Q)&&!(M.length<=1);)M=M.substring(0,M.length-1);return M.trim()+S}},964:function(l){if(typeof e>"u"){var u=new Error("Cannot find module 'undefined'");throw u.code="MODULE_NOT_FOUND",u}l.exports=e}},i={};function s(l){var u=i[l];if(u!==void 0)return u.exports;var d=i[l]={exports:{}};return r[l].call(d.exports,d,d.exports,s),d.exports}var o={};return function(){var l=o;Object.defineProperty(l,"__esModule",{value:!0}),l.Cell=l.Column=l.Row=l.Table=l.CellHookData=l.__drawTable=l.__createTable=l.applyPlugin=void 0;var u=s(340),d=s(776),m=s(664),v=s(972),_=s(260);Object.defineProperty(l,"Table",{enumerable:!0,get:function(){return _.Table}});var g=s(172);Object.defineProperty(l,"CellHookData",{enumerable:!0,get:function(){return g.CellHookData}});var N=s(260);Object.defineProperty(l,"Cell",{enumerable:!0,get:function(){return N.Cell}}),Object.defineProperty(l,"Column",{enumerable:!0,get:function(){return N.Column}}),Object.defineProperty(l,"Row",{enumerable:!0,get:function(){return N.Row}});function L(q){(0,u.default)(q)}l.applyPlugin=L;function O(q,K){var Q=(0,d.parseInput)(q,K),S=(0,v.createTable)(q,Q);(0,m.drawTable)(q,S)}function C(q,K){var Q=(0,d.parseInput)(q,K);return(0,v.createTable)(q,Q)}l.__createTable=C;function R(q,K){(0,m.drawTable)(q,K)}l.__drawTable=R;try{var M=s(964);M.jsPDF&&(M=M.jsPDF),L(M)}catch{}l.default=O}(),o}()})})(F3);const Co=n=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP",minimumFractionDigits:2,maximumFractionDigits:2}).format(n),Mc=n=>n?new Date(n).toLocaleDateString("es-DO",{year:"numeric",month:"2-digit",day:"2-digit"}):"";class Mg{static generateQuotePDF(t){const e=new Kt("p","mm","a4"),r=e.internal.pageSize.width,i=[23,54,93],s=[230,240,255],o=[0,128,0];e.setFillColor(...i),e.rect(0,10,r,3,"F"),e.setFont("helvetica","bold"),e.setFontSize(14),e.setTextColor(...i),e.text("MANTENIMIENTO & REPARACIONES",20,20),e.text("DURAN",20,26),e.setFont("helvetica","normal"),e.setFontSize(9),e.setTextColor(0,0,0),e.text("DIRECCI√ìN: Calle Buen Pastor #5 Alondra, Pantoja",20,34),e.text("TEL√âFONO: (809) 856-7741",20,39),e.text("CORREO: rogeliodurran88@gmail.com",20,44),e.setFont("helvetica","bold"),e.setFontSize(12),e.setTextColor(...i),e.text("COTIZACI√ìN",r-20,20,{align:"right"}),e.setFont("helvetica","normal"),e.setFontSize(9),e.text(`N¬∞ DE COTIZACI√ìN: ${t.number||"0001"}`,r-20,28,{align:"right"}),e.text(`FECHA: ${Mc(t.date)}`,r-20,33,{align:"right"}),e.text(`V√ÅLIDO HASTA: ${Mc(this.addDays(t.date,15))}`,r-20,38,{align:"right"}),e.setDrawColor(...i),e.roundedRect(15,55,r-30,35,3,3),e.setFont("helvetica","bold"),e.setFontSize(11),e.setTextColor(...i),e.text("DATOS DE LA EMPRESA",20,62),e.setFont("helvetica","normal"),e.setTextColor(0,0,0),e.setFontSize(9),e.text(`Cliente: ${t.clientName||""}`,20,70),e.text(`Empresa: ${t.clientCompany||""}`,20,75),e.text(`Direcci√≥n: ${t.clientAddress||""}`,20,80),e.text(`Tel√©fono: ${t.clientPhone||""}`,20,85);const l=100,u=["CANT.","DESCRIPCI√ìN","TOTAL"],d=t.items.map(N=>[N.quantity.toString(),N.description,Co(N.total)]);e.autoTable({startY:l,head:[u],body:d,theme:"grid",headStyles:{fillColor:i,textColor:[255,255,255],fontSize:9,halign:"center"},styles:{fontSize:9,cellPadding:2},alternateRowStyles:{fillColor:s},columnStyles:{0:{cellWidth:20,halign:"center"},1:{cellWidth:120},2:{cellWidth:40,halign:"right"}}});const m=e.lastAutoTable.finalY+10;e.setFont("helvetica","bold"),e.setFontSize(12),e.setTextColor(0,0,0),e.text("TOTAL:",r-60,m),e.text(Co(t.total),r-20,m,{align:"right"});const v=m+15;e.setDrawColor(...i),e.rect(15,v-6,r-30,40),e.setFont("helvetica","bold"),e.setFontSize(10),e.setTextColor(0,0,0),e.text("T√âRMINOS Y CONDICIONES",20,v),e.setFont("helvetica","normal"),e.setFontSize(8);const _=["1. Esta cotizaci√≥n se ajusta a las cl√°usulas y condiciones que se enuncian","2. Duraci√≥n de la oferta: 15 d√≠as","3. Para iniciar el servicio el cliente realizar√° un anticipo del 50%","4. En el transcurso del trabajo el cliente tiene que dar el 25%","5. Al finalizar el trabajo el cliente dar√° el 25% restante"];let g=v+6;return _.forEach(N=>{e.text(N,20,g),g+=4}),g+=14,e.text("Firma del cliente: ____________________________",20,g),g+=15,e.setFontSize(8),e.text("Si usted tiene alguna pregunta sobre esta cotizaci√≥n, por favor, p√≥ngase en contacto con nosotros.",20,g),g+=10,e.setFont("helvetica","bold"),e.setFontSize(10),e.setTextColor(...o),e.text("Gracias por la preferencia!",20,g),e.setFillColor(...i),e.rect(0,287,r,3,"F"),e}static generateInvoicePDF(t){const e=new Kt("p","mm","a4"),r=e.internal.pageSize.width,i=[23,54,93],s=[230,240,255],o=[0,128,0];e.setFillColor(...i),e.rect(0,10,r,3,"F"),e.setFont("helvetica","bold"),e.setFontSize(14),e.setTextColor(0,0,0),e.text("MANTENIMIENTO & REPARACIONES",20,20),e.text("DURAN",20,26),e.setFont("helvetica","normal"),e.setFontSize(9),e.text("DIRECCI√ìN: Calle Buen Pastor #5 Alondra, Pantoja",20,34),e.text("TEL√âFONO: (809) 856-7741",20,39),e.text("CORREO: rogeliodurran88@gmail.com",20,44),e.setFont("helvetica","bold"),e.setFontSize(12),e.text("FACTURA",r-20,20,{align:"right"}),e.setFont("helvetica","normal"),e.setFontSize(9),e.text(`N¬∞ DE FACTURA: ${t.number||"0001"}`,r-20,28,{align:"right"}),e.text(`FECHA: ${Mc(t.date)}`,r-20,33,{align:"right"}),e.setDrawColor(...i),e.roundedRect(15,55,r-30,30,3,3),e.setFont("helvetica","bold"),e.setFontSize(11),e.setTextColor(...i),e.text("DATOS DEL CLIENTE",20,62),e.setFont("helvetica","normal"),e.setTextColor(0,0,0),e.setFontSize(9),e.text(`Cliente: ${t.clientName||""}`,20,70),e.text(`Direcci√≥n: ${t.clientAddress||""}`,20,75),e.text(`Tel√©fono: ${t.clientPhone||""}`,20,80);const l=95,u=["CANT.","DESCRIPCI√ìN","TOTAL"],d=t.items.map(_=>[_.quantity.toString(),_.description,Co(_.total)]);e.autoTable({startY:l,head:[u],body:d,theme:"grid",headStyles:{fillColor:i,textColor:[255,255,255],fontSize:9,halign:"center"},styles:{fontSize:9,cellPadding:2},alternateRowStyles:{fillColor:s},columnStyles:{0:{cellWidth:20,halign:"center"},1:{cellWidth:120},2:{cellWidth:40,halign:"right"}}});const m=e.lastAutoTable.finalY+10;e.setFont("helvetica","bold"),e.setFontSize(12),e.setTextColor(0,0,0),e.text("TOTAL:",r-60,m),e.text(Co(t.total),r-20,m,{align:"right"});const v=m+20;return e.setFont("helvetica","bold"),e.setFontSize(10),e.setTextColor(...o),e.text("¬°Gracias por su pago!",20,v),e.setFillColor(...i),e.rect(0,287,r,3,"F"),e}static addDays(t,e){const r=new Date(t);return r.setDate(r.getDate()+e),r.toISOString().split("T")[0]}}class L0{constructor(t,e){this.type=t,this.onDelete=e}render(){const t=document.createElement("div");t.className="card";const e=this.type==="quote"?"quotes-list":"invoices-list";return t.innerHTML=`
    <div class="text-center py-8">
      <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"></div>
      <p class="text-gray-600">Cargando ${this.type==="quote"?"cotizaciones":"facturas"}...</p>
    </div>
  `,this.loadDocuments(t,e),t}async loadDocuments(t,e=null){try{let r;if(this.type==="quote"?r=await sd.getAll():r=await Ql.getAll(),r.length===0){const l=this.type==="quote"?"No hay cotizaciones registradas":"No hay facturas registradas";t.innerHTML=`
        <div class="text-center py-8">
          <p class="text-gray-500">${l}</p>
        </div>
      `;return}const i=this.type==="quote"?"<th>N√∫mero</th><th>Cliente</th><th>Fecha</th><th>Total</th><th>Estado</th><th>Acciones</th>":"<th>N√∫mero</th><th>Cliente</th><th>Fecha</th><th>Total</th><th>Acciones</th>",s=r.map(l=>{const u=Co(l.total);if(this.type==="quote"){const d=l.status==="Pendiente"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800";return`
          <tr>
            <td class="font-mono">${l.number}</td>
            <td class="font-medium">${l.clientName}</td>
            <td>${Mc(l.date)}</td>
            <td class="font-medium">${u}</td>
            <td><span class="px-2 py-1 rounded text-xs font-medium ${d}">${l.status}</span></td>
            <td>
              <div class="flex space-x-2 flex-wrap gap-1">
                <button class="btn btn-warning btn-sm print-quote" data-id="${l.id}">Imprimir</button>
                <button class="btn btn-success btn-sm convert-to-invoice" data-quote='${JSON.stringify(l).replace(/'/g,"\\'")}'>Convertir a Factura</button>
                <button class="btn btn-danger btn-sm delete-doc" data-id="${l.id}">Eliminar</button>
              </div>
            </td>
          </tr>
        `}else return`
          <tr>
            <td class="font-mono">${l.number}</td>
            <td class="font-medium">${l.clientName}</td>
            <td>${Mc(l.date)}</td>
            <td class="font-medium">${u}</td>
            <td>
              <div class="flex space-x-2 flex-wrap gap-1">
                <button class="btn btn-warning btn-sm print-invoice" data-id="${l.id}">Imprimir</button>
                <button class="btn btn-danger btn-sm delete-doc" data-id="${l.id}">Eliminar</button>
              </div>
            </td>
          </tr>
        `}).join(""),o=`
      <div class="table-container">
        <table class="table" id="${e}">
          <thead>
            <tr>${i}</tr>
          </thead>
          <tbody>${s}</tbody>
        </table>
      </div>
    `;t.innerHTML=o,t.querySelectorAll(".print-quote").forEach(l=>{l.addEventListener("click",async u=>{const d=u.target.getAttribute("data-id");try{const m=Hs(er,"quotes",d),v=await Zh(m);if(v.exists()){const _={id:v.id,...v.data()};Mg.generateQuotePDF(_).save(`cotizacion_${_.number}.pdf`)}}catch(m){console.error("Error al generar PDF:",m),alert("Error al generar el PDF")}})}),t.querySelectorAll(".print-invoice").forEach(l=>{l.addEventListener("click",async u=>{const d=u.target.getAttribute("data-id");try{const m=Hs(er,"invoices",d),v=await Zh(m);if(v.exists()){const _={id:v.id,...v.data()};Mg.generateInvoicePDF(_).save(`factura_${_.number}.pdf`)}}catch(m){console.error("Error al generar PDF:",m),alert("Error al generar el PDF")}})}),t.querySelectorAll(".convert-to-invoice").forEach(l=>{l.addEventListener("click",async u=>{const d=JSON.parse(l.getAttribute("data-quote"));try{await Ql.create(invoiceData),toast.success("¬°Cotizaci√≥n convertida a factura exitosamente!"),this.onDelete()}catch(m){toast.error("Error al convertir a factura: "+m.message)}})}),t.querySelectorAll(".delete-doc").forEach(l=>{l.addEventListener("click",u=>{const d=u.target.getAttribute("data-id"),m=this.type==="quote"?"¬øEst√° seguro de eliminar esta cotizaci√≥n?":"¬øEst√° seguro de eliminar esta factura?";confirm(m)&&this.handleDelete(d)})})}catch(r){console.error("Error al cargar documentos:",r),t.innerHTML=`
        <div class="text-center py-8">
          <p class="text-red-500">Error al cargar ${this.type==="quote"?"cotizaciones":"facturas"}</p>
          <button class="btn btn-primary mt-4 retry-button">Reintentar</button>
        </div>
      `,t.querySelector(".retry-button").addEventListener("click",()=>{this.loadDocuments(t)})}}async handleDelete(t){try{this.type==="quote"?(await sd.delete(t),toast.success("Cotizaci√≥n eliminada exitosamente")):(await Ql.delete(t),toast.success("Factura eliminada exitosamente")),this.onDelete()}catch(e){toast.error("Error al eliminar: "+e.message)}}}class R0{constructor(t,e){this.type=t,this.onSubmit=e,this.modal=null}async show(){const t=this.type==="quote"?"Nueva Cotizaci√≥n":"Nueva Factura";try{const r=(await Ro.getAll()).map(s=>`<option value="${s.id}">${s.name}</option>`).join(""),i=`
        <form id="document-form" class="space-y-6">
          <input type="hidden" id="document-type" value="${this.type}">
          <div id="document-error-message" class="text-red-500 text-sm hidden"></div>
          
          <div class="space-y-4">
            <label class="block text-sm font-medium text-gray-700">Cliente *</label>
            <div class="flex space-x-3 mb-3">
              <button type="button" id="select-existing-client" class="btn btn-outline">Seleccionar Existente</button>
              <button type="button" id="create-new-client" class="btn btn-outline">Crear Nuevo</button>
            </div>
            
            <div id="existing-client-section">
              <select id="existing-client" class="form-control">
                <option value="">Seleccione un cliente</option>
                ${r}
              </select>
            </div>
            
            <div id="new-client-section" class="hidden space-y-3">
              <input type="text" id="new-client-name" class="form-control" placeholder="Nombre completo *" required>
              <input type="email" id="new-client-email" class="form-control" placeholder="Email (opcional)">
              <input type="tel" id="new-client-phone" class="form-control" placeholder="Tel√©fono (opcional)">
              <input type="text" id="new-client-address" class="form-control" placeholder="Direcci√≥n (opcional)">
            </div>
          </div>
          
          <div>
            <label for="document-date" class="block text-sm font-medium text-gray-700 mb-1">Fecha *</label>
            <input type="date" id="document-date" class="form-control" required>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Items</label>
            <div id="items-container" class="space-y-3"></div>
            <button type="button" id="add-item" class="btn btn-success mt-2">+ Agregar Item</button>
          </div>
          
          <div class="bg-gray-50 p-4 rounded-lg">
            <div class="flex justify-end space-y-2 flex-col">
              <div class="flex justify-between">
                <span class="font-medium">Total:</span>
                <span id="total" class="font-bold text-lg text-blue-600">RD$0.00</span>
              </div>
            </div>
          </div>
        </form>
      `;this.modal=new ff,this.modal.show(t,i,"Guardar",null),this.setupFormEvents()}catch(e){console.error("Error al mostrar formulario:",e),alert("Error al cargar el formulario: "+e.message)}}setupFormEvents(){var e,r,i;(e=document.getElementById("select-existing-client"))==null||e.addEventListener("click",()=>{document.getElementById("existing-client-section").classList.remove("hidden"),document.getElementById("new-client-section").classList.add("hidden")}),(r=document.getElementById("create-new-client"))==null||r.addEventListener("click",()=>{document.getElementById("existing-client-section").classList.add("hidden"),document.getElementById("new-client-section").classList.remove("hidden")}),document.getElementById("document-date").valueAsDate=new Date,this.addItem(),(i=document.getElementById("add-item"))==null||i.addEventListener("click",()=>{this.addItem()});const t=this.modal.element.querySelector(".confirm-modal");t&&t.addEventListener("click",async s=>{s.preventDefault(),await this.handleSave()})}addItem(){const t=document.getElementById("items-container");if(!t)return;const e=`
      <div class="item-row flex space-x-3 p-3 bg-white rounded border">
        <div class="w-16">
          <input type="number" class="form-control item-quantity" placeholder="1" min="1" value="1" required>
        </div>
        <div class="flex-1">
          <input type="text" class="form-control item-description" placeholder="Descripci√≥n detallada del servicio" required>
        </div>
        <div class="w-24">
          <input type="number" class="form-control item-price" placeholder="0.00" min="0" step="0.01">
        </div>
        <div class="w-24">
          <input type="text" class="form-control item-total" readonly>
        </div>
        <button type="button" class="btn btn-danger remove-item self-end">‚úï</button>
      </div>
    `;t.insertAdjacentHTML("beforeend",e);const r=t.lastElementChild;this.setupItemListeners(r)}setupItemListeners(t){const e=t.querySelector(".item-quantity"),r=t.querySelector(".item-price"),i=t.querySelector(".item-total"),s=t.querySelector(".remove-item"),o=()=>{const l=parseFloat(e.value)||0,u=parseFloat(r.value)||0,d=u>0?l*u:0;i.value=u>0?Co(d):"Sin precio",this.calculateTotals()};e.addEventListener("input",o),r.addEventListener("input",o),s.addEventListener("click",()=>{t.parentNode&&(t.parentNode.removeChild(t),this.calculateTotals())})}calculateTotals(){let t=0;document.querySelectorAll(".item-row").forEach(r=>{var s,o;const i=parseFloat((s=r.querySelector(".item-price"))==null?void 0:s.value)||0;if(i>0){const l=parseFloat((o=r.querySelector(".item-quantity"))==null?void 0:o.value)||0;t+=l*i}}),document.getElementById("total").textContent=Co(t)}async handleSave(){var e,r,i,s,o,l,u;const t=document.getElementById("document-error-message");t&&(t.classList.add("hidden"),t.textContent="");try{const d=!((e=document.getElementById("existing-client-section"))!=null&&e.classList.contains("hidden"));let m,v,_,g,N;if(d){if(m=(r=document.getElementById("existing-client"))==null?void 0:r.value,!m)throw new Error("Por favor seleccione un cliente");const q=await Ro.getById(m);if(!q)throw new Error("Cliente no encontrado");v=q.name,_=q.phone||"",g=q.address||"",N=q.email||""}else{if(v=(i=document.getElementById("new-client-name"))==null?void 0:i.value.trim(),!v)throw new Error("El nombre del cliente es requerido");N=((s=document.getElementById("new-client-email"))==null?void 0:s.value.trim())||"",_=((o=document.getElementById("new-client-phone"))==null?void 0:o.value.trim())||"",g=((l=document.getElementById("new-client-address"))==null?void 0:l.value.trim())||"";const q={name:v,email:N,phone:_,address:g};m=(await Ro.create(q)).id}const L=[],O=document.querySelectorAll(".item-row");let C=!1;if(O.forEach(q=>{var E,x,F;const K=(E=q.querySelector(".item-description"))==null?void 0:E.value.trim(),Q=parseFloat((x=q.querySelector(".item-quantity"))==null?void 0:x.value)||0,S=parseFloat((F=q.querySelector(".item-price"))==null?void 0:F.value)||0;K&&Q>0&&(L.push({description:K,quantity:Q,price:S||0,total:S>0?Q*S:0}),C=!0)}),!C)throw new Error("Por favor agregue al menos un item v√°lido");const R=L.reduce((q,K)=>q+K.total,0),M={clientId:m,clientName:v,clientPhone:_,clientAddress:g,clientEmail:N,date:(u=document.getElementById("document-date"))==null?void 0:u.value,items:L,total:R};this.type==="quote"?(await sd.create(M),Na.success("¬°Cotizaci√≥n creada exitosamente!")):(await Ql.create(M),Na.success("¬°Factura creada exitosamente!")),this.onSubmit(),this.modal.close()}catch(d){console.error("Error al guardar documento:",d),t?(t.textContent=d.message,t.classList.remove("hidden")):alert("Error: "+d.message)}}}class V3{constructor(){this.documentForm=new R0("quote",()=>this.refresh()),this.debounceTimer=null}render(){const t=document.createElement("div");t.className="space-y-6";const e=document.createElement("div");e.className="space-y-4",e.innerHTML=`
      <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4">
        <h2 class="text-2xl font-bold text-gray-800">Gesti√≥n de Cotizaciones</h2>
        <button id="new-quote-btn" class="btn btn-primary whitespace-nowrap">+ Nueva Cotizaci√≥n</button>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Buscar por nombre de cliente</label>
          <input type="text" id="search-client-quote" class="form-control" placeholder="Escriba el nombre del cliente...">
        </div>
        <div class="flex items-end">
          <button id="clear-filters-quote" class="btn btn-outline w-full">Limpiar Filtros</button>
        </div>
      </div>
    `,t.appendChild(e);const r=new L0("quote",()=>this.refresh());return t.appendChild(r.render()),setTimeout(()=>{var s,o;(s=document.getElementById("new-quote-btn"))==null||s.addEventListener("click",()=>{this.documentForm.show()});const i=document.getElementById("search-client-quote");i&&i.addEventListener("input",l=>{clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.filterQuotes(l.target.value)},300)}),(o=document.getElementById("clear-filters-quote"))==null||o.addEventListener("click",()=>{i&&(i.value=""),this.filterQuotes("")})},100),t}filterQuotes(t){const e=document.querySelector("#quotes-list");if(!e)return;const r=e.querySelectorAll("tbody tr"),i=t.toLowerCase();r.forEach(s=>{const o=s.querySelector("td:nth-child(2)");o&&(o.textContent.toLowerCase().includes(i)?s.style.display="":s.style.display="none")})}refresh(){const t=this.render(),e=document.querySelector("#page-content");e&&(e.innerHTML="",e.appendChild(t))}}class j3{constructor(){this.documentForm=new R0("invoice",()=>this.refresh()),this.debounceTimer=null}render(){const t=document.createElement("div");t.className="space-y-6";const e=document.createElement("div");e.className="space-y-4",e.innerHTML=`
      <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4">
        <h2 class="text-2xl font-bold text-gray-800">Gesti√≥n de Facturas</h2>
        <button id="new-invoice-btn" class="btn btn-primary whitespace-nowrap">+ Nueva Factura</button>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Buscar por nombre de cliente</label>
          <input type="text" id="search-client-invoice" class="form-control" placeholder="Escriba el nombre del cliente...">
        </div>
        <div class="flex items-end">
          <button id="clear-filters-invoice" class="btn btn-outline w-full">Limpiar Filtros</button>
        </div>
      </div>
    `,t.appendChild(e);const r=new L0("invoice",()=>this.refresh());return t.appendChild(r.render()),setTimeout(()=>{var s,o;(s=document.getElementById("new-invoice-btn"))==null||s.addEventListener("click",()=>{this.documentForm.show()});const i=document.getElementById("search-client-invoice");i&&i.addEventListener("input",l=>{clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.filterInvoices(l.target.value)},300)}),(o=document.getElementById("clear-filters-invoice"))==null||o.addEventListener("click",()=>{i&&(i.value=""),this.filterInvoices("")})},100),t}filterInvoices(t){const e=document.querySelector("#invoices-list");if(!e)return;const r=e.querySelectorAll("tbody tr"),i=t.toLowerCase();r.forEach(s=>{const o=s.querySelector("td:nth-child(2)");o&&(o.textContent.toLowerCase().includes(i)?s.style.display="":s.style.display="none")})}refresh(){const t=this.render(),e=document.querySelector("#page-content");e&&(e.innerHTML="",e.appendChild(t))}}class Vg{constructor(t,e=null){this.onAuthSuccess=t,this.onAuthError=e,this.modal=new ff}show(){const t=`
      <div class="space-y-6">
        <!-- Formulario de Email/Contrase√±a -->
        <div id="email-form-section">
          <form id="email-form" class="space-y-4">
            <div>
              <label for="auth-email" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
              <input type="email" id="auth-email" class="form-control" required placeholder="tu@email.com">
            </div>
            <div>
              <label for="auth-password" class="block text-sm font-medium text-gray-700 mb-1">Contrase√±a</label>
              <input type="password" id="auth-password" class="form-control" required placeholder="M√≠nimo 6 caracteres">
            </div>
            <div class="flex space-x-3">
              <button type="button" id="login-email-btn" class="btn btn-primary flex-1">Iniciar Sesi√≥n</button>
              <button type="button" id="register-email-btn" class="btn btn-outline flex-1">Registrarse</button>
            </div>
          </form>
        </div>

        <!-- Separador -->
        <div class="relative">
          <div class="absolute inset-0 flex items-center">
            <div class="w-full border-t border-gray-300"></div>
          </div>
          <div class="relative flex justify-center text-sm">
            <span class="px-2 bg-white text-gray-500">O continuar con</span>
          </div>
        </div>

        <!-- Bot√≥n de Google -->
        <div class="text-center">
          <button id="google-signin-btn" class="w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50">
            <svg class="w-5 h-5 mr-2" viewBox="0 0 24 24">
              <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
              <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
              <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
              <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
            </svg>
            Google
          </button>
        </div>

        <!-- Informaci√≥n adicional -->
        <div class="text-xs text-gray-500 text-center">
          <p>Al iniciar sesi√≥n, aceptas nuestros T√©rminos de servicio y Pol√≠tica de privacidad.</p>
        </div>
      </div>
    `;this.modal.show("Iniciar Sesi√≥n - AquaBuild",t,null,e=>{document.getElementById("login-email-btn").addEventListener("click",()=>{this.handleEmailLogin(e)}),document.getElementById("register-email-btn").addEventListener("click",()=>{this.handleEmailRegister(e)}),document.getElementById("google-signin-btn").addEventListener("click",()=>{this.handleGoogleSignIn(e)})})}async handleEmailLogin(t){const e=document.getElementById("auth-email").value,r=document.getElementById("auth-password").value;if(!e||!r){alert("Por favor completa todos los campos");return}try{await pb(No,e,r),this.onAuthSuccess(),t.close()}catch(i){this.handleError(i,"iniciar sesi√≥n")}}async handleEmailRegister(t){const e=document.getElementById("auth-email").value,r=document.getElementById("auth-password").value;if(!e||!r){alert("Por favor completa todos los campos");return}if(r.length<6){alert("La contrase√±a debe tener al menos 6 caracteres");return}try{await fb(No,e,r),this.onAuthSuccess(),t.close()}catch(i){this.handleError(i,"registrarte")}}async handleGoogleSignIn(t){try{await Vb(No,id),this.onAuthSuccess(),t.close()}catch(e){this.handleError(e,"iniciar sesi√≥n con Google")}}handleError(t,e){let r="Error desconocido";switch(t.code){case"auth/invalid-email":r="El email no es v√°lido";break;case"auth/user-disabled":r="Esta cuenta ha sido deshabilitada";break;case"auth/user-not-found":r="No se encontr√≥ una cuenta con este email";break;case"auth/wrong-password":r="Contrase√±a incorrecta";break;case"auth/email-already-in-use":r="Este email ya est√° registrado";break;case"auth/weak-password":r="La contrase√±a es muy d√©bil (m√≠nimo 6 caracteres)";break;case"auth/popup-closed-by-user":r="Inicio de sesi√≥n cancelado";break;case"auth/popup-blocked":r="Popup bloqueado. Por favor permite popups para este sitio";break;default:r=t.message}this.onAuthError?this.onAuthError(r):alert(`Error al ${e}: ${r}`)}static async logout(){try{return await vb(No),!0}catch(t){return console.error("Error al cerrar sesi√≥n:",t),!1}}}class B3{constructor(){this.currentPage=null,this.currentUser=null,window.addEventListener("error",t=>{toast.error("Ha ocurrido un error inesperado. Por favor, recargue la p√°gina."),console.error("Error global:",t.error)}),this.checkAuth()}checkAuth(){try{yb(No,t=>{t?(this.currentUser=t,this.initApp()):this.showAuth()},t=>{console.error("Error en autenticaci√≥n:",t),this.showError("Error en el sistema de autenticaci√≥n. Por favor, recarga la p√°gina.")})}catch(t){console.error("Error al inicializar autenticaci√≥n:",t),this.showError("No se pudo inicializar el sistema de autenticaci√≥n.")}}showError(t){const e=document.getElementById("app");e&&(e.innerHTML=`
        <div class="min-h-screen flex items-center justify-center bg-red-50">
          <div class="text-center p-8 bg-white rounded-lg shadow-lg max-w-md">
            <h2 class="text-xl font-bold text-red-600 mb-4">Error</h2>
            <p class="text-gray-700 mb-4">${t}</p>
            <button onclick="location.reload()" class="btn btn-primary">Recargar</button>
          </div>
        </div>
      `)}showAuth(){const t=document.getElementById("app");if(t){t.innerHTML='<div class="min-h-screen flex items-center justify-center bg-gray-100">Cargando...</div>';try{new Vg(()=>this.initApp(),r=>{console.error("Error de autenticaci√≥n:",r),alert("Error de autenticaci√≥n: "+r)}).show()}catch(e){console.error("Error al mostrar formulario de autenticaci√≥n:",e),this.showError("No se pudo cargar el formulario de autenticaci√≥n.")}}}initApp(){const t=document.getElementById("app");if(t){t.innerHTML=`
      <div class="min-h-screen bg-gray-100">
        <header id="app-header"></header>
        <main class="container mx-auto px-4 py-8">
          <div id="page-content"></div>
        </main>
      </div>
    `;try{this.header=new m2(r=>this.navigate(r));const e=this.header.render();if(e)document.getElementById("app-header").appendChild(e),this.navigate("dashboard");else throw new Error("No se pudo crear el header")}catch(e){console.error("Error al inicializar la aplicaci√≥n:",e),this.showError("Error al inicializar la aplicaci√≥n principal.")}}}navigate(t){let e;switch(t){case"dashboard":e=new $f;break;case"clients":e=new O4;break;case"quotes":e=new V3;break;case"invoices":e=new j3;break;case"logout":this.handleLogout();return;default:e=new $f}this.currentPage=e,document.getElementById("page-content").innerHTML="",document.getElementById("page-content").appendChild(e.render());const r=document.getElementById("dropdown-menu");r&&r.classList.add("hidden")}async handleLogout(){if(confirm("¬øEst√°s seguro de que deseas cerrar sesi√≥n?"))try{await Vg.logout()&&(this.currentUser=null,this.showAuth())}catch(e){console.error("Error al cerrar sesi√≥n:",e),alert("Error al cerrar sesi√≥n: "+e.message)}}}const H3=Object.freeze(Object.defineProperty({__proto__:null,App:B3},Symbol.toStringTag,{value:"Module"}));export{ke as _,H3 as a,xh as c,z3 as g};
